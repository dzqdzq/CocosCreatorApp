"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomDropdown=exports.CustomDropdownItem=void 0;const vue_js_1=__importDefault(require("vue/dist/vue.js")),utils_dom_1=require("../../public/utils-dom"),optionTemplate='\n    <div\n        class="custom-dropdown-item"\n        :class="{\n            active: active === true,\n        }"\n        @click="onItemClick"\n    >\n        <slot> {{ label }} </slot>\n    </div>\n';exports.CustomDropdownItem=vue_js_1.default.extend({name:"CustomDropdownItem",inject:{customDropdown:{from:"customDropdown"}},props:{label:{type:String,default:void 0},active:{type:Boolean,default:void 0},onClick:{type:Function,default:void 0}},data:()=>({}),methods:{getDropdownVm(){const t=this.customDropdown;if(null==t)throw new Error("injected customDropdown component not found");return t},onItemClick(t){this.getDropdownVm().updateVisible(!1),"function"==typeof this.onClick?this.onClick(t):this.$emit("click",t)}},template:optionTemplate});const dropdownTemplate='\n    <div\n        ref="dropdown"\n        class="custom-dropdown"\n        :class="{\n            visible: sVisible,\n            [\'size-\' + size]: true,\n        }"\n    >\n        <ui-button-group class="custom-dropdown__content">\n            <slot>\n                \x3c!-- dropdown content --\x3e\n            </slot>\n\n            <ui-button tabindex="-1" class="custom-dropdown__trigger" @click="onIconClick">\n                <slot name="icon">\n                    <ui-icon value="arrow-triangle"></ui-icon>\n                </slot>\n            </ui-button>\n        </ui-button-group>\n\n        <div ref="overlay" class="custom-dropdown__overlay" :style="overlayStyle" :class="overlayClass">\n            <slot name="overlay">\n                <CustomDropdownItem\n                    v-for="item in options"\n                    :key="item.label"\n                    class="custom-dropdown__option"\n                    @click="onChildClick(item)"\n                >\n                    <ui-label :value="\'i18n:extension.manager.\'+item.label"></ui-label>\n                </CustomDropdownItem>\n            </slot>\n        </div>\n    </div>\n';exports.CustomDropdown=vue_js_1.default.extend({name:"CustomDropdown",components:{CustomDropdownItem:exports.CustomDropdownItem},provide(){return{customDropdown:this}},props:{visible:{type:Boolean,default:!1},trigger:{type:String,default:"click"},options:{type:Array,default:()=>[]},overlayStyle:{type:Object,default:void 0},overlayClass:{type:[String,Object,Array],default:void 0},size:{type:String,default:"default"}},data(){return{sVisible:this.visible}},computed:{},watch:{visible:{handler(t,e){this.sVisible=t},immediate:!0}},mounted(){document.body.addEventListener("click",this.onDocumentClick)},beforeDestroy(){document.body.removeEventListener("click",this.onDocumentClick)},methods:{updateVisible(t){const e="boolean"==typeof t?t:!this.sVisible;this.sVisible=e,this.$emit("update:visible",e)},onIconClick(t){"click"===this.trigger&&this.updateVisible()},onChildClick(t){t.onClick?t.onClick(t):this.$emit("select",t)},onDocumentClick(t){"click"===this.trigger&&!0===this.sVisible&&((0,utils_dom_1.containsEventTarget)(this.$refs.dropdown,t)||this.updateVisible(!1))}},template:dropdownTemplate});
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const fs_1=require("fs"),path_1=require("path"),vue_1=__importDefault(require("vue/dist/vue")),app_1=require("./app"),sdk_1=require("./sdk"),store_1=require("./store"),event_bus_1=require("./event-bus"),Panel=Editor.Panel.define({style:fs_1.readFileSync(path_1.join(__dirname,"../../manager.css"),"utf8"),template:'<div class="extension"></div>',$:{content:".extension"},methods:{search(e){this.vm&&("string"!=typeof e&&"boolean"!=typeof e||this.vm.$emit(event_bus_1.INTERNAL_EVENTS.search,e))},selectPackage(e){}},async ready(e={}){const{extensionPaths:t,sdk:a}=await sdk_1.generateSdk(),s=store_1.createStore(a);s.startupParams.value=e;const n=new vue_1.default({name:"ExtensionManagerProvider",provide:()=>({extensionPaths:t,sdk:a,store:s}),render:e=>e(app_1.PanelApp,{ref:"app"})}).$mount(this.$.content);this.vm=n},async close(){const e=this.vm;e&&(e.$destroy(),delete this.vm),app_1.updateExtensionOption.isReRegister&&(await Editor.Package.unregister(app_1.updateExtensionOption.path),await Editor.Package.register(app_1.updateExtensionOption.path),await Editor.Package.enable(app_1.updateExtensionOption.path))}});module.exports=Panel;
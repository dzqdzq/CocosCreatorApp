"use strict";async function compressImage(c,b=2097152,m=2e3){return new Promise((i,l)=>{blobToDataUrl(c).then(e=>{const s=new Image;s.src=e,s.crossOrigin="anonymous",s.onload=async()=>{var n=document.createElement("canvas"),a=n.getContext("2d");if(a){let e=s.width,r=s.height,o=(e>m&&(r*=m/e,e=m),n.width=e,n.height=r,a.drawImage(s,0,0,e,r),.9);for(var t;.1<o;){if((t=await canvasToBlob(n,c.type,o)).size<=b)return void i(t);o-=.1}l(new Error(c.name+" size exceeds maximum limit"))}else l(new Error("canvas context not available"))},s.onerror=l})})}function canvasToBlob(e,n,a){return new Promise((r,o)=>{e.toBlob(e=>e?r(e):o(new Error("Blob creation failed")),n,a)})}function blobToDataUrl(n){return new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=r,o.readAsDataURL(n)})}function blobToUint8Array(n){return new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{e(new Uint8Array(o.result))},o.onerror=r,o.readAsArrayBuffer(n)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compressImage=compressImage,exports.blobToDataUrl=blobToDataUrl,exports.blobToUint8Array=blobToUint8Array;
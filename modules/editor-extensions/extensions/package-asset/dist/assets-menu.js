"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetMenu=exports.dbMenu=void 0;const path_1=require("path"),utlis_1=require("./common/utlis"),{I18n:I18n}=Editor;async function DialogOpenImportZip(){const t=await Editor.Dialog.select({title:Editor.I18n.t("package-asset.import.title"),path:await Editor.Profile.getConfig("package-asset","import-path")||Editor.Project.path,filters:[{name:"Package",extensions:["zip"]}]});if(t.canceled)return;const e=t.filePaths&&t.filePaths[0];return utlis_1.isPath(e)?(await Editor.Profile.setConfig("package-asset","import-path",path_1.dirname(e)),e):void 0}function getImportMenu(t){return{label:"i18n:package-asset.menu.import",enabled:!t||!t.url.startsWith("db://internal"),async click(){if(await Editor.Panel.has("package-asset.import"))return;const t=await DialogOpenImportZip();t&&Editor.Panel.open("package-asset.import",t)}}}function getExportMenu(t){return{label:"i18n:package-asset.menu.export",enabled:!t||!t.url.startsWith("db://internal"),async click(){await Editor.Panel.has("package-asset.export")||Editor.Panel.open("package-asset.export",t)}}}function dbMenu(t){return[getImportMenu(t)]}function assetMenu(t){return[getImportMenu(t),getExportMenu(t)]}exports.dbMenu=dbMenu,exports.assetMenu=assetMenu;
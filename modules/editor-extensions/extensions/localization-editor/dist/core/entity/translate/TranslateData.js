"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const TranslateItem_1=__importDefault(require("./TranslateItem")),LanguageConfig_1=__importDefault(require("./LanguageConfig")),TranslateItemType_1=__importDefault(require("./TranslateItemType"));class TranslateData{constructor(t=TranslateData.INDEX_LOCALE){this.locale=t,this.items=new Map,this.languageConfig=new LanguageConfig_1.default(t)}clone(){const t=new TranslateData(this.locale);t.languageConfig=this.languageConfig.clone();for(const[e,a]of this.items.entries())t.items.set(e,a.clone());return t}static parse(t){const e=new TranslateData(t.locale);t.languageConfig&&(e.languageConfig=LanguageConfig_1.default.parse(t.languageConfig));for(const a in t.items){const s=t.items[a];e.items.set(a,TranslateItem_1.default.parse(s))}return e}toObject(){return{locale:this.locale,languageConfig:this.languageConfig,items:Object.fromEntries(this.items)}}static fromObject(t){return TranslateData.parse(t)}toResourceData(){const t={translation:{}};for(const[e,a]of this.items.entries()){t.translation[a.key]=a.value;for(const e of a.variants)t.translation[e.key]=e.value}return t}transformToValueMap(){const t=new Map;for(const e of this.items.values())e.type!==TranslateItemType_1.default.Media&&e.value.length>0&&t.set(e.value,e);return t}statisticsFinished(t){let e=0;for(const[a,s]of t.items.entries())this.items.has(a)&&(e+=s.length);return this.languageConfig.translateFinished=e,e}statisticsTotal(){let t=0;this.items.forEach(e=>{t+=e.length}),this.languageConfig.compileTotal=this.items.size,this.languageConfig.translateTotal=t}}exports.default=TranslateData,TranslateData.INDEX_LOCALE="index";
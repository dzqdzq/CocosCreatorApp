"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");const LanguageConfig_1=__importDefault(require("./LanguageConfig")),TranslateItem_1=__importDefault(require("./TranslateItem")),TranslateItemType_1=__importDefault(require("./TranslateItemType"));class TranslateData{constructor(e=TranslateData.INDEX_LOCALE){this.locale=e,this.items=new Map,this.languageConfig=new LanguageConfig_1.default(e)}clone(){const e=new TranslateData(this.locale);e.languageConfig=this.languageConfig.clone();for(const[t,a]of this.items.entries())e.items.set(t,a.clone());return e}static parse(e){const t=new TranslateData(e.locale);e.languageConfig&&(t.languageConfig=LanguageConfig_1.default.parse(e.languageConfig));for(const a in e.items){const s=e.items[a];t.items.set(a,TranslateItem_1.default.parse(s))}return t}toObject(){return{locale:this.locale,languageConfig:this.languageConfig,items:Object.fromEntries(this.items)}}static fromObject(e){return TranslateData.parse(e)}transformToValueMap(){const e=new Map;for(const t of this.items.values())t.type!==TranslateItemType_1.default.Media&&t.value.length>0&&e.set(t.value,t);return e}statisticsFinished(e){let t=0;for(const[a,s]of e.items.entries())this.items.has(a)&&(t+=s.length);return this.languageConfig.translateFinished=t,t}statisticsTotal(){let e=0;this.items.forEach(t=>{e+=t.length}),this.languageConfig.compileTotal=this.items.size,this.languageConfig.translateTotal=e}}exports.default=TranslateData,TranslateData.INDEX_LOCALE="index";
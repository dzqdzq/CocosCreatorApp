"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const path_1=require("path"),Association_1=__importDefault(require("./Association")),TranslateItemType_1=__importDefault(require("./TranslateItemType")),global_1=require("../../service/util/global");class WrapperTranslateItem{constructor(e,a,t,s,r,i=[],l=[],n=!1,o){this.key=e,this.value=a,this.type=t,this.displayName=s,this.assetInfo=r,this.associations=i,this._variants=l,this.isVariant=n,this.locale=o}static getDisplayName(e){var a;return e.assetInfo?(0,path_1.relative)(global_1.ProjectAssetPath,e.assetInfo.file):e.item?null!==(a=e.value)&&void 0!==a?a:e.item.value:""}static parse(e){return new WrapperTranslateItem(e.key,e.value,e.type,e.displayName,e.assetInfo,e.associations.map(e=>Association_1.default.parse(e)),e._variants.map(e=>WrapperTranslateItem.parse(e)),e.isVariant,e.locale)}static async toSerialize(e){let a=null;return e.type===TranslateItemType_1.default.Media&&(a=await Editor.Message.request("asset-db","query-asset-info",e.value||e.key)),new WrapperTranslateItem(e.key,e.value,e.type,WrapperTranslateItem.getDisplayName({item:e,assetInfo:a}),a,e.associations,e._variants,e.isVariant)}}exports.default=WrapperTranslateItem;
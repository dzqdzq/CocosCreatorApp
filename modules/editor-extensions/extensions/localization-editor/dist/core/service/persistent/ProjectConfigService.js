"use strict";var ProjectConfigService_1,__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const tsyringe_1=require("tsyringe"),ProjectConfig_1=__importDefault(require("../../entity/config/ProjectConfig")),global_1=require("../util/global");let ProjectConfigService=ProjectConfigService_1=class{constructor(){this.l10nEnable=!1}async toggle(){return this.l10nEnable=!this.l10nEnable,await Editor.Profile.setProject(global_1.MainName,ProjectConfigService_1.L10nEnableConfigName,this.l10nEnable),this.l10nEnable}async enableChanged(){await this.read()}getEnable(){return this.l10nEnable}initDataSource(){this.projectConfig=new ProjectConfig_1.default}async read(){try{const e=await Editor.Profile.getProject(global_1.MainName,ProjectConfig_1.default.ConfigName);this.projectConfig=ProjectConfig_1.default.parse(e),this.l10nEnable=await Editor.Profile.getProject(global_1.MainName,ProjectConfigService_1.L10nEnableConfigName)}catch(e){this.initDataSource()}}async persistent(){await Editor.Profile.setProject(global_1.MainName,ProjectConfig_1.default.ConfigName,this.projectConfig)}async uninstall(){await Editor.Profile.removeProject(global_1.MainName,ProjectConfig_1.default.ConfigName),this.initDataSource()}async setLocalLanguage(e){this.projectConfig.localLanguage=e,await this.persistent()}getLocalLanguage(){return this.projectConfig.localLanguage}async setScanOptions(e){this.projectConfig.scanOptions=e,await this.persistent()}getScanOptions(){return this.projectConfig.scanOptions.map(e=>e.clone())}};ProjectConfigService.L10nEnableConfigName="L10nEnable",ProjectConfigService=ProjectConfigService_1=__decorate([(0,tsyringe_1.singleton)()],ProjectConfigService),exports.default=ProjectConfigService;
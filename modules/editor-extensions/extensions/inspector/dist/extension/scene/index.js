"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.emitVirtualEvent=exports.queryVirtualElement=exports.register=exports.InspectorMap=void 0;const cc_1=require("cc"),element_1=require("../element"),map=new WeakMap;function register(e,t){exports.InspectorMap[e]=exports.InspectorMap[e]||[],exports.InspectorMap[e].push(t)}function queryVirtualElement(e){const t=cc_1.js.getClassName(e)||"";if(!exports.InspectorMap[t])return;const r=exports.InspectorMap[t],s=new element_1.VirtualElement("inspector-root"),n=map.get(e)||[];return r.forEach((t,r)=>{const o=t.decode(e,n[r]);n[r]=o,s.appendChild(o)}),map.set(e,n),(0,element_1.serialize)(s)}function emitVirtualEvent(e,t,r,s){const n=map.get(e);if(n)for(const o of n){const n=o.queryChildByID(t);n&&(n.attrs=JSON.parse(JSON.stringify(s)),n.dispatch(r,e,n))}}exports.InspectorMap={},exports.register=register,exports.queryVirtualElement=queryVirtualElement,exports.emitVirtualEvent=emitVirtualEvent;
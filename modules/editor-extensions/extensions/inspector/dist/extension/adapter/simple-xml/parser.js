"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=decode;const htmlparser2_1=require("htmlparser2"),element_1=require("../../element"),parser_1=require("../simple-json/parser");function decode(e,r,t){if(r&&"inspector-root"!==r.tag)throw new Error("Not a legitimate root node");var o=r||new element_1.VirtualElement("inspector-root"),n={type:"vbox",children:[]};let s=n;const i=new Map;var p=new htmlparser2_1.Parser({onopentag(e,r){var t=parser_1.parserJSONObjectMap[e],t=t?t.generate():{type:e},o=(i.set(t,s),"children"in s&&(-1!==(e=s.children.indexOf(t))&&s.children.splice(e,1),s.children.push(t)),t);for(const n in r){let e=r[n];"true"===e?e=!0:"false"===e&&(e=!1),n.startsWith("properties.")?(o.properties=o.properties||{},o.properties[n.substring(11)]=e):o[n]=e}s=t},ontext(e){},onclosetag(e){s=i.get(s)}});return p.write(e),p.end(),(0,parser_1.decode)(n,r,t),o}
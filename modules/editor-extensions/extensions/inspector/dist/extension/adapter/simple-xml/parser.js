"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode=void 0;const htmlparser2_1=require("htmlparser2"),element_1=require("../../element"),parser_1=require("../simple-json/parser");function decode(e,r,t){if(r&&"inspector-root"!==r.tag)throw new Error("Not a legitimate root node");const o=r||new element_1.VirtualElement("inspector-root"),s={type:"vbox",children:[]};let n=s;const i=new Map,p=new htmlparser2_1.Parser({onopentag(e,r){const t=parser_1.parserJSONObjectMap[e],o=t?t.generate():{type:e};if(i.set(o,n),"children"in n){const e=n.children.indexOf(o);-1!==e&&n.children.splice(e,1),n.children.push(o)}const s=o;for(const e in r){let t=r[e];"true"===t?t=!0:"false"===t&&(t=!1),e.startsWith("properties.")?(s.properties=s.properties||{},s.properties[e.substring(11)]=t):s[e]=t}n=o},ontext(e){},onclosetag(e){n=i.get(n)}});return p.write(e),p.end(),(0,parser_1.decode)(s,r,t),o}exports.decode=decode;
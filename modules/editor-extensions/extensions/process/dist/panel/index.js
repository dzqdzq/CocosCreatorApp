"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.style=exports.template=void 0;const utils_1=require("./utils");async function update(){const e=await utils_1.queryProcessTree(process.ppid);this.$.tree.tree=[function e(t){return t.showArrow=!1,t.children.forEach(e),t}(e)]}function ready(){this.$.tree.setTemplate("text",'<span class="name"></span>'),this.$.tree.setTemplateInit("text",e=>{e.$name=e.querySelector(".name")}),this.$.tree.setRender("text",(e,t)=>{e.$name.innerHTML=t.detail.name,e.$name.setAttribute("title",t.detail.cmd)}),this.$.tree.setTemplate("right",'<span class="cpu"></span><span class="mem"></span><span class="pid"></span>'),this.$.tree.setTemplateInit("right",e=>{e.$cpu=e.querySelector("span.cpu"),e.$mem=e.querySelector("span.mem"),e.$pid=e.querySelector("span.pid")}),this.$.tree.setRender("right",(e,t)=>{e.$cpu.innerHTML=t.detail.cpu,e.$mem.innerHTML=t.detail.memory,e.$pid.innerHTML=t.detail.pid});let e="";e+="span.cpu, span.mem, span.pid { display: inline-block; width: 60px; text-align: center; }",e+=".item > .section { overflow: hidden; }",e+=".item > .section > .text { overflow: hidden; text-overflow: ellipsis; }",this.$.tree.css=e,update.call(this),setInterval(()=>{update.call(this)},5e3)}window.aaa=utils_1.queryProcessTree,exports.template='\n<header>\n    <ui-label class="name"></ui-label>\n    <ui-label>CPU</ui-label>\n    <ui-label>MEM</ui-label>\n    <ui-label>PID</ui-label>\n</header>\n<section>\n    <ui-tree></ui-tree>\n</section>\n',exports.style="\n:host { display: flex; flex-direction: column; padding: 10px; }\n:host > header { display: flex; border-bottom: 1px solid var(--color-normal-border); padding: 0 10px; }\n:host > header > ui-label { display: inline-block; width: 60px; text-align: center; }\n:host > header > ui-label.name { flex: 1; text-align: left; }\n:host > section { flex: 1; display: flex; }\n:host > section > ui-tree { flex: 1; }\n",exports.$={tree:"ui-tree"},exports.update=update,exports.ready=ready;
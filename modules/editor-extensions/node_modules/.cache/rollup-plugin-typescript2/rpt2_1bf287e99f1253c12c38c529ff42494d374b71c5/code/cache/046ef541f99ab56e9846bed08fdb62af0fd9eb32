{"code":"'use strict';\nimport App from './App.vue';\nlet $vm;\nmodule.exports = Editor.Panel.define({\n    template: '<div id=\"app\"></div>',\n    $: {\n        app: '#app',\n    },\n    methods: {\n        async start() {\n            applyLogsAndProgress();\n        },\n        cancel() { },\n        log() {\n            applyLogsAndProgress();\n        },\n        progress() {\n            applyLogsAndProgress();\n        },\n        // 烘焙库的任务结束,此时还未输出图片\n        finished() {\n            applyLogsAndProgress();\n        },\n        // 烘焙全部结束,此时已输出图片\n        async end() {\n            applyLogsAndProgress();\n            $vm.progress = 100;\n            await $vm.onBakerEnd();\n        },\n        onSceneReady(uuid) {\n            $vm.onSceneReady(uuid);\n        },\n    },\n    async ready() {\n        const sceneUUID = await Editor.Message.request('scene', 'query-current-scene');\n        $vm = new App({\n            el: this.$.app,\n        });\n        $vm.onSceneReady(sceneUUID);\n        const lightmapData = await Editor.Message.request('lightmap', 'getConfig');\n        if (lightmapData) {\n            for (const key in lightmapData) {\n                $vm.$data[key] = lightmapData[key];\n            }\n        }\n    },\n});\nasync function applyLogsAndProgress() {\n    const state = await Editor.Message.request('lightmap', 'unstaging');\n    $vm.setLogs(state.logInfos);\n    $vm.progress = state.progress;\n}\n","references":["/Users/mac/Documents/editor_3d/v3.8.8/app/modules/editor-extensions/extensions/lightmap/source/panel/components/manager.ts"]}

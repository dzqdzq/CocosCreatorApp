"use strict";const{join:join}=require("path"),{readdirSync:readdirSync,statSync:statSync,unlinkSync:unlinkSync,rmdirSync:rmdirSync,existsSync:existsSync}=require("fs"),builder=require("@editor/build");function removeSync(n){if(!existsSync(n))return;if(statSync(n).isDirectory()){readdirSync(n).forEach(e=>{removeSync(join(n,e))}),rmdirSync(n)}else unlinkSync(n)}builder.scan(join(__dirname,"../extensions"));const cacheFile=join(__dirname,".build-cache.json");builder.config({entry:".workflow.clear.js",config:cacheFile}),async function(){console.log(["================================================================================","删除 node_moduels 文件夹"].join("\n")),removeSync(join(__dirname,"../node_modules")),await builder.executeTask(["clear"]),removeSync(cacheFile)}();
"use strict";const{existsSync:existsSync,readFileSync:readFileSync,writeFileSync:writeFileSync}=require("fs"),{join:join}=require("path"),defaultConfig={};function fillConfig(n){let i=!1;return("string"!=typeof n.enginePath||defaultConfig.enginePath&&defaultConfig.enginePath!==n.enginePath)&&(n.enginePath=defaultConfig.enginePath||"",i=!0),i}process.argv.forEach(n=>{const i=n.split("=");i.length>=2&&(defaultConfig[i[0].substr(2)]=i[1])});const configFile=join(__dirname,"../config.json");if(existsSync(configFile))try{const n=readFileSync(configFile),i=JSON.parse(n);fillConfig(i)&&writeFileSync(configFile,JSON.stringify(i,null,4))}catch(n){console.error("config.json 格式错误，请检查文件内容"),console.error(n)}else{const n={};fillConfig(n),writeFileSync(configFile,JSON.stringify(n,null,4))}
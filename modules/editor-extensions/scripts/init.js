"use strict";const{existsSync:existsSync,readFileSync:readFileSync,writeFileSync:writeFileSync}=require("fs"),{join:join}=require("path"),defaultConfig={};function fillConfig(n){let e=!1;return("string"!=typeof n.enginePath||defaultConfig.enginePath&&defaultConfig.enginePath!==n.enginePath)&&(n.enginePath=defaultConfig.enginePath||"",e=!0),e}process.argv.forEach(n=>{const e=n.split("=");e.length>=2&&(defaultConfig[e[0].substr(2)]=e[1])});const configFile=join(__dirname,"../config.json");if(existsSync(configFile))try{const n=readFileSync(configFile),e=JSON.parse(n);fillConfig(e)&&writeFileSync(configFile,JSON.stringify(e,null,4))}catch(n){console.error("config.json 格式错误，请检查文件内容"),console.error(n)}else{const n={};fillConfig(n),writeFileSync(configFile,JSON.stringify(n,null,4))}console.log("初始化配置成功");
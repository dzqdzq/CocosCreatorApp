import _UTIL from"../util";!function(_){var e;e=function(B){"use strict";if(B.URL=_.URL||_.webkitURL,_.Blob&&_.URL)try{return void new Blob}catch(e){}var i=_.BlobBuilder||_.WebKitBlobBuilder||_.MozBlobBuilder||function(){function f(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}function e(){this.data=[],this._arrayBuffer=new R}function c(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n,this._arrayBuffer=new R}function s(e){this.code=this[this.name=e]}var t=e.prototype,n=c.prototype,u=_.FileReaderSync,r="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),o=r.length,i=_.URL||_.webkitURL||B,a=i.createObjectURL,l=i.revokeObjectURL,d=i,p=_.btoa,h=_.atob,R=_.ArrayBuffer,b=_.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(c.fake=n.fake=!0;o--;)s.prototype[r[o]]=o+1;return(d=i.createObjectURL?d:B.URL=function(e){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");return t.href=e,"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(e=e.match(y),t.origin=e&&e[1])),t}).createObjectURL=function(e){var t=e.type;return null===t&&(t="application/octet-stream"),e instanceof c?(t="data:"+t,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):a?a.call(i,e):void 0},d.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&l&&l.call(i,e)},t.append=function(e){var t=this.data;if(e instanceof R){for(var n="",r=new b(e),o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);t.push(n),this._arrayBuffer=e.slice(0)}else if("Blob"===f(e)||"File"===f(e)){if(!u)throw new s("NOT_READABLE_ERR");var a=new u;t.push(a.readAsBinaryString(e)),this._arrayBuffer=e.arrayBuffer()}else e instanceof c?("base64"===e.encoding&&h?t.push(h(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data),this._arrayBuffer=e._arrayBuffer.slice(0)):("string"!=typeof e&&(e+=""),t.push(unescape(encodeURIComponent(e))),this._arrayBuffer=_UTIL.stringToArraybuffer())},t.getBlob=function(e){arguments.length||(e=null);e=new c(this.data.join(""),e,"raw");return e._arrayBuffer=this._arrayBuffer,e},t.toString=function(){return"[object BlobBuilder]"},n.slice=function(e,t,n){var r=arguments.length,r=(r<3&&(n=null),new c(this.data.slice(e,1<r?t:this.data.length),n,this.encoding));return this._arrayBuffer instanceof R&&(r._arrayBuffer=this._arrayBuffer.slice(e,t)),r},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=0,delete this.data},n.arrayBuffer=function(){return this._arrayBuffer.slice(0)},e}(),e=(B.Blob=function(e,t){var t=t&&t.type||"",n=new i;if(e)for(var r=0,o=e.length;r<o;r++)Uint8Array&&e[r]instanceof Uint8Array?n.append(e[r].buffer):n.append(e[r]);t=n.getBlob(t);return!t.slice&&t.webkitSlice&&(t.slice=t.webkitSlice),t},Object.getPrototypeOf||function(e){return e.__proto__});B.Blob.prototype=e(new B.Blob)},"function"==typeof define&&define.amd?define(["exports"],e):"object"==typeof exports&&"string"!=typeof exports.nodeName?e(exports):e(_)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||this.content||this);
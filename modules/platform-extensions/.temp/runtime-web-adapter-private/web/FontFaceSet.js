import EventTarget from"./EventTarget";import Event from"./Event";import _weakMap from"./util/WeakMap";export default class FontFaceSet extends EventTarget{constructor(){super();let a=this;_weakMap.get(this).status="loaded",_weakMap.get(this).ready=new Promise(function(e,t){_weakMap.get(a).readyResolve=e,_weakMap.get(a).readyReject=t}),_weakMap.get(this).fontFaceSet=[]}get status(){return _weakMap.get(this).status}get ready(){return _weakMap.get(this).ready}add(e){_weakMap.get(this).fontFaceSet.push(e)}check(){console.warn("FontFaceSet.check() not implements")}clear(){console.warn("FontFaceSet.clear() not implements")}delete(){console.warn("FontFaceSet.delete() not implements")}load(){let s=this;return _weakMap.get(this).status="loading",this.dispatchEvent(new Event("loading")),new Promise(function(e,t){var a=_weakMap.get(s).fontFaceSet;if(a){for(var n in a){var n=a[n],o=_weakMap.get(n).status;if(("unloaded"===o||"error"===o)&&(n.load(),"loaded"!==_weakMap.get(n)._status))break}_weakMap.get(s).status="loaded",_weakMap.get(s).readyResolve([].concat(_weakMap.get(s).fontFaceSet)),e([].concat(_weakMap.get(s).fontFaceSet)),s.dispatchEvent(new Event("loadingdone"))}else _weakMap.get(s).status="loaded",_weakMap.get(s).readyReject(),t(),s.dispatchEvent(new Event("loadingerror"))})}}
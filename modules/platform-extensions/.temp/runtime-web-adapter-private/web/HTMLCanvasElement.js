import HTMLElement from"./HTMLElement";import ImageData from"./ImageData";if("vivo_platform_support"===ral.getFeatureProperty("HTMLCanvasElement","spec")||"honor_platform_support"===ral.getFeatureProperty("HTMLCanvasElement","spec")){let t=window.HTMLCanvasElement;module.exports=t}else{const b=300,c=150;window.ral=window.ral||{};let h=ral.createCanvas;class e extends HTMLElement{constructor(t,n){if(super("CANVAS"),this.id="glcanvas",this.type="canvas",this.top=0,void(this.left=0)===ral.getFeatureProperty("ral.createCanvas","spec")){let i=h();return i.__proto__.__proto__=e.prototype,Object.keys(this).forEach(function(t){i[t]=this[t]}.bind(this)),i.width=0<=t?Math.ceil(t):b,i.height=0<=n?Math.ceil(n):c,i._targetID=this._targetID,i._listenerCount=this._listenerCount,i._listeners=this._listeners,i}this._width=t?Math.ceil(t):b,this._height=n?Math.ceil(n):c,this._context2D=null,this._dataInner=null,this._alignment=this._width%2==0?8:4}getContext(t,e){return"webgl"===t||"experimental-webgl"===t?window.__gl:"2d"===t?(this._context2D||(this._context2D=new CanvasRenderingContext2D(this.width,this.height),this._context2D._innerCanvas=this),this._context2D):null}get _data(){var t;return null===this._context2D?null:(this._dataInner||(t=this._context2D._getData(),this._dataInner=new ImageData(t,this.width,this.height)),this._dataInner)}get clientWidth(){return this.width}get clientHeight(){return this.height}set width(t){t=parseInt(t),(isNaN(t)||t<0)&&(t=b),this._width=t,this._alignment=this._width%2==0?8:4,this._context2D&&(this._context2D._width=t),this._dataInner=null}get width(){return this._width}set height(t){t=parseInt(t),(isNaN(t)||t<0)&&(t=c),this._height=t,this._context2D&&(this._context2D._height=t),this._dataInner=null}get height(){return this._height}}module.exports=e}
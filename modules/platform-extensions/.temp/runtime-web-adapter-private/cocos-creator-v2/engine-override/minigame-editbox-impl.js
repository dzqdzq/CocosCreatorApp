const _EDIBOX=cc.EditBox,_KEYBOARD_RETURN_TYPE=_EDIBOX.KeyboardReturnType,_MAX_VALUE=65535,_BASE_CLASS=_EDIBOX._ImplClass;let _currentEditBoxImpl=null;function _getKeyboardReturnType(e){switch(e){case _KEYBOARD_RETURN_TYPE.DEFAULT:case _KEYBOARD_RETURN_TYPE.DONE:return"done";case _KEYBOARD_RETURN_TYPE.SEND:return"send";case _KEYBOARD_RETURN_TYPE.SEARCH:return"search";case _KEYBOARD_RETURN_TYPE.GO:return"go";case _KEYBOARD_RETURN_TYPE.NEXT:return"next"}return"done"}function MiniGameEditBoxImpl(){_BASE_CLASS.call(this),this._eventListeners={onKeyboardInput:null,onKeyboardConfirm:null,onKeyboardComplete:null}}cc.js.extend(MiniGameEditBoxImpl,_BASE_CLASS),_EDIBOX._ImplClass=MiniGameEditBoxImpl,Object.assign(MiniGameEditBoxImpl.prototype,{init(e){e?this._delegate=e:cc.error("EditBox init failed")},beginEditing(){var e;_currentEditBoxImpl!==this&&(e=this._delegate,_currentEditBoxImpl?(_currentEditBoxImpl._eventListeners.onKeyboardComplete(),ral.updateKeyboard&&ral.updateKeyboard({value:e._string})):this._showKeyboard(),this._registerKeyboardEvent(),this._editing=!0,_currentEditBoxImpl=this,e.editBoxEditingDidBegan())},endEditing(){this._hideKeyboard();var e=this._eventListeners;e.onKeyboardComplete&&e.onKeyboardComplete()},_registerKeyboardEvent(){let n=this,r=this._delegate;var e=this._eventListeners;e.onKeyboardInput=function(e){r._string!==e.value&&r.editBoxTextChanged(e.value)},e.onKeyboardConfirm=function(e){r.editBoxEditingReturn();var t=n._eventListeners;t.onKeyboardComplete&&t.onKeyboardComplete()},e.onKeyboardComplete=function(){n._editing=!1,_currentEditBoxImpl=null,n._unregisterKeyboardEvent(),r.editBoxEditingDidEnded()},ral.onKeyboardInput(e.onKeyboardInput),ral.onKeyboardConfirm(e.onKeyboardConfirm),ral.onKeyboardComplete(e.onKeyboardComplete)},_unregisterKeyboardEvent(){var e=this._eventListeners;e.onKeyboardInput&&(ral.offKeyboardInput(e.onKeyboardInput),e.onKeyboardInput=null),e.onKeyboardConfirm&&(ral.offKeyboardConfirm(e.onKeyboardConfirm),e.onKeyboardConfirm=null),e.onKeyboardComplete&&(ral.offKeyboardComplete(e.onKeyboardComplete),e.onKeyboardComplete=null)},_showKeyboard(){var e=this._delegate,t=e.inputMode===_EDIBOX.InputMode.ANY,n=e.maxLength<0?_MAX_VALUE:e.maxLength;let r;switch(e.inputMode){case 1:r="email";break;case 2:case 5:r="number";break;case 3:r="phone";break;case 4:r="url";break;default:r="text"}0===e.inputFlag&&(r="password"),ral.showKeyboard({defaultValue:e._string,maxLength:n,multiple:t,confirmHold:!1,confirmType:_getKeyboardReturnType(e.returnType),inputType:r,success(e){},fail(e){cc.warn(e.errMsg)}})},_hideKeyboard(){ral.hideKeyboard({success(e){},fail(e){cc.warn(e.errMsg)}})}});
const CANVAS_DEFAULT_WIDTH=300,CANVAS_DEFAULT_HEIGHT=150;window.ral=window.ral||{};let _createCanvas=ral.createCanvas,__canvas=window.__canvas;class HTMLCanvasElement extends HTMLElement{constructor(t,n){if(super("CANVAS"),this.id="glcanvas",this.type="canvas",this.top=0,void(this.left=0)===ral.getFeatureProperty("ral.createCanvas","spec")){let e=_createCanvas(),i=(e.__proto__.__proto__=HTMLCanvasElement.prototype,Object.keys(this).forEach(function(t){e[t]=this[t]}.bind(this)),e.getContext);return e.getContext=function(t,e){return"webgl"===t||"webgl2"===t||"experimental-webgl"===t||"experimental-webgl2"===t?void 0===__canvas?(__canvas=this,i.call(this,t,e)):__canvas===this?i.call(this,t,e):__canvas.getContext(t,e):i.call(this,t,e)},e.width=0<=t?Math.ceil(t):CANVAS_DEFAULT_WIDTH,e.height=0<=n?Math.ceil(n):CANVAS_DEFAULT_HEIGHT,e._targetID=this._targetID,e._listenerCount=this._listenerCount,e._listeners=this._listeners,e}this._width=t?Math.ceil(t):CANVAS_DEFAULT_WIDTH,this._height=n?Math.ceil(n):CANVAS_DEFAULT_HEIGHT,this._context2D=null,this._alignment=this._width%2==0?8:4}getContext(t,e){return"webgl"===t||"experimental-webgl"===t?window.__gl:"2d"===t?(this._context2D||(this._context2D=new CanvasRenderingContext2D(this.width,this.height),this._context2D._innerCanvas=this),this._context2D):null}get clientWidth(){return this.width}get clientHeight(){return this.height}set width(t){t=parseInt(t),(isNaN(t)||t<0)&&(t=CANVAS_DEFAULT_WIDTH),this._width=t,this._alignment=this._width%2==0?8:4,this._context2D&&(this._context2D._width=t)}get width(){return this._width}set height(t){t=parseInt(t),(isNaN(t)||t<0)&&(t=CANVAS_DEFAULT_HEIGHT),this._height=t,this._context2D&&(this._context2D._height=t)}get height(){return this._height}}module.exports=HTMLCanvasElement;
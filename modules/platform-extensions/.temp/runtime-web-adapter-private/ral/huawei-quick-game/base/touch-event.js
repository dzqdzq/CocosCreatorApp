let _jsb=window.jsb,_touches=(_jsb=_jsb||{},[]),_getTouchIndex=function(e){var n;for(let o=0;o<_touches.length;o++)if(n=_touches[o],e.identifier===n.identifier)return o;return-1},_copyObject=function(o,e){for(const n in o)o.hasOwnProperty(n)&&(e[n]=o[n])},_listenerMap={touchstart:[],touchmove:[],touchend:[],touchcancel:[]};function _addListener(o,n){var t=_listenerMap[o];for(let o=0,e=t.length;o<e;o++)if(n===t[o])return;t.push(n)}function _removeListener(o,e){var n=_listenerMap[o]||[],t=n.length;for(let o=0;o<t;++o)if(e===n[o])return void n.splice(o,1)}let _hasDellWith=!1,_systemInfo=hbs.getSystemInfoSync(),_touchEventHandlerFactory=(window.innerWidth&&_systemInfo.windowWidth!==window.innerWidth&&(_hasDellWith=!0),function(i){return o=>{if("function"==typeof o)_addListener(i,o);else{var e=new TouchEvent(i);let n,c=("touchstart"===i?o.forEach(o=>{var e;0<=(n=_getTouchIndex(o))?_copyObject(o,_touches[n]):(e={},_copyObject(o,e),_touches.push(e))}):"touchmove"===i?o.forEach(o=>{0<=(n=_getTouchIndex(o))&&_copyObject(o,_touches[n])}):"touchend"!==i&&"touchcancel"!==i||o.forEach(o=>{0<=(n=_getTouchIndex(o))&&_touches.splice(n,1)}),[].concat(_touches)),h=[];o.forEach(e=>{var n=c.length;for(let o=0;o<n;++o){var t=c[o];if(e.identifier===t.identifier)return void h.push(t)}h.push(e)}),e.touches=c,e.targetTouches=c,e.changedTouches=h,_hasDellWith&&(c.forEach(function(o){o.clientX/=window.devicePixelRatio,o.clientY/=window.devicePixelRatio,o.pageX/=window.devicePixelRatio,o.pageY/=window.devicePixelRatio}),"touchcancel"!==i&&"touchend"!==i||h.forEach(function(o){o.clientX/=window.devicePixelRatio,o.clientY/=window.devicePixelRatio,o.pageX/=window.devicePixelRatio,o.pageY/=window.devicePixelRatio}));var t=_listenerMap[i],u=t.length;for(let o=0;o<u;o++)t[o](e)}}});hbs.onTouchStart?(ral.onTouchStart=hbs.onTouchStart,ral.offTouchStart=hbs.offTouchStart):(_jsb.onTouchStart=_touchEventHandlerFactory("touchstart"),_jsb.offTouchStart=function(o){_removeListener("touchstart",o)},ral.onTouchStart=_jsb.onTouchStart.bind(_jsb),ral.offTouchStart=_jsb.offTouchStart.bind(_jsb)),hbs.onTouchMove?(ral.onTouchMove=hbs.onTouchMove,ral.offTouchMove=hbs.offTouchMove):(_jsb.onTouchMove=_touchEventHandlerFactory("touchmove"),_jsb.offTouchMove=function(o){_removeListener("touchmove",o)},ral.onTouchMove=_jsb.onTouchMove.bind(_jsb),ral.offTouchMove=_jsb.offTouchMove.bind(_jsb)),hbs.onTouchCancel?(ral.onTouchCancel=hbs.onTouchCancel,ral.offTouchCancel=hbs.offTouchCancel):(_jsb.onTouchCancel=_touchEventHandlerFactory("touchcancel"),_jsb.offTouchCancel=function(o){_removeListener("touchcancel",o)},ral.onTouchCancel=_jsb.onTouchCancel.bind(_jsb),ral.offTouchCancel=_jsb.offTouchCancel.bind(_jsb)),hbs.onTouchEnd?(ral.onTouchEnd=hbs.onTouchEnd,ral.offTouchEnd=hbs.offTouchEnd):(_jsb.onTouchEnd=_touchEventHandlerFactory("touchend"),_jsb.offTouchEnd=function(o){_removeListener("touchend",o)},ral.onTouchEnd=_jsb.onTouchEnd.bind(_jsb),ral.offTouchEnd=_jsb.offTouchEnd.bind(_jsb));
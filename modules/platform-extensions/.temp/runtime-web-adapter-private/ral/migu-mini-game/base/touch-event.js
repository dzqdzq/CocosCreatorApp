let _jsb=window.jsb,_rt=(_jsb=_jsb||{},loadRuntime()),_touches=[],_getTouchIndex=function(e){var t;for(let o=0;o<_touches.length;o++)if(t=_touches[o],e.identifier===t.identifier)return o;return-1},_copyObject=function(o,e){for(const t in o)o.hasOwnProperty(t)&&(e[t]=o[t])},_listenerMap={touchstart:[],touchmove:[],touchend:[],touchcancel:[]};function _addListener(o,t){var n=_listenerMap[o];for(let o=0,e=n.length;o<e;o++)if(t===n[o])return;n.push(t)}function _removeListener(o,e){var t=_listenerMap[o]||[],n=t.length;for(let o=0;o<n;++o)if(e===t[o])return void t.splice(o,1)}let _hasDellWith=!1,_systemInfo=_rt.getSystemInfoSync(),_touchEventHandlerFactory=(window.innerWidth&&_systemInfo.windowWidth!==window.innerWidth&&(_hasDellWith=!0),function(u){return o=>{if("function"==typeof o)_addListener(u,o);else{var e=new TouchEvent(u);let t,c=("touchstart"===u?o.forEach(o=>{var e;0<=(t=_getTouchIndex(o))?_copyObject(o,_touches[t]):(e={},_copyObject(o,e),_touches.push(e))}):"touchmove"===u?o.forEach(o=>{0<=(t=_getTouchIndex(o))&&_copyObject(o,_touches[t])}):"touchend"!==u&&"touchcancel"!==u||o.forEach(o=>{0<=(t=_getTouchIndex(o))&&_touches.splice(t,1)}),[].concat(_touches)),r=[];o.forEach(e=>{var t=c.length;for(let o=0;o<t;++o){var n=c[o];if(e.identifier===n.identifier)return void r.push(n)}r.push(e)}),e.touches=c,e.targetTouches=c,e.changedTouches=r,_hasDellWith&&(c.forEach(function(o){o.clientX/=window.devicePixelRatio,o.clientY/=window.devicePixelRatio,o.pageX/=window.devicePixelRatio,o.pageY/=window.devicePixelRatio}),"touchcancel"!==u&&"touchend"!==u||r.forEach(function(o){o.clientX/=window.devicePixelRatio,o.clientY/=window.devicePixelRatio,o.pageX/=window.devicePixelRatio,o.pageY/=window.devicePixelRatio}));var n=_listenerMap[u],h=n.length;for(let o=0;o<h;o++)n[o](e)}}});_rt.onTouchStart?(ral.onTouchStart=_rt.onTouchStart,ral.offTouchStart=_rt.offTouchStart):(_jsb.onTouchStart=_touchEventHandlerFactory("touchstart"),_jsb.offTouchStart=function(o){_removeListener("touchstart",o)},ral.onTouchStart=_jsb.onTouchStart.bind(_jsb),ral.offTouchStart=_jsb.offTouchStart.bind(_jsb)),_rt.onTouchMove?(ral.onTouchMove=_rt.onTouchMove,ral.offTouchMove=_rt.offTouchMove):(_jsb.onTouchMove=_touchEventHandlerFactory("touchmove"),_jsb.offTouchMove=function(o){_removeListener("touchmove",o)},ral.onTouchMove=_jsb.onTouchMove.bind(_jsb),ral.offTouchMove=_jsb.offTouchMove.bind(_jsb)),_rt.onTouchCancel?(ral.onTouchCancel=_rt.onTouchCancel,ral.offTouchCancel=_rt.offTouchCancel):(_jsb.onTouchCancel=_touchEventHandlerFactory("touchcancel"),_jsb.offTouchCancel=function(o){_removeListener("touchcancel",o)},ral.onTouchCancel=_jsb.onTouchCancel.bind(_jsb),ral.offTouchCancel=_jsb.offTouchCancel.bind(_jsb)),_rt.onTouchEnd?(ral.onTouchEnd=_rt.onTouchEnd,ral.offTouchEnd=_rt.offTouchEnd):(_jsb.onTouchEnd=_touchEventHandlerFactory("touchend"),_jsb.offTouchEnd=function(o){_removeListener("touchend",o)},ral.onTouchEnd=_jsb.onTouchEnd.bind(_jsb),ral.offTouchEnd=_jsb.offTouchEnd.bind(_jsb));
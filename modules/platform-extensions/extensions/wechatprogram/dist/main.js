"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");exports.methods={async"create-build-template"(){const t=(await Editor.Message.request("engine","query-engine-info")).typescript.path,e=(0,path_1.join)(t,"templates/wechatprogram","build-template.json");if(!(0,fs_extra_1.existsSync)(e))return void console.error("build-template.json not exist!");const r={};Object.assign(r,(0,fs_extra_1.readJSONSync)(e));const a=(0,path_1.join)(Editor.Project.path,"build-templates"),s=r.templates||[];let o=!1;for(const e of s){const r=(0,path_1.join)(t,"templates/wechatprogram",e),s=(0,path_1.join)(a,"wechatprogram",e);if((0,fs_extra_1.existsSync)(s)){if(1===(await Editor.Dialog.warn(Editor.I18n.t("wechatprogram.tips.overwriteTemplate",{file:e}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("wechatprogram.tips.overwrite"),Editor.I18n.t("wechatprogram.tips.cancel")],default:0,cancel:1})).response)continue}(0,fs_extra_1.copySync)(r,s),o=!0}if(o){const t=(0,path_1.join)(a,"templates-version.json");let e={wechatprogram:r.version};if((0,fs_extra_1.existsSync)(t)){const a=(0,fs_extra_1.readJSONSync)(t);a.wechatprogram!==r.version&&(e=Object.assign({},a,e),(0,fs_extra_1.outputJSONSync)(t,e,{spaces:4}))}else(0,fs_extra_1.outputJSONSync)(t,e,{spaces:4});console.log(`wechatprogram ${Editor.I18n.t("wechatprogram.tips.createTemplateSuccess")}({link(${(0,path_1.join)(a,"wechatprogram")})})`)}}};
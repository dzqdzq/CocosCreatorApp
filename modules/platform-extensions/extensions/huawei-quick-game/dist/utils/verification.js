"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.verificationFunc=exports.getVerifyFuncMap=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");function getVerifyFuncMap(){const e={};return["versionName","versionCode","minPlatformVersion","package","privatePemPath","certificatePemPath","icon"].forEach(t=>{e[t]=((e,r)=>verificationFunc(t,e,r))}),e}exports.getVerifyFuncMap=getVerifyFuncMap;const MIN_PLATFORM_VERSION=1091;function verificationFunc(e,t,r){const i={error:"",newValue:t};let a="";switch(e){case"versionName":case"versionCode":if(!t){i.error=`${e} ${Editor.I18n.t("huawei-quick-game.tips.not_empty")}`,i.newValue=null;break}break;case"minPlatformVersion":{const a=r.packages["huawei-quick-game"].separateEngine;if(!t){i.error=`${e} ${Editor.I18n.t("huawei-quick-game.tips.not_empty")}`,i.newValue=null;break}const o=t.match(/^[0-9]*$/);if(!o){i.error=`${e} ${Editor.I18n.t("huawei-quick-game.tips.not_empty")}`,i.newValue=null;break}const n=Number(o[0]);if(a&&n<MIN_PLATFORM_VERSION){i.error=Editor.I18n.t("huawei-quick-game.tips.support_min_platform_limit",{version:`${MIN_PLATFORM_VERSION}`}),i.newValue=null;break}break}case"package":{const e=/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/;if(!t){i.error=`Game package(${t}) ${Editor.I18n.t("huawei-quick-game.tips.package_name_error")}`,i.newValue=null;break}e.test(t)||(i.error=`Game package(${t})${Editor.I18n.t("huawei-quick-game.tips.project_name_not_legal")}`,i.newValue=null)}break;case"privatePemPath":if(!t){i.error=Editor.I18n.t("huawei-quick-game.options.private_pem_path_hint");break}a=Editor.UI.__protected__.File.resolveToRaw(t),".pem"===(0,path_1.extname)(a)&&(0,fs_extra_1.existsSync)(a)||(i.error=Editor.I18n.t("huawei-quick-game.tips.private_pem_path_error"));break;case"certificatePemPath":if(!t){i.error=Editor.I18n.t("huawei-quick-game.options.certificate_pem_path_hint");break}a=Editor.UI.__protected__.File.resolveToRaw(t),".pem"===(0,path_1.extname)(a)&&(0,fs_extra_1.existsSync)(a)||(i.error=Editor.I18n.t("huawei-quick-game.tips.certificate_pem_path_error"));break;case"icon":if("string"!=typeof t){i.error="Icon Path"+Editor.I18n.t("huawei-quick-game.tips.icon_not_exist");break}(0,fs_extra_1.existsSync)(t)||(i.error="Icon Path"+Editor.I18n.t("huawei-quick-game.tips.icon_not_exist"))}return i}exports.verificationFunc=verificationFunc;
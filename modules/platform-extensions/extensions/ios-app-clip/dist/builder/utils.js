"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findXcodeProjects=exports.getBrowserslistQuery=exports.outputJSBAdapter=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path");async function outputJSBAdapter(t,e){const{targets:r}=e||{},s=(await Editor.Message.request("engine","query-engine-info")).typescript.path,i=path_1.join(s,"jsb-adapter/builtin/index.js"),n=path_1.join(s,"jsb-adapter/engine/index.js");await Build.Utils.createBundle(i,path_1.join(t,"jsb-adapter","jsb-builtin.js"),{targets:r}),await Build.Utils.createBundle(n,path_1.join(t,"jsb-adapter","jsb-engine.js"),{targets:r})}async function getBrowserslistQuery(t){const e=path_1.join(t,".browserslistrc");let r;try{r=await fs_extra_1.readFile(e,"utf8")}catch(t){return}const s=function(t){const e=[];for(const r of t.split("\n")){let t=r.indexOf("#");const s=(t<0?r:r.substr(0,t)).trim();0!==s.length&&e.push(s)}return e}(r);if(0!==s.length)return s.join(" or ")}function findXcodeProjects(t){return fs_extra_1.readdirSync(t).filter(t=>t.endsWith(".xcodeproj"))}exports.outputJSBAdapter=outputJSBAdapter,exports.getBrowserslistQuery=getBrowserslistQuery,exports.findXcodeProjects=findXcodeProjects;
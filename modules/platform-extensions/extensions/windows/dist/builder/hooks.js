"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onAfterInit=onAfterInit,exports.onAfterBundleInit=onAfterBundleInit;const utils_1=require("./utils");async function onAfterInit(e,a,s){const t=e.packages.windows.renderBackEnd,n=(a.staticsInfo.B100005=e.name,Editor.Metrics.trackEvent({category:"Project",action:"Rendering Backend",label:"Vulkan",value:e.packages.windows.renderBackEnd.vulkan?100:0}),e.cocosParams);n.platformParams.targetPlatform="x64",n.platformParams.vsVersion=e.packages.windows.vsData||"",n.cMakeConfig.USE_SERVER_MODE=`set(USE_SERVER_MODE ${e.packages.native.serverMode?"ON":"OFF"})`;a=Number(e.packages.native.netMode);n.cMakeConfig.NET_MODE=`set(NET_MODE ${isNaN(a)||2<a||a<0?0:a})`,e.buildScriptParam.flags.NET_MODE=isNaN(a)||2<a||a<0?0:a,n.cMakeConfig.NET_MODE=`set(NET_MODE ${isNaN(a)||2<a||a<0?0:a})`,n.executableName=(0,utils_1.executableNameOrDefault)(n.projectName,e.packages.windows.executableName),"CocosGame"===n.executableName&&console.warn(`The provided project name "${n.projectName}" is not suitable for use as an executable name. 'CocosGame' is applied instead.`),n.cMakeConfig.CC_EXECUTABLE_NAME=`set(CC_EXECUTABLE_NAME "${n.executableName}")`,t&&Object.keys(t).forEach(e=>{n.cMakeConfig["CC_USE_"+e.toUpperCase()]=t[e]})}async function onAfterBundleInit(e){var a=e.packages.windows.renderBackEnd,a=(e.assetSerializeOptions["cc.EffectAsset"].glsl1=a.gles2??!0,e.assetSerializeOptions["cc.EffectAsset"].glsl3=a.gles3??!0,e.assetSerializeOptions["cc.EffectAsset"].glsl4=a.vulkan??!0,Number(e.packages.native.netMode));e.buildScriptParam.flags.NET_MODE=isNaN(a)||2<a||a<0?0:a,e.buildScriptParam.flags.SERVER_MODE=!!e.packages.windows.serverMode}
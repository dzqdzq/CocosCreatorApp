"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unload=exports.load=exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra"),index_1=require("../builder/native-utils/index");function load(){}function unload(){}exports.methods={compileJsbAdapter:index_1.compileJsbAdapter,async"create-build-template"(){const t=(await Editor.Message.request("engine","query-engine-info")).typescript.path,e=path_1.join(t,"templates/native","build-template.json");if(!fs_extra_1.existsSync(e))return void console.error("build-template.json not exist!");const i={};Object.assign(i,fs_extra_1.readJSONSync(e));const s=i.templates||[];let a=!1;for(const e of s){const i=path_1.join(t,"templates/native",e),s=path_1.join(Editor.Project.path,"build-templates/native",e);if(fs_extra_1.existsSync(s)){if(1===(await Editor.Dialog.warn(Editor.I18n.t("native.tips.overwriteTemplate",{file:e}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("native.tips.overwrite"),Editor.I18n.t("native.tips.cancel")],default:0,cancel:1})).response)continue}fs_extra_1.copySync(i,s),a=!0}if(a){const t=path_1.join(Editor.Project.path,"build-templates","templates-version.json");let e={native:i.version};if(fs_extra_1.existsSync(t)){const s=fs_extra_1.readJSONSync(t);s.native!==i.version&&(e=Object.assign({},s,e),fs_extra_1.outputJSONSync(t,e,{spaces:4}))}else fs_extra_1.outputJSONSync(t,e,{spaces:4});console.log(`native ${Editor.I18n.t("native.tips.createTemplateSuccess")}({link(${path_1.join(Editor.Project.path,"build-templates/native")})})`)}}},exports.load=load,exports.unload=unload;
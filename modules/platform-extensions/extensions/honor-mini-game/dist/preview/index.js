"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.beforeClose=exports.ready=exports.methods=exports.$=exports.template=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),honor_preview_cli_1=require("./honor-preview-cli"),fixPath=require("fix-path");let panel=null,vm;const Vue=require("vue/dist/vue.js");async function ready(e){panel=this,fixPath(),vm=new Vue({el:panel.$["honor-preview"],data:{previewUrl:"",rpkPath:e},computed:{tips(){return this.rpkPath?this.previewUrl?Editor.I18n.t("honor-mini-game.debug_tools.start_run_server"):Editor.I18n.t("honor-mini-game.debug_tools.waiting_to_run_server"):Editor.I18n.t("honor-mini-game.debug_tools.please_rebuild")}},methods:{async updateRpkPath(e){var r=this;!(0,fs_1.existsSync)(e)&&r.previewUrl?r.msg=Editor.I18n.t("honor-mini-game.debug_tools.please_rebuild"):r.previewUrl=await new Promise((o,t)=>{honor_preview_cli_1.previewManager.run(e,(e,r)=>{e?t(e):o(r)})})}}})}async function beforeClose(){}async function close(){honor_preview_cli_1.previewManager.kill()}Vue.config.productionTip=!1,Vue.config.devtools=!1,exports.style=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../dist/honor-preview.css"),"utf8"),exports.template=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../static/honor-preview.html"),"utf8"),exports.$={"honor-preview":".honor-preview",preview:".preview"},exports.methods={"update-rpk-path"(e){vm.updateRpkPath(e)}},exports.ready=ready,exports.beforeClose=beforeClose,exports.close=close;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const utils_1=require("../utils"),Vue=require("vue/dist/vue.js");let vm=null;exports.style="\n.row { display: flex; }\n.row > ui-prop {\n    --left-width: 40%;\n    flex: 1;\n    padding-left: 5px;\n}\n.row > ui-prop > ui-file { flex: 1; }\n.row > ui-icon {\n    visibility: hidden;\n}\n.row:hover > ui-icon {\n    visibility: visible;\n}\n.row > ui-icon[type='local'] {\n    color: var(--color-warn-fill);\n    visibility: visible;\n}\n",exports.template='\n<div class="program" @confirm="onConfirm">\n    <div class=row>\n        <ui-icon value="setting" tooltip="i18n:preferences.menu.position_info"\n            @click="onChangePosition($event.target.pageX, $event.target.pageY, \'androidNDK\')"\n        ></ui-icon>\n        <ui-prop\n            :class="errorMap.androidNDK ? \'danger\' : \'\'"\n            :message="errorMap.androidNDK"\n        >\n            <div slot=label>\n                <ui-label value="i18n:android.program.androidNDK"></ui-label>\n                <ui-icon value="help" tooltip="i18n:android.program.androidNDKTips"></ui-icon>\n            </div>\n            <ui-file slot="content" type="directory" data="path" path="androidNDK"\n                :value="androidNDK.path"\n            ></ui-file>\n        </ui-prop>\n    </div>\n\n    <div class="row">\n        <ui-icon value="setting" tooltip="i18n:preferences.menu.position_info"\n            @click="onChangePosition($event.target.pageX, $event.target.pageY, \'androidSDK\')"\n        ></ui-icon>\n        <ui-prop\n            :class="errorMap.androidSDK ? \'danger\' : \'\'"\n            :message="errorMap.androidSDK"\n        >\n            <div slot=label>\n                <ui-label value="i18n:android.program.androidSDK"></ui-label>\n                <ui-icon value="help" tooltip="i18n:android.program.androidSDKTips"></ui-icon>\n            </div>\n            <ui-file slot="content" type="directory" data="path" path="androidSDK"\n                :value="androidSDK.path"\n            ></ui-file>\n        </ui-prop>\n    </div>\n</div>\n',exports.$={program:".program"};const component={data:{androidNDK:{path:"",commandArgument:""},androidSDK:{path:"",commandArgument:""},types:{androidNDK:"global",androidSDK:"global"},errorMap:{androidNDK:"",androidSDK:""}},methods:{async refresh(i){const o=this,n=await Editor.Profile.getConfig("android",i,"local");o.types[i]=null!=n?"local":"global"},async onConfirm(i){const o=i.target.getAttribute("path"),n=i.target.getAttribute("data"),e=i.target.value;this[o][n]=e,await Editor.Profile.setConfig("android",`${o}.${n}`,e,this.types[o]),this.errorMap[o]=(0,utils_1.checkProgramConfig)(o,this[o].path)},onChangePosition(i,o,n){const e=this;Editor.Menu.popup({x:i,y:o,menu:[{label:Editor.I18n.t("preferences.menu.copyConfigKey"),click(){const i=`'android', '${n}'`;Editor.Clipboard.write("text",i)}},{label:Editor.I18n.t("preferences.menu.move_local"),enabled:"global"===e.types[n],async click(){let i=await Editor.Profile.getConfig("android",n);null==i&&(i={path:""}),await Editor.Profile.setConfig("android",n,i,"local"),e.refresh()}},{label:Editor.I18n.t("preferences.menu.move_global"),enabled:"local"===e.types[n],async click(){const i=await Editor.Profile.getConfig("android",n,"local");await Editor.Profile.setConfig("android",n,i,"global"),await Editor.Profile.removeConfig("android",n,"local"),e.refresh()}}]})}}};async function ready(){component.el=this.$.program,(vm=new Vue(component)).androidNDK=await Editor.Profile.getConfig("android","androidNDK"),vm.androidSDK=await Editor.Profile.getConfig("android","androidSDK");for(const i of Object.keys(vm.types))await vm.refresh(i),vm.errorMap[i]=(0,utils_1.checkProgramConfig)(i,vm[i].path)}exports.ready=ready;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onAfterInit=exports.throwError=void 0;const fs_extra_1=require("fs-extra");async function onAfterInit(e,a,o){var t,s,r;const i=e.packages.ios.renderBackEnd={gles2:!1,gles3:!1,metal:!0};e.assetSerializeOptions["cc.EffectAsset"].glsl1=null===(t=i.gles2)||void 0===t||t,e.assetSerializeOptions["cc.EffectAsset"].glsl3=null===(s=i.gles3)||void 0===s||s,e.assetSerializeOptions["cc.EffectAsset"].glsl4=null===(r=i.metal)||void 0===r||r;const n=a.compileOptions;Object.keys(i).forEach(e=>{n.cMakeConfig[`CC_USE_${e.toUpperCase()}`]=i[e]});const c=e.packages.ios;n.platformParams.orientation=e.packages.ios.orientation,n.platformParams.bundleId=e.packages.ios.packageName,n.cMakeConfig.MACOSX_BUNDLE_GUI_IDENTIFIER=`set(MACOSX_BUNDLE_GUI_IDENTIFIER ${n.packageName})`,c.developerTeam&&(n.cMakeConfig.DEVELOPMENT_TEAM=`set(DEVELOPMENT_TEAM ${c.developerTeam})`)&&(n.platformParams.teamid=c.developerTeam),n.cMakeConfig.TARGET_IOS_VERSION=`set(TARGET_IOS_VERSION ${c.targetVersion||"12.0"})`,n.cMakeConfig.USE_PORTRAIT=!!c.orientation.portrait,n.cMakeConfig.CUSTOM_COPY_RESOURCE_HOOK=c.skipUpdateXcodeProject,n.platformParams.skipUpdateXcodeProject=c.skipUpdateXcodeProject,c.osTarget&&(void 0!==c.osTarget.simulator&&(n.platformParams.simulator=c.osTarget.simulator),void 0!==c.osTarget.iphoneos&&(n.platformParams.iphoneos=c.osTarget.iphoneos)),await fs_extra_1.outputJSON(a.paths.compileConfig,n);const p={packageName:e.packages.ios.packageName,orientation:e.packages.ios.orientation};o.__addStaticsInfo(p)}exports.throwError=!0,exports.onAfterInit=onAfterInit;
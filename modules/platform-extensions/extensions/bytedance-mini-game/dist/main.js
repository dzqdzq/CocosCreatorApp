"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");exports.methods={async"create-build-template"(){const e=(await Editor.Message.request("engine","query-engine-info")).typescript.path,t=(0,path_1.join)(e,"templates/bytedance-mini-game","build-template.json");if(!(0,fs_extra_1.existsSync)(t))return void console.error("build-template.json not exist!");const i={};Object.assign(i,(0,fs_extra_1.readJSONSync)(t));const n=(0,path_1.join)(Editor.Project.path,"build-templates"),a=i.templates||[];let s=!1;for(const t of a){const i=(0,path_1.join)(e,"templates/bytedance-mini-game",t),a=(0,path_1.join)(n,"bytedance-mini-game",t);if((0,fs_extra_1.existsSync)(a)){if(1===(await Editor.Dialog.warn(Editor.I18n.t("bytedance-mini-game.tips.overwriteTemplate",{file:t}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("bytedance-mini-game.tips.overwrite"),Editor.I18n.t("bytedance-mini-game.tips.cancel")],default:0,cancel:1})).response)continue}(0,fs_extra_1.copySync)(i,a),s=!0}if(s){const e=(0,path_1.join)(n,"templates-version.json");let t={"bytedance-mini-game":i.version};if((0,fs_extra_1.existsSync)(e)){const n=(0,fs_extra_1.readJSONSync)(e);n["bytedance-mini-game"]!==i.version&&(t=Object.assign({},n,t),(0,fs_extra_1.outputJSONSync)(e,t,{spaces:4}))}else(0,fs_extra_1.outputJSONSync)(e,t,{spaces:4});console.log(`bytedance-mini-game ${Editor.I18n.t("bytedance-mini-game.tips.createTemplateSuccess")}({link(${(0,path_1.join)(n,"bytedance-mini-game")})})`)}}};
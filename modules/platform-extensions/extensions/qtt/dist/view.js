"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.update=exports.ready=exports.buttonConfig=exports.template=exports.$=exports.style=exports.platformSettings=void 0;const const_1=require("./utils/const"),fs_1=require("fs");let settings;async function ready(n){let t=this;settings=await Editor.Profile.getConfig(const_1.PLATFORM_NAME,`options.${n.platform}`),settings=Object.assign({},exports.platformSettings,settings,n.packages[const_1.PLATFORM_NAME]),t.dispatch("update",`packages.${const_1.PLATFORM_NAME}`,settings),new(require("vue/dist/vue.js"))({el:t.$.root,data:function(){return settings},methods:{i18n:n=>Editor.I18n.t(const_1.PLATFORM_NAME+"."+n),onConfirm(n){let e=n.target,i=e.getAttribute("id");settings[i]=e.value,t.dispatch("update",`packages.${const_1.PLATFORM_NAME}.${i}`,settings[i]),verifyData(i,e.value,e)}}})}function verifyData(n,t,e){let i="1px solid #ff726e";switch(n){case"versionName":t?(i="",exports.platformSettings.versionNameValidity=""):exports.platformSettings.versionNameValidity=`${n} ${Editor.I18n.t("oppo-mini-game.tips.not_empty")}`;break;case"versionCode":t?(i="",exports.platformSettings.versionCodeValidity=""):exports.platformSettings.versionCodeValidity=`${n} ${Editor.I18n.t("oppo-mini-game.tips.not_empty")}`;break;case"package":if(t){/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/.test(t)?(i="",exports.platformSettings.packageValidity=""):exports.platformSettings.packageValidity=`${Editor.I18n.t("oppo-mini-game.tips.package_name_error")}`}else exports.platformSettings.packageValidity=`${Editor.I18n.t("oppo-mini-game.tips.package_name_error")}`;break;case"icon":"string"==typeof t&&fs_1.existsSync(t)?(i="",exports.platformSettings.iconValidity=""):exports.platformSettings.iconValidity="Icon Path"+Editor.I18n.t("oppo-mini-game.tips.icon_not_exist");break;default:console.debug("verifyData key:",n,t),i=""}e.style.border=i}async function update(n,t){t&&!t.startsWith(`packages.${const_1.PLATFORM_NAME}`)||(settings=Object.assign(settings,n.packages[const_1.PLATFORM_NAME]))}exports.platformSettings={runtimeVersion:"1.0.0",deviceOrientation:"portrait",statusbarDisplay:!1,startSceneAssetBundle:!1,resourceURL:"",workerPath:"",XHRTimeout:6e4,WSTimeout:6e4,uploadFileTimeout:6e4,downloadFileTimeout:6e4,cameraPermissionHint:"",userInfoPermissionHint:"",locationPermissionHint:"",albumPermissionHint:"",package:"com.qtt.cocos",icon:Editor.App.icon,versionName:Editor.App.version,versionCode:"1",packageValidity:"",iconValidity:"",versionNameValidity:"",versionCodeValidity:""},exports.style="\n    .root ui-prop {\n        margin-bottom: 4px;\n    }\n    .root ui-section {\n        margin-bottom: 4px;\n    }\n\n    .required {\n        position: absolute;\n        left: -2px;\n        color: #ff726e;\n    },\n\n    .redText{\n        color: ff726e;\n        font-size:10px;\n    }\n\n    ui-prop > *[slot='content'] {\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n\n                .build-prop {\n                    display: flex;\n                    flex: 1;\n                }\n\n                > ui-select,\n                > ui-input,\n                > ui-color,\n                > ui-num-input,\n                > ui-num-input,\n                > ui-file,\n                > ui-section {\n                    flex: 1;\n                }\n\n                > ui-image {\n                    width: 60px;\n                    height: 60px;\n                    border: 1px dashed;\n                }\n            }\n",exports.$={root:".root"},exports.template=`\n<div class="root" @confirm="onConfirm">\n    <ui-prop tooltip="i18n:${const_1.PLATFORM_NAME}.options.start_scene_asset_bundle_tooltip">\n        <ui-label slot="label">i18n:${const_1.PLATFORM_NAME}.options.start_scene_asset_bundle</ui-label>\n        <ui-checkbox id="startSceneAssetBundle" slot="content" :value="startSceneAssetBundle"></ui-checkbox>\n    </ui-prop>\n    <ui-prop tooltip="i18n:${const_1.PLATFORM_NAME}.options.resource_url_hint">\n        <ui-label slot="label">i18n:${const_1.PLATFORM_NAME}.options.resource_url</ui-label>\n        <ui-input id="resourceURL" slot="content" :value="resourceURL"></ui-input>\n    </ui-prop>\n    \x3c!--游戏版包名--\x3e\n    <span class="required">*</span>\n    <ui-prop tooltip="i18n:${const_1.PLATFORM_NAME}.options.package_hint" >\n        <ui-label slot="label"  v-bind:class="{'required': packageValidity}" i18n>${const_1.PLATFORM_NAME}.options.package</ui-label>\n        <div slot="content" >\n            <ui-input  id="package" slot="content" :value="package"></ui-input>\n        </div>\n    </ui-prop>\n\n    <ui-prop  v-if="packageValidity">\n        <span  slot="content" style="color: #ff726e">{{packageValidity}}</span>\n    </ui-prop>\n\n    \x3c!--桌面图标--\x3e\n    <span class="required">*</span>\n    <ui-prop>\n        <ui-label slot="label"  v-bind:class="{'required': iconValidity}" i18n>${const_1.PLATFORM_NAME}.options.desktop_icon</ui-label>\n        <div slot="content">\n            <ui-file id="icon" extensions="png"\n                :value="icon"\n                :title="iconValidity"\n            ></ui-file>\n        </div>\n    </ui-prop>\n\n    <ui-prop  v-if="iconValidity">\n        <span slot="content" style="color: #ff726e">{{iconValidity}}</span>\n    </ui-prop>\n\n\n    \x3c!--游戏版本名称--\x3e\n    <span class="required">*</span>\n    <ui-prop >\n        <ui-label slot="label"  v-bind:class="{'required': versionNameValidity}" i18n>${const_1.PLATFORM_NAME}.options.version_name</ui-label>\n        <div slot="content">\n            <ui-input id="versionName" slot="content" :value="versionName"></ui-input>\n        </div>\n    </ui-prop>\n\n    <ui-prop  v-if="versionNameValidity">\n        <span slot="content" style="color: #ff726e">{{versionNameValidity}}</span>\n    </ui-prop>\n\n    \x3c!--游戏版本号--\x3e\n    <span class="required">*</span>\n    <ui-prop >\n        <ui-label slot="label" v-bind:class="{'required': versionCodeValidity}" i18n>${const_1.PLATFORM_NAME}.options.version_number</ui-label>\n        <div slot="content">\n            <ui-input id="versionCode" slot="content" :value="versionCode"></ui-input>\n        </div>\n    </ui-prop>\n\n    <ui-prop  v-if="versionCodeValidity">\n        <span slot="content" style="color: #ff726e">{{versionCodeValidity}}</span>\n    </ui-prop>\n</div>\n`,exports.buttonConfig={configs:{make:{label:`i18n:${const_1.PLATFORM_NAME}.make.label`,hookHandle:"make"},build:{label:`i18n:${const_1.PLATFORM_NAME}.build.label`}}},exports.ready=ready,exports.update=update;
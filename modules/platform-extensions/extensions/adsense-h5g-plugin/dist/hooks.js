"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onAfterBuild=exports.throwError=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),PACKAGE_NAME="adsense-h5g-plugin";exports.throwError=!0;const onAfterBuild=async function(e,t){if(!await Editor.Profile.getProject(PACKAGE_NAME,"enableAdsense"))return;const r=e.packages[PACKAGE_NAME],o=path_1.join(t.paths.dir,"index.html"),a=r.enableTestAd?'data-adbreak-test="on"':"";let s="";s="other"===r.AFPHostPropertyCode&&r.otherAFPHostPropertyCode?`data-ad-host="${r.otherAFPHostPropertyCode}"`:`data-ad-host="${r.AFPHostPropertyCode}"`;let n=await fs_extra_1.readFile(o,"utf8");n=n.replace("</head>",function(e){return`\n        <script async\n            data-ad-client="${r.adsensePropertyCode}"\n            ${a}\n            ${s}\n            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">\n        <\/script>\n        </head>\n        `}),await fs_extra_1.writeFile(o,n)};exports.onAfterBuild=onAfterBuild;
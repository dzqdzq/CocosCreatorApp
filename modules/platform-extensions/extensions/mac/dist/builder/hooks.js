"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.throwError=void 0,exports.onAfterInit=onAfterInit,exports.onAfterBundleInit=onAfterBundleInit;const utils_1=require("./utils");async function onAfterInit(e,a,t){const s=e.packages.mac.renderBackEnd={gles2:!1,gles3:!1,metal:!0};var c=e.packages.mac;const o=e.cocosParams;o.cMakeConfig.TARGET_OSX_VERSION=`set(TARGET_OSX_VERSION ${c.targetVersion||"10.14"})`,o.cMakeConfig.CUSTOM_COPY_RESOURCE_HOOK=c.skipUpdateXcodeProject,o.cMakeConfig.MACOSX_BUNDLE_GUI_IDENTIFIER=`set(MACOSX_BUNDLE_GUI_IDENTIFIER ${c.packageName})`,o.platformParams.skipUpdateXcodeProject=c.skipUpdateXcodeProject,o.executableName=(0,utils_1.executableNameOrDefault)(o.projectName,e.packages.mac.executableName),"CocosGame"===o.executableName&&console.warn(`The provided project name "${o.projectName}" is not suitable for use as an executable name. 'CocosGame' is applied instead.`),o.cMakeConfig.CC_EXECUTABLE_NAME=`set(CC_EXECUTABLE_NAME "${o.executableName}")`,o.platformParams.bundleId=c.packageName,Object.keys(s).forEach(e=>{o.cMakeConfig["CC_USE_"+e.toUpperCase()]=s[e]}),o.cMakeConfig.USE_SERVER_MODE=`set(USE_SERVER_MODE ${e.packages.native.serverMode?"ON":"OFF"})`;c=Number(e.packages.native.netMode),c=e.packages.native.netMode=isNaN(c)||2<c||c<0?0:c;o.cMakeConfig.NET_MODE=`set(NET_MODE ${c})`,a.staticsInfo.B100005=e.packages.mac.packageName}function onAfterBundleInit(e){var a=e.packages.mac.renderBackEnd,a=(e.assetSerializeOptions["cc.EffectAsset"].glsl1=a.gles2??!0,e.assetSerializeOptions["cc.EffectAsset"].glsl3=a.gles3??!0,e.assetSerializeOptions["cc.EffectAsset"].glsl4=a.metal??!0,Number(e.packages.native.netMode)),a=e.packages.native.netMode=isNaN(a)||2<a||a<0?0:a;e.buildScriptParam.flags.SERVER_MODE=!!e.packages.native.serverMode,e.buildScriptParam.flags.NET_MODE=e.packages.native.netMode}exports.throwError=!0;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateSeparateEngine=generateSeparateEngine;const fs_1=require("fs"),path_1=require("path");async function generateSeparateEngine(e){var e=e?(0,path_1.join)(e,"app"):(0,path_1.join)(__dirname,"../../../../../"),r=(0,path_1.join)(e,"../resources/3d/engine"),e=require((0,path_1.join)(e,"builtin/builder/dist/worker/builder/asset-handler/script/separate-engine"))["buildCocos"],e=await e({engine:r,platform:require("../package.json").name,platformType:"WECHAT",pluginFeatures:"default",pluginName:"cocos",useCacheForce:!1,signatureProvider:require("../static/cocos/signature.json").provider});let n=0;return function r(a){var e=(0,fs_1.statSync)(a);e.isDirectory()?(0,fs_1.readdirSync)(a).forEach(e=>{r((0,path_1.join)(a,e))}):n+=e.size}(e.plugin),4194304<n?console.error("微信引擎插件包体大小超出限制 4 MB，请检查代码是否过大"):console.log("微信引擎插件包体大小："+(n/1024/1024).toFixed(2)+" M"),e}
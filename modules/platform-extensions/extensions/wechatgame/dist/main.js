"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");exports.methods={async"create-build-template"(){const e=(await Editor.Message.request("engine","query-engine-info")).typescript.path,t=path_1.join(e,"templates/wechatgame","build-template.json");if(!fs_extra_1.existsSync(t))return void console.error("build-template.json not exist!");const a={};Object.assign(a,fs_extra_1.readJSONSync(t));const s=a.templates||[];let o=!1;for(const t of s){const a=path_1.join(e,"templates/wechatgame",t),s=path_1.join(Editor.Project.path,"build-templates/wechatgame",t);if(fs_extra_1.existsSync(s)){if(1===(await Editor.Dialog.warn(Editor.I18n.t("wechatgame.tips.overwriteTemplate",{file:t}),{title:Editor.I18n.t("builder.create_user_template"),buttons:[Editor.I18n.t("wechatgame.tips.overwrite"),Editor.I18n.t("wechatgame.tips.cancel")],default:0,cancel:1})).response)continue}fs_extra_1.copySync(a,s),o=!0}if(o){const e=path_1.join(Editor.Project.path,"build-templates","templates-version.json");let t={wechatgame:a.version};if(fs_extra_1.existsSync(e)){const s=fs_extra_1.readJSONSync(e);s.wechatgame!==a.version&&(t=Object.assign({},s,t),fs_extra_1.outputJSONSync(e,t,{spaces:4}))}else fs_extra_1.outputJSONSync(e,t,{spaces:4});console.log(`wechatgame ${Editor.I18n.t("wechatgame.tips.createTemplateSuccess")}({link(${path_1.join(Editor.Project.path,"build-templates/wechatgame")})})`)}}};
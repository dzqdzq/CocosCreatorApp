"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTrimRect=exports.getPixiel=exports.clamp=exports.linkToAssetTarget=exports.i18nTranslate=exports.getDependUUIDList=void 0;const electron_i18n_1=__importDefault(require("@base/electron-i18n"));function getDependUUIDList(e){if("string"==typeof e){return e.match(/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}(@[a-z0-9]+){0,}/g)||[]}const t=new cc.deserialize.Details;t.reset();cc.deserialize(e,t,{createAssetRefs:!0,ignoreEditorOnly:!0});return t.uuidList}function i18nTranslate(e,...t){let r=electron_i18n_1.default.translation(e);if("object"==typeof t[0]){const e=t[0],i=r.match(/{(\w+)}/g);if(i)for(const t of i){const i=t.substr(1,t.length-2);r=r.replace(t,e[i])}}return r}function linkToAssetTarget(e){return`{asset(${e})}`}function clamp(e,t,r){return e<t?t:e>r?r:e}function getPixiel(e,t,r,i){const n=4*t+r*i*4;return{r:e[n],g:e[n+1],b:e[n+2],a:e[n+3]}}function getTrimRect(e,t,r,i){const n=i;let o,s,a=t,l=r,c=0,f=0;for(s=0;s<r;s++)for(o=0;o<t;o++)if(getPixiel(e,o,s,t).a>=n){l=s,s=r;break}for(s=r-1;s>=l;s--)for(o=0;o<t;o++)if(getPixiel(e,o,s,t).a>=n){f=s-l+1,s=0;break}for(o=0;o<t;o++)for(s=l;s<l+f;s++)if(getPixiel(e,o,s,t).a>=n){a=o,o=t;break}for(o=t-1;o>=a;o--)for(s=l;s<l+f;s++)if(getPixiel(e,o,s,t).a>=n){c=o-a+1,o=0;break}return[a,l,c,f]}exports.getDependUUIDList=getDependUUIDList,exports.i18nTranslate=i18nTranslate,exports.linkToAssetTarget=linkToAssetTarget,exports.clamp=clamp,exports.getPixiel=getPixiel,exports.getTrimRect=getTrimRect;
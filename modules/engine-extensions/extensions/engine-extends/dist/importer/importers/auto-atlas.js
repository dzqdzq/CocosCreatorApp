"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const asset_db_1=require("@editor/asset-db"),texture_base_1=require("./texture-base"),migrations_1=require("./image/migrations"),defaultAutoAtlasUserData={maxWidth:1024,maxHeight:1024,padding:2,allowRotation:!0,forceSquared:!1,powerOfTwo:!1,algorithm:"MaxRects",format:"png",quality:80,contourBleed:!0,paddingBleed:!0,filterUnused:!0,removeTextureInBundle:!0,removeImageInBundle:!0,removeSpriteAtlasInBundle:!0,compressSettings:{},textureSetting:texture_base_1.makeDefaultTextureBaseAssetUserData()};class AutoAtlasImporter extends asset_db_1.Importer{get version(){return"1.0.6"}get name(){return"auto-atlas"}get assetType(){return"cc.SpriteAtlas"}get migrations(){return[{version:"1.0.5",migrate:migrations_1.migratePlatformSettings},{version:"1.0.6",migrate:e=>{const t=e.userData;["removeTextureInBundle","removeImageInBundle","removeSpriteAtlasInBundle"].forEach(e=>{"boolean"!=typeof t[e]&&(t[e]=!1)})}}]}async import(e){const t=e.userData;Object.keys(defaultAutoAtlasUserData).forEach(e=>{e in t||(t[e]=defaultAutoAtlasUserData[e])});const r=new cc.SpriteAtlas;return await e.saveToLibrary(".json",EditorExtends.serialize(r)),!0}}exports.default=AutoAtlasImporter;
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const gltf_1=__importDefault(require("./gltf")),fbx_to_gltf_1=require("./gltf/fbx-to-gltf"),fbx_converter_1=require("./utils/fbx-converter"),model_convert_routine_1=require("./utils/model-convert-routine");class FbxImporter extends gltf_1.default{get version(){return super.version}get name(){return"fbx"}async getGltfFilePath(e){var t,r,o;const i=e.userData;let n;if(i.legacyFbxImporter)n=await fbx_to_gltf_1.fbxToGlTf(e,this.assetDB,this.version);else{const s={};s.unitConversion=null===(t=i.fbx)||void 0===t?void 0:t.unitConversion,s.animationBakeRate=null===(r=i.fbx)||void 0===r?void 0:r.animationBakeRate,s.preferLocalTimeSpan=null===(o=i.fbx)||void 0===o?void 0:o.preferLocalTimeSpan;const a=fbx_converter_1.createFbxConverter(s),l=await model_convert_routine_1.modelConvertRoutine("fbx.FBX-glTF-conv",e,this.assetDB,this.version,a);if(!l)throw new Error(`Failed to import ${e.source}`);n=l}return i.meshOptimizer?await this.getOptimizerPath(e,n,i.meshOptimizerOptions||{}):n}}exports.default=FbxImporter;
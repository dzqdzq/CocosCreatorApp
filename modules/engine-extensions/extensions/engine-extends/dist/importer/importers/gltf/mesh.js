"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GltfMeshImporter=void 0;const asset_db_1=require("@editor/asset-db"),reader_manager_1=require("./reader-manager"),utils_1=require("../../utils");class GltfMeshImporter extends asset_db_1.Importer{get version(){return"1.1.0"}get name(){return"gltf-mesh"}get assetType(){return"cc.Mesh"}get instantiation(){return".mesh"}async import(e){var t;if(!e.parent)return!1;const r=(await reader_manager_1.glTfReaderManager.getOrCreate(e.parent)).createMesh(e.userData.gltfIndex);r.allowDataAccess=null===(t=e.parent.userData.allowMeshDataAccess)||void 0===t||t,0!==r.data.byteLength&&(r._setRawAsset(".bin"),await e.saveToLibrary(".bin",Buffer.from(r.data)));const a=EditorExtends.serialize(r);await e.saveToLibrary(".json",a);const s=utils_1.getDependUUIDList(a);return e.setData("depends",s),!0}}exports.GltfMeshImporter=GltfMeshImporter;
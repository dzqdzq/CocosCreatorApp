"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeBundleConfig=void 0;const platformConfigs={native:{platforms:["android","ohos","open-harmonyos","huawei-agc","ios","windows","mac","linux","xr-meta","xr-huaweivr","xr-pico","xr-rokid","xr-monado","xr-spaces","xr-seed","ar-android","ar-ios","xr-gsxr","xr-yvr","xr-htc","xr-iqiyi","xr-skyworth","xr-ffalcon","xr-nreal","xr-inmo","xr-lenovo"],platformTypeInfo:{icon:"mobile",displayName:"i18n:builder.asset_bundle.native"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json"]}},miniGame:{platforms:["alipay-mini-game","taobao-creative-app","taobao-mini-game","bytedance-mini-game","oppo-mini-game","huawei-quick-game","vivo-mini-game","xiaomi-quick-game","baidu-mini-game","wechatgame","link-sure","qtt","cocos-play"],platformTypeInfo:{icon:"mini-game",displayName:"i18n:builder.asset_bundle.minigame"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json","zip","subpackage"]},minOptionList:{compressionType:["none","merge_dep","merge_all_json","zip"]}},web:{platforms:["fb-instant-games","web-desktop","web-mobile"],platformTypeInfo:{icon:"html5",displayName:"i18n:builder.asset_bundle.web"},maxOptionList:{compressionType:["none","merge_dep","merge_all_json","zip"]},minOptionList:{compressionType:["none","merge_dep","merge_all_json"]}}},platformTypeMap={};function mergeBundleConfig(e,o,i){const n={};Object.keys(platformTypeMap).forEach(i=>{const r=platformTypeMap[i],a={compressionType:e[i]||"merge_dep",isRemote:o[i]||!1},s=JSON.stringify(a);n[r]?n[r][s]?n[r][s].platforms.push(i):n[r][s]={config:a,platforms:[i]}:n[r]={[s]:{config:a,platforms:[i]}}});const r={displayName:i,configs:{}};return Object.keys(n).forEach(e=>{const o=Object.values(n[e]).sort((e,o)=>o.platforms.length-e.platforms.length);if(!o.length)return;if("miniGame"!==e){const i=o.shift().config;if(r.configs[e]={preferredOptions:i},!o.length)return}else r.configs[e]={configMode:"overwrite"};const i={};o.forEach(o=>{o.platforms.forEach(n=>{("merge_dep"!==o.config.compressionType||o.config.isRemote||"miniGame"===e)&&(i[n]=o.config)})}),r.configs[e].overwriteSettings=i}),r}Object.keys(platformConfigs).forEach(e=>{platformConfigs[e].platforms.forEach(o=>{platformTypeMap[o]=e})}),exports.mergeBundleConfig=mergeBundleConfig;
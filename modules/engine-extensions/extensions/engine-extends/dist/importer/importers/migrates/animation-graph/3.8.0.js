"use strict";var __rest=this&&this.__rest||function(i,e){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(n[a]=i[a]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(i);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(i,a[t])&&(n[a[t]]=i[a[t]])}return n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrateAnimationGraph_3_8_0=void 0;const TYPE_ID_BINARY_CONDITION="cc.animation.BinaryCondition";function migrateAnimationGraph_3_8_0(i){migrateTransitionBindings(i)}function migrateTransitionBindings(i){const e=(()=>{let e;if(i.visitTypedObject("cc.animation.AnimationGraph",i=>{if(e)throw new Error("Migration error: the old serialized animation graph assets has more than one animation graph objects!");e=i}),!e)throw new Error("Migration error: the old serialized animation graph assets has no any animation graph object!");return e})();var n;i.visitTypedObject(TYPE_ID_BINARY_CONDITION,i=>{var n,a;const{lhs:t,rhs:r}=i,o=__rest(i,["lhs","rhs"]);if(""!==(null!==(n=r.variable)&&void 0!==n?n:""))throw new Error("Migration error: the old serialized binary condition is asserted to "+`have only constant value but instead saw ${r.variable}`);let s=TCBindingValueType.FLOAT;const l=e._variables[t.variable];if(l){let i;(i=i||(i={}))[i.FLOAT=0]="FLOAT",i[i.INTEGER=3]="INTEGER";const e=0;let n=!1;if("cc.animation.PlainVariable"===l.__type__){const t=null!==(a=l._type)&&void 0!==a?a:e;t===i.FLOAT?(s=TCBindingValueType.FLOAT,n=!0):t===i.INTEGER&&(s=TCBindingValueType.INTEGER,n=!0)}n||console.debug(`The condition's lhs variable ${t.variable} was previously `+`bound to a variable with mismatched type: ${JSON.stringify(l,void 0,2)}`)}else console.debug(`The condition's lhs variable ${t.variable} was previously not bound.`);const c=Object.assign(Object.assign({},o),{lhs:t.value,lhsBinding:{__type__:"cc.animation.TCVariableBinding",type:s,variableName:t.variable},rhs:i.rhs.value});clearEntries(i),Object.assign(i,c)})}var TCBindingValueType;function clearEntries(i){for(const e in i)delete i[e]}exports.migrateAnimationGraph_3_8_0=migrateAnimationGraph_3_8_0,function(i){i[i.FLOAT=0]="FLOAT",i[i.INTEGER=3]="INTEGER"}(TCBindingValueType||(TCBindingValueType={}));
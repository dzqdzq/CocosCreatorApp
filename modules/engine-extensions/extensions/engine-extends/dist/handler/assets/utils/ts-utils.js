"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultScriptFileNameCheckConfig=exports.ScriptNameCheckerManager=exports.ScriptNameChecker=void 0;class ScriptNameChecker{classNameStringFormat;requiredCamelCaseClassName;static camelFormatReg=/@ccclass([^<]*)(<%CamelCaseClassName%>)/;static classNameFormatReg=/@ccclass\(['"]([^'"]*)['"]\)/;static commentsReg=/(\n[^\n]*\/\*[\s\S]*?\*\/)|(\n[^\n]*\/\/(?:[^\r\n]|\r(?!\n))*)/g;static invalidClassNameReg=/^[\p{L}\p{Nl}_$][\p{L}\p{Nl}\p{Nd}\p{Mn}\p{Mc}\p{Pc}\$_]*$/u;static getDefaultClassName(){return DefaultClassName}constructor(e,a){this.requiredCamelCaseClassName=e,this.classNameStringFormat=a}async isValid(e){let a="";var t;return(a=this.requiredCamelCaseClassName?(t=this.getValidCamelCaseClassName(e),this.classNameStringFormat.replace("<%CamelCaseClassName%>",t).trim()||t):(t=ScriptNameChecker.getValidClassName(e),this.classNameStringFormat.replace("<%UnderscoreCaseClassName%>",t).trim()||t))?{state:""}:{state:"i18n:assets.operate.errorScriptClassName"}}async getValidFileName(e){var a=e=(e=e.trim().replace(/[^a-zA-Z0-9_-]/g,""))&&!isFinite(e)?e:"NewComponent";let t=0;for(;(await this.isValid(e)).state;){if(1e3<t)return e;e=a+("-"+(++t).toString().padStart(3,"0"))}return e}static getValidClassName(e){e=(e=e.trim().replace(/^[^a-zA-Z_]+/g,"")).match(/[a-zA-Z0-9_]+/g);return e?e.join("_"):""}getValidCamelCaseClassName(e){e=(e=e.trim().replace(/^[^a-zA-Z]+/g,"")).match(/[a-zA-Z0-9]+/g);return e?e.filter(Boolean).map(e=>e[0].toLocaleUpperCase()+e.substr(1)).join(""):""}}exports.ScriptNameChecker=ScriptNameChecker;class ScriptNameCheckerManager{static async getScriptChecker(e){var a=e.match(ScriptNameChecker.classNameFormatReg),a=a&&a[1]?a[1]:"";return new ScriptNameChecker(ScriptNameChecker.camelFormatReg.test(e),a)}}exports.ScriptNameCheckerManager=ScriptNameCheckerManager;const DefaultClassName="NewComponent";exports.DefaultScriptFileNameCheckConfig={regStr:ScriptNameChecker.invalidClassNameReg.toString(),failedType:"info",failedInfo:"i18n:engine-extends.importers.script.invalidClassName"};
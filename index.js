"use strict";require("./lib/require");const{existsSync:existsSync}=require("fs"),{join:join}=require("path"),setting=require("@editor/setting"),{app:app}=require("electron");app.disableDomainBlockingFor3DAPIs(),app.commandLine.appendSwitch("ignore-gpu-blacklist"),app.commandLine.appendSwitch("enable-webgl2-compute-context"),"win32"===require("os").platform()&&app.commandLine.appendSwitch("use-angle","OpenGL"),existsSync(join(__dirname,"./lib.asar"))?require("./lib.asar/dist"):require("./lib/dist");let _uncaughtExceptionFunc=e=>{global.Editor&&Editor.Metrics.trackException({code:-1,message:e.message}),process.send&&process.send({channel:"editor-error",message:e.message,stack:e.stack}),console.error(e)};process.on("uncaughtException",_uncaughtExceptionFunc),async function(){if(!setting.PATH.PROJECT){const e=require("./dashboard/startup");return await e.app(),void await e.validation(setting.dev)}const e=existsSync(join(__dirname,"./lib.asar"))?require("./lib.asar/dist/startup").Startup:require("./lib/dist/startup").Startup;if(setting.args.build){await e.manager(!0),await e.package();const i={};setting.args.build.split(";").forEach(e=>{if(!e)return;const t=e.split("=");i[t[0].trim()]=t[1]});const t=await e.build(i,setting.args.dev);app.exit(t)}else await e.window(),await e.manager(!!setting.args.nologin),await e.package()}();
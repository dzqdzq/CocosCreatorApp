"use strict";require("./lib/require");const{existsSync:existsSync}=require("fs"),{join:join}=require("path"),setting=require("@editor/setting"),{app:app}=require("electron");app.disableDomainBlockingFor3DAPIs(),app.commandLine.appendSwitch("ignore-gpu-blacklist"),existsSync(join(__dirname,"./lib.asar"))?require("./lib.asar/dist"):require("./lib/dist");let _uncaughtExceptionFunc=a=>{global.Editor&&Editor.Metrics.trackException({code:-1,message:a.message}),process.send&&process.send({channel:"editor-error",message:a.message,stack:a.stack})};process.on("uncaughtException",_uncaughtExceptionFunc),async function(){if(!setting.PATH.PROJECT){const a=existsSync(join(__dirname,"./dashboard.asar"))?require("./dashboard.asar/startup"):require("./dashboard/startup");return await a.app(),await a.window(!0),await a.tray(),void await a.listener()}const a=existsSync(join(__dirname,"./lib.asar"))?require("./lib.asar/dist/startup").Startup:require("./lib/dist/startup").Startup;if(setting.args.build){await a.manager(!0),await a.package();const i={};setting.args.build.split(";").forEach(a=>{if(!a)return;const e=a.split("=");i[e[0].trim()]=e[1]});const e=await a.build(i,setting.args.dev);app.exit(e)}else await a.window(),await a.manager(!!setting.args.nologin),await a.package()}();
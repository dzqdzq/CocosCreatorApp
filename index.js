"use strict";require("@editor/creator");const{existsSync:existsSync}=require("fs"),{join:join}=require("path"),setting=require("@editor/setting"),{app:app,crashReporter:crashReporter}=require("electron");app.disableDomainBlockingFor3DAPIs(),app.commandLine.appendSwitch("ignore-gpu-blacklist");let _uncaughtExceptionFunc=e=>{global.Editor&&Editor.Metrics.trackException({code:-1,message:e.message}),process.send&&process.connected&&process.send({channel:"editor-error",message:e.message,stack:e.stack}),console.error(e)};process.on("uncaughtException",_uncaughtExceptionFunc),function(){if(setting.PATH.PROJECT){const e=join(setting.args.project,"temp/crash");app.setPath("crashDumps",e),crashReporter.start({uploadToServer:!1})}}(),async function(){if(!setting.PATH.PROJECT){const e=require("./dashboard/startup");return await e.app(),void await e.validation(setting.dev)}const e=require("@editor/creator/dist/startup").Startup;if(setting.args.build){await e.manager(!0),await e.package();const t={};setting.args.build.split(";").forEach(e=>{if(!e)return;const r=e.split("=");t[r[0].trim()]=r[1]});const r=await e.build(t,setting.args.dev);app.exit(r)}else await Promise.all([e.manager(!!setting.args.nologin),e.window()]),await e.package()}();
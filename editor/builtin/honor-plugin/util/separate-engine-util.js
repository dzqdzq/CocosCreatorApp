let e=require("path"),o=require("fs-extra"),i=(require("glob"),require("crypto"));let n,r,t,s,c,a,d,g=!1,u={cocos:{provider:"com.cocos.creator.engine2d",version:Editor.versions.CocosCreator,path:"cocos"}},m={main:"cocos2d-runtime.js"},p={provider:"com.cocos.creator.engine2d",signature:[{path:"cocos2d-runtime.js",md5:""}]};module.exports={gatherInfo(o){d=o.gameConfig,g=o.customConfig.separateEngineMode;let i=o.buildPath;n=e.join(i,"cocos"),r=e.join(i,"src","cocos2d-runtime.js"),t=e.join(n,"cocos2d-runtime.js"),a=e.join(i,"game.js"),s=e.join(n,"plugin.json"),c=e.join(n,"signature.json")},organizeResources(){if(!g)return;Editor.info(Editor.T("honor-minigame.separate_engine_begin_hint")),o.existsSync(n)||o.ensureDirSync(n),o.moveSync(r,t);let e=o.readFileSync(t);p.signature[0].md5=i.createHash("md5").update(e).digest("hex"),o.writeJSONSync(s,m),o.writeJSONSync(c,p),d.plugins=u,Editor.info(Editor.T("honor-minigame.separate_engine_end_hint"))},pack(){}};
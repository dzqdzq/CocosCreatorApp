const e="project://honor-minigame.json";let i=require("./util/cpk-util.js");module.exports={name:Editor.T("honor-minigame.platform_name"),platform:"honor-minigame",extends:"runtime",buttons:[Editor.Builder.DefaultButtons.Build,{label:Editor.T("BUILDER.play"),message:"play"}],messages:{"script-build-finished":function(i,t){let o=Editor.Profile.load(e);t.settings.server=o.get("tinyPackageServer")||"",i.reply()},"build-finished":async function(e,t){try{if(!i.initHonorProject(t))return Editor.error("init game project failed"),e.reply(),void 0;let o=await i.gatherInfo(e,t);if(!1===o)return e.reply(),void 0;if(!1===(o=await i.organizeResources(e)))return e.reply(),void 0;await i.pack(e)}catch(i){e.reply(i)}},play:(e,i)=>{Editor.Panel.open("honor-minigame.qrcode",i)}},delPattern:function(e){let i=require("path"),t=e.dest;return[i.join(t,"**/*"),`!${i.join(t,"node_modules")}`,`!${i.join(t,"node_modules","**/*")}`,`!${i.join(t,"package.json")}`,`!${i.join(t,"package-lock.json")}`]},md5:{globalIgnore:function(){return[/.*/]}},buildStart:function(i){let t=Editor.Profile.load(e);i.startSceneAssetBundle=t.get("packFirstScreenRes")||!1,i.separateEngineMode=t.get("separateEngineMode")||!1},settings:Editor.url("packages://honor-minigame/build-ui.js")};
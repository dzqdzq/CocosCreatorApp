const e=require("path"),r=(require("fs"),require("gulp")),i=(require("gulp-sourcemaps"),require("babelify")),t=require("browserify"),s=require("vinyl-source-stream"),o=require("gulp-uglify"),n=require("vinyl-buffer"),{createBrotliCompress:u}=require("zlib");require("async");const p={build:async function(u){let{rootPath:p,dstPath:a,isDebug:l}=u;if(!p)throw new Error("Please specify the jsbAdapter path");console.time("build jsb-adapter"),await new Promise(u=>{(function(u,p,a,l){let d=e.basename(p);p=e.dirname(p);let b=t(u);a&&a.forEach(function(e){b.exclude(e)});let c=require("@babel/preset-env");return!0===l?b.transform(i,{presets:[c]}).bundle().on("error",function(e){Editor.error(e.message),this.emit("end")}).pipe(s(d)).pipe(n()).pipe(r.dest(p)):b.transform(i,{presets:[c]}).bundle().on("error",function(e){Editor.error(e.message),this.emit("end")}).pipe(s(d)).pipe(n()).pipe(o()).pipe(r.dest(p))})(p,a,void 0,l).on("end",u)}),console.timeEnd("build jsb-adapter")}};module.exports=p;
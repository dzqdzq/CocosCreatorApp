"use strict";const e=require("fire-fs"),t=require("fire-path");let s=new Map;module.exports=class extends Editor.metas.asset{static version(){return"1.0.2"}static defaultType(){return"json"}import(r,i){e.readJson(r,(e,a)=>{if(e)return i(e);let o=new cc.JsonAsset;o.name=t.basenameNoExt(r);try{o.json=a}catch(e){let t=`${e}, file: ${this._assetdb.fspathToUrl(r)}`;return s.set(this.uuid,t),Editor.error(t),i()}let u=s.get(this.uuid);u&&(Editor.clearLog(u),s.delete(this.uuid)),this._assetdb.saveAssetToLibrary(this.uuid,o),i()})}};
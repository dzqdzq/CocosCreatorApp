# Electron base ipc

Building on top of Electron's IPC, this module provides a simple wrapper to reduce IPC data overhead within the same process using event forwarding. 
Additionally, it introduces methods for sending callbacks.

---

## Objects

---

### event

A simple event encapsulation during message transmission..

- `event.senderType`: (`string`) The type of process that sent the message, `browser` | `renderer`.
- `event.reply`: (`Function`) If the message allows callbacks, running this method executes the sender's callbacks.

---

## Browser Process & Renderer Process

---

### ipc.on(eventName, listener)

- `eventName`: (`string` | `symbol`) The name of the message to listen for.
- `listener`: (`Function`) The message handler.

Listen for and handle a specified message.

```typescript
ipc.on('test', (event, ...args) => {
    console.log(args);
    event.reply(new Error('The listener is being stubborn and insists on returning an error.'), ...args);
});
```

---

### ipc.once(eventName, listener)

- `eventName`: (`string` | `symbol`) The name of the message to listen for.
- `listener`: (`Function`) The message handler.

Listen for and handle a specified message only once.

```typescript
ipc.once('test', (event, ...args) => {
    console.log(args);
    event.reply(new Error('The listener is being stubborn and insists on returning an error.'), ...args);
});
```

---

### ipc.removeListener(eventName, listener)

- `eventName`: (`string` | `symbol`) The name of the message to remove listening for.
- `listener`: (`Function`) The message handler.

Remove listening for a specified message.

```typescript
const callback = (event, ...args) => {
    console.log('this is test');
};
ipc.on('test', callback);
// ...
ipc.removeListener('test', callback);
```

---

### ipc.removeAllListeners(eventName)

- `eventName`: (`string` | `symbol`) The name of the message to remove listening for.

Remove listening for all message handlers.

```typescript 
ipc.on('test', (event, ...args) => {
    console.log('this is test 001');
});

ipc.on('test', (event, ...args) => {
    console.log('this is test 002');
});

ipc.removeAllListeners('test');
```

---

### ipc.emit(eventName, ..args)

- `eventName`: (`string` | `symbol`) The name of the message to emit.
- `...args`: (`any[]`) Arguments.

Trigger listeners for a message in the browser process itself.

```typescript
ipc.emit('message', 1, 2)
   .callback((error, data) => {
       if (error) {
           console.error(error);
           return;
       }
       console.log(data);
    })
    .timeout(-1);
```

---

### ipc.registerChannel(channel)

- `channel`: (`string`) The channel name.

Register an IPC channel. Messages sent through this channel will directly target the corresponding process,
bypassing the main process for forwarding.

```typescript
ipc.registerChannel('test');
```

---

### ipc.unregisterChannel(channel)

- `channel`: (`string`) The channel name.

Unregister an IPC channel listener.

```typescript
ipc.unregisterChannel('test');
```

---

### ipc.sendToChannel(channel, eventName, ...args)

- `channel`: (`string`) The channel name.
- `eventName`: (`string` | `symbol`) The name of the message.
- `...args`: (`any[]`) Arguments.

Send a message directly to a specified location via a channel, reducing the number of IPC hops.

```typescript
ipc.sendToChannel('test', 'test-message', 1);
```

---

## Browser Process (Only)

---

### ipc.broadcast(eventName, ...args)

- `eventName`: (`string` | `symbol`) The name of the message to broadcast.
- `...args`: (`any[]`) Arguments.

Broadcast a message to all windows.

```typescript 
ipc.broadcast('test', (message, ...args) => {
    console.log(...args);
});
```

---

## Renderer Process (Only)

---

### ipc.send(eventName, ..args)

- `eventName`: (`string` | `symbol`) The name of the message to send.
- `...args`: (`any[]`) Arguments.

Send a message to listeners in the main process.

```typescript
ipc.send('test', 1, 2)
   .callback((error, data) => {
       if (error) {
           console.error(error);
           return;
       }
       console.log(data);
   })
   .timeout(-1);
```

---

### ipc.sendSync(eventName, ..args)

- `eventName`: (`string`) The name of the message to send.
- `...args`: (`any[]`) Arguments.

Synchronous version of sending a message.

```typescript
try {
    const data = ipc.sendSync('test', 1, 2);
    console.log(data);
} catch (e) {
    console.error(error);
}
```

---

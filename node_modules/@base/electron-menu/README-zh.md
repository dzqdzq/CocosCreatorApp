# Electron menu

Electron 增强菜单。

---

## Browser 进程

---

### menu.clear()

清空所有的菜单

```typescript
menu.clear();
```

---

### menu.add(path, [options])

- `path`: (`string`) 菜单路径
- `options`: (`object`) 添加的菜单的配置项目

添加一个菜单按钮。

```typescript
menu.add('文件/打开')
    .add('文件/新建', {
        order: 0,
        group: 'new',
        click () {},
    });
```

---

### menu.remove(path)

- `path`: (`string`) 菜单路径

```typescript
menu.remove('文件/新建');
```

---

### menu.get(path)

- `path`: (`string`) 菜单路径

获取指定路径下的菜单。

```typescript
menu.get('文件/新建');
```

---

### menu.apply()

应用修改。

```typescript
menu.apply();
```

---

### setParseHandler(func)

- `fn`: (`Function`) 解析函数

在 `menu` 解析过程中插入一个解析器，`options` 是 `add` 传入的参数。
在这个参数内，可以针对其他自定义参数进行转换，示例中，根据 `message` 字段动态省成了了发送消息的点击事件。

```typescript
menu.setParseHandler((options, template) => {
   if (options.message) {
       template.click = function () {
           ipc.sendToAll('options.message');
       };
   }
});
```

---

## Renderer 渲染进程

---

### menu.popup(options)

- `options`: (`object`) 具体弹出的位置与菜单内容

弹出菜单，传入 x, y 相对与页面的位置。以及 menu 模版。
模版内的 click 会在点击后出发。
模版支持 separator 以及 submenu。

```typescript
menu.popup({
    x: event.pageX,
    y: event.pageY,
    menu: [
        {
            label: 'test',
            click () {
                vm.message = 'test';
            }
        },
        {
            type: 'separator',
        }, 
        {
            label: 'submenu',
            submenu: [
                {
                    label: 'test2',
                    click () {
                        vm.message = 'test2';
                    }
                }
            ]
        }
    ],
});
```

---

### menu.click(search)

- `search`: (`string`) - `index` 搜索路径，例如 `0.1` 就是点击 `index` 为 `0` 的菜单上的 `index` 为 `1` 的子项

点击某一个菜单项。

```typescript
menu.click('0.1');
```

---

### menu.query()

查询当前显示的菜单的 template。

```typescript
const popupMenuTemplate = menu.query();
console.log(popupMenuTemplate);
```

---

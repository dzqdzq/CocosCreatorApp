{"version":3,"file":"scope.js","sources":["../src/src/common/scope.ts"],"sourcesContent":["import { getCurrentScope, getGlobalScope, getIsolationScope, mergeScopeData, Scope, ScopeData } from '@sentry/core';\n\n/** Gets the merged scope data */\nexport function getScopeData(): ScopeData {\n  const globalScope = getGlobalScope().getScopeData();\n  const isolationScope = getIsolationScope().getScopeData();\n  const currentScope = getCurrentScope().getScopeData();\n  mergeScopeData(globalScope, isolationScope);\n  mergeScopeData(globalScope, currentScope);\n  globalScope.eventProcessors = [];\n  return globalScope;\n}\n\n/** Hooks both current and isolation scope changes and passes merged scope on changes  */\nexport function addScopeListener(callback: (merged: ScopeData, changed: Scope) => void): void {\n  getIsolationScope().addScopeListener((isolation) => {\n    const merged = getScopeData();\n    callback(merged, isolation);\n  });\n  getCurrentScope().addScopeListener((current) => {\n    const merged = getScopeData();\n    callback(merged, current);\n  });\n  getGlobalScope().addScopeListener((global) => {\n    const merged = getScopeData();\n    callback(merged, global);\n  });\n}\n"],"names":["getGlobalScope","getIsolationScope","getCurrentScope","mergeScopeData"],"mappings":";;AAEA;SACgB,YAAY,GAAA;AAC1B,IAAA,MAAM,WAAW,GAAGA,mBAAc,EAAE,CAAC,YAAY,EAAE;AACnD,IAAA,MAAM,cAAc,GAAGC,sBAAiB,EAAE,CAAC,YAAY,EAAE;AACzD,IAAA,MAAM,YAAY,GAAGC,oBAAe,EAAE,CAAC,YAAY,EAAE;AACrD,IAAAC,mBAAc,CAAC,WAAW,EAAE,cAAc,CAAC;AAC3C,IAAAA,mBAAc,CAAC,WAAW,EAAE,YAAY,CAAC;AACzC,IAAA,WAAW,CAAC,eAAe,GAAG,EAAE;AAChC,IAAA,OAAO,WAAW;AACpB;AAEA;AACM,SAAU,gBAAgB,CAAC,QAAqD,EAAA;AACpF,IAAAF,sBAAiB,EAAE,CAAC,gBAAgB,CAAC,CAAC,SAAS,KAAI;AACjD,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,SAAS,CAAC;AAC7B,KAAC,CAAC;AACF,IAAAC,oBAAe,EAAE,CAAC,gBAAgB,CAAC,CAAC,OAAO,KAAI;AAC7C,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAC3B,KAAC,CAAC;AACF,IAAAF,mBAAc,EAAE,CAAC,gBAAgB,CAAC,CAAC,MAAM,KAAI;AAC3C,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC;AAC1B,KAAC,CAAC;AACJ;;;;;"}
{"version":3,"file":"header-injection.js","sources":["../../src/main/header-injection.ts"],"sourcesContent":["import { Session } from 'electron';\n\nfunction addHeader(\n  responseHeaders: Record<string, string | string[]> = {},\n  name: string,\n  value: string,\n): Electron.HeadersReceivedResponse {\n  if (responseHeaders[name]) {\n    const existing = responseHeaders[name];\n\n    if (Array.isArray(existing)) {\n      existing.push(value);\n    } else {\n      responseHeaders[name] = [existing, value];\n    }\n  } else {\n    responseHeaders[name] = value;\n  }\n\n  return { responseHeaders };\n}\n\n/**\n * Adds a header to a session's web request\n */\nexport function addHeaderToSession(sesh: Session, header: string, value: string): void {\n  sesh.webRequest.onHeadersReceived((details, callback) => {\n    callback(addHeader(details.responseHeaders, header, value));\n  });\n}\n"],"names":[],"mappings":"AAEA,SAAS,SAAS,CAChB,eAAA,GAAqD,EAAE,EACvD,IAAY,EACZ,KAAa,EAAA;AAEb,IAAA,IAAI,eAAe,CAAC,IAAI,CAAC,EAAE;AACzB,QAAA,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,CAAC;AAEtC,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC3B,YAAA,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;AACrB;AAAM,aAAA;YACL,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC;AAC1C;AACF;AAAM,SAAA;AACL,QAAA,eAAe,CAAC,IAAI,CAAC,GAAG,KAAK;AAC9B;IAED,OAAO,EAAE,eAAe,EAAE;AAC5B;AAEA;;AAEG;SACa,kBAAkB,CAAC,IAAa,EAAE,MAAc,EAAE,KAAa,EAAA;IAC7E,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,OAAO,EAAE,QAAQ,KAAI;AACtD,QAAA,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,eAAe,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAC7D,KAAC,CAAC;AACJ;;;;"}
{"version":3,"file":"scope.js","sources":["../../src/common/scope.ts"],"sourcesContent":["import { getCurrentScope, getGlobalScope, getIsolationScope, mergeScopeData, Scope, ScopeData } from '@sentry/core';\n\n/** Gets the merged scope data */\nexport function getScopeData(): ScopeData {\n  const globalScope = getGlobalScope().getScopeData();\n  const isolationScope = getIsolationScope().getScopeData();\n  const currentScope = getCurrentScope().getScopeData();\n  mergeScopeData(globalScope, isolationScope);\n  mergeScopeData(globalScope, currentScope);\n  globalScope.eventProcessors = [];\n  return globalScope;\n}\n\n/** Hooks both current and isolation scope changes and passes merged scope on changes  */\nexport function addScopeListener(callback: (merged: ScopeData, changed: Scope) => void): void {\n  getIsolationScope().addScopeListener((isolation) => {\n    const merged = getScopeData();\n    callback(merged, isolation);\n  });\n  getCurrentScope().addScopeListener((current) => {\n    const merged = getScopeData();\n    callback(merged, current);\n  });\n  getGlobalScope().addScopeListener((global) => {\n    const merged = getScopeData();\n    callback(merged, global);\n  });\n}\n"],"names":[],"mappings":";;AAEA;SACgB,YAAY,GAAA;AAC1B,IAAA,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC,YAAY,EAAE;AACnD,IAAA,MAAM,cAAc,GAAG,iBAAiB,EAAE,CAAC,YAAY,EAAE;AACzD,IAAA,MAAM,YAAY,GAAG,eAAe,EAAE,CAAC,YAAY,EAAE;AACrD,IAAA,cAAc,CAAC,WAAW,EAAE,cAAc,CAAC;AAC3C,IAAA,cAAc,CAAC,WAAW,EAAE,YAAY,CAAC;AACzC,IAAA,WAAW,CAAC,eAAe,GAAG,EAAE;AAChC,IAAA,OAAO,WAAW;AACpB;AAEA;AACM,SAAU,gBAAgB,CAAC,QAAqD,EAAA;AACpF,IAAA,iBAAiB,EAAE,CAAC,gBAAgB,CAAC,CAAC,SAAS,KAAI;AACjD,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,SAAS,CAAC;AAC7B,KAAC,CAAC;AACF,IAAA,eAAe,EAAE,CAAC,gBAAgB,CAAC,CAAC,OAAO,KAAI;AAC7C,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAC3B,KAAC,CAAC;AACF,IAAA,cAAc,EAAE,CAAC,gBAAgB,CAAC,CAAC,MAAM,KAAI;AAC3C,QAAA,MAAM,MAAM,GAAG,YAAY,EAAE;AAC7B,QAAA,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC;AAC1B,KAAC,CAAC;AACJ;;;;"}
{"version":3,"file":"stack-parse.js","sources":["../src/src/renderer/stack-parse.ts"],"sourcesContent":["import { chromeStackLineParser } from '@sentry/browser';\nimport { nodeStackLineParser, StackFrame, StackParser, stripSentryFramesAndReverse } from '@sentry/core';\n\nconst STACKTRACE_FRAME_LIMIT = 50;\n\nconst [, chrome] = chromeStackLineParser;\nconst [, node] = nodeStackLineParser();\n\n/**\n * A stack parser than combines Chrome and node.js parsers to give the best results even when nodeIntegration = true\n */\nexport const electronRendererStackParser: StackParser = (stack: string, skipFirst: number = 0): StackFrame[] => {\n  const frames: StackFrame[] = [];\n\n  for (const line of stack.split('\\n').slice(skipFirst)) {\n    const chromeFrame = chrome(line);\n    const nodeFrame = node(line);\n\n    // We favour the chrome parser unless in_app == false\n    if (chromeFrame && nodeFrame?.in_app !== false) {\n      frames.push(chromeFrame);\n    } else if (nodeFrame) {\n      if (nodeFrame.module === undefined) {\n        delete nodeFrame.module;\n      }\n\n      frames.push(nodeFrame);\n    }\n\n    if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n      break;\n    }\n  }\n\n  return stripSentryFramesAndReverse(frames);\n};\n"],"names":["chromeStackLineParser","nodeStackLineParser","stripSentryFramesAndReverse"],"mappings":";;;AAGA,MAAM,sBAAsB,GAAG,EAAE;AAEjC,MAAM,GAAG,MAAM,CAAC,GAAGA,6BAAqB;AACxC,MAAM,GAAG,IAAI,CAAC,GAAGC,wBAAmB,EAAE;AAEtC;;AAEG;AACU,MAAA,2BAA2B,GAAgB,CAAC,KAAa,EAAE,SAAA,GAAoB,CAAC,KAAkB;IAC7G,MAAM,MAAM,GAAiB,EAAE;AAE/B,IAAA,KAAK,MAAM,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;AACrD,QAAA,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC;AAChC,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;;AAG5B,QAAA,IAAI,WAAW,IAAI,SAAS,EAAE,MAAM,KAAK,KAAK,EAAE;AAC9C,YAAA,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;AACzB;AAAM,aAAA,IAAI,SAAS,EAAE;AACpB,YAAA,IAAI,SAAS,CAAC,MAAM,KAAK,SAAS,EAAE;gBAClC,OAAO,SAAS,CAAC,MAAM;AACxB;AAED,YAAA,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;AACvB;AAED,QAAA,IAAI,MAAM,CAAC,MAAM,IAAI,sBAAsB,EAAE;YAC3C;AACD;AACF;AAED,IAAA,OAAOC,gCAA2B,CAAC,MAAM,CAAC;AAC5C;;;;"}
{"version":3,"file":"normalize-paths.js","sources":["../../src/src/main/integrations/normalize-paths.ts"],"sourcesContent":["import { defineIntegration, forEachEnvelopeItem, Profile } from '@sentry/core';\nimport { app } from 'electron';\n\nimport { normaliseProfile, normalizePaths } from '../normalize';\n\nexport const normalizePathsIntegration = defineIntegration(() => {\n  return {\n    name: 'NormalizePaths',\n    setup: (client) => {\n      // We want this hook to be registered after the profiling-node hook so we can normalise the profile after it's\n      // been attached\n      setImmediate(() => {\n        client.on('beforeEnvelope', (envelope) => {\n          forEachEnvelopeItem(envelope, (item, type) => {\n            if (type === 'profile') {\n              normaliseProfile(item[1] as Profile, app.getAppPath());\n            }\n          });\n        });\n      });\n    },\n    processEvent(event) {\n      return normalizePaths(event, app.getAppPath());\n    },\n  };\n});\n"],"names":["defineIntegration","forEachEnvelopeItem","normaliseProfile","app","normalizePaths"],"mappings":";;;;AAKa,MAAA,yBAAyB,GAAGA,sBAAiB,CAAC,MAAK;IAC9D,OAAO;AACL,QAAA,IAAI,EAAE,gBAAgB;AACtB,QAAA,KAAK,EAAE,CAAC,MAAM,KAAI;;;YAGhB,YAAY,CAAC,MAAK;gBAChB,MAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,QAAQ,KAAI;oBACvCC,wBAAmB,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,KAAI;wBAC3C,IAAI,IAAI,KAAK,SAAS,EAAE;4BACtBC,0BAAgB,CAAC,IAAI,CAAC,CAAC,CAAY,EAAEC,YAAG,CAAC,UAAU,EAAE,CAAC;AACvD;AACH,qBAAC,CAAC;AACJ,iBAAC,CAAC;AACJ,aAAC,CAAC;SACH;AACD,QAAA,YAAY,CAAC,KAAK,EAAA;YAChB,OAAOC,wBAAc,CAAC,KAAK,EAAED,YAAG,CAAC,UAAU,EAAE,CAAC;SAC/C;KACF;AACH,CAAC;;;;"}
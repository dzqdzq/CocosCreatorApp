{"version":3,"file":"file-uid.js","sourceRoot":"","sources":["../src/file-uid.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAsB;AAItB,SAAgB,gBAAgB,CAAC,MAAc;IAC3C,OAAO,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACvC,CAAC;AAFD,4CAEC;AAED,SAAgB,oBAAoB,CAAC,QAAgB;IACjD,OAAO,KAAK,QAAQ,EAAE,CAAC;AAC3B,CAAC;AAFD,oDAEC;AAED,SAAgB,oBAAoB,CAAC,MAAc;IAC/C,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC5B,CAAC;AAFD,oDAEC;AAED,SAAgB,qBAAqB,CAAC,OAAe;IACjD,OAAO,OAAO,CAAC;AACnB,CAAC;AAFD,sDAEC;AAED,SAAgB,qBAAqB,CAAC,IAAY;IAC9C,OAAO,IAAI,CAAC;AAChB,CAAC;AAFD,sDAEC;AAED,SAAgB,cAAc,CAAC,IAAY,EAAE,OAAe;IACxD,MAAM,gBAAgB,GAAG,cAAE,CAAC,QAAQ,CAAC,cAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;IAC7D,IAAI,gBAAgB,CAAC,MAAM,KAAK,CAAC;QAC7B,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC;QACjC,cAAE,CAAC,UAAU,CAAC,gBAAgB,CAAC,EAAE;QACjC,OAAO,IAAI,CAAC;KACf;SAAM;QACH,OAAO,gBAAgB,CAAC;KAC3B;AACL,CAAC;AATD,wCASC","sourcesContent":["import ps from 'path';\r\n\r\nexport type FileUid = string;\r\n\r\nexport function isVirtualFileUid(fileId: string) {\r\n    return fileId.codePointAt(0) === 0;\r\n}\r\n\r\nexport function encodeVirtualFileUid(moduleId: string) {\r\n    return `\\0${moduleId}`;\r\n}\r\n\r\nexport function decodeVirtualFileUid(fileId: string) {\r\n    return fileId.substr(1);\r\n}\r\n\r\nexport function decodeRegularFilePath(fileUid: string) {\r\n    return fileUid;\r\n}\r\n\r\nexport function encodeRegularFilePath(path: string) {\r\n    return path;\r\n}\r\n\r\nexport function encodeFilePath(path: string, rootDir: string) {\r\n    const relativeFromRoot = ps.relative(ps.join(rootDir), path);\r\n    if (relativeFromRoot.length === 0 ||\r\n        relativeFromRoot.startsWith('..') ||\r\n        ps.isAbsolute(relativeFromRoot)) {\r\n        return null;\r\n    } else {\r\n        return relativeFromRoot;\r\n    }\r\n}\r\n"]}
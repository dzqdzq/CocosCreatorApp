"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSubPath=exports.recursiveSync=exports.recursive=exports.nameToId=exports.compareVersion=exports.absolutePath=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),crypto_1=require("crypto");function absolutePath(e){return e?path_1.isAbsolute(e)?path_1.normalize(e):path_1.resolve(e):""}function compareVersion(e,t){const r=e.split("."),s=t.split("."),o=Math.max(r.length,s.length);for(let e=0;e<o;e++){const t=r[e]||0,o=s[e]||0;if(Number(t)<Number(o))return-1;if(Number(t)>Number(o))return 1}return 0}exports.absolutePath=absolutePath,exports.compareVersion=compareVersion;const _extendIndex=[1,2,3,4,5,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,26,27,28,29,30];function nameToId(e,t){t||(t=0);const r=crypto_1.createHash("md5").update(e).digest("hex");let s=r[0]+r[6]+r[16]+r[25]+r[31];for(let e=0;e<t;e++)s+=r[_extendIndex[e]];return s}async function recursive(e,t,r){if(!fs_extra_1.existsSync(e))return;const s=await fs_extra_1.stat(e);if(s.isDirectory()){await r(e,s);const o=await fs_extra_1.readdir(e);for(let s=0;s<o.length;s++){const a=o[s];await recursive(path_1.join(e,a),t,r)}}else await t(e,s)}function recursiveSync(e,t,r,s){const o=path_1.join(e,t);if(!fs_extra_1.existsSync(o))return;const a=fs_extra_1.statSync(o);if(a.isDirectory()){s(o,a,t);const e=fs_extra_1.readdirSync(o);for(let t=0;t<e.length;t++){recursiveSync(o,e[t],r,s)}}else r(o,a,t)}function isSubPath(e,t){return(e=path_1.normalize(e))!==(t=path_1.normalize(t))&&!!e.startsWith(t+path_1.sep)}exports.nameToId=nameToId,exports.recursive=recursive,exports.recursiveSync=recursiveSync,exports.isSubPath=isSubPath;
'use strict';

// let commands = [
//     'dev',        // 是否是开发模式
//     'project',    // 项目路径
//     'home',       // HOME 目录地址
//     'build',      // 构建项目配置
//     'compile',    // 编译项目配置
//     'nologin',    // 是否跳过用户系统
//     'test',       // 自动化测试
//     'extension',  // 启动后唤起某个插件
//     'spectron',   // 通过 spectron 测试编辑器的时候加上
// ];

exports.analyze = function (argv) {
    let args = Object.create(null);

    for (let i=0; i<argv.length; i++) {
        let arg = argv[i];
        if (arg.startsWith('--')) {
            arg = arg.substr(2);
        }
        // let exists = commands.some((str) => {
        //     return arg.startsWith(str);
        // });
        // if (exists) {

            if (arg.indexOf('=') !== -1) {
                const arr = arg.split('=');
                args[arr[0]] = arr[1];
            } else {
                if (!argv[i + 1] || argv[i + 1].startsWith('-')) {
                    args[arg] = true;
                } else {
                    args[arg] = argv[i + 1];
                    i++;
                }
            }
        // }
    }

    return args;
};

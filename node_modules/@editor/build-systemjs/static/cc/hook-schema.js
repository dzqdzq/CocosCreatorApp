import { systemJSPrototype } from '../systemjs-source/src/system-core';

export function hookInstantiationOverSchema(schema, hook) {
    const venderInstantiate = systemJSPrototype.instantiate;
    systemJSPrototype.instantiate = function (url, firstParentUrl) {
        const schemaErased = url.substr(0, schema.length) === schema ?
            url.substr(schema.length) : null;
        return schemaErased === null ?
            venderInstantiate.call(this, url, firstParentUrl) :
            hook.call(this, schemaErased, firstParentUrl);
    };
}

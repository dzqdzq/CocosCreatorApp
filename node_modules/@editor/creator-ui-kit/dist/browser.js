!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.browser=t():e.browser=t()}(global,(function(){return(()=>{"use strict";var e={76101:(e,t,o)=>{const{ipcMain:r,BrowserWindow:n}=o(58933);r.on("ui-drag-item-start",((e,t)=>{const o=n.getAllWindows()??[];for(const e of o)e?.webContents.send("ui-drag-area-start",t)})),r.on("ui-drag-item-end",((e,t)=>{const o=n.getAllWindows()??[];for(const e of o)e?.webContents.send("ui-drag-area-end",t)}))},58933:e=>{e.exports=require("electron")}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,o),l.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{Drag:()=>f,File:()=>u});const e=require("path"),{ipcMain:t,webContents:n}=o(58933);class l{register(e,t){return l.urlMap||(l.urlMap={}),l.urlMap[e]||"file"===e?(console.warn(`[UI-File] Register protocol(${e}) failed! protocol(${e}) has exist!`),!1):(l.urlMap[e]=t,this.emitChanges(),!0)}unregister(e){return delete l.urlMap[e],!0}getAllFileProtocol(){return Object.keys(l.urlMap).map((e=>({protocol:e,label:l.urlMap[e].label,path:l.urlMap[e].path})))}resolveToRaw(t){const o=t.match(/^([a-zA-z]*):\/\/(.*)$/);if(o){const t=o[2].replace(/\\/g,"/"),r=this.getProtocalInfo(o[1]);if(r)return(0,e.join)(r.path,t)}return t}resolveToUrl(t,o){if(!t||!(0,e.isAbsolute)(t)||!o)return"";const r=this.getProtocalInfo(o);return r?r.protocol+"://"+(0,e.relative)(r.path,t).replace(/\\/g,"/"):""}getProtocalInfo(e){if(l.urlMap[e])return{protocol:e,...l.urlMap[e]}}emitChanges(){const e=l.urlMap;n.getAllWebContents().forEach((t=>{t.send("main-protocols-change",e)}))}}l.urlMap={};const i=new l;t.on("ui-file-query-protocols",(e=>{e.reply("main-query-protocols",l.urlMap)}));const{ipcMain:s,dialog:a,BrowserWindow:p}=o(58933);s.on("ui-file-select-file",((e,t)=>{t=t||{};const o=p.fromWebContents(e.sender),r={defaultPath:t.defaultPath||"",properties:["openFile"],buttonLabel:t.buttonLabel||""};"directory"===t.type?r.properties=["openDirectory"]:"app"===t.type&&(r.filters=[{name:"Application",extensions:["win32"===process.platform?"exe":"app"]}]),t.multi&&r.properties.push("multiSelections"),t.extensions&&(r.filters=[{name:t.extensions,extensions:t.extensions.split(",").filter(Boolean)}]),a.showOpenDialog(o,r).then((o=>o.filePaths?(t.multi?e.reply("main-select-file",o.filePaths):e.reply("main-select-file",o.filePaths[0]),!0):e.reply("main-select-file",void 0)))})),s.on("ui-file-not-exist",((e,t)=>{a.showMessageBox({type:"warning",title:"warning",message:"File does not exist."})}));const c={label:"file://",path:"",protocol:"file",description:"",invalidInfo:""};class u{static registerProtocol(e,t){return"file"===e?(Object.assign(c,t),!0):(t.label=e+"://",i.register(e,t))}static unregisterProtocol(e){return i.unregister(e)}static resolveToRaw(e){return i.resolveToRaw(e)}static resolveToUrl(e,t){return i.resolveToUrl(e,t)}static getAllProtocolInfos(){return[c,...i.getAllFileProtocol()]}}const f=o(76101)})(),r})()}));
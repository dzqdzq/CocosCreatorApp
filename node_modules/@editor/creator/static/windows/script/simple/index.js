'use strict';

const ipc = require('@base/electron-base-ipc');

const wins = require('@base/electron-windows');
const $panel = document.getElementById('panel');
$panel.setAttribute('name', wins.userData.panel);

window.__MAIN__ = false;

require('../../../../index');

// 首先初始化任务管理器
// require('../../../../task');

// 初始化插件注册到每个窗口的代码
require('../public/windows');

require('../public/polyfill');

Editor.Task.sync();

// mac 上右键点击不会传递焦点
if (process.platform === 'darwin') {
    document.addEventListener('mousedown', (event) => {
        if (event.button === 2 && !document.hasFocus()) {
            ipc.send('editor-lib-windows:focus');
        }
    }, true);
}

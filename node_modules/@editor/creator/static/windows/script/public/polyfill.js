'use strict';

const { normalize } = require('path');
const { shell } = require('electron');

document.addEventListener('click', function(event) {
    // 如果点中的是 a 元素，则需要组织默认事件
    if (event.target.tagName === 'A') {
        event.preventDefault();

        let href = event.target.href;

        if (/^file:\//.test(href)) {
            href = normalize(href.replace(/#.*/, ''));
            if (process.platform === 'darwin') {
                href = `/${href}`;
            }
        }

        shell.openExternal(href);
    }
});

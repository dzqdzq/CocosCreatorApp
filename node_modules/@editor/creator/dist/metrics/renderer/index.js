"use strict";var __awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,c){function a(t){try{s(n.next(t))}catch(t){c(t)}}function o(t){try{s(n.throw(t))}catch(t){c(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}s((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports._trackCrashEvent=exports.trackTimeEnd=exports.trackTimeStart=exports.trackException=exports._sendEventGroup=exports._trackEventWithTimer=exports.trackEvent=void 0;const I18n=require("../../i18n/renderer/index"),ipc=require("@base/electron-base-ipc");function trackEvent(t){return ipc.send("metrics:track-event",t)}function _trackEventWithTimer(t,e){return ipc.send("metrics:track-event-with-timer",t,e)}function _sendEventGroup(){return ipc.send("metrics:send-event-group")}function trackException(t){return ipc.send("metrics:track-exception",t)}function trackTimeStart(t){ipc.send("metrics:track-time-start",t,Date.now())}function trackTimeEnd(t,e={}){return __awaiter(this,void 0,void 0,function*(){return new Promise((r,n)=>{ipc.send("metrics:track-time-end",t,e,Date.now()).callback((i,c)=>{if(i)return n(i);if(!c||!e.output)return r(c),c;const a="string"==typeof e.label&&(I18n.t(e.label.replace("i18n:",""))||e.label)||t;return console.debug(a+` (${c}ms)`),r(c),c})})})}function _trackCrashEvent(t){return __awaiter(this,void 0,void 0,function*(){return new Promise((e,r)=>{ipc.send("metrics:track-crash-event",t).callback((t,n)=>{if(t)return r(t);e(n)})})})}exports.trackEvent=trackEvent,exports._trackEventWithTimer=_trackEventWithTimer,exports._sendEventGroup=_sendEventGroup,exports.trackException=trackException,exports.trackTimeStart=trackTimeStart,exports.trackTimeEnd=trackTimeEnd,exports._trackCrashEvent=_trackCrashEvent;
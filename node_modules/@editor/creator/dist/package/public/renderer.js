"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPath=exports.disable=exports.enable=exports.unregister=exports.register=exports.getPackages=void 0;const ipc=require("@base/electron-base-ipc"),packageManager=require("@editor/package"),protectedModule=require("../protected");function getPackages(e){e=ipc.sendSync("editor3d-lib-package:call","getPackages",e);return JSON.parse(e)}function register(e){return new Promise((a,t)=>{ipc.send("editor3d-lib-package:call","register",e).callback((e,r)=>{if(e)return t(e);a(JSON.parse(r))})})}function unregister(e){return new Promise((a,t)=>{ipc.send("editor3d-lib-package:call","unregister",e).callback((e,r)=>{if(e)return t(e);a(JSON.parse(r))})})}function enable(e){return new Promise((a,t)=>{ipc.send("editor3d-lib-package:call","enable",e).callback((e,r)=>{if(e)return t(e);a(JSON.parse(r))})})}function disable(e,r){return new Promise((a,t)=>{ipc.send("editor3d-lib-package:call","disable",e,r).callback((e,r)=>{if(e)return t(e);a(JSON.parse(r))})})}function getPath(e){e=this.getPackages({name:e,enable:!0});return e[0]?e[0].path:""}exports.getPackages=getPackages,exports.register=register,exports.unregister=unregister,exports.enable=enable,exports.disable=disable,exports.getPath=getPath,ipc.on("editor3d-lib-package:emit",(e,r,...a)=>{protectedModule.adapter.emit(r,...a)}),packageManager.on("register",e=>{protectedModule.adapter.emit("register",e)}),packageManager.on("unregister",e=>{protectedModule.adapter.emit("unregister",e)}),packageManager.on("enable",e=>{protectedModule.adapter.emit("enable",e)}),packageManager.on("disable",e=>{protectedModule.adapter.emit("disable",e)});
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkReload=exports.enableOther=exports.disableOther=exports.startup=exports.queryDisbaleInfo=exports.removeDisableInfo=exports.addDisableInfo=exports.removeListener=exports.emit=exports.once=exports.on=exports.normalizePath=exports.checkVersion=exports.checkType=exports.scan=void 0;const path_1=require("path"),events_1=require("events"),semver_1=require("semver"),ipc=require("@base/electron-base-ipc"),constant_1=require("../constant"),eventEmitter=new events_1.EventEmitter;function scan(e){return new Promise((t,n)=>{ipc.send("editor-lib-package-protected:call",scan,e).callback((e,o)=>{e?n(e):t(o)})})}function checkType(e){return Editor.Utils.Path.contains(constant_1.PATHS.BUILTIN,e)?"builtin":Editor.Utils.Path.contains(constant_1.PATHS.LOCAL,e)?"local":Editor.Utils.Path.contains(constant_1.PATHS.COVER,e)?"cover":Editor.Utils.Path.contains(constant_1.PATHS.GLOBAL,e)?"global":"other"}function checkVersion(e){return(0,semver_1.satisfies)((0,semver_1.valid)((0,semver_1.coerce)(Editor.App.version)),e)}function normalizePath(e){return e=(0,path_1.normalize)(e),"win32"!==process.platform?e:e.replace(/^([a-z]):/,(e,t)=>t.toUpperCase()+":")}function on(e,t){return eventEmitter.on(e,t)}function once(e,t){return eventEmitter.once(e,t)}function emit(e,...t){ipc.send("editor-lib-package-protected:call","emit",e,...t)}function removeListener(e,t){return eventEmitter.removeListener(e,t)}function addDisableInfo(e){ipc.send("editor-lib-package-protected:call","addDisableInfo",e)}function removeDisableInfo(e){ipc.send("editor-lib-package-protected:call","removeDisableInfo",e)}function queryDisbaleInfo(e){return new Promise((t,n)=>{ipc.send("editor-lib-package-protected:call","queryDisbaleInfo",e).callback((e,o)=>{e?n(e):t(o)})})}function startup(){return __awaiter(this,void 0,void 0,function*(){console.warn("Please ise it(startup) in the plug-in process")})}function disableOther(e){return __awaiter(this,void 0,void 0,function*(){console.warn("Please ise it(disableOther) in the plug-in process")})}function enableOther(e){return __awaiter(this,void 0,void 0,function*(){console.warn("Please ise it(enableOther) in the plug-in process")})}function checkReload(e){return console.warn("Please ise it(checkReload) in the plug-in process"),!1}exports.scan=scan,exports.checkType=checkType,exports.checkVersion=checkVersion,exports.normalizePath=normalizePath,exports.on=on,exports.once=once,exports.emit=emit,exports.removeListener=removeListener,exports.addDisableInfo=addDisableInfo,exports.removeDisableInfo=removeDisableInfo,exports.queryDisbaleInfo=queryDisbaleInfo,exports.startup=startup,exports.disableOther=disableOther,exports.enableOther=enableOther,exports.checkReload=checkReload,ipc.on("editor-lib-package-protected:emit",(e,t,...n)=>__awaiter(void 0,void 0,void 0,function*(){eventEmitter.emit(t,...n)}));
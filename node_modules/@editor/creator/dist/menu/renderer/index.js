"use strict";var __awaiter=this&&this.__awaiter||function(e,n,i,r){return new(i||(i=Promise))(function(o,c){function t(e){try{p(r.next(e))}catch(e){c(e)}}function u(e){try{p(r.throw(e))}catch(e){c(e)}}function p(e){var n;e.done?o(e.value):(n=e.value,n instanceof i?n:new i(function(e){e(n)})).then(t,u)}p((r=r.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.clickMain=exports.queryMain=exports.clickPopup=exports.queryPopup=exports.popup=void 0;const ipc=require("@base/electron-base-ipc"),find=function(e,n){for(let i=0;i<e.length;i++){const r=e[i];if(r.label===n)return r}return null};function popup(e){void 0!==e.y&&"darwin"===process.platform&&(e.y+=26),ipc.send("editor-lib-menu:popup",JSON.parse(JSON.stringify(e))).callback((n,i,r)=>__awaiter(this,void 0,void 0,function*(){if(n)return void console.warn(n);const r=i.split("/");let o={label:"",submenu:e.menu};r.forEach(e=>{if(!o||!o.submenu)return null;o=find(o.submenu,e)}),o.click&&o.click()}))}function queryPopup(){return new Promise(e=>{ipc.send("editor-lib-menu:query-popup").callback((n,i)=>{e(i)})})}function clickPopup(e){return new Promise(n=>{ipc.send("editor-lib-menu:click-popup",e).callback((e,i)=>{n(i)})})}function queryMain(){return new Promise(e=>{ipc.send("editor-lib-menu:query-main").callback((n,i)=>{e(i)})})}function clickMain(e){return new Promise(n=>{ipc.send("editor-lib-menu:click-main",e).callback((e,i)=>{n(i)})})}exports.popup=popup,exports.queryPopup=queryPopup,exports.clickPopup=clickPopup,exports.queryMain=queryMain,exports.clickMain=clickMain;
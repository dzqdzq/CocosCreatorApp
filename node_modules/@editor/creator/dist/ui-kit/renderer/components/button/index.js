"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Button=void 0;const fs=require("fs"),path=require("path"),base_1=require("../base"),STYLE=`<style>${fs.readFileSync(path.join(__dirname,"./button.css"),"utf8")}</style>`,CUSTOM_STYLE='<style id="custom-style"></style>',HTML=`${fs.readFileSync(path.join(__dirname,"./button.html"),"utf8")}`,instanceArray=[];let customStyle="";class Button extends base_1.Base{static importStyle(e){fs.existsSync(e)&&(customStyle=fs.readFileSync(e,"utf8"),instanceArray.map(e=>{e.shadowRoot.querySelector("#custom-style").innerHTML=customStyle}))}get pressed(){return null!==this.getAttribute("pressed")}set pressed(e){(e=!!e)?this.setAttribute("pressed",""):this.removeAttribute("pressed")}constructor(){super(),this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("mousedown",this._onMouseDown))}connectedCallback(){if(super.connectedCallback(),instanceArray.push(this),!this.shadowRoot)return;const e=this.shadowRoot.querySelector("#custom-style");e&&(e.innerHTML=customStyle)}disconnectedCallback(){super.disconnectedCallback();const e=instanceArray.indexOf(this);instanceArray.splice(e,1)}static get observedAttributes(){return["focused","readonly","disabled"]}_onMouseDown(){if(this.disabled||this.readonly)return;this.pressed=!0;const e=()=>{this.pressed=!1,this.dispatch("change"),this.dispatch("confirm"),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mouseup",e,!0)}_onKeyDown(e){switch(e.keyCode){case 32:case 13:this.pressed=!0}}_onKeyUp(e){switch(e.keyCode){case 32:case 13:this.pressed=!1,this.dispatch("change"),this.dispatch("confirm")}}}exports.Button=Button;
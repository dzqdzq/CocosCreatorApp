"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Icon=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),base_1=require("../base"),CUSTOM_STYLE='<style id="custom-style"></style>',STYLE=`<style>${(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"./icon.css"),"utf8")}</style>`,HTML=`${(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"./icon.html"),"utf8")}`,$style=document.createElement("style");let woff=(0,path_1.join)(__dirname,"iconfont.woff").replace(/\\/g,"/");woff=encodeURI(woff).replace(/[!'()#\?*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)}).replace(/%5C/gi,"/"),$style.innerHTML=`\n@font-face {\n    font-family: "editor-icon";\n    src: url('${woff}') format('woff');\n}\n`,document.head.appendChild($style);const iconGroups=(0,fs_extra_1.readJSONSync)((0,path_1.join)(__dirname,"./icon-map.json")),allIconsMap={};if(iconGroups)for(const t in iconGroups)Object.assign(allIconsMap,iconGroups[t]);const instanceArray=[];class Icon extends base_1.Base{constructor(){super(),this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this.$span=this.shadowRoot.querySelector("span"))}static importStyle(t){if(!(0,fs_extra_1.existsSync)(t))return!1;const e=(0,fs_extra_1.readFileSync)(t,"utf8");instanceArray.map(t=>{t.shadowRoot.querySelector("#custom-style").innerHTML=e})}static get Map(){return iconGroups}connectedCallback(){super.connectedCallback(),this.color=this.getAttribute("color")}disconnectedCallback(){super.disconnectedCallback()}get value(){return this.getAttribute("value")||""}set value(t){t+="",this.setAttribute("value",t)}get color(){return this.getAttribute("color")}set color(t){t?this.setAttribute("color",t):this.removeAttribute("color")}static get observedAttributes(){return["value","color"]}attributeChangedCallback(t,e,o){switch(t){case"value":const e=this.getAttribute("default")||"",s=allIconsMap[o]?allIconsMap[o]:allIconsMap[e];this.$span.className=`icon-${s}`;break;case"color":"normal"===o?(this.$span.setAttribute("normal",!0),this.$span.removeAttribute("color")):(this.$span.setAttribute("color",!!o),this.$span.removeAttribute("normal"))}}}exports.Icon=Icon;
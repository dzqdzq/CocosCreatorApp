"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragItem=void 0;const base_1=require("../base"),ipc=require("@base/electron-base-ipc");class DragItem extends base_1.Base{static get observedAttributes(){return["path"]}get draging(){return null!==this.getAttribute("draging")}set draging(t){(t=!!t)?this.setAttribute("draging",""):this.removeAttribute("draging")}get type(){return this.getAttribute("type")}set type(t){t?this.setAttribute("type",t):this.removeAttribute("type")}get extends(){const t=this.getAttribute("extends");return t?t.split(",").map(t=>t.trim()):null}set extends(t){t&&Array.isArray(t)?this.setAttribute("extends",t.join(",")):this.removeAttribute("extends")}get additional(){const t=this.getAttribute("additional")||"";try{return JSON.parse(t)}catch(t){return[]}}set additional(t){!t||Array.isArray(t)?t&&Array.isArray(t)?this.setAttribute("additional",JSON.stringify(t)):this.removeAttribute("additional"):console.warn("additional must be array")}constructor(){super(!1)}connectedCallback(){super.connectedCallback(),this.setAttribute("draggable","true"),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("dragend",this._onDragEnd)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("dragend",this._onDragEnd)}_onDragStart(t){this.draging=!0;const e={type:this.type,extends:this.extends,additional:this.additional||null};(t.dataTransfer.types||[]).forEach(r=>{let i=t.dataTransfer.getData(r);"additional"===r&&(i=JSON.parse(i)),e[r]=i}),ipc.send("editor-lib-ui-kit:drag-start",e),ipc.emit("editor-lib-ui-kit:drag-start",e)}_onDragEnd(){this.draging=!1,ipc.send("editor-lib-ui-kit:drag-end"),ipc.emit("editor-lib-ui-kit:drag-end")}}exports.DragItem=DragItem;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendGetRequest=exports.sendPostRequest=void 0;const{parse:parse}=require("url"),{stringify:stringify}=require("querystring"),{request:httpsRequest}=require("https");function sendPostRequest(e,t){return new Promise((r,s)=>{let n=parse(e);t=stringify(t||{});let o={"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(t),"User-Agent":Editor.App.userAgent},u={method:"POST",host:n.hostname,port:n.port||443,path:n.pathname,headers:o,ciphers:"ALL"},a="",i=httpsRequest(u,e=>{if(200!==e.statusCode)return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{a+=e}).on("end",()=>{var e=null;try{e=JSON.parse(a)}catch(e){return void s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))});i.write(t),i.end()})}function sendGetRequest(e,t){return new Promise((r,s)=>{var n=parse(e);t=stringify(t||{});var o={"User-Agent":Editor.App.userAgent},u={method:"GET",host:n.hostname,port:n.port||443,path:n.pathname+"?"+t,headers:o,ciphers:"ALL"},a="";httpsRequest(u,e=>{if(200!==e.statusCode)return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{a+=e}).on("end",()=>{var e=null;try{e=JSON.parse(a)}catch(e){return s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))}).end()})}exports.sendPostRequest=sendPostRequest,exports.sendGetRequest=sendGetRequest;
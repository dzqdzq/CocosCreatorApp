"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendGetRequest=exports.sendPostRequest=void 0;const{parse:parse}=require("url"),{stringify:stringify}=require("querystring"),{request:httpsRequest}=require("https");function sendPostRequest(e,t){return new Promise((r,s)=>{let o=parse(e);t=stringify(t||{});let n={"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(t),"User-Agent":Editor.App.userAgent},u={method:"POST",host:o.hostname,port:o.port||443,path:o.pathname,headers:n,ciphers:"ALL",secureProtocol:"TLSv1_method"},d="",a=httpsRequest(u,e=>{if(200!==e.statusCode)return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{d+=e}).on("end",()=>{var e=null;try{e=JSON.parse(d)}catch(e){return void s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))});a.write(t),a.end()})}function sendGetRequest(e,t){return new Promise((r,s)=>{var o=parse(e);t=stringify(t||{});var n={"User-Agent":Editor.App.userAgent},u={method:"GET",host:o.hostname,port:o.port||443,path:o.pathname+"?"+t,headers:n,ciphers:"ALL",secureProtocol:"TLSv1_method"},d="";httpsRequest(u,e=>{if(200!==e.statusCode)return s(new Error(`Connect Failed. Status Code: ${e.statusCode}`)),void e.resume();e.on("data",e=>{d+=e}).on("end",()=>{var e=null;try{e=JSON.parse(d)}catch(e){return s(e)}r(e)})}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))}).end()})}exports.sendPostRequest=sendPostRequest,exports.sendGetRequest=sendGetRequest;
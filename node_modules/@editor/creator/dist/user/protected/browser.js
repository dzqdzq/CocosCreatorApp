"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.queryLicenseByName=exports.queryLicenseByPluginName=exports.nextInit=exports.init=void 0;const ipc=require("@base/electron-base-ipc"),license_1=require("./license"),flag_protected="editor-lib-user-protected",flag="editor-lib-user";let _initCallback=null;function init(){return new Promise(e=>{_initCallback?(ipc.broadcast(flag+":init"),_initCallback=e):e()})}function nextInit(){_initCallback&&_initCallback(),_initCallback=void 0}async function queryLicenseByPluginName(e){return license_1.licenseManager.queryLicenseByPluginName(e)}async function queryLicenseByName(e){return license_1.licenseManager.queryLicenseByName(e)}exports.init=init,exports.nextInit=nextInit,exports.queryLicenseByPluginName=queryLicenseByPluginName,exports.queryLicenseByName=queryLicenseByName,ipc.on(flag_protected+":call",async(i,e,...n)=>{e=module.exports[e];let t;try{t=await e(...n)}catch(e){return void i.reply(e,null)}i.reply(null,t)});
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.code=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),crypto_1=require("crypto"),os_1=require("os"),md5=require("md5");exports.code={ok:0,not_add:461,no_permission:462,license_expired:463};class Utils{static getMessage(e){switch(e){case 0:return"成功";case 461:return"账号尚未加入公司";case 462:return"账号无权限";case 463:return"证书权限到期"}}static readCacheLicense(e){return(0,fs_extra_1.readJSONSync)(Utils.getCacheLicensePath(e))}static saveCacheLicense(e,t){e=this.getCacheLicensePath(e);(0,fs_extra_1.ensureDirSync)((0,path_1.dirname)(e)),(0,fs_extra_1.writeJSONSync)(e,{l:t.license,m:t.license_mark,i:this.getMID()})}static getCacheLicensePath(e){return(0,path_1.join)(Editor.App.home,"licenses","creator_"+e.toLowerCase())}static getPubKeyByName(e){return(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../../../static/license/rsa",`license_rsa_${e}.pub`),"utf8")}static convertToPublicEncrypt(e,t){e=Utils.getPubKeyByName(e);return(0,crypto_1.publicEncrypt)(e,Buffer.from(t)).toString("base64")}static convertToPublicDecrypt(e,t,r){var s=Utils.getPubKeyByName(e),a=r?t.split(r):[t];let i="";for(let e=0;e<a.length;++e)i+=(0,crypto_1.publicDecrypt)(s,Buffer.from(a[e],"base64")).toString("utf8");return JSON.parse(i)}static getMID(){let t="";var e=(0,os_1.networkInterfaces)();let r=!1;for(const i in e){var s=e[i];for(let e=0;e<s.length;++e){var a=s[e];if(!a.internal&&a.mac){t=md5(a.mac),r=!0;break}}if(r)break}return t=r?t:md5("00:00:00:00:00:00")}static newError(e){return new Error(JSON.stringify(e))}}exports.default=Utils;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendGetRequest=exports.sendPostRequest=void 0;const url_1=require("url"),querystring_1=require("querystring"),https_1=require("https");function sendPostRequest(o,u){return new Promise((t,r)=>{var e=(0,url_1.parse)(o),s=(u=(0,querystring_1.stringify)(u||{}),{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(u),"User-Agent":Editor.App.userAgent}),e={method:"POST",host:e.hostname,port:e.port||443,path:e.pathname,headers:s,ciphers:"ALL"};let n="";s=(0,https_1.request)(e,e=>{200<=e.statusCode&&e.statusCode<300?e.on("data",e=>{n+=e}).on("end",()=>{var e=null;try{e=JSON.parse(n)}catch(e){return void r(e)}t(e)}):(r(new Error("Connect Failed. Status Code: "+e.statusCode)),e.resume())}).on("error",e=>{r(e)}).setTimeout(8e3,()=>{r(new Error("timeout"))});s.write(u),s.end()})}function sendGetRequest(o,u){return new Promise((t,r)=>{var e=(0,url_1.parse)(o),s=(u=(0,querystring_1.stringify)(u||{}),{"User-Agent":Editor.App.userAgent}),e={method:"GET",host:e.hostname,port:e.port||443,path:e.pathname+"?"+u,headers:s,ciphers:"ALL"},n="";(0,https_1.request)(e,e=>{200<=e.statusCode&&e.statusCode<300?e.on("data",e=>{n+=e}).on("end",()=>{var e=null;try{e=JSON.parse(n)}catch(e){return r(e)}t(e)}):(r(new Error("Connect Failed. Status Code: "+e.statusCode)),e.resume())}).on("error",e=>{r(e)}).setTimeout(8e3,()=>{r(new Error("timeout"))}).end()})}exports.sendPostRequest=sendPostRequest,exports.sendGetRequest=sendGetRequest;
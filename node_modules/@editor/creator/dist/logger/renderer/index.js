"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=require("events"),v_stacks_1=require("v-stacks"),ipc=require("@base/electron-base-ipc"),logger=require("@base/electron-logger");logger.setLogHandler(e=>{if(e.message="[Window] "+e.message,("warn"===e.type||"error"===e.type)&&e.stack&&0===e.stack.length){const r=new Error("Unknown warning");e.stack=(0,v_stacks_1.ignoreStack)(r.stack,3)}});class Logger extends events_1.EventEmitter{clear(e){ipc.send("editor-lib-logger:call","clear",[e])}starup(){ipc.send("editor-lib-logger:call","starup")}query(){return logger.query()}record(e){ipc.send("editor-lib-logger:call","record",e)}}module.exports=new Logger,logger.on("record",e=>{module.exports.emit("record",e)}),logger.on("clear",()=>{module.exports.emit("clear")}),window.addEventListener("unhandledrejection",e=>{console.error(e.reason)});
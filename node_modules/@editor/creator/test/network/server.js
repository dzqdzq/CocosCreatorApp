'use strict';

const http = require('http');

let HTTPServer = null;

exports.URL = 'http://localhost:7900';

exports.createServer = function() {
    HTTPServer = http.createServer(function (req, res) {
        // console.log(req.url);
        if (req.url === '/301') {
            res.writeHead(301, {
                'Location': `${exports.URL}/200`,
            });
        }
        if (req.url === '/302') {
            res.writeHead(302, {
                'Location': `${exports.URL}/200`,
            });
        }
        if (req.url === '/200') {
            res.end('success');
        }
        res.end();
    });
    HTTPServer.listen(7900);
};

exports.stopServer = function() {
    HTTPServer && HTTPServer.close();
    HTTPServer = null;
};

// exports.createServer();

"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateEmscriptenProxyModule = void 0;
const dedent_1 = __importDefault(require("dedent"));
function generateEmscriptenProxyModule(mainModuleURL, wasmBinaryPathExpression) {
    return (0, dedent_1.default) `
    // I am the facade module who make life easier to use '${mainModuleURL}'~
    import factory from '${mainModuleURL.href}';
    export default (...args) => {
        if (!import.meta.emscriptenLoadWasmBinary) {
            throw new Error(\`Emscripten is not supported in current environment.\`);
        }
        const wasmBinaryMaybePromise = import.meta.emscriptenLoadWasmBinary(${wasmBinaryPathExpression}, import.meta.url);
        return Promise.resolve(wasmBinaryMaybePromise).then((wasmBinary) => {
            return factory({
                wasmBinary,
                ...args
            })
        })
    };
`;
}
exports.generateEmscriptenProxyModule = generateEmscriptenProxyModule;
//# sourceMappingURL=proxy.js.map
"use strict";const{app:app,shell:shell}=require("electron");exports.app=app,exports.i18n=require("@base/electron-i18n"),exports.metrics=require("../../lib/dist/metrics/browser/index");const{Dialog:Dialog}=require("../../lib/dist/dialog"),{I18n:I18n}=require("../../lib/dist/i18n"),{Utils:Utils}=require("../../lib/dist/utils"),{basenameNoExt:basenameNoExt}=require("../../lib/dist/utils/source/path"),{existsSync:existsSync}=require("fs-extra"),DOWNLOAD="https://www.cocos.com/creator",DASHBOARD_PROTOCOL="cocos-dashboard://";exports.basenameNoExt=basenameNoExt,exports.getName=Utils.File.getName;const t=exports.t=function(t,e){return I18n.t(t,e)};exports.queryDashboardPath=async function(){try{let t=!0;const e=(await app.getApplicationInfoForProtocol(DASHBOARD_PROTOCOL)).path;if("darwin"===process.platform&&(t=e.startsWith("/Applications/")),t&&existsSync(e))return e}catch(t){}return""},exports.openDashboard=async function(){try{let t=!0;const e=(await app.getApplicationInfoForProtocol(DASHBOARD_PROTOCOL)).path;if("darwin"===process.platform&&(t=e.startsWith("/Applications/")),t)return await shell.openPath(e),exports.exitApp(),!0}catch(t){}return!1},exports.goToInstall=async function(){await shell.openExternal(DOWNLOAD)},exports.exitApp=function(){app.exit(0)},exports.warnAlreadyOpened=async function(e){await Dialog.warn(t("project_opened"),{title:t("info"),detail:e,buttons:[t("confirm")]})},exports.errorDialog=async function(e,a){await Dialog.error(e,{detail:a||"",buttons:[t("confirm")]})},exports.warnDuplicateProject=async function(){await Dialog.warn(t("message.duplicate_project"),{title:t("warn"),buttons:[t("confirm")]})},exports.chooseProjectPath=async function(t){const e=await Dialog.select({type:"directory",title:t});return e&&e.filePaths&&e.filePaths[0]},exports.showMainDialog=async function(e){return(await Dialog.info(t("main.message"),{title:t("main.title"),detail:t("main.detail"),buttons:[t(e?"main.button.dashboard":"main.button.install"),t("main.button.empty"),t("main.button.open"),t("main.button.quit")],default:0,cancel:3})).response};
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buttonConfig=exports.ready=exports.update=exports.$=exports.template=void 0;const utils_1=require("./utils"),lodash=require("lodash");let panel;const methods={changeRenderBackEndType(e){const t=this,o=e.target.value;t.pkgOptions.renderBackEnd="metal"===o?{metal:!0,gles3:!1}:{metal:!1,gles3:!0},t.emitChange("renderBackEndType",t.pkgOptions.renderBackEnd)},onDevelopTeamConfirm(e){const t=e.target.value;this.pkgOptions.developerTeam=t,panel.dispatch("update",`packages.${panel.pkgName}.developerTeam`,t)},onVersionConfirm(e){const t=utils_1.checkTargetVersion(e,panel.options);this.pkgErrorMap.targetVersion=t.error,this.pkgOptions.targetVersion=e,this.emitChange("targetVersion")},emitChange(e){panel.dispatch("update",`packages.${panel.pkgName}.${e}`,this.pkgOptions.targetVersion,this.pkgErrorMap[e])},init(){this.pkgOptions=lodash.get(panel.options,`packages.${panel.options.platform}`)||{targetVersion:"12.0"},this.onVersionConfirm(this.pkgOptions.targetVersion),this.pkgErrorMap=JSON.parse(JSON.stringify(this.pkgErrorMap))},updateTeamInfo(){const e=Editor.Message.request("ios","query-team-info");this.updateTeamList(e)},updateTeamList(e){const t=this;e&&e.length&&(t.developerTeamList=e.map(e=>({value:e.outputValue,label:e.fullValue})),t.pkgOptions.developerTeam||(t.pkgOptions.developerTeam=t.developerTeamList[0].value,panel.dispatch("update",`packages.${panel.pkgName}.developerTeam`,t.pkgOptions.developerTeam)))}};async function mounted(){this.dev=Editor.App.dev,this.init();const e=await Editor.Profile.getConfig("ios","teamsInfo");this.updateTeamList(e)}function update(e,t){panel=this,t&&!t.startsWith(`pacakges.${panel.pkgName}`)&&"packages.native.JobSystem"!==t||(panel.options=e,panel.vm.init())}function ready(e,t,o,n){panel=this;const i=require("vue/dist/vue.js");panel.options=e,panel.pkgName=o,panel.vm=new i({el:panel.$.root,methods:methods,data:()=>({pkgOptions:{},pkgErrorMap:{},dev:!1,developerTeamList:[]}),mounted:mounted,components:{"build-prop":BuildPanel.vueComps.buildProp,"template-comp":BuildPanel.vueComps.templateComp}})}exports.template='\n<div class="ios" v-if="pkgOptions">\n    <ui-prop>\n        <ui-label slot="label" value="i18n:ios.options.render_back_end"></ui-label>\n        <div slot="content">METAL</div>\n    </ui-prop>\n    <ui-prop>\n        <ui-label slot="label" value="i18n:ios.options.developerTeam"></ui-label>\n        <div slot="content">\n            <ui-select\n                v-if="developerTeamList.length"\n                :value="pkgOptions.developerTeam"\n                @confirm="onDevelopTeamConfirm"\n            >\n                <option v-for="item in developerTeamList" :value="item.value">{{item.label}}</option>\n            </ui-select>\n            <ui-label style="opacity: 0.5" v-else value="i18n:ios.tips.developerTeamListError"></ui-label>\n            <ui-button @click="updateTeamInfo"><ui-label value="i18n:ios.options.queryAgain"></ui-label></ui-button>\n        </div>\n    </ui-prop>\n    <build-prop :error="pkgErrorMap.targetVersion">\n        <ui-prop class="no-wrap" :error="!!pkgErrorMap.targetVersion">\n            <ui-label slot="label" value="i18n:ios.options.targetVersion"></ui-label>\n            <ui-input\n                slot="content"\n                placeholder="i18n:ios.tips.targetVersionDefault"\n                :value="pkgOptions.targetVersion"\n                @confirm="onVersionConfirm($event.target.value)"\n            ></ui-input>\n        </ui-prop>\n    </build-prop>\n</div>\n',exports.$={root:".ios"},exports.update=update,exports.ready=ready,exports.buttonConfig={configs:{make:{label:"i18n:windows.make.label",hookHandle:"make"},run:{label:"i18n:windows.run.label",hookHandle:"run"}}};
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function a(e){try{p(o.next(e))}catch(e){n(e)}}function s(e){try{p(o.throw(e))}catch(e){n(e)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}p((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.watch=exports.data=exports.props=exports.template=void 0;const qrcode=require("qrcode");function data(){return{previewUrl:""}}function mounted(){return __awaiter(this,void 0,void 0,function*(){})}exports.template='\n<div>\n    <ui-prop v-show="previewUrl">\n        <ui-label slot="label" value="i18n:web-mobile.options.preview_url"></ui-label>\n        <canvas slot="content" ref="canvas"></canvas>\n    </ui-prop>\n    <ui-prop v-show="previewUrl">\n        <ui-label slot="label" value="i18n:web-mobile.options.preview_url"></ui-label>\n        <div slot="content">\n            <ui-link>{{previewUrl}}</ui-link>\n        </div>\n    </ui-prop>\n</div>\n',exports.props=["args","root"],exports.data=data,exports.watch={root(){this.previewIp=""}},exports.methods={handleCommand(e){return __awaiter(this,void 0,void 0,function*(){return!this.previewIp&&"run"===e&&(this.showPreviewQRCode(),!0)})},showPreviewQRCode(){return __awaiter(this,void 0,void 0,function*(){this.previewUrl=yield Editor.Message.request("web-mobile","set-preview-path",this.root),qrcode.toCanvas(this.$refs.canvas,this.previewUrl,{errorCorrectionLevel:"H",maskPattern:2,margin:1})})}},exports.mounted=mounted;
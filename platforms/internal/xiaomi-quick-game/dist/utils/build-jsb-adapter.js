"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=void 0;const babelify=require("babelify"),browserify=require("browserify"),path_1=require("path"),fs_extra_1=require("fs-extra");async function build(e){if(!e.root)throw new Error("Please specify the jsbAdapter path");const r=path_1.join(e.root,"./engine/index.js");let t=path_1.join(e.dist,"./jsb-engine.js");await createBundle(r,t)}function createBundle(e,r,t){return new Promise((i,n)=>{let s=browserify(e);t&&t.forEach(function(e){s.exclude(e)}),fs_extra_1.ensureDirSync(path_1.dirname(r)),s.transform(babelify,{presets:[require("@babel/preset-env")]}).bundle((e,t)=>{if(e)return console.error(e),void n(e);fs_extra_1.writeFileSync(r,t,"utf8"),i()})})}exports.build=build;
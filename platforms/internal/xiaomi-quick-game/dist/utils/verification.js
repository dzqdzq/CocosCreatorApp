"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOptions=exports.verificationFunc=exports.getVerifyFuncMap=void 0;const fs_extra_1=require("fs-extra");function getVerifyFuncMap(){const e={};return["versionName","versionCode","minPlatformVersion","package","privatePemPath","certificatePemPath","icon"].forEach(i=>{e[i]=((e,r)=>verificationFunc(i,e,r))}),e}function verificationFunc(e,i,r){const t={error:"",newValue:i},a=r.packages["xiaomi-quick-game"];if(["certificatePemPath","privatePemPath"].includes(e)&&a.useDebugKey)return t;switch(e){case"versionName":case"versionCode":if(!i){t.error=`${e} ${Editor.I18n.t("xiaomi-quick-game.not_empty")}`,t.newValue=null;break}break;case"package":const r=/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/;if(!i){t.error=`Game package(${i}) ${Editor.I18n.t("xiaomi-quick-game.package_name_error")}`,t.newValue=null;break}r.test(i)||(t.error=`Game package(${i})${Editor.I18n.t("xiaomi-quick-game.project_name_not_legal")}`,t.newValue=null);break;case"privatePemPath":i?fs_extra_1.existsSync(i)||(t.error=`${i}`+Editor.I18n.t("xiaomi-quick-game.signature_not_exist")):t.error=Editor.I18n.t("xiaomi-quick-game.private_pem_path_error");break;case"certificatePemPath":i?fs_extra_1.existsSync(i)||(t.error=`${i}`+Editor.I18n.t("xiaomi-quick-game.signature_not_exist")):t.error=Editor.I18n.t("xiaomi-quick-game.certificate_pem_path_error");break;case"icon":if("string"!=typeof i){t.error="Icon Path"+Editor.I18n.t("xiaomi-quick-game.icon_not_exist");break}fs_extra_1.existsSync(i)||(t.error="Icon Path"+Editor.I18n.t("xiaomi-quick-game.icon_not_exist"))}return t}exports.getVerifyFuncMap=getVerifyFuncMap,exports.verificationFunc=verificationFunc,exports.defaultOptions={package:"com.xiaomi.cocos",icon:Editor.App.icon,versionName:Editor.App.version,versionCode:Editor.App.version,minPlatformVersion:"1056",deviceOrientation:"portrait",tinyPackageServer:"",useDebugKey:!0,privatePemPath:"",certificatePemPath:"",logLevel:"log",encapsulation:!0};
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOptions=exports.verificationFunc=exports.getVerifyFuncMap=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");function getVerifyFuncMap(){const e={};return["versionName","versionCode","minPlatformVersion","package","privatePemPath","certificatePemPath","icon"].forEach(r=>{e[r]=((e,i)=>verificationFunc(r,e,i))}),e}function verificationFunc(e,r,i){const a={error:"",newValue:r};switch(e){case"versionName":case"versionCode":if(!r){a.error=`${e} ${Editor.I18n.t("xiaomi-quick-game.error.not_empty")}`,a.newValue=null;break}break;case"package":const i=/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/;if(!r){a.error=`Game package(${r}) ${Editor.I18n.t("xiaomi-quick-game.error.package_name_error")}`,a.newValue=null;break}i.test(r)||(a.error=`Game package(${r})${Editor.I18n.t("xiaomi-quick-game.project_name_not_legal")}`,a.newValue=null);break;case"privatePemPath":if(!r){a.error=Editor.I18n.t("xiaomi-quick-game.error.private_pem_path_error");break}const t=Editor.UI.File.resolveToRaw(r);".pem"===path_1.extname(t)&&fs_extra_1.existsSync(t)||(a.error="privatePemPath"+Editor.I18n.t("xiaomi-quick-game.error.private_pem_path_error"));break;case"certificatePemPath":{if(!r){a.error=Editor.I18n.t("xiaomi-quick-game.error.certificate_pem_path_error");break}const e=Editor.UI.File.resolveToRaw(r);".pem"===path_1.extname(e)&&fs_extra_1.existsSync(Editor.UI.File.resolveToRaw(r))||(a.error=`${r}`+Editor.I18n.t("xiaomi-quick-game.error.private_pem_path_error"))}break;case"icon":if("string"!=typeof r){a.error="Icon Path"+Editor.I18n.t("xiaomi-quick-game.error.icon_not_exist");break}fs_extra_1.existsSync(Editor.UI.File.resolveToRaw(r))||(a.error="Icon Path"+Editor.I18n.t("xiaomi-quick-game.error.icon_not_exist"))}return a}exports.getVerifyFuncMap=getVerifyFuncMap,exports.verificationFunc=verificationFunc,exports.defaultOptions={package:"com.xiaomi.cocos",icon:Editor.App.icon,versionName:Editor.App.version,versionCode:Editor.App.version,minPlatformVersion:"1056",deviceOrientation:"portrait",tinyPackageServer:"",useDebugKey:!0,privatePemPath:"",certificatePemPath:"",logLevel:"log",encapsulation:!0};
"use strict";let e={};module.exports=e;const t=require("electron"),o=require("@electron/remote"),n=require("./ipc");let i,l=!1;function r(e){return e?"WEBVIEW"===e.tagName?e:e.parentNode&&e.parentNode.host&&"WEBVIEW"===e.parentNode.host.tagName?e.parentNode.host:null:null}function d(e){e.preventDefault(),e.stopPropagation(),i.remove();let t=function(e,t){let o=document.elementFromPoint(e,t);for(;o&&o.shadowRoot;){let n=o.shadowRoot.elementFromPoint(e,t);if(!n||n===o)return o;o=n}return o}(e.clientX,e.clientY),o=t.getBoundingClientRect();r(t)?(i.style.backgroundColor="rgba( 128, 0, 0, 0.4)",i.style.outline="1px solid #f00"):(i.style.backgroundColor="rgba( 0, 128, 255, 0.5)",i.style.outline="1px solid #09f"),document.body.appendChild(i),i.style.top=`${o.top+1}px`,i.style.left=`${o.left+1}px`,i.style.width=`${o.width-2}px`,i.style.height=`${o.height-2}px`,i.children[0].innerText=`<${t.tagName.toLowerCase()} class="${t.className}" />`}function s(e){e.preventDefault(),e.stopPropagation(),a();let o=r(document.elementFromPoint(e.clientX,e.clientY));if(o)return o.openDevTools(),o.devToolsWebContents&&o.devToolsWebContents.focus(),void 0;t.ipcRenderer.send("editor:window-inspect-at",e.clientX,e.clientY)}function c(e){e.preventDefault(),e.stopPropagation(),27===e.which&&a()}function a(){l=!1,i.remove(),i=null,window.removeEventListener("mousemove",d,!0),window.removeEventListener("mousedown",s,!0),window.removeEventListener("keydown",c,!0)}e.open=function(e,t,o){n.sendToMain("editor:window-open",e,t,o)},e.focus=function(){n.sendToMain("editor:window-focus")},e.load=function(e,t){n.sendToMain("editor:window-load",e,t)},e.resize=function(e,t,o){n.sendToMain("editor:window-resize",e,t,o)},e.resizeSync=function(e,t,n){n?o.getCurrentWindow().setContentSize(e,t):o.getCurrentWindow().setSize(e,t)},e.center=function(){n.sendToMain("editor:window-center")},t.ipcRenderer.on("editor:window-inspect",function(){(function(){if(!l){if(l=!0,!i){(i=document.createElement("div")).style.position="fixed",i.style.zIndex="999",i.style.top="0",i.style.right="0",i.style.bottom="0",i.style.left="0",i.style.backgroundColor="rgba( 0, 128, 255, 0.5)",i.style.outline="1px solid #09f",i.style.cursor="default";let e=document.createElement("div");e.style.display="inline-block",e.style.position="relative",e.style.top="-18px",e.style.left="0px",e.style.padding="0px 5px",e.style.fontSize="12px",e.style.fontWeight="bold",e.style.whiteSpace="nowrap",e.style.color="#333",e.style.backgroundColor="#f90",e.innerText="",i.appendChild(e),document.body.appendChild(i)}window.addEventListener("mousemove",d,!0),window.addEventListener("mousedown",s,!0),window.addEventListener("keydown",c,!0)}})()});
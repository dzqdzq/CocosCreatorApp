const _0xb6a1=["ready","generateStyle","Message","./toolbar.html","defineProperty","show-panel","msgCounter","remove","__esModule",":update-toolbar","-btn","classList","close","path","add","showToolbar","save-toolbar-info","template","removeBroadcastListener","-no-vip-btn","toString","contains","send","readFileSync","utf8","toolbar","default","_onUpdateToolbar","isVip","removeEventListener","newMsgCount","request","title","call","__importDefault","-vip-btn","../common-lib/translate","openPanelBtn","methods","innerText","style","updateToolbar","setAttribute","addBroadcastListener","-hide","click","../constant/namespace"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(_0xb6a1,470);const _0x23cb=function(e,t){return _0xb6a1[e-=455]},_0x1db1ec=_0x23cb;var __importDefault=this&&this[_0x1db1ec(489)]||function(e){return e&&e[_0x1db1ec(463)]?e:{default:e}};Object[_0x1db1ec(459)](exports,_0x1db1ec(463),{value:!0}),exports.close=exports[_0x1db1ec(455)]=exports[_0x1db1ec(493)]=exports.$=exports.style=exports[_0x1db1ec(472)]=void 0;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require(_0x1db1ec(468))),style_generator_1=require("./style-generator"),translate_1=require(_0x1db1ec(491)),namespace_1=require(_0x1db1ec(501)),template=fs_1[_0x1db1ec(481)][_0x1db1ec(478)](path_1[_0x1db1ec(481)].join(__dirname,_0x1db1ec(458)),_0x1db1ec(479));exports.template=template;const style=style_generator_1[_0x1db1ec(456)]();exports[_0x1db1ec(495)]=style;const selector={toolbar:"."+namespace_1.ns+"-toolbar",openPanelBtn:"."+namespace_1.ns+_0x1db1ec(465),msgCounter:"."+namespace_1.ns+"-msg-counter"};exports.$=selector;const methods={updateToolbar(e={}){const t=_0x1db1ec;void 0!==e[t(470)]&&setElementVisibility(this.$[t(480)],e.showToolbar),void 0!==e.isVip&&(e[t(483)]?(this.$.openPanelBtn[t(466)][t(462)](namespace_1.ns+"-no-vip-btn"),this.$[t(492)][t(466)][t(469)](namespace_1.ns+t(490))):(this.$[t(492)][t(466)].remove(namespace_1.ns+t(490)),this.$.openPanelBtn.classList[t(469)](namespace_1.ns+t(474))));const s=e[t(485)];void 0!==s&&(0===s?(setElementVisibility(this.$[t(461)],!1),this.$.msgCounter[t(494)]="0"):(setElementVisibility(this.$.msgCounter,!0),this.$[t(461)][t(494)]=s>99?"99":s[t(475)]()));const n={showToolbar:getElementVisibility(this.$[t(480)]),isVip:this.$[t(492)].classList[t(476)](namespace_1.ns+t(490)),newMsgCount:parseInt(this.$.msgCounter[t(494)])||0};Editor.Message[t(477)](namespace_1.ns,t(471),n)}};async function ready(){const e=_0x1db1ec;this[e(482)]=(t=>{const s=e;methods[s(496)][s(488)](this,t)}),Editor[e(457)][e(498)](namespace_1.ns+e(464),this._onUpdateToolbar),this.$[e(492)].addEventListener(e(500),onClickShowPanel),this.$.openPanelBtn[e(497)]("title",translate_1.tr(e(487)));const t=await Editor[e(457)][e(486)](namespace_1.ns,"get-saved-toolbar-info");t&&this[e(482)](t)}function close(){const e=_0x1db1ec;Editor[e(457)][e(473)](namespace_1.ns+e(464),this[e(482)]),this.$[e(492)][e(484)]("click",onClickShowPanel)}function setElementVisibility(e,t){const s=_0x1db1ec;t?e[s(466)][s(462)](namespace_1.ns+s(499)):e[s(466)][s(469)](namespace_1.ns+s(499))}function getElementVisibility(e){const t=_0x1db1ec;return!e.classList[t(476)](namespace_1.ns+t(499))}function onClickShowPanel(){const e=_0x1db1ec;Editor[e(457)][e(477)](namespace_1.ns,e(460))}exports[_0x1db1ec(493)]=methods,exports.ready=ready,exports[_0x1db1ec(467)]=close;
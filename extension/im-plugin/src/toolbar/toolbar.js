const _0x58df=["isVip","join","title","methods","path","save-toolbar-info","show-panel",":update-toolbar","addEventListener","style","ready","updateToolbar","Message","-msg-counter","buttonTitle","classList","add","./style-generator","-hide","../constant/namespace","msgCounter","_onUpdateToolbar","generateStyle","send","click","-non-vip-btn-single-digit-msgs","removeBroadcastListener","-btn","-vip-btn","newMsgCount","default","addBroadcastListener","showToolbar","contains","-non-vip-btn","setAttribute","remove","close","-toolbar","template","call","__esModule","readFileSync","-non-vip-btn-double-digits-msgs","openPanelBtn","toolbar","innerText"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(_0x58df,162);const _0x5865=function(e,t){return _0x58df[e-=282]},_0x3d378d=_0x5865;var __importDefault=this&&this.__importDefault||function(e){return e&&e[_0x5865(302)]?e:{default:e}};Object.defineProperty(exports,_0x3d378d(302),{value:!0}),exports[_0x3d378d(298)]=exports[_0x3d378d(318)]=exports[_0x3d378d(311)]=exports.$=exports.style=exports.template=void 0;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require(_0x3d378d(312))),style_generator_1=require(_0x3d378d(325)),namespace_1=require(_0x3d378d(327)),template=fs_1.default[_0x3d378d(303)](path_1[_0x3d378d(291)][_0x3d378d(309)](__dirname,"./toolbar.html"),"utf8");exports[_0x3d378d(300)]=template;const style=style_generator_1[_0x3d378d(283)]();exports[_0x3d378d(317)]=style;const selector={toolbar:"."+namespace_1.ns+_0x3d378d(299),openPanelBtn:"."+namespace_1.ns+_0x3d378d(288),msgCounter:"."+namespace_1.ns+_0x3d378d(321)};exports.$=selector;const methods={updateToolbar(e={}){const t=_0x3d378d;void 0!==e.showToolbar&&setElementVisibility(this.$[t(306)],e[t(293)]),void 0!==e.buttonTitle&&this.$[t(305)][t(296)](t(310),e[t(322)]),void 0!==e[t(308)]&&(e[t(308)]?(this.$.openPanelBtn[t(323)][t(297)](namespace_1.ns+t(295)),this.$[t(305)][t(323)][t(324)](namespace_1.ns+t(289))):(this.$.openPanelBtn.classList.remove(namespace_1.ns+t(289)),this.$[t(305)][t(323)][t(324)](namespace_1.ns+t(295))));const s=e[t(290)];void 0!==s&&(this.$.toolbar[t(323)][t(297)](namespace_1.ns+t(286)),this.$.toolbar[t(323)][t(297)](namespace_1.ns+t(304)),0===s?(setElementVisibility(this.$[t(328)],!1),this.$[t(328)][t(307)]="0"):(setElementVisibility(this.$[t(328)],!0),this.$[t(328)][t(307)]=s>99?"99":s.toString(),e.isVip||(s>=10?this.$[t(306)].classList.add(namespace_1.ns+t(304)):this.$[t(306)][t(323)].add(namespace_1.ns+t(286)))));const n={showToolbar:getElementVisibility(this.$.toolbar),isVip:this.$[t(305)].classList[t(294)](namespace_1.ns+t(289)),newMsgCount:parseInt(this.$[t(328)][t(307)])||0};Editor[t(320)][t(284)](namespace_1.ns,t(313),n)}};async function ready(){const e=_0x3d378d;this[e(282)]=(t=>{const s=e;methods[s(319)][s(301)](this,t)}),Editor.Message[e(292)](namespace_1.ns+e(315),this[e(282)]),this.$[e(305)][e(316)](e(285),onClickShowPanel);const t=await Editor[e(320)].request(namespace_1.ns,"get-saved-toolbar-info");t&&this[e(282)](t)}function close(){const e=_0x3d378d;Editor.Message[e(287)](namespace_1.ns+e(315),this._onUpdateToolbar),this.$.openPanelBtn.removeEventListener(e(285),onClickShowPanel)}function setElementVisibility(e,t){const s=_0x3d378d;t?e[s(323)][s(297)](namespace_1.ns+s(326)):e.classList[s(324)](namespace_1.ns+s(326))}function getElementVisibility(e){const t=_0x3d378d;return!e[t(323)].contains(namespace_1.ns+t(326))}function onClickShowPanel(){const e=_0x3d378d;Editor[e(320)][e(284)](namespace_1.ns,e(314))}exports[_0x3d378d(311)]=methods,exports[_0x3d378d(318)]=ready,exports[_0x3d378d(298)]=close;
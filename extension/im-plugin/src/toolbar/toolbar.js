const _0x3bb8=["Message","removeEventListener","join","utf8","-non-vip-btn-double-digits-msgs","setAttribute","default","close","ready","save-toolbar-info","template","request","style","-btn","call","remove","innerText","addBroadcastListener","toString","msgCounter","isVip","addEventListener","_onUpdateToolbar","generateStyle","toolbar","removeBroadcastListener","openPanelBtn","send","__esModule","contains","add","../constant/namespace","methods","defineProperty","-vip-btn","-hide","-msg-counter","updateToolbar","classList","showToolbar","readFileSync","buttonTitle","__importDefault","-non-vip-btn","-toolbar"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(_0x3bb8,363);const _0x1af1=function(e,t){return _0x3bb8[e-=349]},_0x522b04=_0x1af1;var __importDefault=this&&this[_0x522b04(388)]||function(e){return e&&e[_0x522b04(374)]?e:{default:e}};Object[_0x522b04(379)](exports,"__esModule",{value:!0}),exports.close=exports[_0x522b04(354)]=exports[_0x522b04(378)]=exports.$=exports[_0x522b04(358)]=exports.template=void 0;const fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),style_generator_1=require("./style-generator"),namespace_1=require(_0x522b04(377)),template=fs_1[_0x522b04(352)][_0x522b04(386)](path_1[_0x522b04(352)][_0x522b04(393)](__dirname,"./toolbar.html"),_0x522b04(349));exports[_0x522b04(356)]=template;const style=style_generator_1[_0x522b04(369)]();exports[_0x522b04(358)]=style;const selector={toolbar:"."+namespace_1.ns+_0x522b04(390),openPanelBtn:"."+namespace_1.ns+_0x522b04(359),msgCounter:"."+namespace_1.ns+_0x522b04(382)};exports.$=selector;const methods={updateToolbar(e={}){const t=_0x522b04;void 0!==e[t(385)]&&setElementVisibility(this.$[t(370)],e[t(385)]),void 0!==e[t(387)]&&this.$[t(372)][t(351)]("title",e[t(387)]),void 0!==e[t(366)]&&(e[t(366)]?(this.$[t(372)].classList[t(361)](namespace_1.ns+t(389)),this.$[t(372)].classList[t(376)](namespace_1.ns+"-vip-btn")):(this.$[t(372)][t(384)][t(361)](namespace_1.ns+t(380)),this.$[t(372)][t(384)][t(376)](namespace_1.ns+t(389))));const s=e.newMsgCount;void 0!==s&&(this.$[t(370)].classList[t(361)](namespace_1.ns+"-non-vip-btn-single-digit-msgs"),this.$.toolbar[t(384)][t(361)](namespace_1.ns+t(350)),0===s?(setElementVisibility(this.$[t(365)],!1),this.$[t(365)][t(362)]="0"):(setElementVisibility(this.$[t(365)],!0),this.$[t(365)][t(362)]=s>99?"99":s[t(364)](),e.isVip||(s>=10?this.$.toolbar[t(384)][t(376)](namespace_1.ns+t(350)):this.$[t(370)][t(384)][t(376)](namespace_1.ns+"-non-vip-btn-single-digit-msgs"))));const n={showToolbar:getElementVisibility(this.$[t(370)]),isVip:this.$[t(372)][t(384)][t(375)](namespace_1.ns+t(380)),newMsgCount:parseInt(this.$[t(365)][t(362)])||0};Editor.Message[t(373)](namespace_1.ns,t(355),n)}};async function ready(){const e=_0x522b04;this._onUpdateToolbar=(e=>{const t=_0x1af1;methods[t(383)][t(360)](this,e)}),Editor.Message[e(363)](namespace_1.ns+":update-toolbar",this[e(368)]),this.$.openPanelBtn[e(367)]("click",onClickShowPanel);const t=await Editor[e(391)][e(357)](namespace_1.ns,"get-saved-toolbar-info");t&&this[e(368)](t)}function close(){const e=_0x522b04;Editor[e(391)][e(371)](namespace_1.ns+":update-toolbar",this[e(368)]),this.$[e(372)][e(392)]("click",onClickShowPanel)}function setElementVisibility(e,t){const s=_0x522b04;t?e[s(384)][s(361)](namespace_1.ns+s(381)):e[s(384)][s(376)](namespace_1.ns+"-hide")}function getElementVisibility(e){const t=_0x522b04;return!e[t(384)][t(375)](namespace_1.ns+"-hide")}function onClickShowPanel(){const e=_0x522b04;Editor[e(391)][e(373)](namespace_1.ns,"show-panel")}exports[_0x522b04(378)]=methods,exports[_0x522b04(354)]=ready,exports[_0x522b04(353)]=close;
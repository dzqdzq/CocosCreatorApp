const _0x25ce=["readFile","progressCallback","__esModule","total","basename","../../constant/namespace","once","canceled","sendSync","floor","succeeded","default","hostAPI","off","function","request-data","type","callId","percent","url","undefined",":panel-win-state-changed","file-selected","promises",":get-version","select-file","sendToHost","errorStr","ipcRenderer","__importDefault","failed","replace","download-failed","download-canceled","is-ready","get-data","defineProperty","new-msg","path","electron","transferred","download-with-progress","fileName","download","download-succeeded"];!function(e,n){!function(n){for(;--n;)e.push(e.shift())}(++n)}(_0x25ce,286);const _0x1d65=function(e,n){return _0x25ce[e-=221]},_0x493029=_0x1d65;var __importDefault=this&&this[_0x493029(234)]||function(e){return e&&e[_0x493029(252)]?e:{default:e}};Object[_0x493029(241)](exports,_0x493029(252),{value:!0});const fs_1=__importDefault(require("fs")),fsPromises=fs_1[_0x493029(261)][_0x493029(228)],path_1=__importDefault(require(_0x493029(243))),namespace_1=require(_0x493029(255)),electron_1=require(_0x493029(244)),pluginVersion=electron_1.ipcRenderer[_0x493029(258)](namespace_1.ns+_0x493029(229)),globalAny=global;let panelWinStateChangedListener=null;function uuid(){const e=_0x493029;let n=Date.now();return e(225)!=typeof performance&&e(264)==typeof performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[e(236)](/[xy]/g,function(t){const o=e;var r=(n+16*Math.random())%16|0;return n=Math[o(259)](n/16),("x"===t?r:3&r|8).toString(16)})}electron_1[_0x493029(233)].on(namespace_1.ns+_0x493029(226),(e,n)=>{panelWinStateChangedListener&&panelWinStateChangedListener(n)}),globalAny[_0x493029(262)]={imPluginVersion:pluginVersion,getData:async()=>new Promise(e=>{const n=_0x493029;electron_1[n(233)][n(256)](n(240),function(n,t){e(t)}),electron_1[n(233)].sendToHost(n(265))}),sendToHost:(e,n)=>{const t=_0x493029;t(242)===e?electron_1[t(233)][t(231)](t(242),{newMsgCount:n}):"download"===e&&electron_1[t(233)].sendToHost(t(248),{url:n.url,type:n[t(221)],fileName:n[t(247)]})},isReady(e){const n=_0x493029;electron_1[n(233)].sendToHost(n(239),e)},setWindowListener(e){panelWinStateChangedListener=e},selectFile:async e=>new Promise((n,t)=>{const o=_0x493029;electron_1[o(233)].once(o(227),function(e,t){t?async function(e){const n=_0x1d65,t=path_1[n(261)][n(254)](e),o=await fsPromises[n(250)](e);return new File([o],t)}(t).then(n):n("")}),electron_1[o(233)][o(231)](o(230),{type:e})}),downloadWithProgress:async e=>new Promise((n,t)=>{const o=_0x493029,r=uuid();function s(n,t){const o=_0x1d65;t.callId===r&&(1==t[o(223)]&&t[o(245)]!==t.total||e[o(251)]&&e[o(251)]({percent:t[o(223)],transferred:t[o(245)],total:t[o(253)]}))}function a(e,n){n===r&&i({status:_0x1d65(260)})}function c(e,n){const t=_0x1d65;n[t(222)]===r&&i({status:t(235),errorStr:n[t(232)]})}function l(e,n){n===r&&i({status:_0x1d65(257)})}function i(e){const t=_0x1d65;n(e),electron_1[t(233)][t(263)]("download-progress",s),electron_1[t(233)][t(263)](t(249),a),electron_1[t(233)][t(263)](t(237),c),electron_1[t(233)].off(t(238),l)}electron_1.ipcRenderer[o(231)](o(246),{url:e[o(224)],type:e[o(221)],fileName:e[o(247)],callId:r}),electron_1[o(233)].on("download-progress",s),electron_1[o(233)].on(o(249),a),electron_1[o(233)].on(o(237),c),electron_1[o(233)].on(o(238),l)})};
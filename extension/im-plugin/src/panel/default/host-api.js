const _0x2314=["once","fileName","sendToHost","hostAPI","defineProperty","__importDefault",":panel-win-state-changed","file-selected","default","then","url","ipcRenderer","promises",":get-version","electron","select-file","download","type","readFile","__esModule"];!function(e,n){!function(n){for(;--n;)e.push(e.shift())}(++n)}(_0x2314,431);const _0x29ac=function(e,n){return _0x2314[e-=269]},_0x52efbd=_0x29ac;var __importDefault=this&&this[_0x52efbd(283)]||function(e){return e&&e[_0x52efbd(277)]?e:{default:e}};Object[_0x52efbd(282)](exports,_0x52efbd(277),{value:!0});const fs_1=__importDefault(require("fs")),fsPromises=fs_1[_0x52efbd(286)][_0x52efbd(270)],path_1=__importDefault(require("path")),namespace_1=require("../../constant/namespace"),electron_1=require(_0x52efbd(272)),pluginVersion=electron_1[_0x52efbd(269)].sendSync(namespace_1.ns+_0x52efbd(271)),globalAny=global;let panelWinStateChangedListener=null;electron_1[_0x52efbd(269)].on(namespace_1.ns+_0x52efbd(284),(e,n)=>{panelWinStateChangedListener&&panelWinStateChangedListener(n)}),globalAny[_0x52efbd(281)]={imPluginVersion:pluginVersion,sendToHost:(e,n)=>{const t=_0x52efbd;"new-msg"===e?electron_1[t(269)].sendToHost("new-msg",{newMsgCount:n}):t(274)===e&&electron_1[t(269)][t(280)](t(274),{url:n[t(288)],type:n[t(275)],fileName:n[t(279)]})},isReady(e){electron_1[_0x52efbd(269)].sendToHost("is-ready",e)},setWindowListener(e){panelWinStateChangedListener=e},selectFile:async e=>(electron_1[_0x52efbd(269)].sendToHost(_0x52efbd(273),{type:e}),new Promise((e,n)=>{const t=_0x52efbd;electron_1[t(269)][t(278)](t(285),function(n,s){const o=t;s?function(e){const n=_0x29ac,t=path_1[n(286)].basename(e);return fsPromises[n(276)](e)[n(287)](e=>new File([e],t))}(s)[o(287)](e):e("")})}))};
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))(function(_,s){function i(e){try{o(r.next(e))}catch(e){s(e)}}function n(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?_(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArmatureDisplay=exports.ARMATUREDISPLAY=void 0;const utlis_1=require("../common/utlis"),base_1=require("../common/base");exports.ARMATUREDISPLAY={__type__:"dragonBones.ArmatureDisplay",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_visFlags:0,_customMaterial:null,_srcBlendFactor:2,_dstBlendFactor:4,_color:{__type__:"cc.Color",r:255,g:255,b:255,a:255},playTimes:-1,premultipliedAlpha:!1,_defaultArmatureIndexValue:-1,_dragonAsset:null,_dragonAtlasAsset:null,_armatureName:"weapon_1005",_animationName:"",_animationIndexValue:0,_defaultCacheModeValue:0,_timeScale:1,_playTimes:-1,_debugBones:!1,_enableBatch:!1,_sockets:[]};class ArmatureDisplay{static create(){return JSON.parse(JSON.stringify(exports.ARMATUREDISPLAY))}static migrate(e){return __awaiter(this,void 0,void 0,function*(){const t=JSON.parse(JSON.stringify(exports.ARMATUREDISPLAY));for(let a in e){const r=e[a];if("__type__"!==a&&void 0!==r&&null!==r)if(a.startsWith("_N$")&&(a=a.replace(/N\$/,"")),"_materials"===a){let e=r[0];e&&(e={__uuid__:yield base_1.ImporterBase.getUuid(e.__uuid__)}),t._customMaterial=e}else"_dragonAsset"===a?t._dragonAsset={__uuid__:yield base_1.ImporterBase.getUuid(r.__uuid__)}:"_dragonAtlasAsset"===a?t._dragonAtlasAsset={__uuid__:yield base_1.ImporterBase.getUuid(r.__uuid__)}:"_srcBlendFactor"===a?t._srcBlendFactor=(0,utlis_1.getBlendFactor2DTo3D)(r):"_dstBlendFactor"===a?t._dstBlendFactor=(0,utlis_1.getBlendFactor2DTo3D)(r):t[a]=r}return t})}static apply(e,t,a){return __awaiter(this,void 0,void 0,function*(){const r=yield ArmatureDisplay.migrate(t[e]);return a.splice(e,1,r),r})}}exports.ArmatureDisplay=ArmatureDisplay;
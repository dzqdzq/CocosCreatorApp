"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(s,n){function _(e){try{o(r.next(e))}catch(e){n(e)}}function a(e){try{o(r.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(_,a)}o((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshRenderer=exports.MESHRENDERER=void 0;const base_1=require("../common/base"),ModelLightmapSettings_1=require("./ModelLightmapSettings");exports.MESHRENDERER={__type__:"cc.MeshRenderer",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_materials:[],_visFlags:0,lightmapSettings:null,_mesh:null,_shadowCastingMode:0,_shadowReceivingMode:1,_enableMorph:!0};class MeshRenderer{static create(){return JSON.parse(JSON.stringify(exports.MESHRENDERER))}static migrate(e,t){return __awaiter(this,void 0,void 0,function*(){const i=t[e],r=JSON.parse(JSON.stringify(exports.MESHRENDERER));for(const e in i){const t=i[e];if("__type__"!==e&&void 0!==t&&null!==t)if("_materials"===e){r._materials=[];for(let e=0;e<t.length;++e){let e=t[0];e&&(e={__uuid__:yield base_1.ImporterBase.getUuid(e.__uuid__)},r._materials.push(e))}}else"_receiveShadows"===e?r._shadowReceivingMode="true"===t?1:0:"_mesh"===e?r._mesh={__uuid__:yield base_1.ImporterBase.getUuid(t.__uuid__)}:r[e]=t}return r})}static apply(e,t,i){return __awaiter(this,void 0,void 0,function*(){const r=yield MeshRenderer.migrate(e,t),s=ModelLightmapSettings_1.ModelLightmapSettings.create();return i.push(s),r.lightmapSettings={__id__:i.length-1},i.splice(e,1,r),r})}}exports.MeshRenderer=MeshRenderer;
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function a(e){try{o(i.next(e))}catch(e){s(e)}}function _(e){try{o(i.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,_)}o((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrefabInfo=exports.PREFABINFO=void 0;const base_1=require("../common/base");exports.PREFABINFO={__type__:"cc.PrefabInfo",root:null,asset:null,fileId:"",sync:!1,_synced:{default:!1,serializable:!1}};class PrefabInfo{static create(){return JSON.parse(JSON.stringify(exports.PREFABINFO))}static migrate(e,t){return __awaiter(this,void 0,void 0,function*(){const r=JSON.parse(JSON.stringify(exports.PREFABINFO));let i=!1;t&&t[0]&&(i="cc.Prefab"===t[0].__type__);for(const t in e){const n=e[t];if("__type__"!==t&&void 0!==n&&null!==n)if("asset"===t)if(n.__uuid__){let e;e=i?base_1.ImporterBase.getNewUuid(n.__uuid__):yield base_1.ImporterBase.getUuid(n.__uuid__),r.asset={__uuid__:e}}else n.__id__&&(r.asset=n);else r[t]=n}return r})}static apply(e,t,r){return __awaiter(this,void 0,void 0,function*(){const i=yield PrefabInfo.migrate(t[e],r);return r.splice(e,1,i),i})}}exports.PrefabInfo=PrefabInfo;
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,_){return new(o||(o=Promise))(function(r,i){function n(e){try{l(_.next(e))}catch(e){i(e)}}function c(e){try{l(_.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(n,c)}l((_=_.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RichText=exports.RICHTEXT=void 0;const base_1=require("../common/base"),utlis_1=require("../common/utlis");exports.RICHTEXT={__type__:"cc.RichText",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_lineHeight:40,_string:"<color=#00ff00>Rich</color><color=#0fffff>Text</color>",_horizontalAlign:0,_fontSize:40,_maxWidth:0,_fontFamily:"Arial",_font:null,_isSystemFontUsed:!0,_userDefinedFont:null,_cacheMode:0,_imageAtlas:null,_handleTouchEvent:!0};class RichText{static create(){return JSON.parse(JSON.stringify(exports.RICHTEXT))}static migrate(e){return __awaiter(this,void 0,void 0,function*(){const t=JSON.parse(JSON.stringify(exports.RICHTEXT));for(let o in e){const _=e[o];if("__type__"!==o&&void 0!==_&&null!==_)if("node"===o){t.node=_;const o=e[_.__id__];o&&o._color&&(t._color.r=o._color.r,t._color.g=o._color.g,t._color.b=o._color.b,t._color.a=o._color.a)}else if("_materials"===o){let e=_[0];e&&(e={__uuid__:yield base_1.ImporterBase.getUuid(e.__uuid__)}),t._customMaterial=e}else"_srcBlendFactor"===o?t._srcBlendFactor=utlis_1.getBlendFactor2DTo3D(_):"_dstBlendFactor"===o?t._dstBlendFactor=utlis_1.getBlendFactor2DTo3D(_):(o=o.replace(/_N\$/,"_"),_.__uuid__&&(_.__uuid__=yield base_1.ImporterBase.getUuid(_.__uuid__)),t[o]=_)}return t})}static apply(e,t,o){return __awaiter(this,void 0,void 0,function*(){const _=yield RichText.migrate(t[e]);return o.splice(e,1,_),_})}}exports.RichText=RichText;
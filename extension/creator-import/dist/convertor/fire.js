"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,a){return new(t||(t=Promise))(function(n,i){function o(e){try{u(a.next(e))}catch(e){i(e)}}function s(e){try{u(a.throw(e))}catch(e){i(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(o,s)}u((a=a.apply(e,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FireImporter=void 0;const base_1=require("../common/base"),Canvas_1=require("../components/Canvas"),MigrateManager_1=require("../components/MigrateManager"),TrailModule_1=require("../components/TrailModule");class FireImporter extends base_1.ImporterBase{constructor(){super(...arguments),this.type="fire"}import(){var e;return __awaiter(this,void 0,void 0,function*(){this._3dMeta.ver="1.1.26",this._3dMeta.importer="scene";const r=this.readJSONSync(),t=new Array(r.length);for(let e=0;e<r.length;++e)yield MigrateManager_1.MigrateManager.migrate(e,r,t);return yield Canvas_1.Canvas.updateCameraComponent(t,r),yield Canvas_1.Canvas.insert(t),yield Canvas_1.Canvas.checkDesignResolution(t,null===(e=this.pathInfo)||void 0===e?void 0:e.name),TrailModule_1.TrailModule.setParticleSystem(t),this.ensureDefaultSprite2DFor3D(t),this._2dTo3dSource=t,!0})}}exports.FireImporter=FireImporter;
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(a,_){function n(e){try{o(s.next(e))}catch(e){_(e)}}function i(e){try{o(s.throw(e))}catch(e){_(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(n,i)}o((s=s.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mask=exports.MASK=void 0;const base_1=require("../common/base"),utlis_1=require("../common/utlis");exports.MASK={__type__:"cc.Mask",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_materials:[],_visFlags:0,_srcBlendFactor:2,_dstBlendFactor:4,_color:{__type__:"cc.Color",r:255,g:255,b:255,a:255},_type:0,_inverted:!1,_segments:64,_spriteFrame:null,_alphaThreshold:.1};class Mask{static typeTo2D(e){switch(e){case 2:return 3}return e}static create(){return JSON.parse(JSON.stringify(exports.MASK))}static migrate(e){return __awaiter(this,void 0,void 0,function*(){const t=JSON.parse(JSON.stringify(exports.MASK));for(const r in e){const s=e[r];"__type__"!==r&&void 0!==s&&null!==s&&("node"===r?(t.node=s,(0,utlis_1.setColor)(t,s.__id__,e)):"_type"===r?t._type=Mask.typeTo2D(s):"_N$alphaThreshold"===r?t._alphaThreshold=s:"_spriteFrame"===r?t._spriteFrame={__uuid__:yield base_1.ImporterBase.getUuid(s.__uuid__,"spriteFrame")}:"_N$inverted"===r?t._inverted=s:"_srcBlendFactor"===r?t._srcBlendFactor=(0,utlis_1.getBlendFactor2DTo3D)(s):"_dstBlendFactor"===r?t._dstBlendFactor=(0,utlis_1.getBlendFactor2DTo3D)(s):"_materials"===r?t._materials=[]:t[r]=s)}return t})}static apply(e,t,r){return __awaiter(this,void 0,void 0,function*(){const s=yield Mask.migrate(t[e]);return r.splice(e,1,s),s})}}exports.Mask=Mask;
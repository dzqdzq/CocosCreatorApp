var _0x1677=["catch","length","map","__importDefault","services","./plugin","writeServiceList","scanfServicePlugins","replaceTagAtoUILink","use strict","loadAllServicePlugins"," base on Cocos Creator ","inited","csEditor","push","scanfServicePluginInfos","csLogger","readServiceList","getCreatorVersion","getRedirectUrl","csProtocol","service_price","shift","getServiceList","service_desc","games","getServices","readDevMode","stringify","urls","../../utils/_inner","assign","default","defineProperty","__esModule","substring","isLogin","csConfig","userInfo","getServiceVersion","getUserInfo","getServiceUrls","service_protocol","../../utils"];!function(i,e){!function(e){for(;--e;)i.push(i.shift())}(++e)}(_0x1677,275);var _0x2375=function(i,e){return _0x1677[i-=169]},_0x2bd3b5=_0x2375,_0x1629=[_0x2bd3b5(203),_0x2bd3b5(182),"csHttp",_0x2bd3b5(199),_0x2bd3b5(190),_0x2bd3b5(209),"getUserData",_0x2bd3b5(187),_0x2bd3b5(186),_0x2bd3b5(173),_0x2bd3b5(184),_0x2bd3b5(204),_0x2bd3b5(188),_0x2bd3b5(175),_0x2bd3b5(212),_0x2bd3b5(181),_0x2bd3b5(193),"paramEncode","devMode",_0x2bd3b5(206),_0x2bd3b5(210),_0x2bd3b5(191),_0x2bd3b5(198),_0x2bd3b5(169),"getGameList",_0x2bd3b5(192),_0x2bd3b5(174),_0x2bd3b5(196),_0x2bd3b5(185),"isLogin",_0x2bd3b5(189),_0x2bd3b5(195),_0x2bd3b5(171),_0x2bd3b5(179),_0x2bd3b5(170),"csProtocol",_0x2bd3b5(183)];!function(i,e){!function(e){for(var t=_0x2375;--e;)i[t(172)](i[t(180)]())}(++e)}(_0x1629,313);var _0x59a1=function(i,e){return _0x1629[i-=289]},_0x35e2ed=_0x59a1;_0x2bd3b5(211);var __importDefault=this&&this[_0x2bd3b5(205)]||function(i){return i&&i[_0x59a1(297)]?i:{default:i}};Object[_0x35e2ed(293)](exports,_0x2bd3b5(192),{value:!0});const plugin_1=__importDefault(require(_0x2bd3b5(207))),utils_1=require(_0x2bd3b5(201)),_inner_1=require(_0x35e2ed(321));exports.default={userInfo:{},games:[],services:[],urls:{},inited:!1,isLogin:!1,unfoldGroups:new Set,devMode:!1,init:async function(i=!1){var e=_0x2bd3b5,t=_0x35e2ed;utils_1[t(298)].debug("Cocos Service "+utils_1[e(171)][e(197)]()+t(295)+utils_1[t(304)][e(176)]()),this[t(306)]&&!i||(this[t(301)]=await utils_1[t(304)][e(194)](),this.isLogin?(this[t(299)]=await this[t(294)](!0),this[t(316)]=await utils_1[t(307)][t(312)]()):this[t(299)]={corporation_id:"0"},this[t(291)]=await this[t(319)](!0),this[t(290)]=await utils_1[t(303)][t(300)](),plugin_1[t(313)][t(318)](),plugin_1[e(190)][t(314)](),await plugin_1[t(313)][t(323)](),this[t(306)]=!0)},getUserInfo:async function(i=!1){return new Promise(async(e,t)=>{var s=_0x2375,r=_0x59a1;if(i||"{}"===JSON[r(317)](this.userInfo)){this[s(196)]=await utils_1[s(178)][r(294)]();let i=utils_1[r(304)][r(315)]();for(var _ in i)this[r(299)][_]=i[_]}e(this[r(299)])})},getGames:async function(i=!1){return new Promise(async(e,t)=>{var s=_0x2375,r=_0x59a1;(i||0===this[r(308)][r(309)])&&(this[s(183)]=await utils_1[r(307)][r(296)]()),e(this[r(308)])})},getServices:async function(i=!1){return new Promise(async(e,t)=>{var s=_0x2375,r=_0x59a1;(i||0===this[s(206)].length)&&(this[r(291)]=await utils_1[s(178)][r(324)]()[s(202)](async i=>e(await utils_1.csConfig[r(322)]())),this[r(291)]=this[r(291)][r(320)](i=>Object[r(302)](i,{service_price:_inner_1[r(292)](i[r(305)]),service_protocol:_inner_1[r(292)](i[s(200)]),service_desc:_inner_1.replaceTagAtoUILink(i[r(310)])})),await utils_1.csConfig[s(208)](this.services)),e(this.services)})},async getUrl(i,e={}){var t=_0x2bd3b5,s=_0x35e2ed;if("{}"===JSON[t(186)](this[s(316)]))return"";let r=this[s(316)][i]+("{}"!==JSON[t(186)](e)?"?"+utils_1[s(311)][s(289)](e)[s(325)](1):"");return await utils_1[t(178)][t(177)](r)}};
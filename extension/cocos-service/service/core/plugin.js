const _0x166e=["installPlugin","insertServicePluginInfo","name","detail","string","csUtil","use strict","load","getVersionDesc","main","_loadServicePlugin","template","length","forEach","shift","csEditor","getServiceHomePath","get","textContent","remove","contents","existsSync","firstChild","../assets/panel.css","innerHTML","fs-extra","nextSibling","readFile","setAttribute","package_download_url","clear","removeAllListeners","loadServicePlugin","__esModule","__importStar","replace","split","style",":item","csProtocol",".zip","unloadServicePlugin","__createBinding","set","prototype","keys","values","delete","defineProperty","getServicePluginInfo","bind","insertServicePlugin","type","require","csFile","default","pluginMap","join","text/css","parse","csPlugin","readdirSync","csEvent","registerI18n","service-",":detail","deleteCache","create","createElement","plugin:","pluginInfoMap","path","reloadPlugin"];!function(t,e){!function(e){for(;--e;)t.push(t.shift())}(++e)}(_0x166e,151);const _0x4456=function(t,e){return _0x166e[t-=392]},_0x3fbcda=_0x4456,_0x3e56=[_0x3fbcda(443),_0x3fbcda(399),_0x3fbcda(449),_0x3fbcda(457),"stringify","insertBefore",_0x3fbcda(409),_0x3fbcda(397),_0x3fbcda(445),_0x3fbcda(415),_0x3fbcda(439),_0x3fbcda(431),_0x3fbcda(408),_0x3fbcda(463),_0x3fbcda(414),_0x3fbcda(440),_0x3fbcda(424),_0x3fbcda(396),_0x3fbcda(427),_0x3fbcda(437),_0x3fbcda(418),_0x3fbcda(426),_0x3fbcda(411),_0x3fbcda(413),_0x3fbcda(400),_0x3fbcda(459),_0x3fbcda(438),"default",_0x3fbcda(461),"pluginExists",_0x3fbcda(450),_0x3fbcda(432),_0x3fbcda(433),_0x3fbcda(447),_0x3fbcda(435),_0x3fbcda(423),_0x3fbcda(404),_0x3fbcda(422),_0x3fbcda(456),_0x3fbcda(394),_0x3fbcda(428),_0x3fbcda(448),_0x3fbcda(398),_0x3fbcda(444),_0x3fbcda(455),_0x3fbcda(407),"item","has",_0x3fbcda(453),"_unloadServicePlugin",_0x3fbcda(430),_0x3fbcda(458),"methods","call",_0x3fbcda(425),_0x3fbcda(420),"hasOwnProperty",_0x3fbcda(410),"textContent",_0x3fbcda(462),_0x3fbcda(406),_0x3fbcda(460),_0x3fbcda(392),_0x3fbcda(454),_0x3fbcda(434),_0x3fbcda(419),_0x3fbcda(402),"../../builtin","../assets/creator.css",_0x3fbcda(417),_0x3fbcda(403),_0x3fbcda(452),_0x3fbcda(441),"__setModuleDefault","unload",_0x3fbcda(421),_0x3fbcda(451),_0x3fbcda(436),_0x3fbcda(464)];!function(t,e){!function(e){const i=_0x4456;for(;--e;)t.push(t[i(401)]())}(++e)}(_0x3e56,284);const _0x192c=function(t,e){return _0x3e56[t-=319]},_0xeb456c=_0x192c;_0x3fbcda(393);var __createBinding=this&&this[_0x3fbcda(429)]||(Object[_0x3fbcda(454)]?function(t,e,i,c){void 0===c&&(c=i),Object.defineProperty(t,c,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,c){void 0===c&&(c=i),t[c]=e[i]}),__setModuleDefault=this&&this[_0xeb456c(345)]||(Object[_0xeb456c(335)]?function(t,e){const i=_0xeb456c;Object[i(385)](t,i(378),{enumerable:!0,value:e})}:function(t,e){t[_0xeb456c(378)]=e}),__importStar=this&&this[_0xeb456c(347)]||function(t){const e=_0x3fbcda,i=_0xeb456c;if(t&&t[e(420)])return t;var c={};if(null!=t)for(var n in t)e(442)!==n&&Object[i(362)][i(328)][i(325)](t,n)&&__createBinding(c,t,n);return __setModuleDefault(c,t),c};Object[_0xeb456c(385)](exports,_0xeb456c(327),{value:!0});const fs_extra_1=require(_0x3fbcda(412)),path_1=require(_0xeb456c(323)),utils_1=__importStar(require("../../utils"));exports[_0xeb456c(378)]={pluginInfoMap:new Map,pluginMap:new Map,isInstall:!1,isUpdate:!1,scanfServicePluginInfos:function(){const t=_0x3fbcda,e=_0xeb456c;let i=utils_1[e(338)][e(342)]();if(!fs_extra_1[e(363)](i))return;this[e(354)][e(341)](),fs_extra_1[e(392)](i)[e(375)](t=>{this.insertServicePluginInfo(t)});let c=path_1[e(394)](__dirname,e(339));fs_extra_1[t(448)](c)[e(375)](t=>{this[e(379)](t)})},insertServicePluginInfo:function(t){const e=_0xeb456c;let i=utils_1[e(384)][e(349)](t);void 0!==i&&this[e(354)][e(322)](i[e(331)],i)},getServicePluginInfo:function(t){const e=_0x3fbcda,i=_0xeb456c;return!this[i(354)][i(319)](t)&&utils_1[e(447)][i(380)](t)&&this[i(379)](t),this[i(354)][i(387)](t)},scanfServicePlugins:function(){const t=_0xeb456c;this[t(351)][t(341)]();for(let e of this.pluginInfoMap[t(383)]())this[t(377)](e)},insertServicePlugin:function(t){const e=_0x3fbcda,i=_0xeb456c;void 0!==t&&void 0!==t[i(396)]&&null!==typeof t[i(396)]&&(t[i(396)][e(463)]&&this[i(351)][i(322)](t[i(331)]+i(343),utils_1[i(334)][i(366)](t[e(458)],t[i(396)][i(364)][i(368)])),t[i(396)][i(397)]&&this[i(351)][i(322)](t[i(331)]+i(326),utils_1[i(334)][i(366)](t[i(323)],t[i(396)][i(397)][i(368)])))},getServicePlugin:function(t,e){const i=_0xeb456c;return this[_0x3fbcda(457)][i(319)](t)||this[i(351)][i(319)](t+":"+e)||this[i(376)](t),this[i(351)][i(387)](t+":"+e)},loadAllServicePlugins:async function(){const t=_0xeb456c;for(let e of this[t(354)][t(382)]())await this[t(337)](e)},loadServicePlugin:async function(t){const e=_0xeb456c;this[e(381)](t);for(let[i,c]of this[e(351)])t===i[e(386)](":")[0]&&(await this[e(358)](i,c),this[e(351)][e(322)](i,c))},_loadServicePlugin:async function(t,e){const i=_0x3fbcda,c=_0xeb456c;if(e[c(390)]&&await e[c(390)](utils_1[i(442)]),e[c(324)])for(let n in e.methods)utils_1[i(449)].on(c(389)+t+":"+n,e[c(324)][n][c(370)](e))},createInnterHTML:function(t,e,i,c){const n=_0x3fbcda,a=_0xeb456c;e[a(373)]=t[a(393)];let _=document[n(455)](a(367));if(_[n(415)](n(439),a(359)),_[n(405)]=utils_1[a(344)][n(414)](__dirname,a(340))+utils_1.csFile[a(365)](__dirname,a(329)),e[a(356)](_,e[a(357)]),t[a(367)]){let i=document[a(395)](a(367));i[a(360)](a(361),n(445)),i[a(330)]=t[a(367)],e[a(356)](i,_[a(374)])}if(t.$){let i=JSON[n(446)](JSON[a(355)](t.$));for(let c of Object[a(382)](i)){if(a(350)!=typeof t.$[c])return;t.$[c]=e.querySelector(i[c])}}this.pluginMap.set(i+":"+c,t)},unloadAllServicePlugins:async function(){const t=_0xeb456c;for(let e of this[t(354)][t(382)]())await this[t(391)](e)},unloadServicePlugin:async function(t){const e=_0x3fbcda,i=_0xeb456c;for(let[e,c]of this[i(351)])t===e[i(386)](":")[0]&&await this[i(321)](e,c);this[i(354)][i(319)](t)&&this[e(457)][i(336)](t)},_unloadServicePlugin:async function(t,e){const i=_0xeb456c;if(e[i(346)]&&await e[i(346)](),e[i(324)])for(let c in e[i(324)])utils_1[i(353)][i(371)](i(389)+t+":"+c);this[i(351)][i(336)](t)},registerI18n:function(t){const e=_0xeb456c;utils_1[e(384)][e(381)](t)},pluginExists:function(t){const e=_0xeb456c;return this[e(354)][e(319)](t)},uninstallPlugin:async function(t){const e=_0x3fbcda,i=_0xeb456c;await this[e(428)](t),this[i(354)].delete(t),utils_1[i(344)][i(332)](path_1[i(394)](utils_1[i(338)].getServiceHomePath(),t[i(388)](i(348),"")))},installPlugin:function(t,e,i){const c=_0xeb456c;return utils_1[c(384)][c(333)](t,e,i)},reloadPlugin:async function(t){const e=_0x3fbcda,i=_0xeb456c;await this[i(391)](t);let c=path_1[i(394)](utils_1[i(338)][e(403)](),t[i(388)](i(348),""));utils_1[e(392)][i(320)](c),this[i(379)](c);let n=this[i(349)](t);void 0!==n&&(this[i(377)](n),await this.loadServicePlugin(t))},getPluginVerByURL:function(t){const e=_0x3fbcda,i=_0xeb456c;if(""!==t){let c=t[i(386)]("/");return c[c[i(352)]-1][e(422)](i(369),"")}return""},getPluginUrlByVer:async function(t,e){const i=_0x3fbcda,c=_0xeb456c;return(await utils_1[c(372)][i(395)](t,e))[i(416)]}};
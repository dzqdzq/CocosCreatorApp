var _0x2d6c=["show-bind-game","failureOpenService","service_protocol","readFile","gotoGuideUrl","all","__importDefault","csEvent","push"," - ","c_id","show-loading","realname_company_tips","verify_tips","is_mobile","service_type","realname_person_tips","find","show-verm","readPluginInfo","dialogMsgBox","readServiceParam","certificate","shows","app_id","getPluginVerByURL","enable","service_sample_url","disables","$emit","param","download_failed","require_verify","dev","__esModule","service_name","shift","Cancel Open!","default","openCocosUrl","compareVersion","beforeClickGotoLink","getUrl","../../../vue","service_id","verification_status","__setModuleDefault","checked","checkServiceOnGame","gotoDashboardUrl","dialog_title","enable-service","attachShadow","open_service_btn","emit","pluginExists","createInnterHTML","opening_service","csUtil","../../core/plugin","getServicePluginInfo","serviceVersion","service_version_warnning","pluginReady","detail","shadowRoot","gotoSampleUrl","service_dev_url","service","cocos_mobile_bind_company_url","installPlugin","uninstallPlugin","serviceInfo","jump","warn","guide","then","target","name","create","hasSwitch","servicePlugin","game","defineProperty","package_download_url","csLogger","hasUpdate","enableService","__importStar","corporation_id","high_verify_tips","service:switch-version","call","service_price","isUpdate","sample","close","indexOf","$data","removeAllListeners","hide-loading","open","beforeOpenService","csAnalytics","openService","srv","service_component_name","fail","show-confirm","plugin_version","disableService","/../../assets/","doOpenService","btn_cancel","cocos_service_open_url","platform","catch","closing_service","csProtocol","openServiceRequestServer","debug","configDevUrl","$root","use strict","installed","UNKNOW","isInstall","csConfig","getServicePlugin","cocos_company_verify_url","csEditor","version","__createBinding","getUserInfo","./service-detail.html","../../../utils","contents"];!function(i,t){!function(t){for(;--t;)i.push(i.shift())}(++t)}(_0x2d6c,334);var _0x5dff=function(i,t){return _0x2d6c[i-=435]},_0x437356=_0x5dff,_0x3e45=[_0x437356(489),_0x437356(490),"csEvent",_0x437356(518),_0x437356(464),"switchVersion",_0x437356(526),"reloadPlugin",_0x437356(545),"$emit",_0x437356(524),"checkAllowOpenService",_0x437356(496),_0x437356(487),_0x437356(546),"cocos_company_verify_url","csAnalytics","package_download_url",_0x437356(437),_0x437356(469),"ready",_0x437356(451),"verify_person_tips",_0x437356(444),_0x437356(500),_0x437356(468),"require_verify",_0x437356(474),"getGameDetail",_0x437356(553),_0x437356(453),_0x437356(491),_0x437356(550),_0x437356(480),_0x437356(483),_0x437356(511),"switch",_0x437356(514),"csProtocol","description",_0x437356(510),"shows",_0x437356(563),_0x437356(531),_0x437356(443),_0x437356(503),_0x437356(533),_0x437356(506),_0x437356(445),_0x437356(472),_0x437356(457),_0x437356(476),_0x437356(549),_0x437356(532),_0x437356(484),_0x437356(461),"length",_0x437356(547),_0x437356(460),_0x437356(505),_0x437356(471),_0x437356(569),"cocos_mobile_bind_personal_url",_0x437356(528),"$root",_0x437356(479),_0x437356(477),"c_id",_0x437356(561),_0x437356(441),_0x437356(492),_0x437356(455),_0x437356(530),"emit",_0x437356(559),_0x437356(534),_0x437356(564),_0x437356(513),_0x437356(435),_0x437356(523),_0x437356(448),_0x437356(482),"calcShows","clacVersion",_0x437356(442),_0x437356(555),"$refs",_0x437356(562),"servicePlugin",_0x437356(439),_0x437356(446),_0x437356(467),_0x437356(536),_0x437356(488),_0x437356(495),_0x437356(560),_0x437356(568),_0x437356(542),_0x437356(571),_0x437356(570),"extend","service_guide_url","csFile",_0x437356(473),_0x437356(565),_0x437356(537),_0x437356(440),"not_installed",_0x437356(529),"realname",_0x437356(463),_0x437356(558),_0x437356(485),"afterOpenService",_0x437356(521),_0x437356(538),_0x437356(554),_0x437356(462),_0x437356(557),"hide-loading",_0x437356(486),_0x437356(527),_0x437356(502),_0x437356(516),"prototype",_0x437356(481),_0x437356(454),_0x437356(543),_0x437356(494),"checkServiceWithGame",_0x437356(499),_0x437356(552),_0x437356(450),_0x437356(556),_0x437356(508),_0x437356(466),_0x437356(449),_0x437356(540),_0x437356(447),_0x437356(567),_0x437356(515)];!function(i,t){!function(t){for(var e=_0x5dff;--t;)i[e(520)](i[e(548)]())}(++t)}(_0x3e45,136);var _0x2f73=function(i,t){return _0x3e45[i-=424]},_0x12af0c=_0x2f73;_0x437356(498);var __createBinding=this&&this[_0x437356(507)]||(Object[_0x12af0c(555)]?function(i,t,e,s){void 0===s&&(s=e),Object[_0x437356(458)](i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){void 0===s&&(s=e),i[s]=t[e]}),__setModuleDefault=this&&this[_0x12af0c(540)]||(Object.create?function(i,t){var e=_0x12af0c;Object[_0x437356(458)](i,e(461),{enumerable:!0,value:t})}:function(i,t){i[_0x12af0c(461)]=t}),__importStar=this&&this[_0x12af0c(539)]||function(i){var t=_0x12af0c;if(i&&i[t(443)])return i;var e={};if(null!=i)for(var s in i)t(461)!==s&&Object[t(553)].hasOwnProperty[t(520)](i,s)&&__createBinding(e,i,s);return __setModuleDefault(e,i),e},__importDefault=this&&this[_0x12af0c(432)]||function(i){return i&&i[_0x12af0c(443)]?i:{default:i}};Object[_0x437356(458)](exports,_0x12af0c(443),{value:!0});const vue_1=__importDefault(require(_0x12af0c(514))),core_1=__importDefault(require("../../core")),plugin_1=__importDefault(require(_0x12af0c(527))),utils_1=__importStar(require(_0x12af0c(469)));exports[_0x12af0c(461)]=vue_1[_0x437356(550)][_0x12af0c(529)]({template:utils_1[_0x12af0c(531)][_0x12af0c(428)](__dirname,_0x437356(509)),props:{game:{type:Object,default:()=>({app_id:_0x12af0c(453),name:utils_1[_0x12af0c(488)].tr("unknow_game"),c_id:"0"})},service:{type:Object}},data(){var i=_0x12af0c;return{enable:!1,srv:this[i(473)],serviceInfo:void 0,servicePlugin:void 0,service_price:this.service[i(454)],param:{},serviceVersion:"",hasUpdate:!1,hasSwitch:!0,shows:{all:!0,name:!0,version:!0,description:!0,jump:!0,price:!0,platform:!0}}},watch:{async game(i){this[_0x437356(496)]()}},async created(){var i=_0x437356,t=_0x12af0c;this[i(480)][t(544)]&&(this[t(544)]=this[t(462)][t(544)]&&plugin_1[t(461)][t(427)](this[t(462)].service_component_name)),await this[i(531)]();try{this[t(526)]=await utils_1[t(551)][t(475)](this[t(462)][t(562)])}catch(i){utils_1[t(487)][t(523)](i)}this[t(511)](),this[i(541)](t(471),this.srv[t(562)],this[t(544)]),this[t(512)](),utils_1[t(431)][t(456)](t(564)),utils_1[i(519)].on(t(564),this[t(434)]),this[t(441)]()},async mounted(){var i=_0x437356;await this[i(438)]()},async destroyed(){await this.pluginClose()},methods:{async pluginReady(){var i=_0x437356,t=_0x12af0c;if(await plugin_1[t(461)][t(436)](this[t(462)][t(554)]),this[t(517)]=plugin_1[t(461)][t(474)](this[i(480)][t(554)],i(439)),this[t(517)]){let e=this[t(515)][i(439)];if(e[t(535)]||(e[t(505)]({mode:t(480)}),e[t(535)]&&plugin_1[t(461)][t(525)](this[i(456)],e[i(440)],this.srv[t(554)],t(518))),this[t(517)][t(449)])try{await this[i(456)][t(449)]({game:this[i(457)],service:this[t(462)],param:await utils_1[t(551)][t(475)](this[t(462)][t(562)])})}catch(i){utils_1[t(487)][t(523)](i)}}},async pluginClose(){var i,t=_0x12af0c;(null===(i=this[t(517)])||void 0===i?void 0:i[t(489)])&&await this[t(517)][t(489)]()},async readPluginInfo(){var i=_0x437356,t=_0x12af0c;this[i(447)]=plugin_1[t(461)][t(507)](this[t(473)][t(554)]),this[t(517)]=plugin_1[t(461)][t(474)](this[t(473)][t(554)],i(439)),this[i(436)]=this[t(426)]?this[i(447)][t(476)]:utils_1.csEditor.tr(t(536))},getRealPath:i=>__dirname+_0x12af0c(549)+i,configDevUrl(){var i=_0x437356,t=_0x12af0c;this[t(462)][t(513)]=utils_1[t(528)].replaceAppIdOnUrl(this[t(462)][t(513)],this[i(457)][t(521)])},calcShows(){var i=_0x437356,t=_0x12af0c;if(this[i(447)]&&this.serviceInfo[t(464)]&&this[t(426)][t(464)][t(518)]){let e=this[t(426)][t(464)][t(518)][t(425)];this[t(470)][i(517)]=void 0===(null==e?void 0:e[t(537)](t=>i(517)===t)),this[t(470)].name=void 0===(null==e?void 0:e[t(537)](i=>t(459)===i)),this[i(535)][t(476)]=void 0===(null==e?void 0:e[t(537)](i=>t(476)===i)),this[t(470)][t(468)]=void 0===(null==e?void 0:e[i(529)](i=>t(468)===i)),this[t(470)][t(509)]=void 0===(null==e?void 0:e[t(537)](i=>t(509)===i)),this[t(470)].price=void 0===(null==e?void 0:e[i(529)](i=>"price"===i)),this[i(535)].platform=void 0===(null==e?void 0:e[t(537)](i=>t(430)===i))}},versionClick(){var i=_0x12af0c;utils_1[i(431)][i(502)](i(501),i(465))},updateClick(){var i=_0x12af0c;utils_1[i(431)].emit(i(501),"update")},async switchVersion(i,t){var e=_0x437356,s=_0x12af0c;let _=this[s(544)];this[s(546)](!1),plugin_1[s(461)][s(448)]=!0,this[s(500)]=!1,await plugin_1[e(550)][s(519)](this[s(462)][e(481)]),this[s(500)]=!0;try{await this[e(445)](this[s(462)][s(554)],i)}catch(i){return void utils_1[s(431)][e(566)](e(475))}_?setTimeout(async()=>{var i=e,t=s;await this[t(546)](!0),utils_1[i(519)].emit(i(475)),plugin_1[t(461)][t(448)]=!1},1e3):utils_1[s(431)][s(502)](s(548))},clacVersion(){var i=_0x437356,t=_0x12af0c;if(!this[t(426)])return void(this[t(484)]=!1);let e=plugin_1[t(461)][t(534)](this[t(462)][i(459)]),s=this[t(426)][t(476)];this[i(461)]=1===utils_1[t(528)][t(560)](e,s),this[t(526)][t(483)]&&this[i(542)][t(483)]!==this[t(426)][t(476)]&&this[t(544)]&&utils_1[t(487)][t(424)](this[t(462)][t(486)]+t(543)+utils_1[t(488)].tr(t(447)))},async checkServiceOnGame(){var i=_0x12af0c;return"0"===this[_0x437356(480)][i(550)]||(await utils_1[i(467)][i(457)](this[i(479)][i(521)]))[i(473)][i(478)](this[i(462)][i(562)])>=0},async checkAllowOpenService(){var i=_0x437356,t=_0x12af0c;if(t(453)===this[t(479)][t(521)]&&"0"!==this[t(462)][t(550)])return utils_1[i(519)][t(502)](i(512),"detail"),!1;if(!this[i(497)][t(558)](this[t(479)],this.srv))return!1;if(0!==this[i(480)][i(544)]){let e=await utils_1[i(493)][t(563)](),s=1==(1&e[t(547)]),_=2==(2&e[t(547)]),r=4==(4&e[t(547)]),a="",l="",c="",n=!0;return"0"!==this[i(457)][t(496)]?1===this[t(462)][t(455)]&&0===e.is_mobile_company?(a=await core_1[t(461)][t(545)](t(452)),l=utils_1[t(488)].tr(t(439)),c=utils_1[t(488)].tr(t(538)),n=!1):2!==this[t(462)][t(455)]||_?3!==this[t(462)][t(455)]||r||(a=await core_1[t(461)][t(545)](i(504),{corporation_id:e[t(433)],verifyLevel:1}),l=utils_1[t(488)].tr(i(465)),c=utils_1[i(505)].tr(t(504)),n=!1):(a=await core_1[t(461)][t(545)](t(444),{corporation_id:e[t(433)]}),l=utils_1[t(488)].tr(i(525)),c=utils_1[t(488)].tr(t(504)),n=!1):1===this[i(443)][t(455)]&&0===e[t(435)]?(a=await core_1[t(461)][t(545)](t(491)),l=utils_1[t(488)].tr(t(492)),c=utils_1[t(488)].tr(t(538)),n=!1):1===this[t(473)][i(544)]||s||(a=await core_1[t(461)][t(545)]("cocos_personal_verify_url"),l=utils_1[i(505)].tr(t(451)),c=utils_1[t(488)].tr(t(504)),n=!1),!!n||(0===await utils_1[t(488)][t(482)](t(424),l,utils_1[t(488)].tr(t(516)),[c,utils_1[i(505)].tr(t(522))],0)&&utils_1[t(461)][i(551)](a),!1)}return!0},async installPlugin(i,t){return new Promise((e,s)=>{var _=_0x5dff,r=_0x2f73;let a=utils_1[r(488)].tr(r(559));plugin_1[r(461)][_(501)]=!0,plugin_1[r(461)][r(477)](i,t,async(t,l)=>{var c=_,n=r;if(utils_1[n(431)][n(502)](c(523),t),!l&&n(510)===t)return utils_1[n(487)][c(449)](utils_1[n(488)].tr(c(543))),s(t);t===a&&(await plugin_1.default[n(436)](i),await this[n(472)](),await this[c(438)](),this[n(512)](),e(!0)),plugin_1.default[c(501)]=!1})[r(460)](i=>(utils_1[r(487)][r(424)](utils_1[_(505)].tr(r(556))),s(i)))})},async enableService(i){return new Promise((t,e)=>{var s=_0x2f73;this[s(438)](s(471),this[s(462)][s(562)],i,!0,()=>{var e=s;i?utils_1[e(445)][e(546)]():utils_1[e(445)][e(541)](),this[e(544)]=i,t()})})},async doOpenService(){var i=_0x437356,t=_0x12af0c;return utils_1[t(445)][i(479)](),new Promise((e,s)=>{var _=i,r=t;utils_1[r(467)][r(494)](this[_(457)][r(521)],this[r(462)][r(562)])[r(450)](i=>{e()})[r(460)](async i=>{var t,e=r;this[e(517)]&&this[e(517)][e(506)]&&await(null===(t=this[e(517)])||void 0===t?void 0:t[e(506)]({service:this[e(462)],reason:i})),s(i)})})},async openServiceRequestServer(){return new Promise((i,t)=>{var e=_0x5dff,s=_0x2f73;0!==this[s(462)][s(466)][s(485)]?utils_1[e(519)][s(502)](s(463),utils_1[s(488)].tr(s(466)),this[s(462)][s(466)],[utils_1[s(488)].tr(s(533)),utils_1[e(505)].tr(e(488))],0,_=>{var r=e,a=s;if(0!==_)return t(new Error(a(481)));utils_1[a(431)][a(502)](a(508),utils_1[a(488)].tr(a(490))),this[a(442)]()[r(451)](i)[a(460)](t)}):this[e(487)]()[s(450)](i)[s(460)](t)})},async handleEnabelService(i){var t,e,s,_,r=_0x437356,a=_0x12af0c;if(i[r(452)][a(503)]=this[a(544)],this[a(544)])return utils_1[a(431)][a(502)](r(523),utils_1[a(488)].tr(a(499))),await this[a(546)](!1),void utils_1[a(431)][r(566)](a(548));if(await this[a(440)]()){if(!plugin_1[a(461)][r(567)](this[r(480)][a(554)]))try{await this[a(477)](this[a(462)][a(554)],this[a(462)][a(446)]),utils_1[a(431)][a(502)](a(548))}catch(i){return void utils_1[r(519)][a(502)](a(548))}if(!(null===(t=this[a(517)])||void 0===t?void 0:t[a(495)])||await(null===(e=this[a(517)])||void 0===e?void 0:e[a(495)](this[r(480)]))){if(await this[a(524)]())utils_1[a(431)][a(502)](r(523),utils_1.csEditor.tr(a(490)));else try{await this[a(557)]()}catch(i){return void utils_1[a(431)][a(502)](a(548))}await this[r(462)](!0),(null===(s=this[a(517)])||void 0===s?void 0:s.afterOpenService)&&await(null===(_=this[a(517)])||void 0===_?void 0:_[a(542)](this.srv)),utils_1[a(431)][r(566)](r(475))}}},async handleGotoLink(i){var t,e,s=_0x437356,_=_0x12af0c;switch(i){case _(561):e=this[_(473)][_(530)],utils_1[s(478)][_(552)](e);break;case _(437):e=this[_(473)][_(513)],utils_1[s(478)][_(497)](e);break;case s(470):e=this[_(473)][s(539)],utils_1.csAnalytics[_(498)](e)}this[_(517)]&&this[_(517)][_(458)]&&!await(null===(t=this[_(517)])||void 0===t?void 0:t[_(458)](e))||utils_1[_(461)][s(551)](e)},async gotoService(){var i=_0x437356,t=_0x12af0c;let e=this[t(493)][i(473)][t(479)][t(521)],s=this[t(493)][t(532)][t(479)][i(522)]||0;utils_1[i(550)][i(551)](await core_1[i(550)][t(545)](t(429),{app_id:e,target:s}))}}});
const _0x1b77=["is_mobile_company","is_mobile","description","service_version_warnning","gotoSampleUrl","dialogMsgBox","readServiceParam","getPluginVerByURL","service_price","shadowRoot","dev","switchVersion","hasUpdate","Cancel Open!","../../../utils","replaceAppIdOnUrl","doOpenService","cocos_personal_verify_url","dialog_title","beforeOpenService","csEditor","csFile","csUtil","openUri","cocos_mobile_bind_company_url"," - ","debug","afterOpenService","opening_service","c_id","__esModule","corporation_id","checkAllowOpenService","service_guide_url","$data","enable","checkServiceWithGame","removeAllListeners","createInnterHTML","/../../assets/","cocos_service_open_url","certificate","show-confirm","pluginClose","service_name","param","beforeClickGotoLink","$refs","emit","length","../../../vue","switch","warn","installPlugin","realname_person_tips","uninstallPlugin","pluginReady","open_service_btn","detail","gotoDashboardUrl","service_component_name","package_download_url","fail","$emit","$root","getServicePlugin","closing_service","jump","./service-detail.html","realname_company_tips","require_verify","enable-service","service","servicePlugin","openService","csConfig","name","service_type","__importDefault","ready","open","csEvent","all","platform","high_verify_tips","reloadPlugin","service_dev_url","getGameDetail","default","configDevUrl","getUrl","failureOpenService","cocos_company_verify_url","sample","indexOf","verification_status","show-verm","srv","pluginExists","download_failed","shows","csLogger","catch","contents","shift","find","price","unknow_game","game","../../core","app_id","service_sample_url","verify_person_tips","hide-loading","cocos_mobile_bind_personal_url","isUpdate","enableService","csProtocol","show-loading","csAnalytics","not_installed","defineProperty","realname","version","push","target","service:switch-version","service_id","serviceInfo","show-bind-game","gotoGuideUrl","then","extend","clacVersion","checkServiceOnGame","btn_cancel"];!function(i,t){!function(t){for(;--t;)i.push(i.shift())}(++t)}(_0x1b77,129);const _0x2c9d=function(i,t){return _0x1b77[i-=303]},_0x254f23=_0x2c9d,_0x4768=[_0x254f23(353),_0x254f23(320),_0x254f23(313),"close",_0x254f23(404),"platform",_0x254f23(388),_0x254f23(391),_0x254f23(333),"hasSwitch",_0x254f23(354),_0x254f23(315),_0x254f23(311),_0x254f23(412),_0x254f23(328),"verify_tips",_0x254f23(383),_0x254f23(349),_0x254f23(341),_0x254f23(402),_0x254f23(338),_0x254f23(418),_0x254f23(377),_0x254f23(350),"attachShadow",_0x254f23(319),"pluginReady","disables",_0x254f23(352),_0x254f23(401),"disableService",_0x254f23(390),_0x254f23(426),_0x254f23(345),_0x254f23(437),_0x254f23(384),_0x254f23(386),_0x254f23(395),_0x254f23(433),_0x254f23(358),"serviceVersion",_0x254f23(306),"openServiceRequestServer","pluginExists",_0x254f23(316),_0x254f23(356),_0x254f23(400),_0x254f23(343),_0x254f23(375),_0x254f23(403),_0x254f23(392),_0x254f23(413),_0x254f23(432),_0x254f23(305),_0x254f23(406),_0x254f23(399),_0x254f23(317),_0x254f23(427),_0x254f23(332),_0x254f23(339),_0x254f23(368),"installed",_0x254f23(398),_0x254f23(351),_0x254f23(359),_0x254f23(415),_0x254f23(324),_0x254f23(330),"guide",_0x254f23(407),_0x254f23(378),_0x254f23(369),_0x254f23(380),_0x254f23(347),_0x254f23(382),"getUserInfo",_0x254f23(389),_0x254f23(357),_0x254f23(360),_0x254f23(308),"service_protocol",_0x254f23(361),"$emit",_0x254f23(340),_0x254f23(429),_0x254f23(331),_0x254f23(397),_0x254f23(428),_0x254f23(335),_0x254f23(423),_0x254f23(416),_0x254f23(336),_0x254f23(405),"readFile",_0x254f23(304),_0x254f23(329),_0x254f23(438),_0x254f23(387),"installPlugin",_0x254f23(436),"csLogger","../../core/plugin",_0x254f23(410),_0x254f23(344),_0x254f23(327),_0x254f23(362),_0x254f23(396),_0x254f23(364),"plugin_version",_0x254f23(346),_0x254f23(365),_0x254f23(337),_0x254f23(367),_0x254f23(422),_0x254f23(371),"getServicePluginInfo",_0x254f23(312),_0x254f23(376),"UNKNOW",_0x254f23(309),_0x254f23(370),_0x254f23(425),_0x254f23(307),_0x254f23(430),_0x254f23(355),_0x254f23(342),_0x254f23(310),_0x254f23(321),_0x254f23(424),_0x254f23(385),_0x254f23(421),_0x254f23(348),_0x254f23(374),"readPluginInfo","checked",_0x254f23(420),_0x254f23(325),"compareVersion",_0x254f23(381),"calcShows"];!function(i,t){!function(t){const s=_0x2c9d;for(;--t;)i[s(434)](i[s(414)]())}(++t)}(_0x4768,307);const _0x2a13=function(i,t){return _0x4768[i-=160]},_0x3089b2=_0x2a13;var __importDefault=this&&this[_0x3089b2(279)]||function(i){return i&&i[_0x3089b2(216)]?i:{default:i}};Object[_0x254f23(431)](exports,_0x254f23(340),{value:!0});const vue_1=__importDefault(require(_0x3089b2(211))),core_1=__importDefault(require(_0x254f23(419))),plugin_1=__importDefault(require(_0x3089b2(234))),utils_1=require(_0x3089b2(199));exports[_0x254f23(398)]=vue_1[_0x3089b2(195)][_0x3089b2(174)]({template:utils_1[_0x3089b2(218)][_0x3089b2(226)](__dirname,_0x3089b2(203)),props:{game:{type:Object,default:()=>({app_id:_0x3089b2(251),name:utils_1[_0x3089b2(200)].tr(_0x254f23(417)),c_id:"0"})},service:{type:Object}},data(){const i=_0x254f23,t=_0x3089b2;return{enable:!1,srv:this[t(207)],serviceInfo:void 0,servicePlugin:void 0,service_price:this[t(207)][i(318)],param:{},serviceVersion:"",hasUpdate:!1,hasSwitch:!0,shows:{all:!0,name:!0,version:!0,description:!0,jump:!0,price:!0,platform:!0}}},watch:{async game(i){this[_0x3089b2(188)]()}},async created(){const i=_0x254f23,t=_0x3089b2;this[t(202)][t(166)]&&(this[t(166)]=this[t(202)][t(166)]&&plugin_1[t(195)][i(408)](this[t(202)][t(253)])),await this[t(266)]();try{this[t(257)]=await utils_1[t(262)][t(177)](this[t(202)][t(167)])}catch(i){utils_1[t(233)][t(224)](i)}this[t(272)](),this[t(215)](i(381),this[t(202)][t(167)],this[t(166)]),this[i(307)](),utils_1[t(280)][t(206)]("service:switch-version"),utils_1[t(280)].on(t(232),this[t(260)]),this[t(188)]()},async mounted(){const i=_0x254f23;await this[i(366)]()},async destroyed(){const i=_0x3089b2;await this[i(273)]()},methods:{async pluginReady(){const i=_0x254f23,t=_0x3089b2;if(await plugin_1[t(195)][t(170)](this[t(202)][t(253)]),this[t(289)]=plugin_1[t(195)][i(375)](this[t(202)][t(253)],t(193)),this[t(289)]){let s=this[t(210)][i(368)];if(s[t(298)]||(s[t(297)]({mode:t(164)}),s[t(298)]&&plugin_1[t(195)][t(264)](this[t(289)],s[t(298)],this[t(202)][t(253)],t(193))),this[t(289)][t(209)])try{await this[t(289)].ready({game:this[t(294)],service:this[t(202)],param:await utils_1[t(262)][t(177)](this[t(202)][t(167)])})}catch(i){utils_1[t(233)][t(224)](i)}}},async pluginClose(){const i=_0x3089b2;var t;(null===(t=this[_0x254f23(383)])||void 0===t?void 0:t[i(276)])&&await this[i(289)][i(276)]()},async readPluginInfo(){const i=_0x254f23,t=_0x3089b2;this[t(229)]=plugin_1[t(195)][t(248)](this[t(207)][t(253)]),this[t(289)]=plugin_1[t(195)][t(181)](this[i(382)][t(253)],t(193)),this[t(173)]=this[t(229)]?this[t(229)][t(171)]:utils_1[i(330)].tr(t(256))},getRealPath:i=>__dirname+_0x3089b2(290)+i,configDevUrl(){const i=_0x254f23,t=_0x3089b2;this[i(407)][t(239)]=utils_1[i(332)][t(269)](this[t(202)][t(239)],this[t(294)][t(268)])},calcShows(){const i=_0x254f23,t=_0x3089b2;if(this[i(438)]&&this[t(229)][i(413)]&&this[t(229)][t(184)][t(193)]){let s=this[t(229)][i(413)][t(193)][t(160)];this[i(410)][t(183)]=void 0===(null==s?void 0:s[t(198)](i=>t(183)===i)),this.shows[t(169)]=void 0===(null==s?void 0:s[t(198)](t=>i(386)===t)),this[t(235)][i(433)]=void 0===(null==s?void 0:s.find(i=>"version"===i)),this[t(235)][t(249)]=void 0===(null==s?void 0:s[t(198)](i=>t(249)===i)),this[t(235)][t(295)]=void 0===(null==s?void 0:s.find(t=>i(377)===t)),this[t(235)][t(223)]=void 0===(null==s?void 0:s[t(198)](i=>t(223)===i)),this[t(235)][t(278)]=void 0===(null==s?void 0:s[i(415)](t=>i(393)===t))}},versionClick(){const i=_0x3089b2;utils_1[i(280)][i(172)](i(187),i(214))},updateClick(){const i=_0x254f23;utils_1[_0x3089b2(280)][i(358)](i(406),"update")},async switchVersion(i,t){const s=_0x254f23,e=_0x3089b2;let _=this[e(166)];this[e(165)](!1),plugin_1[e(195)][e(254)]=!0,this[e(282)]=!1,await plugin_1[e(195)][e(243)](this[e(202)][s(370)]),this.hasSwitch=!0;try{await this[e(231)](this[e(202)][e(253)],i)}catch(i){return void utils_1[s(391)][e(172)](e(222))}_?setTimeout(async()=>{const i=e;await this[i(165)](!0),utils_1.csEvent[i(172)](i(222)),plugin_1[i(195)][i(254)]=!1},1e3):utils_1[e(280)][e(172)](s(423))},clacVersion(){const i=_0x254f23,t=_0x3089b2;if(!this[i(438)])return void(this[i(322)]=!1);let s=plugin_1[t(195)][t(189)](this[i(407)][t(247)]),e=this[i(438)][t(171)];this[i(322)]=1===utils_1[t(191)][t(270)](s,e),this[t(257)][t(241)]&&this[t(257)][t(241)]!==this[t(229)][t(171)]&&this[t(166)]&&utils_1[i(411)][i(362)](this.srv[t(283)]+t(221)+utils_1[t(200)].tr(t(275)))},async checkServiceOnGame(){const i=_0x254f23,t=_0x3089b2;return"0"===this[t(202)][t(230)]||(await utils_1[t(190)][t(219)](this[t(294)][t(268)]))[i(382)][t(277)](this[t(202)][t(167)])>=0},async checkAllowOpenService(){const i=_0x254f23,t=_0x3089b2;if(t(251)===this[t(294)][t(268)]&&"0"!==this[t(202)][t(230)])return utils_1[t(280)][t(172)](i(303),t(193)),!1;if(!this[t(265)][t(242)](this[t(294)],this[t(202)]))return!1;if("0"!==this[t(202)][t(230)]){let s=await utils_1[i(427)][t(208)](),e=1==(1&s[t(225)]),_=2==(2&s[t(225)]),r=4==(4&s[t(225)]),n="",a="",l="",o=!0;return"0"!==this[t(294)][t(192)]?1===this[t(202)][t(205)]&&0===s[t(259)]?(n=await core_1[t(195)][t(179)](i(334)),a=utils_1[t(200)].tr(i(379)),l=utils_1[t(200)].tr(t(185)),o=!1):2!==this.srv[t(205)]||_?3!==this[t(202)][t(205)]||r||(n=await core_1[t(195)][t(179)](t(292),{corporation_id:s[t(291)],verifyLevel:1}),a=utils_1[t(200)].tr(i(394)),l=utils_1[t(200)].tr(t(196)),o=!1):(n=await core_1[i(398)][t(179)](t(292),{corporation_id:s[t(291)]}),a=utils_1.csEditor.tr(t(288)),l=utils_1[i(330)].tr(i(351)),o=!1):1===this[i(382)][t(205)]&&0===s[t(285)]?(n=await core_1[t(195)][t(179)](t(261)),a=utils_1[i(330)].tr(t(240)),l=utils_1[t(200)].tr("realname"),o=!1):1===this[t(207)][t(205)]||e||(n=await core_1[t(195)][t(179)](t(237)),a=utils_1.csEditor.tr(t(246)),l=utils_1[t(200)].tr(t(196)),o=!1),!!o||(0===await utils_1[i(330)][t(284)](t(238),a,utils_1[t(200)].tr(t(287)),[l,utils_1[t(200)].tr(i(309))],0)&&utils_1[t(191)].openUri(n),!1)}return!0},async installPlugin(i,t){return new Promise((s,e)=>{const _=_0x2c9d,r=_0x2a13;let n=utils_1[r(200)].tr(r(194));plugin_1[r(195)].isInstall=!0,plugin_1[r(195)][_(363)](i,t,async(t,a)=>{const l=_,o=r;if(utils_1[o(280)][o(172)](o(220),t),!a&&l(372)===t)return utils_1[o(233)][o(238)](utils_1[l(330)].tr(l(409))),e(t);t===n&&(await plugin_1.default[o(170)](i),await this[o(266)](),await this[o(299)](),this[o(255)](),s(!0)),plugin_1[o(195)].isInstall=!1})})},async enableService(i){return new Promise((t,s)=>{const e=_0x2c9d,_=_0x2a13;this[e(373)](_(271),this[_(202)][e(437)],i,!0,()=>{const s=e,r=_;i?utils_1[r(217)][r(165)]():utils_1[r(217)][r(163)](),this[s(345)]=i,t()})})},async doOpenService(){const i=_0x3089b2;return utils_1[i(217)][i(168)](),new Promise((t,s)=>{const e=_0x2c9d,_=i;utils_1[_(190)][e(384)](this[_(294)][_(268)],this[_(202)][_(167)])[e(305)](i=>{t()})[_(286)](async i=>{const t=e,r=_;var n;this[r(289)]&&this[r(289)][t(401)]&&await(null===(n=this[t(383)])||void 0===n?void 0:n[r(162)]({service:this[r(202)],reason:i})),s(i)})})},async openServiceRequestServer(){return new Promise((i,t)=>{const s=_0x2c9d,e=_0x2a13;0!==this[e(202)][e(213)][e(197)]?utils_1[e(280)][e(172)](e(161),utils_1[e(200)].tr(e(213)),this[e(202)].service_protocol,[utils_1[e(200)].tr(e(245)),utils_1[e(200)].tr(e(252))],0,s=>{const _=_0x2c9d,r=e;if(0!==s)return t(new Error(_(323)));utils_1[_(391)][r(172)](r(220),utils_1[r(200)].tr(_(338))),this.doOpenService()[_(305)](i)[r(286)](t)}):this[s(326)]()[e(186)](i)[e(286)](t)})},async handleEnabelService(i){const t=_0x254f23,s=_0x3089b2;var e,_,r,n;if(i[t(435)][s(267)]=this[s(166)],this[s(166)])return utils_1[s(280)][t(358)](s(220),utils_1[s(200)].tr(s(250))),await this[s(165)](!1),void utils_1[s(280)][t(358)](s(222));if(await this[s(258)]()){if(!plugin_1[s(195)][s(176)](this[t(407)].service_component_name))try{await this[t(363)](this[s(202)][s(253)],this[s(202)][s(247)]),utils_1[s(280)][s(172)](s(222))}catch(i){return void utils_1[t(391)][s(172)](s(222))}if(!(null===(e=this[t(383)])||void 0===e?void 0:e[s(228)])||await(null===(_=this[s(289)])||void 0===_?void 0:_[s(228)](this[s(202)]))){if(await this[s(212)]())utils_1.csEvent.emit(s(220),utils_1[s(200)].tr(s(293)));else try{await this[s(175)]()}catch(i){return void utils_1[s(280)][s(172)](t(423))}await this[s(165)](!0),(null===(r=this[s(289)])||void 0===r?void 0:r[s(244)])&&await(null===(n=this[s(289)])||void 0===n?void 0:n[t(337)](this[s(202)])),utils_1[s(280)][t(358)](s(222))}}},async handleGotoLink(i){const t=_0x254f23,s=_0x3089b2;var e,_;switch(i){case s(201):_=this[s(207)][s(180)],utils_1[s(217)][s(227)](_);break;case s(274):_=this[s(207)][t(396)],utils_1[t(429)][s(204)](_);break;case s(182):_=this[s(207)][s(263)],utils_1.csAnalytics[t(314)](_)}this[s(289)]&&this[s(289)][s(178)]&&!await(null===(e=this[s(289)])||void 0===e?void 0:e[s(178)](_))||utils_1[s(191)][s(281)](_)},async gotoService(){const i=_0x254f23,t=_0x3089b2;let s=this[t(265)][t(236)][t(294)][t(268)],e=this[t(265)][t(236)][t(294)][i(339)]||0;utils_1[t(191)][t(281)](await core_1[t(195)][t(179)](t(296),{app_id:s,target:e}))}}});
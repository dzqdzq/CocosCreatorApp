"use strict";function _0x29f9(i,t){var e=_0x5d7b();return(_0x29f9=function(i,t){return e[i-=162]})(i,t)}var _0x5422f1=_0x29f9;function _0x5d7b(){var i=["csUtil","removeAllListeners","__setModuleDefault","writable","enable-service","readFile","opening_service","realname_company_tips","7sLKCGR","getServicePluginInfo","high_verify_tips","292885znzGWx","getUrl","price","all","isUpdate","$root","csLogger","../../../vue","$refs","sample","reloadPlugin","service_dev_url","certificate","isInstall","2990628LsSSrf","pluginReady","configDevUrl","description","service_sample_url","15236586hsmgfy","close","call","openServiceRequestServer","service_component_name","jump","__esModule","guide","gotoSampleUrl","verification_status","8fZlWfk","__importDefault","push","detail","gotoGuideUrl","openService","hasUpdate","debug","package_download_url","name","csAnalytics","hide-loading","service:switch-version","shift","clacVersion","verify_person_tips","realname","41437BkoEMC","version","9152712zGYgAt","cocos_personal_verify_url","disables","dialog_title","shadowRoot","/../../assets/","platform","service_type","not_installed","30awRjFe","cocos_service_open_url","failureOpenService","./service-detail.html","56fRpnUW","indexOf","10093503OrQKtn","service_name","serviceVersion","csEvent","plugin_version","checkServiceWithGame","calcShows","closing_service","41102EulBnG","service_price","extend","corporation_id","doOpenService","getUserInfo","4144344YSeIhU","uninstallPlugin","openCocosUrl","5aQXclB","checkServiceOnGame","servicePlugin","readServiceParam","srv","service_id","installed","emit","afterOpenService","createInnterHTML","then","service_guide_url","Cancel Open!","default","show-confirm","installPlugin","1202284gMNKsI","hasOwnProperty","enable","realname_person_tips","../../../utils","game","29158GrjQJn","service_version_warnning","shows","replaceAppIdOnUrl","is_mobile_company"," - ","pluginExists","UNKNOW","csEditor","enableService","create","service","getGameDetail","app_id","ready","cocos_mobile_bind_company_url","get","hasSwitch","compareVersion","update","getServicePlugin","find","cocos_mobile_bind_personal_url","csProtocol","getOwnPropertyDescriptor","1236928zsXHVt","c_id","warn","require_verify","target","param","checked","32678yHcwxm","btn_cancel","disableService","dialogMsgBox","beforeOpenService","serviceInfo","fail","__createBinding","prototype","show-bind-game","service_protocol","csFile","defineProperty","beforeClickGotoLink","contents","catch"];return(_0x5d7b=function(){return i})()}!function(i,t){for(var e=_0x29f9,s=_0x5d7b();;)try{if(953918===parseInt(e(224))/1*(parseInt(e(297))/2)+-parseInt(e(240))/3+parseInt(e(259))/4+-parseInt(e(243))/5*(-parseInt(e(211))/6)+parseInt(e(226))/7+-parseInt(e(290))/8+-parseInt(e(182))/9)break;s.push(s.shift())}catch(i){s.push(s.shift())}}();var _0x57143c=_0x5687;!function(i,t){for(var e=_0x29f9,s=_0x5687,r=_0x4540();;)try{if(178368===parseInt(s(217))/1+parseInt(s(209))/2*(parseInt(s(152))/3)+parseInt(s(185))/4*(parseInt(s(254))/5)+parseInt(s(174))/6+parseInt(s(238))/7*(-parseInt(s(149))/8)+parseInt(s(187))/9+-parseInt(s(213))/10*(parseInt(s(130))/11))break;r[e(194)](r[e(205)]())}catch(i){r.push(r[e(205)]())}}();var __createBinding=this&&this[_0x57143c(216)]||(Object[_0x57143c(137)]?function(i,t,e,s){var r=_0x29f9,a=_0x57143c;void 0===s&&(s=e);var n=Object[r(289)](t,e);n&&!(a(147)in n?!t[r(188)]:n[a(265)]||n[a(229)])||(n={enumerable:!0,get:function(){return t[e]}}),Object[a(129)](i,s,n)}:function(i,t,e,s){void 0===s&&(s=e),i[s]=t[e]}),__setModuleDefault=this&&this[_0x57143c(240)]||(Object[_0x57143c(137)]?function(i,t){var e=_0x57143c;Object[_0x29f9(309)](i,e(245),{enumerable:!0,value:t})}:function(i,t){i[_0x57143c(245)]=t}),__importStar=this&&this[_0x57143c(153)]||function(i){var t=_0x57143c;if(i&&i[t(205)])return i;var e={};if(null!=i)for(var s in i)t(245)!==s&&Object[t(207)][t(230)][t(175)](i,s)&&__createBinding(e,i,s);return __setModuleDefault(e,i),e},__importDefault=this&&this[_0x57143c(210)]||function(i){return i&&i[_0x57143c(205)]?i:{default:i}};function _0x4540(){var i=_0x29f9,t=[i(171),"1941240pVAVqp","require_verify",i(282),i(220),"__importStar","$data","../../core",i(276),"checkAllowOpenService",i(216),i(314),i(187),i(274),i(179),i(223),i(247),i(272),i(322),i(270),i(311),i(165),i(222),"download_failed",i(181),i(313),"1246704RwlEJv",i(184),i(225),i(291),"switchVersion",i(221),i(242),i(301),"open_service_btn",i(300),i(237),i(192),i(180),i(177),i(167),"version",i(204),"cocos_company_verify_url",i(298),i(195),i(294),i(249),i(246),i(164),i(199),i(207),i(302),i(208),"show-loading",i(186),i(258),i(188),i(295),i(305),i(200),i(234),i(193),"openService",i(264),"1250OXUTRh","length",i(280),i(304),i(265),i(232),i(198),"reloadPlugin","attachShadow",i(250),i(229),i(191),i(206),i(219),i(217),i(266),"configurable",i(260),"app_id",i(162),i(286),i(169),i(296),i(279),i(175),i(321),i(287),i(315),i(202),"switch",i(230),i(172),i(256),i(239),"service_id",i(319),i(168),i(174),i(320),"pluginClose","catch",i(163),i(196),i(215),i(307),i(261),"csEditor",i(228),i(201),"$emit","readPluginInfo",i(166),i(316),i(203),i(310),i(299),"servicePlugin",i(251),"enable-service",i(214),i(284),i(285),i(271),i(253),"shows",i(268),"show-verm",i(309),i(209),"csConfig",i(318),i(263),i(288),i(231),i(292),i(275),i(308),i(257),i(252),i(176),i(189),i(254),i(241),i(190),"verify_tips",i(281)];return(_0x4540=function(){return t})()}function _0x5687(i,t){var e=_0x4540();return(_0x5687=function(i,t){return e[i-=115]})(i,t)}Object[_0x5422f1(309)](exports,_0x57143c(205),{value:!0});const vue_1=__importDefault(require(_0x5422f1(170))),core_1=__importDefault(require(_0x57143c(155))),plugin_1=__importDefault(require("../../core/plugin")),utils_1=__importStar(require(_0x57143c(133)));exports.default=vue_1[_0x5422f1(256)][_0x5422f1(236)]({template:utils_1[_0x57143c(138)][_0x57143c(132)](__dirname,_0x57143c(163)),props:{game:{type:Object,default:()=>({app_id:_0x57143c(165),name:utils_1[_0x57143c(259)].tr("unknow_game"),c_id:"0"})},service:{type:Object}},data(){var i=_0x5422f1,t=_0x57143c;return{enable:!1,srv:this[t(156)],serviceInfo:void 0,servicePlugin:void 0,service_price:this[t(156)][i(235)],param:{},serviceVersion:"",hasUpdate:!1,hasSwitch:!0,shows:{all:!0,name:!0,version:!0,description:!0,jump:!0,price:!0,platform:!0}}},watch:{async game(i){this[_0x57143c(162)]()}},async created(){var i=_0x5422f1,t=_0x57143c;this[t(164)][t(258)]&&(this.enable=this[i(247)][i(261)]&&plugin_1[t(245)][i(271)](this[i(247)][t(203)])),await this[t(263)]();try{this[t(206)]=await utils_1[t(131)][t(196)](this[t(164)][t(247)])}catch(i){utils_1[t(234)][t(198)](i)}this[t(218)](),this[t(262)](t(120),this[t(164)][t(247)],this[t(258)]),this[t(225)](),utils_1[t(223)][t(159)](t(190)),utils_1[t(223)].on(t(190),this[t(178)]),this[t(162)]()},async mounted(){var i=_0x5422f1;await this[i(178)]()},async destroyed(){var i=_0x57143c;await this[i(252)]()},methods:{async pluginReady(){var i=_0x5422f1,t=_0x57143c;if(await plugin_1[i(256)][i(173)](this[t(164)][i(186)]),this[i(245)]=plugin_1[i(256)][i(285)](this[t(164)][t(203)],t(193)),this[t(118)]){let e=this[t(148)][t(193)];if(e[t(256)]||(e[t(221)]({mode:"open"}),e.shadowRoot&&plugin_1.default[t(140)](this[t(118)],e[t(256)],this[t(164)][t(203)],t(193))),this[i(245)][t(236)])try{await this[t(118)][t(236)]({game:this[t(212)],service:this[t(164)],param:await utils_1[t(131)][t(196)](this[t(164)][t(247)])})}catch(i){utils_1[t(234)][t(198)](i)}}},async pluginClose(){var i,t=_0x5422f1,e=_0x57143c;(null===(i=this[e(118)])||void 0===i?void 0:i[t(183)])&&await this[e(118)].close()},async readPluginInfo(){var i=_0x5422f1,t=_0x57143c;this[t(200)]=plugin_1[t(245)][t(166)](this[t(156)][t(203)]),this[t(118)]=plugin_1[t(245)][t(123)](this.service[t(203)],t(193)),this[t(260)]=this[i(302)]?this[i(302)][i(210)]:utils_1[t(259)].tr(t(226))},getRealPath:i=>__dirname+_0x57143c(158)+i,configDevUrl(){var i=_0x5422f1,t=_0x57143c;this[t(164)][t(250)]=utils_1[i(313)][t(127)](this[t(164)][i(174)],this[t(212)][t(231)])},calcShows(){var i=_0x5422f1,t=_0x57143c;if(this[t(200)]&&this[i(302)][t(168)]&&this[t(200)][t(168)][t(193)]){let e=this[t(200)][t(168)][t(193)][i(213)];this[i(267)][t(264)]=void 0===(null==e?void 0:e[i(286)](i=>t(264)===i)),this.shows[t(261)]=void 0===(null==e?void 0:e[t(233)](i=>t(261)===i)),this[t(126)][i(210)]=void 0===(null==e?void 0:e[t(233)](i=>t(189)===i)),this[t(126)].description=void 0===(null==e?void 0:e[t(233)](i=>t(186)===i)),this[t(126)][t(160)]=void 0===(null==e?void 0:e[t(233)](i=>t(160)===i)),this[t(126)][t(169)]=void 0===(null==e?void 0:e[t(233)](i=>t(169)===i)),this[t(126)][t(227)]=void 0===(null==e?void 0:e[t(233)](i=>t(227)===i))}},versionClick(){var i=_0x57143c;utils_1[i(223)][i(222)](i(128),i(242))},updateClick(){var i=_0x57143c;utils_1[i(223)][i(222)](i(128),i(122))},async switchVersion(i,t){var e=_0x5422f1,s=_0x57143c;let r=this[e(261)];this[s(161)](!1),plugin_1[s(245)][s(188)]=!0,this.hasSwitch=!1,await plugin_1[s(245)][s(144)](this[s(164)][s(203)]),this[s(151)]=!0;try{await this[s(204)](this[e(247)][s(203)],i)}catch(i){return void utils_1[s(223)][s(222)](s(115))}r?setTimeout(async()=>{var i=e,t=s;await this[t(161)](!0),utils_1[t(223)][t(222)](t(115)),plugin_1[i(256)][t(188)]=!1},1e3):utils_1[s(223)][s(222)](e(203))},clacVersion(){var i=_0x5422f1,t=_0x57143c;if(!this[t(200)])return void(this[t(219)]=!1);let e=plugin_1[t(245)].getPluginVerByURL(this[t(164)][t(208)]),s=this[t(200)][t(189)];this[i(198)]=1===utils_1[t(173)][i(283)](e,s),this[t(206)][t(243)]&&this[i(295)].plugin_version!==this[t(200)][i(210)]&&this[t(258)]&&utils_1[t(234)][t(136)](this[t(164)][i(227)]+t(167)+utils_1[t(259)].tr(t(228)))},async checkServiceOnGame(){var i=_0x5422f1,t=_0x57143c;return"0"===this[t(164)].service_type||(await utils_1[t(134)][i(277)](this[i(264)][t(231)])).service[t(176)](this[i(247)][t(247)])>=0},async checkAllowOpenService(){var i=_0x5422f1,t=_0x57143c;if(t(165)===this[i(264)][t(231)]&&"0"!==this[t(164)][i(218)])return utils_1[t(223)][i(250)](i(306),t(193)),!1;if(!this[t(249)][t(135)](this.game,this[t(164)]))return!1;if(0!==this[i(247)][i(293)]){let e=await utils_1[i(288)][t(246)](),s=1==(1&e[t(224)]),r=2==(2&e[i(191)]),a=4==(4&e[t(224)]),n="",_="",c="",l=!0;return"0"!==this[t(212)][t(177)]?1===this[t(164)][t(150)]&&0===e[i(269)]?(n=await core_1[t(245)][t(197)](t(215)),_=utils_1[t(259)].tr(t(251)),c=utils_1[t(259)].tr(t(201)),l=!1):2!==this[t(164)][t(150)]||r?3!==this[t(164)][t(150)]||a||(n=await core_1[t(245)].getUrl(t(191),{corporation_id:e[t(184)],verifyLevel:1}),_=utils_1[t(259)].tr(t(232)),c=utils_1.csEditor.tr(i(175)),l=!1):(n=await core_1[t(245)][i(164)](t(191),{corporation_id:e[t(184)]}),_=utils_1[i(273)].tr(t(146)),c=utils_1.csEditor.tr(t(237)),l=!1):1===this[t(156)][i(293)]&&0===e.is_mobile?(n=await core_1[t(245)][i(164)](t(239)),_=utils_1[i(273)].tr(i(262)),c=utils_1[t(259)].tr(t(201)),l=!1):1===this[t(156)][i(293)]||s||(n=await core_1[i(256)][t(197)](i(212)),_=utils_1[t(259)].tr(t(199)),c=utils_1[t(259)].tr(t(237)),l=!1),!!l||(0===await utils_1[t(259)][t(183)](t(136),_,utils_1[t(259)].tr(t(121)),[c,utils_1[i(273)].tr(t(192))],0)&&utils_1[t(245)][t(180)](n),!1)}return!0},async installPlugin(i,t){return new Promise((e,s)=>{var r=_0x29f9,a=_0x5687;let n=utils_1[r(273)].tr(a(195));plugin_1[r(256)][a(141)]=!0,plugin_1[a(245)][a(204)](i,t,async(t,_)=>{var c=r,l=a;if(utils_1.csEvent[l(222)](l(202),t),!_&&c(303)===t)return utils_1[l(234)][c(292)](utils_1[l(259)].tr(l(171))),s(t);t===n&&(await plugin_1[l(245)][l(220)](i),await this[l(263)](),await this[c(178)](),this[c(206)](),e(!0)),plugin_1[c(256)][l(141)]=!1})[r(312)](i=>(utils_1[a(234)].warn(utils_1[a(259)].tr(a(171))),s(i)))})},async enableService(i){return new Promise((t,e)=>{var s=_0x29f9,r=_0x5687;this[r(262)](s(317),this[s(247)][r(247)],i,!0,()=>{var e=s,a=r;i?utils_1.csAnalytics[e(274)]():utils_1[a(241)][a(117)](),this[a(258)]=i,t()})})},async doOpenService(){var i=_0x5422f1,t=_0x57143c;return utils_1[t(241)][i(197)](),new Promise((e,s)=>{var r=i,a=t;utils_1[r(288)][a(211)](this[a(212)][r(278)],this[a(164)][r(248)])[a(125)](i=>{e()})[a(253)](async i=>{var t,e=r,n=a;this[n(118)]&&this[e(245)][n(170)]&&await(null===(t=this[e(245)])||void 0===t?void 0:t[n(170)]({service:this[n(164)],reason:i})),s(i)})})},async openServiceRequestServer(){return new Promise((i,t)=>{var e=_0x29f9,s=_0x5687;0!==this[e(247)][e(307)][s(214)]?utils_1[s(223)][s(222)](s(139),utils_1[s(259)].tr(s(257)),this[s(164)].service_protocol,[utils_1[s(259)].tr(s(182)),utils_1[e(273)].tr(s(192))],0,r=>{var a=e,n=s;if(0!==r)return t(new Error(a(255)));utils_1[n(223)].emit(n(202),utils_1[a(273)].tr(a(319))),this[a(238)]()[n(125)](i)[a(312)](t)}):this[e(238)]()[e(253)](i)[s(253)](t)})},async handleEnabelService(i){var t,e,s,r,a=_0x5422f1,n=_0x57143c;if(i[n(194)][n(235)]=this[n(258)],this[n(258)])return utils_1[n(223)][n(222)](n(202),utils_1[n(259)].tr(a(233))),await this[n(161)](!1),void utils_1[n(223)].emit(n(115));if(await this[n(157)]()){if(!plugin_1[n(245)][n(124)](this[n(164)][n(203)]))try{await this[n(204)](this[n(164)][a(186)],this[n(164)][n(208)]),utils_1[n(223)][n(222)](n(115))}catch(i){return void utils_1[n(223)][n(222)](n(115))}if(!(null===(t=this[n(118)])||void 0===t?void 0:t[a(301)])||await(null===(e=this[n(118)])||void 0===e?void 0:e[n(181)](this[n(164)]))){if(await this[a(244)]())utils_1[n(223)][a(250)](n(202),utils_1[n(259)].tr(n(248)));else try{await this[a(185)]()}catch(i){return void utils_1[n(223)][n(222)](n(115))}await this[n(161)](!0),(null===(s=this[n(118)])||void 0===s?void 0:s[n(119)])&&await(null===(r=this[n(118)])||void 0===r?void 0:r[n(119)](this[n(164)])),utils_1[n(223)][n(222)](n(115))}}},async handleGotoLink(i){var t,e,s=_0x5422f1,r=_0x57143c;switch(i){case r(142):e=this[r(156)][r(143)],utils_1.csAnalytics[r(255)](e);break;case"dev":e=this[s(276)][r(250)],utils_1[r(241)].gotoDashboardUrl(e);break;case r(244):e=this[r(156)][r(172)],utils_1[r(241)][r(145)](e)}this[r(118)]&&this[r(118)][s(310)]&&!await(null===(t=this[r(118)])||void 0===t?void 0:t[r(116)](e))||utils_1[r(245)][r(180)](e)},async gotoService(){var i=_0x5422f1,t=_0x57143c;let e=this[t(249)][t(154)][i(264)][i(278)],s=this.$root[t(154)][t(212)][i(291)]||0;utils_1[t(245)][i(242)](await core_1[t(245)][t(197)](t(179),{app_id:e,target:s}))}}});
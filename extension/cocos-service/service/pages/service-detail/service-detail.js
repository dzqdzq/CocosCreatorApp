var _0x58ab=["shift","service_type","attachShadow","csFile","checked","unknow_game","game","csLogger","verify_person_tips","platform","gotoSampleUrl","getServicePlugin","hide-loading","realname_company_tips","srv","realname","sample","defineProperty","find","doOpenService","create","./service-detail.html","service:switch-version","checkAllowOpenService","is_mobile_company","checkServiceWithGame","enable","disableService","__esModule","verification_status","$emit","beforeClickGotoLink","show-bind-game","gotoDashboardUrl","getServicePluginInfo","getGameDetail","service_name","enableService","installPlugin","/../../assets/","emit","csAnalytics","certificate","guide","is_mobile","failureOpenService","jump","realname_person_tips","afterOpenService","open_service_btn","use strict","reloadPlugin","service_id","cocos_company_verify_url","service_component_name","createInnterHTML","readServiceParam","pluginClose","c_id","__createBinding","cocos_mobile_bind_company_url","beforeOpenService","openServiceRequestServer","pluginExists","contents","package_download_url","installed","open","all","service","param","pluginReady","compareVersion","csConfig","readPluginInfo","verify_tips","../../core/plugin","show-verm","switch","service_protocol","serviceVersion","isUpdate","service_version_warnning","default","high_verify_tips","servicePlugin","warn","extend","prototype","download_failed","../../../vue","update","getUrl","enable-service","description","shows","replaceAppIdOnUrl","shadowRoot","cocos_mobile_bind_personal_url","service_sample_url","call","name","app_id","catch","dev","getUserInfo","Cancel Open!","closing_service","plugin_version","target","service_dev_url","serviceInfo","then","$data","ready","disables","close","csProtocol","require_verify","switchVersion","csEditor","csEvent","clacVersion","__importStar","calcShows","dialog_title","version","__importDefault"," - ","not_installed","$root","indexOf","../../core","price","getPluginVerByURL","openService"];!function(i,t){!function(t){for(;--t;)i.push(i.shift())}(++t)}(_0x58ab,193);var _0x3a2a=function(i,t){return _0x58ab[i-=302]},_0xdf26f3=_0x3a2a,_0x16c6=[_0xdf26f3(313),_0xdf26f3(414),_0xdf26f3(351),_0xdf26f3(309),_0xdf26f3(321),"isUpdate","service_guide_url","removeAllListeners","hasOwnProperty",_0xdf26f3(412),_0xdf26f3(347),_0xdf26f3(398),"afterOpenService",_0xdf26f3(392),"cocos_personal_verify_url",_0xdf26f3(378),"show-confirm",_0xdf26f3(386),_0xdf26f3(342),_0xdf26f3(330),_0xdf26f3(337),_0xdf26f3(382),_0xdf26f3(393),_0xdf26f3(416),_0xdf26f3(407),"openCocosUrl",_0xdf26f3(332),_0xdf26f3(403),_0xdf26f3(404),"hasUpdate",_0xdf26f3(433),_0xdf26f3(316),_0xdf26f3(304),"enable-service",_0xdf26f3(397),_0xdf26f3(346),"cocos_service_open_url",_0xdf26f3(339),_0xdf26f3(410),_0xdf26f3(436),_0xdf26f3(408),_0xdf26f3(426),_0xdf26f3(399),"configDevUrl",_0xdf26f3(374),_0xdf26f3(385),_0xdf26f3(353),_0xdf26f3(325),_0xdf26f3(418),_0xdf26f3(380),_0xdf26f3(435),_0xdf26f3(327),_0xdf26f3(349),_0xdf26f3(358),_0xdf26f3(400),"UNKNOW",_0xdf26f3(421),_0xdf26f3(312),_0xdf26f3(366),_0xdf26f3(387),_0xdf26f3(364),_0xdf26f3(319),_0xdf26f3(303),_0xdf26f3(348),_0xdf26f3(359),_0xdf26f3(428),_0xdf26f3(365),_0xdf26f3(340),"certificate",_0xdf26f3(430),_0xdf26f3(379),"gotoGuideUrl",_0xdf26f3(437),"csUtil",_0xdf26f3(411),_0xdf26f3(434),_0xdf26f3(369),_0xdf26f3(389),"$root",_0xdf26f3(370),"debug",_0xdf26f3(306),_0xdf26f3(368),_0xdf26f3(314),_0xdf26f3(343),"uninstallPlugin",_0xdf26f3(406),_0xdf26f3(401),_0xdf26f3(432),"../../../utils",_0xdf26f3(357),_0xdf26f3(427),"hasSwitch",_0xdf26f3(420),"__setModuleDefault","isInstall",_0xdf26f3(415),_0xdf26f3(336),_0xdf26f3(354),"btn_cancel",_0xdf26f3(356),_0xdf26f3(367),_0xdf26f3(360),_0xdf26f3(308),_0xdf26f3(324),_0xdf26f3(384),"dialogMsgBox",_0xdf26f3(383),_0xdf26f3(388),_0xdf26f3(371),"opening_service","detail",_0xdf26f3(355),_0xdf26f3(345),_0xdf26f3(311),"corporation_id",_0xdf26f3(419),_0xdf26f3(302),_0xdf26f3(395),_0xdf26f3(331),_0xdf26f3(396),_0xdf26f3(320),"readFile","fail",_0xdf26f3(361),_0xdf26f3(362),_0xdf26f3(323),_0xdf26f3(422),_0xdf26f3(402),_0xdf26f3(315),"download_failed",_0xdf26f3(417),"show-loading",_0xdf26f3(328),_0xdf26f3(390),_0xdf26f3(405),_0xdf26f3(310),_0xdf26f3(424),"length",_0xdf26f3(305),"require_verify"];!function(i,t){!function(t){for(var e=_0x3a2a;--t;)i.push(i[e(381)]())}(++t)}(_0x16c6,206);var _0x9632=function(i,t){return _0x16c6[i-=417]},_0xca34d4=_0x9632;_0xdf26f3(431);var __createBinding=this&&this[_0xca34d4(525)]||(Object[_0xca34d4(439)]?function(i,t,e,_){void 0===_&&(_=e),Object[_0xca34d4(504)](i,_,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,_){void 0===_&&(_=e),i[_]=t[e]}),__setModuleDefault=this&&this[_0xca34d4(446)]||(Object[_0xdf26f3(401)]?function(i,t){var e=_0xca34d4;Object[e(504)](i,e(485),{enumerable:!0,value:t})}:function(i,t){i[_0xca34d4(485)]=t}),__importStar=this&&this[_0xca34d4(434)]||function(i){var t=_0xdf26f3,e=_0xca34d4;if(i&&i[t(409)])return i;var _={};if(null!=i)for(var s in i)e(485)!==s&&Object[t(333)][e(501)][e(465)](i,s)&&__createBinding(_,i,s);return __setModuleDefault(_,i),_},__importDefault=this&&this[_0xdf26f3(372)]||function(i){return i&&i[_0xdf26f3(409)]?i:{default:i}};Object[_0xca34d4(504)](exports,_0xdf26f3(409),{value:!0});const vue_1=__importDefault(require(_0xdf26f3(335))),core_1=__importDefault(require(_0xdf26f3(377))),plugin_1=__importDefault(require(_0xca34d4(497))),utils_1=__importStar(require(_0xca34d4(441)));exports[_0xca34d4(485)]=vue_1[_0xca34d4(485)][_0xca34d4(519)]({template:utils_1[_0xca34d4(457)][_0xca34d4(474)](__dirname,_0xca34d4(480)),props:{game:{type:Object,default:()=>({app_id:_0xca34d4(548),name:utils_1[_0xca34d4(418)].tr(_0xca34d4(510)),c_id:"0"})},service:{type:Object}},data(){var i=_0xca34d4;return{enable:!1,srv:this[i(435)],serviceInfo:void 0,servicePlugin:void 0,service_price:this[i(435)].service_price,param:{},serviceVersion:"",hasUpdate:!1,hasSwitch:!0,shows:{all:!0,name:!0,version:!0,description:!0,jump:!0,price:!0,platform:!0}}},watch:{async game(i){this[_0xca34d4(536)]()}},async created(){var i=_0xdf26f3,t=_0xca34d4;this[t(470)][t(517)]&&(this[i(407)]=this[t(470)][t(517)]&&plugin_1[t(485)][i(308)](this[t(470)].service_component_name)),await this[t(554)]();try{this[t(481)]=await utils_1[i(318)][t(424)](this[t(470)][i(433)])}catch(i){utils_1[t(460)][t(432)](i)}this[t(428)](),this[t(426)](t(526),this[t(470)][i(433)],this[i(407)]),this[t(453)](),utils_1[t(551)][t(500)](i(403)),utils_1[t(551)].on(t(520),this[t(553)]),this[t(536)]()},async mounted(){var i=_0xca34d4;await this[i(524)]()},async destroyed(){var i=_0xca34d4;await this[i(469)]()},methods:{async pluginReady(){var i=_0xdf26f3,t=_0xca34d4;if(await plugin_1[i(328)][t(440)](this[t(470)][t(543)]),this[t(512)]=plugin_1[t(485)][t(506)](this[t(470)][t(543)],t(463)),this[i(330)]){let e=this.$refs[t(463)];if(e[i(342)]||(e[t(459)]({mode:t(550)}),e[t(511)]&&plugin_1[t(485)][t(532)](this[t(512)],e[t(511)],this[t(470)][t(543)],t(463))),this[i(330)][t(557)])try{await this[i(330)][i(359)]({game:this[t(552)],service:this[t(470)],param:await utils_1[i(318)][t(424)](this[t(470)][i(433)])})}catch(i){utils_1[t(460)][t(432)](i)}}},async pluginClose(){var i,t=_0xca34d4;(null===(i=this[t(512)])||void 0===i?void 0:i[t(476)])&&await this[t(512)][t(476)]()},async readPluginInfo(){var i=_0xdf26f3,t=_0xca34d4;this[t(452)]=plugin_1[t(485)][t(448)](this[t(435)][t(543)]),this[t(512)]=plugin_1[t(485)][t(506)](this[t(435)][i(435)],t(463)),this[t(540)]=this[t(452)]?this[t(452)][t(461)]:utils_1[t(418)].tr(t(537))},getRealPath:i=>__dirname+_0xca34d4(445)+i,configDevUrl(){var i=_0xdf26f3,t=_0xca34d4;this[t(470)][t(464)]=utils_1[t(425)][i(341)](this[t(470)][t(464)],this[t(552)][t(503)])},calcShows(){var i=_0xdf26f3,t=_0xca34d4;if(this[t(452)]&&this[i(356)][t(496)]&&this[t(452)][t(496)][t(463)]){let e=this[t(452)][t(496)][t(463)][t(454)];this[t(419)][i(313)]=void 0===(null==e?void 0:e[t(535)](i=>t(493)===i)),this[t(419)][t(528)]=void 0===(null==e?void 0:e[t(535)](i=>t(528)===i)),this[t(419)][t(461)]=void 0===(null==e?void 0:e[t(535)](i=>t(461)===i)),this[t(419)][t(530)]=void 0===(null==e?void 0:e[t(535)](i=>t(530)===i)),this[t(419)][t(443)]=void 0===(null==e?void 0:e[t(535)](i=>t(443)===i)),this[t(419)][t(508)]=void 0===(null==e?void 0:e.find(t=>i(378)===t)),this[i(340)][t(486)]=void 0===(null==e?void 0:e[t(535)](i=>t(486)===i))}},versionClick(){var i=_0xdf26f3,t=_0xca34d4;utils_1[i(366)][i(421)](i(322),t(478))},updateClick(){var i=_0xdf26f3,t=_0xca34d4;utils_1.csEvent[t(549)](i(322),t(449))},async switchVersion(i,t){var e=_0xdf26f3,_=_0xca34d4;let s=this.enable;this.enableService(!1),plugin_1[_(485)][_(498)]=!0,this[_(444)]=!1,await plugin_1[e(328)][_(437)](this[_(470)][_(543)]),this[_(444)]=!0;try{await this[e(419)](this[_(470)][_(543)],i)}catch(i){return void utils_1[_(551)][e(421)](_(515))}s?setTimeout(async()=>{var i=e,t=_;await this[t(541)](!0),utils_1[t(551)][t(549)](t(515)),plugin_1[t(485)][i(326)]=!1},1e3):utils_1[e(366)][_(549)](e(393))},clacVersion(){var i=_0xdf26f3,t=_0xca34d4;if(!this[t(452)])return void(this[t(522)]=!1);let e=plugin_1[t(485)][t(422)](this[t(470)][t(488)]),_=this.serviceInfo[t(461)];this[t(522)]=1===utils_1[t(425)][i(317)](e,_),this[t(481)].plugin_version&&this[t(481)][t(539)]!==this[t(452)][t(461)]&&this[t(517)]&&utils_1[t(460)][t(471)](this[t(470)][t(483)]+i(373)+utils_1[t(418)].tr(t(544)))},async checkServiceOnGame(){var i=_0xdf26f3,t=_0xca34d4;return"0"===this[t(470)][t(514)]||(await utils_1[i(362)][t(516)](this[t(552)].app_id))[t(435)][i(376)](this[t(470)][t(523)])>=0},async checkAllowOpenService(){var i=_0xdf26f3,t=_0xca34d4;if(t(548)===this[t(552)][t(503)]&&"0"!==this[t(470)][t(514)])return utils_1[t(551)][i(421)](i(413),t(463)),!1;if(!this[t(430)][t(438)](this[t(552)],this[t(470)]))return!1;if(0!==this[i(395)][i(363)]){let e=await utils_1[t(477)][i(350)](),_=1==(1&e[t(531)]),s=2==(2&e[t(531)]),a=4==(4&e[t(531)]),r="",f="",d="",l=!0;return"0"!==this[t(552)][t(555)]?1===this[t(470)][t(492)]&&0===e[t(487)]?(r=await core_1[i(328)].getUrl(t(491)),f=utils_1[t(418)].tr(i(394)),d=utils_1[t(418)].tr(i(396)),l=!1):2!==this[i(395)][t(492)]||s?3!==this[t(470)].require_verify||a||(r=await core_1.default[t(513)](t(427),{corporation_id:e[t(467)],verifyLevel:1}),f=utils_1[i(365)].tr(i(329)),d=utils_1[t(418)].tr(t(420)),l=!1):(r=await core_1[i(328)][t(513)](i(434),{corporation_id:e[t(467)]}),f=utils_1[t(418)].tr(t(473)),d=utils_1[t(418)].tr(i(423)),l=!1):1===this[t(435)].require_verify&&0===e[i(425)]?(r=await core_1[t(485)][t(513)](t(436)),f=utils_1[t(418)].tr(t(417)),d=utils_1[i(365)].tr(t(472)),l=!1):1===this[t(435)][t(492)]||_||(r=await core_1[t(485)][t(513)](t(507)),f=utils_1[i(365)].tr(t(429)),d=utils_1[t(418)].tr(t(420)),l=!1),!!l||(0===await utils_1[t(418)][t(458)](t(471),f,utils_1[t(418)].tr(t(431)),[d,utils_1[t(418)].tr(t(451))],0)&&utils_1[t(485)][t(518)](r),!1)}return!0},async installPlugin(i,t){return new Promise((e,_)=>{var s=_0x9632;let a=utils_1.csEditor.tr(s(466));plugin_1[s(485)][s(447)]=!0,plugin_1[s(485)][s(468)](i,t,async(t,r)=>{var f=_0x3a2a,d=s;if(utils_1[d(551)][f(421)](d(484),t),!r&&d(475)===t)return utils_1[d(460)][d(471)](utils_1[d(418)].tr(f(334))),_(t);t===a&&(await plugin_1[d(485)][f(432)](i),await this[d(554)](),await this[d(524)](),this[d(453)](),e(!0)),plugin_1[d(485)][d(447)]=!1})[s(556)](i=>(utils_1[s(460)][s(471)](utils_1[s(418)].tr(s(482))),_(i)))})},async enableService(i){return new Promise((t,e)=>{var _=_0x3a2a,s=_0x9632;this[s(426)](_(338),this[s(470)][s(523)],i,!0,()=>{var e=s;i?utils_1[e(479)][e(541)]():utils_1[e(479)][e(533)](),this[e(517)]=i,t()})})},async doOpenService(){var i=_0xca34d4;return utils_1.csAnalytics[i(542)](),new Promise((t,e)=>{var _=i;utils_1[_(477)][_(542)](this[_(552)][_(503)],this[_(470)][_(523)])[_(442)](i=>{t()})[_(556)](async i=>{var t,s=_0x3a2a,a=_;this[a(512)]&&this[s(330)][a(534)]&&await(null===(t=this[a(512)])||void 0===t?void 0:t[a(534)]({service:this[a(470)],reason:i})),e(i)})})},async openServiceRequestServer(){return new Promise((i,t)=>{var e=_0x3a2a,_=_0x9632;0!==this[e(395)][_(456)][_(490)]?utils_1[_(551)][_(549)](_(509),utils_1[e(365)].tr("service_protocol"),this[_(470)][_(456)],[utils_1[_(418)].tr(_(421)),utils_1[_(418)].tr(_(451))],0,e=>{var s=_;if(0!==e)return t(new Error(s(495)));utils_1[s(551)][s(549)](s(484),utils_1[s(418)].tr(s(462))),this[s(547)]()[s(442)](i)[s(556)](t)}):this[_(547)]().then(i)[e(348)](t)})},async handleEnabelService(i){var t,e,_,s,a=_0xdf26f3,r=_0xca34d4;if(i[r(450)][r(538)]=this[r(517)],this[r(517)])return utils_1[r(551)][a(421)](r(484),utils_1[r(418)].tr(a(352))),await this[r(541)](!1),void utils_1[r(551)][a(421)](r(515));if(await this[r(521)]()){if(!plugin_1[r(485)][r(455)](this[r(470)][a(435)]))try{await this[r(468)](this[r(470)][a(435)],this[a(395)][a(310)]),utils_1[r(551)][r(549)](r(515))}catch(i){return void utils_1[r(551)][r(549)](r(515))}if(!(null===(t=this[r(512)])||void 0===t?void 0:t[r(433)])||await(null===(e=this[r(512)])||void 0===e?void 0:e[r(433)](this[r(470)]))){if(await this.checkServiceOnGame())utils_1[r(551)][r(549)](r(484),utils_1[a(365)].tr(r(462)));else try{await this[a(307)]()}catch(i){return void utils_1[a(366)][r(549)](a(393))}await this[r(541)](!0),(null===(_=this[r(512)])||void 0===_?void 0:_[a(429)])&&await(null===(s=this[r(512)])||void 0===s?void 0:s[r(505)](this[r(470)])),utils_1[r(551)][r(549)](a(393))}}},async handleGotoLink(i){var t,e,_=_0xdf26f3,s=_0xca34d4;switch(i){case s(489):e=this[s(435)][s(499)],utils_1[s(479)][s(423)](e);break;case s(545):e=this[_(314)][s(464)],utils_1[s(479)][s(494)](e);break;case s(527):e=this[s(435)][_(344)],utils_1[_(422)][_(391)](e)}this[_(330)]&&this[s(512)][s(502)]&&!await(null===(t=this[_(330)])||void 0===t?void 0:t[s(502)](e))||utils_1[s(485)][s(518)](e)},async gotoService(){var i=_0xdf26f3,t=_0xca34d4;let e=this[i(375)][i(358)].game[t(503)],_=this.$root[t(546)].game[t(555)]||0;utils_1[t(485)][t(518)](await core_1[i(328)][i(337)](t(529),{app_id:e,target:_}))}}});
var _0x5376=["not_installed","remoteVersion","service_id","csEvent","emit","../../../utils","default","info","select_version_please","shift","action","version","localVersion","package_download_url","__esModule","value","switch_version_tips","btn_ok","enableUpdate","update_version_tips","push","use strict","new_ver","target","csEditor","service_component_name","switchVersion","srv","hide-verm","csFile","__importDefault","upgrade","selected","../../../vue","versionStr","getServicePluginInfo","csUtil","upgradeStr","getPluginVerByURL","dialog_title","../../core/plugin","dialogMsgBox","srvInfo","csProtocol","switch","service","extend","./version-manager.html","defineProperty","update"];!function(t,e){!function(e){for(;--e;)t.push(t.shift())}(++e)}(_0x5376,249);var _0x77e2=function(t,e){return _0x5376[t-=241]},_0x213778=_0x77e2,_0x273d=[_0x213778(287),"selected",_0x213778(256),_0x213778(252),_0x213778(253),_0x213778(269),"ver : ",_0x213778(268),_0x213778(254),_0x213778(265),"readFile",_0x213778(246),_0x213778(244),_0x213778(273),_0x213778(248),_0x213778(267),_0x213778(284),"getVersionDesc",_0x213778(249),_0x213778(276),_0x213778(279),_0x213778(289),_0x213778(242),_0x213778(258)," : ",_0x213778(288),_0x213778(243),_0x213778(245),"enableSwitch",_0x213778(255),"package_version_desc",_0x213778(290),_0x213778(259),_0x213778(260),_0x213778(261),_0x213778(285),"btn_cancel",_0x213778(281),_0x213778(250),_0x213778(278),_0x213778(266),_0x213778(241),_0x213778(277),_0x213778(280),_0x213778(275),_0x213778(286)];!function(t,e){!function(e){for(var i=_0x77e2;--e;)t[i(262)](t[i(251)]())}(++e)}(_0x273d,418);var _0x4627=function(t,e){return _0x273d[t-=271]},_0x356632=_0x4627;_0x213778(263);var __importDefault=this&&this[_0x213778(272)]||function(t){return t&&t[_0x4627(315)]?t:{default:t}};Object[_0x356632(298)](exports,"__esModule",{value:!0});const vue_1=__importDefault(require(_0x356632(311))),plugin_1=__importDefault(require(_0x213778(282))),utils_1=require(_0x213778(247));exports.default=vue_1[_0x213778(248)][_0x356632(292)]({template:utils_1[_0x213778(271)][_0x356632(277)](__dirname,_0x356632(288)),props:{service:{type:Object},action:{type:String,default:()=>_0x356632(312)}},data(){var t=_0x356632;return{srv:this[t(313)],srvInfo:plugin_1.default[t(309)](this[t(313)][t(282)]),versionStr:"",upgradeStr:"",localVersion:"",remoteVersion:"",enableUpdate:!1,enableSwitch:!1,selected:""}},async created(){var t,e,i=_0x213778,_=_0x356632;this[_(293)]=plugin_1[_(281)][_(310)](this[_(272)][_(296)]),this[_(275)]=(null===(t=this[_(283)])||void 0===t?void 0:t[_(271)])||utils_1[_(307)].tr(_(289)),_(308)===this[_(316)]?(this[_(286)]=utils_1[_(307)].tr(i(264))+_(291)+this[_(293)],this[_(287)]=this[_(272)][_(297)]):_(312)===this[_(316)]&&(this[_(286)]=_(273)+this[_(275)],this[_(287)]=(await utils_1[_(302)][_(284)](this[_(272)].service_id,this[i(254)]))[_(297)]||"",""===this[_(287)]&&(null===(e=this[_(283)])||void 0===e?void 0:e[_(271)])&&(this[_(287)]=this[_(283)][_(280)]||"")),this.enableSwitch=!1,this[_(300)]=1===utils_1[_(306)].compareVersion(this[i(243)],this[_(275)])},methods:{handleClose(){var t=_0x213778,e=_0x356632;utils_1[t(245)][e(278)](t(270))},async handleSelectChange(t){var e=_0x213778,i=_0x356632;this[i(314)]=t[i(276)][e(257)],this[i(295)]=!(this.selected===utils_1[e(266)].tr(i(305))||this[e(274)]===this[i(275)]),this[i(287)]=(await utils_1[i(302)].getVersionDesc(this[e(269)][i(279)],this[i(314)]))[i(297)]},handleSwitch(){var t=_0x356632;this[_0x213778(268)](this[t(314)],t(312))},handleUpdate(){var t=_0x356632;this[t(274)](this[t(293)],t(308))},async switchVersion(t,e){var i=_0x213778,_=_0x356632;if(0!==await utils_1[_(307)][i(283)](_(285),utils_1[_(307)].tr("update"===this[_(316)]?_(301):_(290)),utils_1[_(307)].tr(_(304)),[utils_1[i(266)].tr(_(299)),utils_1[_(307)].tr(_(303))],0))return;let s=await utils_1[i(285)][_(284)](this.srv[_(279)],t);utils_1[_(294)][_(278)]("service:switch-version",s[_(296)],e),utils_1[_(294)].emit(i(270))}}});
"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const vue_1=__importDefault(require("../../../vue")),utils_1=require("../../../utils");exports.default=vue_1.default.extend({template:utils_1.csFile.readFile(__dirname,"./content-menu.html"),props:{position:{type:Object,default:()=>({top:0,right:0})},items:{type:Array},callback:{type:Function,default:()=>t=>{}}},created(){this.items.forEach(t=>{t.isTop=!1,t.isBottom=!1});const t=this.items;this.setupItemsTopAndBottom(t);for(const e of t)e.subMenu&&this.setupItemsTopAndBottom(e.subMenu)},mounted(){let t=this.$refs.mask.getBoundingClientRect(),e=t.width,i=t.height,o=this.$refs.menu.getBoundingClientRect(),s=o.width,u=o.height,n=o.top-t.top,h=Math.min(i-u,n);h+u===i&&(h-=10),this.menuStyle.top=`${h}px`;let l=t.right-o.right,r=Math.min(e-s,l);r+s===e&&(r+=10),this.menuStyle.right=`${r}px`,this.show=!1,this.$nextTick(()=>this.show=!0)},data(){return{show:!0,menuStyle:{top:`${this.position.top}px`,bottom:"auto",left:"auto",right:`${this.position.right}px`},positionContainerStyle:{position:"absolute",width:"0",top:"0",bottom:"auto",left:"auto",right:"auto"},subMenuStyle:{position:"absolute",top:"0",bottom:"auto",left:"auto",right:"0"},curSubMenuItemId:""}},methods:{setupItemsTopAndBottom(t){t[0].isTop=!0,t[t.length-1].isBottom=!0},itemClick(t,e){t.subMenu||(this.callback(t.id),utils_1.csEvent.emit("hide-menu"))},onSubMenuItemEnter(t){let e=this.$refs.mask.getBoundingClientRect(),i=this.$refs.menu.getBoundingClientRect();i.left-e.left>e.right-i.right?(this.positionContainerStyle.left="0",this.positionContainerStyle.right="auto",this.subMenuStyle.right="0",this.subMenuStyle.left="auto"):(this.positionContainerStyle.right="0",this.positionContainerStyle.left="auto",this.subMenuStyle.left="0",this.subMenuStyle.right="auto"),this.curSubMenuItemId=t.id},onSubMenuItemLeave(){this.curSubMenuItemId=""}}});
"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const vue_1=__importDefault(require("../../../vue")),utils_1=require("../../../utils"),fs_extra_1=require("fs-extra");exports.default=vue_1.default.extend({template:"<div ref='panel'></div>",props:{src:{type:String},pdata:{type:Object}},data(){return{dSrc:this.src,dData:this.pdata,panel:null}},watch:{src(){this.dSrc=this.src},pdata(){this.dData=this.pdata}},created(){},mounted(){if(fs_extra_1.existsSync(this.dSrc))try{this.panel=utils_1.csUtil.require(this.dSrc);let t=this.$refs.panel;if(t.shadowRoot||t.attachShadow({mode:"open"}),t.shadowRoot){t.shadowRoot.innerHTML=this.panel.template;let e=document.createElement("style");if(e.setAttribute("type","text/css"),e.textContent=utils_1.csFile.readFile(__dirname,"../../assets/creator.css")+utils_1.csFile.readFile(__dirname,"../../assets/panel.css"),t.shadowRoot.insertBefore(e,t.shadowRoot.firstChild),this.panel.style){let s=document.createElement("style");s.setAttribute("type","text/css"),s.textContent=this.panel.style,t.shadowRoot.insertBefore(s,e.nextSibling)}if(this.panel.$){let e=JSON.parse(JSON.stringify(this.panel.$));for(let s of Object.keys(e)){if("string"!=typeof this.panel.$[s])return;this.panel.$[s]=t.shadowRoot.querySelector(e[s])}}this.panel.ready&&this.panel.ready(this.dData)}}catch(t){utils_1.csLogger.error(t)}},destroyed(){this.panel.close&&this.panel.close()}});
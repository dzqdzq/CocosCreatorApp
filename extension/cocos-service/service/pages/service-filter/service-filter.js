"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const vue_1=__importDefault(require("../../../vue")),utils_1=require("../../../utils");exports.default=vue_1.default.extend({template:utils_1.csFile.readFile(__dirname,"./service-filter.html"),props:{services:{type:Array},filter:{type:Object,default:()=>({status:"All"})}},created(){switch(this.clacAllPlatforms(),this.filter.status){case"All":this.status=0;break;case"Enable":this.status=1;break;case"Disable":this.status=2;break;default:this.status=0}this.platformSet=new Set(this.filter.platforms||[])},data:()=>({platforms:[],platformSet:new Set,status:0,refresh:!0}),methods:{refreshPanel(){this.refresh=!1,this.$nextTick(()=>this.refresh=!0)},clacAllPlatforms(){let t=new Set;t.add("All"),this.services.forEach(e=>e.support_platform.forEach(e=>t.add(e))),this.platforms=Array.from(t)},handleConfirm(){let t="All";0===this.status?t="All":1===this.status?t="Enable":2===this.status&&(t="Disable"),utils_1.csEvent.emit("service:filter-changed",{status:t,platforms:Array.from(this.platformSet)}),this.handleClose()},handleStatusClick(t){this.status=parseInt(t.target.getAttribute("status")||"0"),this.refreshPanel()},handlePlatformClick(t){let e=t.target.textContent;this.platformSet.has(e)?1===this.platformSet.size?utils_1.csLogger.warn(utils_1.csEditor.tr("filter.only_one_platform_tips")):(this.platformSet.delete(e),t.target.pressed=!1):("All"===e?this.platformSet.clear():this.platformSet.delete("All"),this.platformSet.add(e),t.target.pressed=!0),this.refreshPanel()},handleClose(){utils_1.csEvent.emit("hide-service-filter")}}});
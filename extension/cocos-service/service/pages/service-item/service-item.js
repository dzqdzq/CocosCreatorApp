"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const vue_1=__importDefault(require("../../../vue")),utils_1=require("../../../utils"),plugin_1=__importDefault(require("../../core/plugin"));exports.default=vue_1.default.extend({template:utils_1.csFile.readFile(__dirname,"./service-item.html"),props:{service:{type:Object}},data(){return{serviceInfo:void 0,servicePlugin:void 0,hasCustomItem:!1,content:this.service.service_title,nameTitle:this.service.service_name,hasGroup:""!==this.service.service_group,hasUpdate:!1,headerStyle:{padding:"8px"},contentStyle:{padding:"0px 5px 8px 10px","font-size":"12px","line-height":"18px",color:"var(--color-normal-contrast-important)"},imgStyle:{height:"24px",width:"24px","margin-top":"1px",filter:this.service.enable?"none":"grayscale(100%)"},titleStyle:{color:"var(--color-normal-contrast-weaker)"}}},created(){this.serviceInfo=plugin_1.default.getServicePluginInfo(this.service.service_component_name),this.servicePlugin=plugin_1.default.getServicePlugin(this.service.service_component_name,"item"),this.clactureVersion(),this.servicePlugin&&(this.hasCustomItem=!0),this.hasGroup&&(this.headerStyle.padding="8px 2px",this.contentStyle.padding="0px 5px 8px 5px")},async mounted(){if(this.servicePlugin){let e=this.$refs.item;if(e.attachShadow({mode:"open"}),e.shadowRoot&&plugin_1.default.createInnterHTML(this.servicePlugin,e.shadowRoot,this.service.service_component_name,"item"),this.servicePlugin.ready)try{await this.servicePlugin.ready({game:await utils_1.csConfig.readBindGame(),service:this.service,param:await utils_1.csConfig.readServiceParam(this.service.service_id)})}catch(e){utils_1.csLogger.debug(e)}}},methods:{getRealPath:e=>`${__dirname}/../../assets/icon.png`+e,handleItemClick(){this.$emit("item-click",this.service)},clactureVersion(){var e;let i=plugin_1.default.getPluginVerByURL(this.service.package_download_url),t=null===(e=plugin_1.default.getServicePluginInfo(this.service.service_component_name))||void 0===e?void 0:e.version;void 0!==t&&""!==i&&(this.hasUpdate=1===utils_1.csUtil.compareVersion(i,t))},setItemHover(e){this.titleStyle.color=this.service.hovered&&e?"white":"var(--color-normal-contrast-weaker)"}}});
const _0x3356=["use strict","existsSync","readServiceList","filter","debug","../../utils","onSettings","onSettingsBrowser","path","onSettingsSimulator","csPlugin","getServicePluginInfo","readEnableServices","fs-extra","require","csUtil","includes","service_component_name","shift","join","jsList","map","service_id","push","readServiceParam","builder","simulator","__esModule"];!function(e,t){!function(t){for(;--t;)e.push(e.shift())}(++t)}(_0x3356,188);const _0x2876=function(e,t){return _0x3356[e-=173]},_0x5eda86=_0x2876,_0x223f=[_0x5eda86(183),_0x5eda86(176),_0x5eda86(192),_0x5eda86(182),_0x5eda86(179),"main","all","service_id",_0x5eda86(193),_0x5eda86(178),_0x5eda86(185),_0x5eda86(200),_0x5eda86(174),_0x5eda86(190),_0x5eda86(188),_0x5eda86(186),_0x5eda86(195),"defineProperty",_0x5eda86(196),_0x5eda86(177),_0x5eda86(194),_0x5eda86(180),_0x5eda86(191),"browser",_0x5eda86(189),"csLogger","csConfig"];!function(e,t){!function(t){const i=_0x2876;for(;--t;)e[i(176)](e[i(199)]())}(++t)}(_0x223f,360);const _0x2fb5=function(e,t){return _0x223f[e-=255]},_0x1fecd8=_0x2fb5;_0x5eda86(181),Object[_0x1fecd8(263)](exports,_0x1fecd8(267),{value:!0}),exports[_0x1fecd8(259)]=exports[_0x1fecd8(260)]=void 0;const fs_extra_1=require(_0x1fecd8(266)),path_1=require(_0x1fecd8(270)),utils_1=require(_0x1fecd8(261));async function scanfServiceBuilders(){const e=_0x5eda86,t=_0x1fecd8;let i=[];try{let n=await utils_1.csConfig[t(273)](),s=await utils_1[t(272)][t(281)](),a=n[e(184)](i=>s[e(197)](i[t(280)]));await Promise[t(279)](a[t(258)](n=>{const s=e,a=t;var o;let _=utils_1[a(268)][a(275)](n[s(198)]);if(void 0===_||!(null===(o=_[a(255)])||void 0===o?void 0:o[a(278)]))return;let r=path_1[a(257)](_[a(270)],_[s(178)][a(278)]);fs_extra_1[a(276)](r)&&i[a(274)]({service_id:n[s(175)],builder:utils_1[a(264)][a(262)](r)})}))}catch(i){utils_1[t(271)][e(185)](i)}return i}async function onCommonSettings(e,t){const i=_0x1fecd8;let n=await scanfServiceBuilders();try{await Promise[i(279)](n[i(258)](async n=>{const s=_0x2876,a=i;n[a(255)][s(187)]&&n[a(255)].onSettings(await utils_1[a(272)][a(265)](n[a(280)]),t,t=>e[s(173)][a(274)](t))}))}catch(e){utils_1[i(271)][i(256)](e)}}async function onSettingsBrowser(e){const t=_0x1fecd8;await onCommonSettings(e,t(269))}async function onSettingsSimulator(e){const t=_0x1fecd8;await onCommonSettings(e,t(277))}exports[_0x5eda86(188)]=onSettingsBrowser,exports.onSettingsSimulator=onSettingsSimulator;
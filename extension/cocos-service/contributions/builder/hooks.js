const _0x5cb7=["path","getUserData","sort","substr","huaweiServiceIntegrationFailed","app_id","serviceIntegrationFailed","packages","updateConfigInfos","csAnalytics","existsSync","onBeforeCompressSettings","csConfig","set","../../utils","use strict","sdkhUbServiceIntegrationFailed","shift","csEditor","readBindGame","throwError","defineProperty","pUseType","sdkhub$$","huaweiServiceIntegrationSuccess","service_component_name","fs-extra","push","service_id","builder","service-sdkhub","find","settings/agconnect-services.json","readServiceList","__esModule","test","Building Time","services","getPlatformID","readJson","csUtil","get","message","plugins","csFile","packageName","onAfterCompressSettings","onBeforeBuild","enable","stringify","checkCocosService","sdkhUbServiceIntegrationSuccess","onAfterBuild","./common"];!function(e,d){!function(d){for(;--d;)e.push(e.shift())}(++d)}(_0x5cb7,413);const _0x4e18=function(e,d){return _0x5cb7[e-=485]},_0x3d76da=_0x4e18,_0x295e=[_0x3d76da(537),_0x3d76da(520),_0x3d76da(508),_0x3d76da(487),"clear","has",_0x3d76da(506),_0x3d76da(535),_0x3d76da(514),_0x3d76da(522),_0x3d76da(501),_0x3d76da(492),_0x3d76da(511),_0x3d76da(516),_0x3d76da(530),"client",_0x3d76da(525),_0x3d76da(485),_0x3d76da(489),_0x3d76da(526),_0x3d76da(529),_0x3d76da(518),_0x3d76da(509),_0x3d76da(496),_0x3d76da(510),"processCommonNativeModule",_0x3d76da(494),_0x3d76da(517),_0x3d76da(513),_0x3d76da(507),_0x3d76da(527),"getProjectPath",_0x3d76da(490),_0x3d76da(533),"cocos-service",_0x3d76da(502),_0x3d76da(493),_0x3d76da(536),_0x3d76da(515),_0x3d76da(505),_0x3d76da(504),_0x3d76da(528),_0x3d76da(538),_0x3d76da(486),"checkCocosService","serviceIntegrationSuccess",_0x3d76da(512),"join","cocos_uid","sdkHubConfig",_0x3d76da(497),_0x3d76da(503),_0x3d76da(534),_0x3d76da(498),_0x3d76da(532)];!function(e,d){!function(d){const s=_0x4e18;for(;--d;)e[s(531)](e[s(521)]())}(++d)}(_0x295e,463);const _0x18f4=function(e,d){return _0x295e[e-=352]},_0x62ded0=_0x18f4;_0x3d76da(519),Object[_0x62ded0(400)](exports,_0x62ded0(371),{value:!0}),exports[_0x3d76da(502)]=exports[_0x3d76da(496)]=exports[_0x62ded0(367)]=exports[_0x62ded0(379)]=exports.throwError=void 0;const fs_extra_1=require(_0x62ded0(398)),path_1=require(_0x62ded0(369)),utils_1=require(_0x62ded0(405)),common_1=require(_0x62ded0(380));exports[_0x3d76da(524)]=!0;let buildCache=new Map;function compareService(e,d){const s=_0x62ded0;return e.enable===d[s(382)]?0:d[s(382)]?-1:1}let processServiceHooks=async(e,d,s)=>{const t=_0x3d76da,a=_0x62ded0;let o=e[t(511)][a(363)],i=common_1[t(488)](e);if(void 0===o||0===o.services.length)return;a(379)===s&&buildCache[a(388)]();const r=o[a(387)][a(390)](compareService);for(const o of r){if(!fs_extra_1[a(392)](o[t(533)]))break;let r=(await utils_1.csConfig[a(384)]())[a(391)](e=>e[t(532)]===o[a(383)]);buildCache[a(389)](o[a(404)])||buildCache[a(356)](o[t(529)],utils_1[a(361)].require(o[a(362)]));let c=buildCache[t(491)](o[a(404)]);if(void 0===c)break;try{switch(s){case"onBeforeBuild":c[t(497)]&&await c[a(379)](e,d);break;case a(367):c[a(367)]&&await c[t(515)](e,d);break;case a(352):c[a(352)]&&await c[a(352)](e,d);break;case a(364):c[a(364)]&&await c[a(364)](e,d),r&&processServiceIntegration(i,r,e)}}catch(d){throw r&&processServiceIntegration(i,r,e,(d instanceof Error?d[a(395)]:JSON[t(499)](d))||""),d}}};async function onBeforeBuild(e,d){const s=_0x3d76da,t=_0x62ded0;await common_1[s(500)](e)&&(await common_1[t(375)](e),await processServiceHooks(e,d,t(379)))}async function onBeforeCompressSettings(e,d){const s=_0x62ded0;await common_1[s(373)](e)&&await processServiceHooks(e,d,s(367))}async function onAfterCompressSettings(e,d){const s=_0x3d76da,t=_0x62ded0;await common_1[t(373)](e)&&(common_1[t(354)](d),await processServiceHooks(e,d,s(496)))}async function onAfterBuild(e,d){const s=_0x62ded0;await common_1[s(373)](e)&&await processServiceHooks(e,d,s(364))}async function processServiceIntegration(e,d,s,t){const a=_0x3d76da,o=_0x62ded0;let i=(await utils_1[o(393)][o(368)]())[o(377)],r=await utils_1[o(397)][a(523)](),c="",n=path_1[o(376)](utils_1[a(522)][o(360)](),o(366));/^service-(agc|hms|sdkhub)/[o(401)](d[o(404)])&&fs_extra_1[a(514)](n)&&(c=utils_1[o(355)][o(402)](n)[o(399)][o(406)]);let _="";if(a(534)===d[o(404)]){let e=s[o(396)][o(363)][o(378)];if(e&&"{}"!==JSON.stringify(e))for(let d of e[o(365)])_+=","+d[a(495)]+":"+d[o(403)]}void 0===t?/^service-(agc|hms)/[o(401)](d[o(404)])?utils_1[o(357)][o(370)](i,r,d,e,c,a(486)):o(381)===d[a(529)]?utils_1[o(357)][o(394)](i,r,d,e,c,o(372),"sdkhub$$"+_[o(358)](1)):utils_1[o(357)][o(374)](i,r,d,e,o(372)):/^service-(agc|hms)/[o(401)](d[o(404)])?utils_1[o(357)][o(386)](i,r,d,e,c,o(372),t):a(534)===d.service_component_name?utils_1[o(357)][o(385)](i,r,d,e,c,o(372),o(359)+_[a(507)](1),t):utils_1[o(357)][o(353)](i,r,d,e,o(372),t)}exports[_0x3d76da(497)]=onBeforeBuild,exports[_0x62ded0(367)]=onBeforeCompressSettings,exports.onAfterCompressSettings=onAfterCompressSettings,exports[_0x3d76da(502)]=onAfterBuild;
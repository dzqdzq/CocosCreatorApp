"use strict";const _0x166ff3=_0xae4d,_0x3e8edc=(!function(){for(var e=_0xae4d,t=_0xf29e();;)try{if(973924==-parseInt(e(430))+-parseInt(e(466))/2+-parseInt(e(448))/3*(-parseInt(e(474))/4)+parseInt(e(435))/5*(parseInt(e(446))/6)+-parseInt(e(449))/7+-parseInt(e(476))/8*(parseInt(e(424))/9)+parseInt(e(422))/10)break;t.push(t.shift())}catch(e){t.push(t.shift())}}(),_0x8e67);function _0x2e4d(){const e=_0x166ff3,t=["838453KgExCg","settings/agconnect-services.json",e(468),e(444),e(443),e(453),e(479),e(460),"csConfig",e(441),e(461),e(440),e(445),"898632FCVyzb",e(463),e(421),e(434),"service_component_name",e(432),"readServiceList",e(459),"32AnpJwE",e(477),e(428),e(457),"processCommonNativeModule",e(464),e(481),e(418),e(480),e(433),e(416),e(450),e(451),e(472),e(456),e(442),"defineProperty","checkCocosService",e(425),e(439),"require",e(465),e(436),e(467),"getUserData",e(426),e(454),"128370linMAD",e(437),e(427),"网络异常,您的服务将不会被集成,请检查后重试",e(419),"huaweiServiceIntegrationFailed",e(429),e(452),"onAfterInit",e(458),e(417),"getProjectPath",e(471),"onBeforeBuild","set"];return(_0x2e4d=function(){return t})()}function _0xae4d(e,t){const r=_0xf29e();return(_0xae4d=function(e,t){return e-=416,r[e]})(e,t)}(function(){for(var t=_0xae4d,e=_0x8e67,r=_0x2e4d();;)try{if(609869==-parseInt(e(506))+parseInt(e(544))/2+-parseInt(e(536))/3+parseInt(e(499))/4+parseInt(e(515))/5+-parseInt(e(534))/6+parseInt(e(549))/7*(parseInt(e(507))/8))break;r.push(r[t(438)]())}catch(e){r[t(447)](r.shift())}})(),Object[_0x3e8edc(523)](exports,"__esModule",{value:!0}),exports[_0x3e8edc(526)]=exports[_0x3e8edc(530)]=exports[_0x3e8edc(501)]=exports[_0x166ff3(420)]=exports[_0x3e8edc(547)]=exports[_0x3e8edc(513)]=void 0;const fs_extra_1=require(_0x3e8edc(543)),path_1=require("path"),utils_1=require(_0x3e8edc(492)),common_1=require("./common");function _0xf29e(){const e=["readJson","join","enable","clear","sort","message","test","fs-extra","323082vUXSph","service-sdkhub","getPlatformID","updateConfigInfos","find","client","get","3660156iNtmMI","onAfterCompressSettings","sdkhUbServiceIntegrationSuccess","plugins","readBindGame","isLogin","huaweiServiceIntegrationSuccess","csFile","4tkjjlM","service_component_name","52184OHcWiP","sdkhUbServiceIntegrationFailed","sdkHubConfig","../../utils","2018395oZOTcR","throwError","csConfig","has","pUseType","1534070kFQPtq","csEditor","Building Time","onAfterInit","onBeforeCompressSettings","35887410BxpJJA","onBeforeBuild","315mZVwmo","length","substr","2760426FIMEMp","packages","existsSync","487169JvFOFE","stringify","serviceIntegrationSuccess","cocos-service","builder","5bmacQZ","warn","packageName","shift","onAfterBuild","serviceIntegrationFailed","csLogger","services","csAnalytics","service_id","sdkhub$$","6125094FuQAlG","push","1557861gIuaRu","11265807CxfWKh","csUtil"];return(_0xf29e=function(){return e})()}exports[_0x3e8edc(513)]=!0;let buildCache=new Map;function _0x8e67(e,t){const r=_0x2e4d();return(_0x8e67=function(e,t){return e-=491,r[e]})(e,t)}function compareService(e,t){var r=_0x166ff3,s=_0x3e8edc;return e[r(453)]===t[s(491)]?0:t[s(491)]?-1:1}let processServiceHooks=async(t,e,r)=>{const s=_0x166ff3,i=_0x3e8edc;try{if(!await utils_1[s(418)][i(546)]())return}catch(e){return void utils_1[i(495)][i(529)](i(537))}var o=t[i(509)][i(516)],n=(0,common_1[i(496)])(t);if(void 0!==o&&0!==o[s(442)][i(525)]){i(547)===r&&buildCache[i(533)]();for(const _ of o[i(522)][s(455)](compareService)){if(!(0,fs_extra_1[i(540)])(_[i(502)]))break;var c=(await utils_1[i(494)][i(505)]())[i(500)](e=>e[i(552)]===_[i(552)]),a=(buildCache[s(483)](_[i(503)])||buildCache[i(548)](_[i(503)],utils_1[i(518)][i(527)](_[i(502)])),buildCache[i(528)](_[i(503)]));if(void 0===a)break;try{switch(r){case i(542):a[i(542)]&&await a.onAfterInit(t,e);break;case s(423):a[i(547)]&&await a[i(547)](t,e);break;case i(501):a[i(501)]&&await a[i(501)](t,e);break;case s(467):a[s(467)]&&await a[i(530)](t,e);break;case i(526):a[i(526)]&&await a[s(439)](t,e),c&&processServiceIntegration(n,c,t)}}catch(e){throw c&&processServiceIntegration(n,c,t,(e instanceof Error?e[i(521)]:JSON[s(431)](e))||""),e}}}};async function onBeforeBuild(e,t){var r=_0x166ff3,s=_0x3e8edc;await(0,common_1[s(524)])(e)&&(await(0,common_1[r(462)])(e),await processServiceHooks(e,t,s(547)))}async function onAfterInit(e,t){var r=_0x166ff3,s=_0x3e8edc;await(0,common_1[s(524)])(e)&&await processServiceHooks(e,t,r(420))}async function onBeforeCompressSettings(e,t){var r=_0x3e8edc;await(0,common_1[r(524)])(e)&&await processServiceHooks(e,t,r(501))}async function onAfterCompressSettings(e,t){var r=_0x3e8edc;await(0,common_1.checkCocosService)(e)&&((0,common_1[r(511)])(t),await processServiceHooks(e,t,r(530)))}async function onAfterBuild(e,t){var r=_0x3e8edc;await(0,common_1[r(524)])(e)&&await processServiceHooks(e,t,r(526))}async function processServiceIntegration(e,t,r,s){var i=_0x166ff3,o=_0x3e8edc;let n=(await utils_1[o(514)][o(531)]()).cocos_uid,c=await utils_1[i(482)][i(470)](),a="",_=(0,path_1[o(541)])(utils_1[o(514)][o(545)](),o(550)),f=(/^service-(agc|hms|sdkhub)/[o(510)](t[o(503)])&&(0,fs_extra_1[i(429)])(_)&&(a=utils_1[i(473)][o(519)](_)[o(512)].app_id),"");if(o(493)===t[o(503)]){r=r[o(509)][o(516)][i(478)];if(r&&"{}"!==JSON[i(431)](r))for(var u of r[i(469)])f+=","+u[o(535)]+":"+u[o(517)]}void 0===s?/^service-(agc|hms)/[o(510)](t[i(475)])?utils_1[o(553)][o(520)](n,c,t,e,a,o(538)):o(493)===t[i(475)]?utils_1[i(443)][o(551)](n,c,t,e,a,o(538),o(498)+f[o(532)](1)):utils_1[o(553)][o(504)](n,c,t,e,o(538)):/^service-(agc|hms)/[i(457)](t[i(475)])?utils_1[o(553)][o(539)](n,c,t,e,a,o(538),s):i(460)===t[o(503)]?utils_1[o(553)][o(508)](n,c,t,e,a,o(538),o(498)+f[o(532)](1),s):utils_1[o(553)][o(497)](n,c,t,e,o(538),s)}exports[_0x3e8edc(547)]=onBeforeBuild,exports[_0x3e8edc(542)]=onAfterInit,exports[_0x3e8edc(501)]=onBeforeCompressSettings,exports[_0x3e8edc(530)]=onAfterCompressSettings,exports[_0x3e8edc(526)]=onAfterBuild;
const _0x100a=["onAfterBuild","settings/agconnect-services.json","service_component_name","plugins","sdkhUbServiceIntegrationFailed","require","getPlatformID","csFile","substr","builder","sdkHubConfig","onAfterCompressSettings","length","serviceIntegrationSuccess","csConfig","getProjectPath","client","enable","./common","serviceIntegrationFailed","defineProperty","updateConfigInfos","readJson","fs-extra","csUtil","onAfterInit","existsSync","service-sdkhub","has","services","test","readBindGame","csAnalytics","packages","cocos_uid","checkCocosService","readServiceList","sdkhub$$","onBeforeBuild","message","cocos-service","onBeforeCompressSettings","huaweiServiceIntegrationSuccess","csEditor","throwError","push","get","path","sdkhUbServiceIntegrationSuccess","shift","__esModule","Building Time","app_id"];!function(e,a){!function(a){for(;--a;)e.push(e.shift())}(++a)}(_0x100a,159);const _0x3350=function(e,a){return _0x100a[e-=308]},_0x27a11b=_0x3350,_0x818a=[_0x27a11b(339),_0x27a11b(338),_0x27a11b(358),"service_id",_0x27a11b(343),_0x27a11b(341),_0x27a11b(355),"huaweiServiceIntegrationFailed",_0x27a11b(331),_0x27a11b(347),_0x27a11b(349),_0x27a11b(318),_0x27a11b(330),_0x27a11b(337),_0x27a11b(322),_0x27a11b(328),_0x27a11b(333),_0x27a11b(344),_0x27a11b(312),_0x27a11b(327),_0x27a11b(326),_0x27a11b(317),"onAfterBuild","sort","csAnalytics",_0x27a11b(316),_0x27a11b(342),_0x27a11b(319),"service_component_name",_0x27a11b(332),"pUseType",_0x27a11b(314),_0x27a11b(315),"packageName",_0x27a11b(351),"../../utils","getUserData",_0x27a11b(335),"set",_0x27a11b(354),"join","Building Time","find",_0x27a11b(325),"existsSync","stringify","clear",_0x27a11b(356),"processCommonNativeModule",_0x27a11b(352),_0x27a11b(345),_0x27a11b(329),_0x27a11b(324),"onBeforeBuild",_0x27a11b(313),_0x27a11b(323),_0x27a11b(348)];!function(e,a){!function(a){const t=_0x3350;for(;--a;)e[t(353)](e[t(357)]())}(++a)}(_0x818a,462);const _0x32b3=function(e,a){return _0x818a[e-=385]},_0xe76a14=_0x32b3;Object[_0xe76a14(394)](exports,_0xe76a14(438),{value:!0}),exports[_0xe76a14(401)]=exports[_0x27a11b(319)]=exports[_0xe76a14(389)]=exports[_0xe76a14(395)]=exports[_0x27a11b(346)]=exports[_0x27a11b(352)]=void 0;const fs_extra_1=require(_0xe76a14(387)),path_1=require(_0xe76a14(385)),utils_1=require(_0xe76a14(414)),common_1=require(_0xe76a14(399));exports[_0xe76a14(428)]=!0;let buildCache=new Map;function compareService(e,a){const t=_0xe76a14;return e.enable===a[t(422)]?0:a[t(422)]?-1:1}let processServiceHooks=async(e,a,t)=>{const s=_0x27a11b,o=_0xe76a14;let i=e.packages[o(435)],n=common_1[o(410)](e);if(void 0===i||0===i[o(392)][s(320)])return;o(432)===t&&buildCache[o(425)]();const r=i[s(337)][o(402)](compareService);for(const i of r){if(!fs_extra_1[s(334)](i[o(400)]))break;let r=(await utils_1[o(393)][o(396)]())[o(421)](e=>e[o(439)]===i[o(439)]);buildCache[s(336)](i[o(407)])||buildCache[o(417)](i[o(407)],utils_1[o(408)][o(433)](i[o(400)]));let c=buildCache[o(418)](i[o(407)]);if(void 0===c)break;try{switch(t){case s(333):c[o(395)]&&await c[o(395)](e,a);break;case o(432):c[s(346)]&&await c[s(346)](e,a);break;case o(389):c[s(349)]&&await c[s(349)](e,a);break;case o(406):c[s(319)]&&await c[o(406)](e,a);break;case o(401):c[o(401)]&&await c.onAfterBuild(e,a),r&&processServiceIntegration(n,r,e)}}catch(a){throw r&&processServiceIntegration(n,r,e,(a instanceof Error?a[o(388)]:JSON[o(424)](a))||""),a}}};async function onBeforeBuild(e,a){const t=_0x27a11b,s=_0xe76a14;await common_1[s(440)](e)&&(await common_1[s(430)](e),await processServiceHooks(e,a,t(346)))}async function onAfterInit(e,a){const t=_0x27a11b,s=_0xe76a14;await common_1[s(440)](e)&&await processServiceHooks(e,a,t(333))}async function onBeforeCompressSettings(e,a){const t=_0x27a11b,s=_0xe76a14;await common_1[t(343)](e)&&await processServiceHooks(e,a,s(389))}async function onAfterCompressSettings(e,a){const t=_0xe76a14;await common_1[t(440)](e)&&(common_1[t(427)](a),await processServiceHooks(e,a,t(406)))}async function onAfterBuild(e,a){const t=_0x27a11b,s=_0xe76a14;await common_1[s(440)](e)&&await processServiceHooks(e,a,t(308))}async function processServiceIntegration(e,a,t,s){const o=_0x27a11b,i=_0xe76a14;let n=(await utils_1[i(413)][i(415)]())[i(405)],r=await utils_1[i(393)][i(436)](),c="",_=path_1[i(419)](utils_1[i(413)][i(434)](),o(309));/^service-(agc|hms|sdkhub)/[i(437)](a[i(407)])&&fs_extra_1[i(423)](_)&&(c=utils_1[i(411)][i(391)](_)[i(431)][o(360)]);let x="";if(i(416)===a[i(407)]){let e=t[i(441)][i(435)][i(390)];if(e&&"{}"!==JSON.stringify(e))for(let a of e[o(311)])x+=","+a[i(412)]+":"+a[i(409)]}void 0===s?/^service-(agc|hms)/[o(338)](a[i(407)])?utils_1[i(403)][o(350)](n,r,a,e,c,i(420)):i(416)===a[o(310)]?utils_1[i(403)][i(426)](n,r,a,e,c,i(420),i(429)+x[i(404)](1)):utils_1[o(340)][o(321)](n,r,a,e,o(359)):/^service-(agc|hms)/[o(338)](a[i(407)])?utils_1.csAnalytics[i(386)](n,r,a,e,c,o(359),s):"service-sdkhub"===a[i(407)]?utils_1[i(403)][i(397)](n,r,a,e,c,i(420),i(429)+x[i(404)](1),s):utils_1[i(403)][i(398)](n,r,a,e,o(359),s)}exports.onBeforeBuild=onBeforeBuild,exports[_0x27a11b(333)]=onAfterInit,exports[_0xe76a14(389)]=onBeforeCompressSettings,exports[_0xe76a14(406)]=onAfterCompressSettings,exports[_0xe76a14(401)]=onAfterBuild;
"use strict";const _0x54c915=_0x52ab,_0x1c1f15=(!function(){for(var t=_0x52ab,e=_0x465e();;)try{if(280778==-parseInt(t(290))*(parseInt(t(237))/2)+parseInt(t(227))/3+parseInt(t(252))/4+-parseInt(t(276))/5*(-parseInt(t(275))/6)+parseInt(t(259))/7*(parseInt(t(247))/8)+-parseInt(t(238))/9*(-parseInt(t(289))/10)+-parseInt(t(254))/11*(parseInt(t(232))/12))break;e.push(e.shift())}catch(t){e.push(e.shift())}}(),_0x11b9);function _0x11b9(t,e){const r=_0x24c0();return(_0x11b9=function(t,e){return t-=437,r[t]})(t,e)}function _0x24c0(){const t=_0x52ab,e=[t(248),t(241),t(255),t(230),t(256),t(287),t(260),t(242),t(292),"1485843Ebcdbh","progress",t(272),t(269),"registerI18n",t(233),t(291),t(249),t(278),t(234),t(281),t(271),t(231),t(288),"upgrade","./http",t(268),t(228),t(279),t(243),"sendMsg","unlinkSync",t(253),t(266),"existsSync",t(265),t(274),t(235),t(261),t(244),t(293),"default","readJson",t(258),t(273),t(263),t(286),t(284),"mkdirs",t(264),"./util",t(251)];return(_0x24c0=function(){return e})()}!function(){for(var e=_0x52ab,t=_0x11b9,r=_0x24c0();;)try{if(817392==-parseInt(t(474))*(parseInt(t(466))/2)+-parseInt(t(482))/3+-parseInt(t(465))/4*(parseInt(t(456))/5)+parseInt(t(477))/6*(-parseInt(t(459))/7)+parseInt(t(440))/8+-parseInt(t(480))/9+parseInt(t(481))/10*(parseInt(t(467))/11))break;r[e(277)](r[e(267)]())}catch(t){r[e(277)](r[e(267)]())}}();var __importDefault=this&&this[_0x54c915(280)]||function(t){return t&&t[_0x11b9(441)]?t:{default:t}};function _0x465e(){const t=["i18n/en.js","shift","getServicePluginInfo","version","status","main","builder","548ImCulZ","join","6ihBadl","2764345PHplBp","push","open-popup","replace","__importDefault","__esModule","complete","fs-extra","./editor","package.json","57246937YorbLG","match","unzip","10wIZlzY","14FGZacP","popup","10SsyEFx","download","942009IyeXpu","path","default","./file","basename","1080360twDyOf","require","5475096sVmCqH","../builtin","then","70978bQebZD","1331847bywCFb","close-popup","getLang","2mCudRP","3458079KiDQDX","i18n/zh.js","defineProperty","progress","catch","9160vRiIFT","service-","name","downloading","contents","1771216mCJvJp",".zip","121lppsjc","plugin","1568922EEWfFV","author","fail","1897JudBGM","installed","35SwwWYd","existsSync","1369232WbVREx","getServiceHomePath","55295NStMyO"];return(_0x465e=function(){return t})()}function _0x52ab(t,e){const r=_0x465e();return(_0x52ab=function(t,e){return t-=227,r[t]})(t,e)}Object[_0x1c1f15(460)](exports,_0x1c1f15(441),{value:!0});const fs_extra_1=require(_0x54c915(283)),path_1=require("path"),file_1=__importDefault(require(_0x1c1f15(476))),editor_1=__importDefault(require(_0x1c1f15(468))),util_1=__importDefault(require(_0x1c1f15(471))),http_1=__importDefault(require(_0x1c1f15(446)));exports[_0x1c1f15(462)]={pluginExists:function(t){var e=_0x54c915,r=_0x1c1f15;return(0,fs_extra_1[e(262)])((0,path_1[r(457)])(editor_1[r(462)][e(264)](),t[r(449)](r(473),"")))||(0,fs_extra_1[e(262)])((0,path_1[r(457)])(r(458),t))},getServicePluginInfo:function(e){var r=_0x54c915,n=_0x1c1f15;let _=(0,path_1[n(457)])(editor_1[n(462)][n(470)](),e[n(449)](n(473),""));(0,fs_extra_1[n(455)])(_)||(_=(0,path_1[n(457)])(__dirname,r(235),e));e=(0,path_1[n(457)])(_,r(285));if((0,fs_extra_1[n(455)])(e)){var i,e=file_1.default[n(463)](e);if(e[n(438)]===n(473)+(0,path_1[n(443)])(_)||e[n(438)]===(0,path_1[n(443)])(_)){let t="";return e[n(445)]&&(0,fs_extra_1[n(455)])((0,path_1[n(457)])(_,e.upgrade))&&(i=util_1[r(229)][n(487)](_,e[n(445)]),t="zh"===editor_1[n(462)][r(240)]()?i.zh:i.en),{path:_,name:e[r(249)],version:e[n(485)],author:e[r(257)],contents:e[n(472)],builder:e[n(484)],upgrade:t}}}},installPlugin:function(t,r,s){const e=_0x54c915,n=_0x1c1f15;let o=editor_1[n(462)][n(470)](),_=(0,path_1[n(457)])(editor_1[e(229)].getCreatorHomePath(),e(293)),p=((0,fs_extra_1[n(455)])(o)||file_1[n(462)][n(469)](o),(0,fs_extra_1[e(262)])(_)||file_1[n(462)][n(469)](_),(0,path_1[n(457)])(_,t+n(453))),u=0;return new Promise((_,e)=>{const i=n;let a=(t=i(464))=>{s&&s(t,!0),e(t)};if(!r[i(478)](/^(http|https):\/\/[^\s]*.zip$/))return a();http_1[i(462)][i(461)](r,p,(t,e)=>{const r=_0x52ab,n=i;if(t||null===e)return a();t=editor_1[n(462)].tr(r(250))+" "+e[n(483)]+"%";if(u!==e[r(245)]&&(u=e.progress,s)&&s(t,!1),r(282)===e[r(270)]){if(100!==e[n(483)])return a();file_1[r(229)][n(444)](p,o)[r(236)](()=>{var t=n;(0,fs_extra_1.existsSync)(p)&&(0,fs_extra_1[t(452)])(p),s&&s(editor_1[t(462)].tr(t(479)),!0),_(!0)})[r(246)](()=>a())}})})},openPopup:function(t,e){var r=_0x54c915,n=_0x1c1f15,_=this[n(447)](t);void 0!==_&&null!=(_=null==(_=_[n(472)])?void 0:_[n(437)])&&_[n(442)]&&editor_1[r(229)][n(451)](editor_1[n(462)][n(475)],n(439),t,e)},closePopup:function(t){var e=_0x54c915,r=_0x1c1f15,n=this[e(268)](t);void 0!==n&&null!=(n=null==(n=n[r(472)])?void 0:n[r(437)])&&n[r(442)]&&editor_1[e(229)][r(451)](editor_1[r(462)][r(475)],e(239),t)},registerI18n:function(t){var e=_0x54c915,r=_0x1c1f15,n=this[r(447)](t);void 0!==n&&((0,fs_extra_1[r(455)])((0,path_1[r(457)])(n[r(448)],r(450)))&&editor_1[r(462)][r(486)]("zh",t,util_1[r(462)][r(487)](n[r(448)],r(450))),(0,fs_extra_1[r(455)])((0,path_1[r(457)])(n[r(448)],r(454))))&&editor_1[r(462)][r(486)]("en",t,util_1[r(462)][r(487)](n[e(228)],e(266)))}};
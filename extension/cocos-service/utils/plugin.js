"use strict";const _0x1bcce5=_0x58ca;function _0x58ca(t,e){const r=_0x4f54();return(_0x58ca=function(t,e){return r[t-=177]})(t,e)}!function(t,e){const r=_0x58ca,n=_0x4f54();for(;;)try{if(144359===-parseInt(r(234))/1+parseInt(r(182))/2*(parseInt(r(197))/3)+parseInt(r(226))/4+-parseInt(r(236))/5+-parseInt(r(231))/6*(parseInt(r(220))/7)+parseInt(r(191))/8+parseInt(r(222))/9*(parseInt(r(216))/10))break;n.push(n.shift())}catch(t){n.push(n.shift())}}();const _0x3f5bda=_0x5a79;function _0x4f54(){const t=["__esModule","upgrade","278698BsdauG","then","817205DIvJjs","download","406170AqHHlZ","sendMsg","./file","complete","name","fs-extra","existsSync","status","1275350dTnnqI","10DWJWcR","getLang","defineProperty","default","46arGcwO","contents","unlinkSync","mkdirs","installed","15348630jULVrD","getCreatorHomePath","progress","push","1359320xKDUUp","710433ypNEDx","35sAlSWZ","path","__importDefault","4578762mpKimy","1623gnJmIO","./util","close-popup","open-popup","basename","require","match","../builtin","shift","getServiceHomePath","join","replace","i18n/en.js","getServicePluginInfo","i18n/zh.js","unzip","package.json",".zip","service-","20ZKFNQR","catch","version","registerI18n","63rpdfzG","1359932gKXeWy","2584593QKWTUf","popup","downloading","author","15492PmPGGM","fail","main","plugin","11fDzwWG","116058tcYoQV"];return(_0x4f54=function(){return t})()}function _0x5a79(t,e){const r=_0x1a90();return(_0x5a79=function(t,e){return r[t-=471]})(t,e)}!function(t,e){const r=_0x58ca,n=_0x5a79,a=_0x1a90();for(;;)try{if(422113===parseInt(n(488))/1*(parseInt(n(506))/2)+-parseInt(n(516))/3+-parseInt(n(511))/4*(-parseInt(n(475))/5)+parseInt(n(492))/6+parseInt(n(505))/7*(parseInt(n(510))/8)+-parseInt(n(512))/9+-parseInt(n(479))/10*(parseInt(n(482))/11))break;a[r(190)](a[r(205)]())}catch(t){a[r(190)](a.shift())}}();var __importDefault=this&&this[_0x3f5bda(497)]||function(t){return t&&t[_0x3f5bda(508)]?t:{default:t}};function _0x1a90(){const t=_0x58ca,e=[t(177),t(240),t(232),t(211),"144856mzrzvz",t(221),t(192),t(202),t(214),t(244),t(238),t(186),"./http",t(204),t(198),t(215),t(183),"join","builder",t(203),t(229),t(213),t(201),"default",t(212),t(178),t(210),t(206),t(199),t(187),t(242),t(219),t(230),t(243),t(235),t(188),t(225),t(185),"1HtodWY",t(189),t(194),t(241),t(196),t(239),t(233),t(179),t(217),t(195),"readJson",t(223),t(184),"./editor",t(237),t(209),t(208),t(193)];return(_0x1a90=function(){return e})()}Object[_0x1bcce5(180)](exports,_0x3f5bda(508),{value:!0});const fs_extra_1=require(_0x3f5bda(483)),path_1=require(_0x3f5bda(490)),file_1=__importDefault(require(_0x3f5bda(507))),editor_1=__importDefault(require(_0x3f5bda(501))),util_1=__importDefault(require(_0x3f5bda(520))),http_1=__importDefault(require(_0x3f5bda(518)));exports[_0x3f5bda(473)]={pluginExists:function(t){const e=_0x1bcce5,r=_0x3f5bda;return(0,fs_extra_1[r(515)])((0,path_1[r(523)])(editor_1[r(473)][r(477)](),t[r(504)](r(521),"")))||(0,fs_extra_1[r(515)])((0,path_1[e(207)])("../builtin",t))},getServicePluginInfo:function(t){const e=_0x1bcce5,r=_0x3f5bda;let n=(0,path_1[r(523)])(editor_1[r(473)][r(477)](),t[e(208)](r(521),""));(0,fs_extra_1[r(515)])(n)||(n=(0,path_1[r(523)])(__dirname,r(519),t));let a=(0,path_1[r(523)])(n,r(471));if(!(0,fs_extra_1[r(515)])(a))return;let i=file_1.default[r(498)](a);if(i[r(480)]!==r(521)+(0,path_1[r(472)])(n)&&i[r(480)]!==(0,path_1[r(472)])(n))return;let _="";if(i[e(233)]&&(0,fs_extra_1[e(244)])((0,path_1[r(523)])(n,i.upgrade))){let t=util_1[r(473)][r(513)](n,i[r(494)]);_="zh"===editor_1[r(473)][r(495)]()?t.zh:t.en}return{path:n,name:i[r(480)],version:i[e(218)],author:i[r(486)],contents:i[r(522)],builder:i[r(524)],upgrade:_}},installPlugin:function(t,e,r){const n=_0x1bcce5,a=_0x3f5bda;let i=editor_1[a(473)][a(477)](),_=(0,path_1[n(207)])(editor_1[a(473)][a(485)](),a(502));!(0,fs_extra_1[a(515)])(i)&&file_1[a(473)][a(487)](i),!(0,fs_extra_1[a(515)])(_)&&file_1[a(473)][n(185)](_);let o=(0,path_1[a(523)])(_,t+a(514)),s=0;return new Promise((t,_)=>{const u=n,f=a;let p=(t=u(227))=>{r&&r(t,!0),_(t)};if(!e[f(525)](/^(http|https):\/\/[^\s]*.zip$/))return p();http_1[f(473)][f(502)](e,o,(e,n)=>{const a=u,_=f;if(e||null===n)return p();let c=editor_1[_(473)].tr(a(224))+" "+n[_(489)]+"%";if(s!==n[_(489)]&&(s=n[a(189)],r&&r(c,!1)),_(491)===n[a(245)]){if(100!==n[_(489)])return p();file_1[_(473)][_(474)](o,i)[_(484)](()=>{const e=_;(0,fs_extra_1[e(515)])(o)&&(0,fs_extra_1[e(500)])(o),r&&r(editor_1[e(473)].tr(e(517)),!0),t(!0)})[_(496)](()=>p())}})})},openPopup:function(t,e){const r=_0x1bcce5,n=_0x3f5bda;var a,i;let _=this[n(476)](t);void 0!==_&&(null===(i=null===(a=_.contents)||void 0===a?void 0:a[n(499)])||void 0===i?void 0:i[r(228)])&&editor_1[n(473)][n(493)](editor_1[r(181)][n(526)],r(200),t,e)},closePopup:function(t){const e=_0x1bcce5,r=_0x3f5bda;var n,a;let i=this[r(476)](t);void 0!==i&&(null===(a=null===(n=i[r(522)])||void 0===n?void 0:n[r(499)])||void 0===a?void 0:a[e(228)])&&editor_1[r(473)][r(493)](editor_1[r(473)][r(526)],r(478),t)},registerI18n:function(t){const e=_0x1bcce5,r=_0x3f5bda;let n=this[e(210)](t);void 0!==n&&((0,fs_extra_1[r(515)])((0,path_1[r(523)])(n[r(490)],r(509)))&&editor_1[r(473)][r(481)]("zh",t,util_1[r(473)][r(513)](n[r(490)],r(509))),(0,fs_extra_1[r(515)])((0,path_1[e(207)])(n[r(490)],r(503)))&&editor_1[r(473)][r(481)]("en",t,util_1[e(181)][r(513)](n[e(194)],r(503))))}};
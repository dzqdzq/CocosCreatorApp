"use strict";const _0x29d051=_0x175a;function _0x175a(t,e){const r=_0x1387();return(_0x175a=function(t,e){return t-=446,r[t]})(t,e)}!function(){for(var t=_0x175a,e=_0x1387();;)try{if(220951==+parseInt(t(462))*(parseInt(t(449))/2)+-parseInt(t(491))/3*(parseInt(t(460))/4)+-parseInt(t(492))/5*(parseInt(t(481))/6)+parseInt(t(475))/7*(-parseInt(t(450))/8)+parseInt(t(480))/9*(-parseInt(t(476))/10)+-parseInt(t(479))/11*(parseInt(t(461))/12)+parseInt(t(486))/13)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const _0x560330=_0x3fed;!function(){for(var e=_0x175a,t=_0x3fed,r=_0x19d5();;)try{if(671945==+parseInt(t(421))+-parseInt(t(439))/2+parseInt(t(462))/3*(-parseInt(t(458))/4)+parseInt(t(455))/5+parseInt(t(466))/6+parseInt(t(437))/7*(parseInt(t(445))/8)+parseInt(t(436))/9*(parseInt(t(417))/10))break;r[e(456)](r.shift())}catch(t){r[e(456)](r[e(447)]())}}();var __importDefault=this&&this[_0x560330(440)]||function(t){var e=_0x560330;return t&&t[e(463)]?t:{default:t}};function _0x19d5(){const t=_0x175a,e=[t(501),"downloading",t(500),t(496),t(468),"catch",t(497),t(494),t(473),t(454),"5877iQiiPz",t(446),"author","1552938FUVNND",t(507),"name",t(493),t(448),t(471),"440NDqhLW",t(483),t(508),t(495),t(459),t(458),t(485),t(455),t(484),"installed",t(482),t(509),t(451),t(498),t(487),t(506),"package.json",t(474),t(453),t(463),"fail",t(465),t(503),t(499),t(467),"i18n/en.js",t(490),t(502),t(504),t(457),t(469),t(488),t(452),t(478),t(466),"plugin","./editor",t(472),"then"];return(_0x19d5=function(){return e})()}Object[_0x560330(419)](exports,_0x29d051(453),{value:!0});const fs_extra_1=require(_0x29d051(489)),path_1=require(_0x560330(448)),file_1=__importDefault(require(_0x560330(468))),editor_1=__importDefault(require(_0x560330(423))),util_1=__importDefault(require(_0x560330(442))),http_1=__importDefault(require(_0x560330(469)));function _0x1387(){const t=["upgrade","basename","70427OAoozC","shift","getServiceHomePath","22946wNLjOL","8PBDxnF","contents","defineProperty","__esModule","mkdirs","registerI18n","push","require","close-popup","i18n/zh.js","348eWlBfG","212448QhZUJk","5OYTvPM","../builtin","i18n/en.js","4222776ltvBkK","705106kPaXPx","./http","join","2740wZitjO","match","replace","getServicePluginInfo","getLang","28257ZovlOA","2504026XKSXKr","1030jOoSjE","plugin","service-","187fpdcAd","32931qDPrci","24126xOudLK","2470145vbbXUk","sendMsg","complete","status","17999683ydEFJf","default","unlinkSync","fs-extra","readJson","987xCrrRL","195WMZlTV","./util","version","path",".zip","builder","504vXDHDt","./file","unzip","download","open-popup","existsSync","progress","popup","main","__importDefault"];return(_0x1387=function(){return t})()}function _0x3fed(t,e){const r=_0x19d5();return(_0x3fed=function(t,e){return t-=415,r[t]})(t,e)}exports[_0x560330(459)]={pluginExists:function(t){var e=_0x29d051,r=_0x560330;return(0,fs_extra_1.existsSync)((0,path_1[r(430)])(editor_1[e(487)][r(443)](),t[r(444)](r(420),"")))||(0,fs_extra_1[r(467)])((0,path_1[r(430)])(r(464),t))},getServicePluginInfo:function(e){var r=_0x29d051,n=_0x560330;let i=(0,path_1[n(430)])(editor_1[r(487)][n(443)](),e[r(471)](n(420),""));(0,fs_extra_1[n(467)])(i)||(i=(0,path_1[n(430)])(__dirname,n(464),e));e=(0,path_1[n(430)])(i,n(461));if((0,fs_extra_1[n(467)])(e)){e=file_1[n(459)][n(471)](e);if(e[n(441)]===n(420)+(0,path_1[n(456)])(i)||e[n(441)]===(0,path_1[n(456)])(i)){let t="";return e.upgrade&&(0,fs_extra_1[n(467)])((0,path_1[n(430)])(i,e[r(508)]))&&(r=util_1[n(459)].require(i,e[n(447)]),t="zh"===editor_1[n(459)][n(434)]()?r.zh:r.en),{path:i,name:e[n(441)],version:e[n(433)],author:e[n(438)],contents:e[n(457)],builder:e[n(432)],upgrade:t}}}},installPlugin:function(t,r,o){const n=_0x29d051,u=_0x560330;let p=editor_1[u(459)][u(443)](),e=(0,path_1[n(468)])(editor_1[u(459)].getCreatorHomePath(),n(501)),f=((0,fs_extra_1.existsSync)(p)||file_1[u(459)][n(454)](p),(0,fs_extra_1[u(467)])(e)||file_1.default[u(435)](e),(0,path_1[n(468)])(e,t+u(429))),x=0;return new Promise((i,e)=>{const _=n,a=u;let s=(t=a(465))=>{o&&o(t,!0),e(t)};if(!r[_(470)](/^(http|https):\/\/[^\s]*.zip$/))return s();http_1[a(459)][a(426)](r,f,(t,e)=>{const r=_,n=a;if(t||null===e)return s();t=editor_1[n(459)].tr(n(427))+" "+e[n(415)]+"%";if(x!==e[r(504)]&&(x=e[r(504)],o)&&o(t,!1),n(453)===e[n(451)]){if(100!==e.progress)return s();file_1[r(487)][n(428)](f,p)[n(425)](()=>{var t=n;(0,fs_extra_1[t(467)])(f)&&(0,fs_extra_1[t(418)])(f),o&&o(editor_1.default.tr(t(454)),!0),i(!0)})[n(431)](()=>s())}})})},openPopup:function(t,e){var r=_0x29d051,n=_0x560330,i=this[n(424)](t);void 0!==i&&null!=(i=null==(i=i[n(457)])?void 0:i[r(505)])&&i[n(460)]&&editor_1[n(459)][n(446)](editor_1[r(487)][r(477)],n(472),t,e)},closePopup:function(t){var e=_0x29d051,r=_0x560330,n=this[r(424)](t);void 0!==n&&null!=(n=null==(n=n[r(457)])?void 0:n[e(505)])&&n[r(460)]&&editor_1[r(459)].sendMsg(editor_1[r(459)][r(422)],r(450),t)},registerI18n:function(t){var e=_0x29d051,r=_0x560330,n=this[r(424)](t);void 0!==n&&((0,fs_extra_1[r(467)])((0,path_1[r(430)])(n[r(448)],r(449)))&&editor_1[e(487)][r(452)]("zh",t,util_1[r(459)][r(416)](n[r(448)],r(449))),(0,fs_extra_1[r(467)])((0,path_1[r(430)])(n[r(448)],e(464))))&&editor_1[r(459)][r(452)]("en",t,util_1[e(487)][e(457)](n[r(448)],r(470)))}};
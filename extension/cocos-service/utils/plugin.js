const _0x3d00=["path","fial","getCreatorHomePath","./editor","downloading","version","i18n/en.js","__esModule","match","catch","main","unlinkSync","progress","close-popup","complete","registerI18n","download","fs-extra","../builtin","basename","donwload","contents","package.json","then","shift","i18n/zh.js","plugin","service-","builder","readJson","getServicePluginInfo","existsSync","name",".zip","installed","__importDefault","unzip","join","popup","open-popup","replace","default","getServiceHomePath"];!function(t,e){!function(e){for(;--e;)t.push(t.shift())}(++e)}(_0x3d00,355);const _0x2eed=function(t,e){return _0x3d00[t-=241]},_0x3f04b6=_0x2eed,_0x1414=[_0x3f04b6(261),"upgrade","./file","./util",_0x3f04b6(283),_0x3f04b6(273),_0x3f04b6(246),_0x3f04b6(258),"require","getLang",_0x3f04b6(263),_0x3f04b6(272),_0x3f04b6(270),_0x3f04b6(264),_0x3f04b6(269),_0x3f04b6(278),_0x3f04b6(282),"author",_0x3f04b6(241),_0x3f04b6(267),_0x3f04b6(276),_0x3f04b6(242),_0x3f04b6(245),_0x3f04b6(280),_0x3f04b6(260),_0x3f04b6(256),_0x3f04b6(274),_0x3f04b6(281),"defineProperty","status",_0x3f04b6(268),_0x3f04b6(243),_0x3f04b6(279),_0x3f04b6(244),_0x3f04b6(251),"sendMsg","default",_0x3f04b6(255),"mkdirs",_0x3f04b6(249),"name",_0x3f04b6(265),_0x3f04b6(253),_0x3f04b6(266),_0x3f04b6(248),_0x3f04b6(252),_0x3f04b6(259),_0x3f04b6(257),_0x3f04b6(277)];!function(t,e){!function(e){const _=_0x2eed;for(;--e;)t.push(t[_(254)]())}(++e)}(_0x1414,190);const _0x3de0=function(t,e){return _0x1414[t-=404]},_0x51c499=_0x3de0;var __importDefault=this&&this[_0x51c499(451)]||function(t){return t&&t[_0x3f04b6(280)]?t:{default:t}};Object[_0x51c499(438)](exports,_0x51c499(433),{value:!0});const fs_extra_1=require(_0x3f04b6(247)),path_1=require(_0x51c499(415)),file_1=__importDefault(require(_0x51c499(412))),editor_1=__importDefault(require(_0x51c499(430))),util_1=__importDefault(require(_0x51c499(413))),http_1=__importDefault(require("./http"));exports[_0x3f04b6(271)]={pluginExists:function(t){const e=_0x3f04b6,_=_0x51c499;return fs_extra_1[_(410)](path_1[_(429)](editor_1[_(446)][_(421)](),t.replace(_(408),"")))||fs_extra_1[e(261)](path_1[_(429)](_(405),t))},getServicePluginInfo:function(t){const e=_0x3f04b6,_=_0x51c499;let i=path_1[e(267)](editor_1[e(271)][e(272)](),t[_(422)](e(257),""));fs_extra_1[_(410)](i)||(i=path_1[_(429)](__dirname,_(405),t));let r=path_1[_(429)](i,_(406));if(!fs_extra_1[_(410)](r))return;let f=file_1.default[_(407)](r);if(f[_(450)]!==_(408)+path_1[_(449)](i)&&f[_(450)]!==path_1[_(449)](i))return;let n="";if(f[_(411)]&&fs_extra_1.existsSync(path_1[_(429)](i,f.upgrade))){let t=util_1[_(446)][_(418)](i,f[_(411)]);n="zh"===editor_1[_(446)][_(419)]()?t.zh:t.en}return{path:i,name:f[e(262)],version:f[_(425)],author:f[_(427)],contents:f[_(444)],builder:f[_(417)],upgrade:n}},installPlugin:function(t,e,_){const i=_0x3f04b6,r=_0x51c499;let f=editor_1[r(446)][r(421)](),n=path_1[i(267)](editor_1[r(446)][i(275)](),i(250));!fs_extra_1[r(410)](f)&&file_1[r(446)][r(448)](f),!fs_extra_1[r(410)](n)&&file_1[i(271)][r(448)](n);let o=path_1[r(429)](n,t+r(420)),x=0;return new Promise((t,i)=>{const n=r;let u=(t=n(436))=>{i(t),_&&_(t,!0)};if(!e[n(437)](/^(http|https):\/\/[^\s]*.zip$/))return u();http_1[n(446)][n(416)](e,o,(e,i)=>{const r=_0x2eed,a=n;if(e||null===i)return u();let l=editor_1.default.tr(a(409))+" "+i[a(431)]+"%";if(x!==i[r(242)]&&(x=i[a(431)],_&&_(l,!1)),a(443)===i[a(439)]){if(100!==i[a(431)])return u();file_1.default[a(404)](o,f)[a(452)](()=>{const e=a;fs_extra_1[e(410)](o)&&fs_extra_1[e(428)](o),t(!0),_&&_(editor_1.default.tr(e(423)),!0)})[a(426)](()=>u())}})})},openPopup:function(t,e){const _=_0x3f04b6,i=_0x51c499;var r,f;let n=this[i(434)](t);void 0!==n&&(null===(f=null===(r=n[i(444)])||void 0===r?void 0:r[_(268)])||void 0===f?void 0:f[i(414)])&&editor_1[i(446)][i(445)](editor_1.default[i(435)],i(424),t,e)},closePopup:function(t){const e=_0x51c499;var _,i;let r=this[e(434)](t);void 0!==r&&(null===(i=null===(_=r[e(444)])||void 0===_?void 0:_[e(440)])||void 0===i?void 0:i[e(414)])&&editor_1[e(446)][e(445)](editor_1[e(446)][e(435)],e(441),t)},registerI18n:function(t){const e=_0x3f04b6,_=_0x51c499;let i=this[_(434)](t);void 0!==i&&(fs_extra_1[e(261)](path_1[e(267)](i[e(273)],_(447)))&&editor_1[e(271)][_(432)]("zh",t,util_1[_(446)][_(418)](i[_(415)],e(255))),fs_extra_1[_(410)](path_1[_(429)](i[_(415)],_(442)))&&editor_1[e(271)][_(432)]("en",t,util_1[_(446)][_(418)](i[_(415)],e(279))))}};
"use strict";const _0xffe8c4=_0x2891;function _0x55c7(){const t=_0x2891,e=[t(266),t(230),t(241),t(239),"join","fs-extra",t(244),t(250),"plugin",t(249),t(268),"__importDefault","./http","i18n/en.js","../builtin","1814601ZimcsF",t(254),t(285),t(246),t(252),t(253),t(231),t(227),t(265),t(260),t(236),"download","upgrade","service-",t(229),t(284),t(256),"default","downloading","mkdirs","installed",t(248),t(232),t(262),"author",t(273),t(270),t(276),t(267),t(247),"version",t(269),t(235),t(258),t(261)];return(_0x55c7=function(){return e})()}!function(t,e){const n=_0x2891,r=_0x390c();for(;;)try{if(180441===-parseInt(n(240))/1*(parseInt(n(279))/2)+-parseInt(n(263))/3*(-parseInt(n(281))/4)+-parseInt(n(280))/5*(parseInt(n(274))/6)+-parseInt(n(238))/7+-parseInt(n(264))/8*(-parseInt(n(272))/9)+parseInt(n(277))/10*(-parseInt(n(275))/11)+parseInt(n(242))/12)break;r.push(r.shift())}catch(t){r.push(r.shift())}}();const _0x16598c=_0x5a06;function _0x5a06(t,e){const n=_0x55c7();return(_0x5a06=function(t,e){return n[t-=105]})(t,e)}!function(t,e){const n=_0x2891,r=_0x5a06,i=_0x55c7();for(;;)try{if(875268===-parseInt(r(153))/1+-parseInt(r(143))/2+parseInt(r(139))/3+parseInt(r(122))/4+-parseInt(r(124))/5+parseInt(r(149))/6*(parseInt(r(126))/7)+-parseInt(r(121))/8*(-parseInt(r(123))/9))break;i[n(243)](i.shift())}catch(t){i[n(243)](i[n(283)]())}}();var __importDefault=this&&this[_0x16598c(135)]||function(t){return t&&t.__esModule?t:{default:t}};function _0x390c(){const t=["i18n/en.js","2202284RqmEJJ","sendMsg","34iBeCze","7blvsVt","11052240uMvwiC","push","name","unlinkSync",".zip","./util","defineProperty","readJson","require","join","1859810PXxnes","fail","catch","replace","i18n/zh.js","upgrade","5325692EUANag","default","open-popup","4491xcyKCS","getServiceHomePath","45585yNbotR","4848HcrVjH","./file","7084960AjndFz","registerI18n","unzip","basename","main","status","2781tnAnWE","builder","78XxRvYZ","21417YwRxRR","progress","1210KpjOpm","./editor","4570cYUcUL","138740FnYNFg","16OBeUjq","getLang","shift","path","then","__esModule","popup","match","826589DWKcrb","getServicePluginInfo","existsSync","contents","package.json","service-","32352aKRRQo","567048bJbziu"];return(_0x390c=function(){return t})()}function _0x2891(t,e){const n=_0x390c();return(_0x2891=function(t,e){return n[t-=227]})(t,e)}Object[_0x16598c(110)](exports,_0xffe8c4(286),{value:!0});const fs_extra_1=require(_0x16598c(129)),path_1=require(_0x16598c(154)),file_1=__importDefault(require(_0x16598c(147))),editor_1=__importDefault(require(_0xffe8c4(278))),util_1=__importDefault(require(_0x16598c(118))),http_1=__importDefault(require(_0x16598c(136)));exports[_0x16598c(106)]={pluginExists:function(t){const e=_0xffe8c4,n=_0x16598c;return(0,fs_extra_1[e(231)])((0,path_1[e(251)])(editor_1[n(106)][e(262)](),t[e(255)](e(234),"")))||(0,fs_extra_1[e(231)])((0,path_1[e(251)])(n(138),t))},getServicePluginInfo:function(t){const e=_0xffe8c4,n=_0x16598c;let r=(0,path_1[n(128)])(editor_1[n(106)][e(262)](),t[e(255)](n(152),""));(0,fs_extra_1[n(145)])(r)||(r=(0,path_1[n(128)])(__dirname,n(138),t));let i=(0,path_1[n(128)])(r,e(233));if(!(0,fs_extra_1[n(145)])(i))return;let _=file_1[e(259)][n(133)](i);if(_[n(130)]!==n(152)+(0,path_1[n(120)])(r)&&_.name!==(0,path_1[n(120)])(r))return;let o="";if(_[n(151)]&&(0,fs_extra_1[n(145)])((0,path_1[n(128)])(r,_[e(257)]))){let t=util_1[n(106)][n(131)](r,_[e(257)]);o="zh"===editor_1[e(259)][e(282)]()?t.zh:t.en}return{path:r,name:_[n(130)],version:_[n(119)],author:_[n(113)],contents:_[n(111)],builder:_[n(114)],upgrade:o}},installPlugin:function(t,e,n){const r=_0xffe8c4,i=_0x16598c;let _=editor_1[i(106)][i(112)](),o=(0,path_1[i(128)])(editor_1[i(106)].getCreatorHomePath(),i(150));!(0,fs_extra_1[i(145)])(_)&&file_1[i(106)][i(108)](_),!(0,fs_extra_1[i(145)])(o)&&file_1[r(259)][i(108)](o);let s=(0,path_1[i(128)])(o,t+i(142)),a=0;return new Promise((t,o)=>{const c=r,u=i;let p=(t=u(144))=>{n&&n(t,!0),o(t)};if(!e[c(228)](/^(http|https):\/\/[^\s]*.zip$/))return p();http_1[u(106)][u(150)](e,s,(e,r)=>{const i=c,o=u;if(e||null===r)return p();let f=editor_1[o(106)].tr(o(107))+" "+r[o(116)]+"%";if(a!==r[o(116)]&&(a=r[o(116)],n&&n(f,!1)),"complete"===r[i(271)]){if(100!==r[i(276)])return p();file_1[o(106)][o(134)](s,_)[o(141)](()=>{const e=i,r=o;(0,fs_extra_1[r(145)])(s)&&(0,fs_extra_1[e(245)])(s),n&&n(editor_1[r(106)].tr(r(109)),!0),t(!0)})[o(140)](()=>p())}})})},openPopup:function(t,e){const n=_0x16598c;var r,i;let _=this[n(125)](t);void 0!==_&&(null===(i=null===(r=_[n(111)])||void 0===r?void 0:r[n(146)])||void 0===i?void 0:i[n(115)])&&editor_1[n(106)][n(127)](editor_1[n(106)][n(132)],n(148),t,e)},closePopup:function(t){const e=_0xffe8c4,n=_0x16598c;var r,i;let _=this.getServicePluginInfo(t);void 0!==_&&(null===(i=null===(r=_[n(111)])||void 0===r?void 0:r.popup)||void 0===i?void 0:i[e(270)])&&editor_1[n(106)][n(127)](editor_1[n(106)][n(132)],"close-popup",t)},registerI18n:function(t){const e=_0xffe8c4,n=_0x16598c;let r=this[n(125)](t);void 0!==r&&((0,fs_extra_1[n(145)])((0,path_1[n(128)])(r[n(154)],n(105)))&&editor_1[n(106)][e(267)]("zh",t,util_1[n(106)][n(131)](r[n(154)],n(105))),(0,fs_extra_1[n(145)])((0,path_1[n(128)])(r[e(284)],e(237)))&&editor_1[n(106)][n(117)]("en",t,util_1[e(259)][e(250)](r[n(154)],n(137))))}};
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.apiRequest=void 0;const editor_1=__importDefault(require("./editor"));let protocol=null;async function apiRequest(e,t={}){return"browser"===process.type&&null!==protocol?"redirect_url"===e?await protocol.getRedirectUrl(t.redirect_url):await protocol.apiPost(e,t):new Promise((r,o)=>{editor_1.default.requestMsg(editor_1.default.plugin,"api-request",e,t).then(r).catch(e=>o(JSON.parse(e.message)))})}"browser"===process.type&&(protocol=require("../browser/protocol").default),exports.apiRequest=apiRequest;
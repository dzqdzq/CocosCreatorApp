"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const electron_1=require("electron"),compare_versions_1=__importDefault(require("compare-versions")),path_1=require("path"),fs_extra_1=require("fs-extra"),file_1=__importDefault(require("./file")),crypto_1=require("crypto");exports.default={openUri:function(e){electron_1.shell.openExternal(e)},validateString:function(e){return void 0!==e&&""!==e},compareVersion:function(e,r){try{return compare_versions_1.default(e.split("_")[0],r.split("_")[0])}catch(e){return-1}},require:function(...e){let r=path_1.join(...e);return delete require.cache[require.resolve(r)],require(r)},deleteCache:function(...e){let r=path_1.join(...e);if(fs_extra_1.existsSync(r))return r.endsWith(".js")?delete require.cache[require.resolve(r)]:void(fs_extra_1.statSync(r).isDirectory()&&file_1.default.recursive(r,e=>{e.endsWith(".js")&&fs_extra_1.existsSync(e)&&delete require.cache[require.resolve(e)]},e=>"node_modules"!==path_1.basename(e)&&!path_1.basename(e).startsWith(".")))},getStrMD5:function(e){return crypto_1.createHash("md5").update(e).digest("hex")},generateID:function(e,r=6){return r>32?"Error":this.getStrMD5(e+(new Date).getTime()).substring(0,r)},replaceAppIdOnUrl:function(e,r){return e.match(/UNKNOW|<app_id>/)&&"UNKNOW"!==r?e.replace(/UNKNOW|<app_id>/,r):e.match(/app_id=\d+/)?e.replace(/app_id=\d+/,`app_id=${r}`):e},getByteLength(e){for(var r=0,t=0,i=e.length;t<i;t++){var a=e.charCodeAt(t);r+=a>=1&&a<=126||65376<=a&&a<=65439?1:2}return r}};
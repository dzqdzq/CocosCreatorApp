"use strict";const _0x19478a=_0x2e4a;function _0x26af(){const e=_0x2e4a,i=[e(406),e(393),e(383),e(386),e(439),e(424),"Config file error! (readServiceParam => readConfigSet)","game",e(399),e(404),"readConfigSets","2038532qCADLF",e(435),e(422),"existsSync",e(432),e(448),e(400),e(392),"UNKNOW",e(440),e(402),e(401),"path",e(412),e(425),e(430),e(394),e(420),e(407),e(436),e(431),"370373LwxHnh",e(445),e(398),e(380),e(397),"1685648YJtzUG",e(428),e(433),e(421),e(375),e(385),e(389),e(376),e(434),e(381),e(423),"app_id",e(395),e(417),e(373),e(437),"Default",e(374),e(411),e(429),e(441),e(442),e(388),"2.0.0",e(390),e(447),e(449),e(387),e(419),e(410),"config_id",e(438)];return(_0x26af=function(){return i})()}function _0x3d7e(){const e=["readServiceList","appid","map","345626fAGVqj","min","services","1016464Pksyrq","cid","fs-extra","writeConfigSet","test","Config file error! (deleteConfigSet => configs.findIndex)","settings/service.json","1706400dUxDkt","cscv","Default","279948XpJqRn","136200xyVqeo","name","forEach","25302CNvKau","Config file error! (copyConfigSet => appConfigMaps.find)","9DDwchR","Config file error! (wirteEnableService => readConfigSet)","writeGlobalProfile","config_remarks","readConfigSet","lang","game.app_id","./util","2bTHddv","push","appConfigMaps","compareVersion","2164715iRYSBL","All","findIndex","enable","Config file error! (writeServiceParam => readConfigSet)","config_name","__importDefault","generateID","readProjectProfile","app_id","max","groups","shift","config_id","find","length","splice","join","getProjectPath","game","generateConfigSet","readJsonSync","414jwdLaS","getLang","./editor","service_component_name","73047aBaiPC","param","writeBindGame","writeProjectProfile","371CtvxMA","58620zeDvDk","default","Config file error! (readEnableServices => readConfigSet)","564960lUngwN","Config file error! (copyConfigSet => configs.find)","3021704PKdXDU","__esModule","filter.","configs","Config file error! (wirteEnableService => config.find)","filter","service_id","readGlobalProfile"];return(_0x3d7e=function(){return e})()}function _0x2e4a(e,i){const t=_0x3d7e();return(_0x2e4a=function(e,i){return e-=373,t[e]})(e,i)}!function(){for(var e=_0x2e4a,i=_0x3d7e();;)try{if(398850==-parseInt(e(378))+parseInt(e(443))/2*(-parseInt(e(384))/3)+parseInt(e(446))/4+parseInt(e(396))/5+-parseInt(e(382))/6*(-parseInt(e(426))/7)+parseInt(e(379))/8+-parseInt(e(418))/9*(-parseInt(e(427))/10))break;i.push(i.shift())}catch(e){i.push(i.shift())}}();const _0x134c03=_0x5261;!function(){for(var i=_0x2e4a,e=_0x5261,t=_0x26af();;)try{if(463283==+parseInt(e(261))*(parseInt(e(247))/2)+-parseInt(e(242))/3+parseInt(e(240))/4+parseInt(e(255))/5+-parseInt(e(270))/6+-parseInt(e(244))/7+parseInt(e(266))/8)break;t.push(t[i(408)]())}catch(e){t[i(393)](t[i(408)]())}}();var __importDefault=this&&this[_0x134c03(250)]||function(e){return e&&e[_0x2e4a(433)]?e:{default:e}};Object.defineProperty(exports,_0x134c03(268),{value:!0});const editor_1=__importDefault(require(_0x134c03(257))),util_1=__importDefault(require(_0x19478a(391))),path_1=require(_0x134c03(252)),fs_extra_1=require(_0x134c03(245));function _0x5261(e,i){const t=_0x26af();return(_0x5261=function(e,i){return e-=240,t[e]})(e,i)}let generateConfigItem=(e,i,t=[])=>({app_id:e,config_id:i[_0x19478a(409)],config_name:i[_0x134c03(251)],config_remarks:i[_0x134c03(293)],services:t}),getConfigSetByConfig=e=>({config_id:e[_0x134c03(296)],config_name:e[_0x19478a(401)],config_remarks:e[_0x134c03(293)]});exports[_0x134c03(267)]={updateConfigFile:async function(){return new Promise(async(i,e)=>{var t=_0x2e4a,r=_0x5261;let a=async e=>{const r=_0x5261;e[r(287)](e=>{var i=_0x2e4a,t=r;void 0===e[t(296)]&&(i=this[i(416)](i(377)),e[t(296)]=i[t(296)],e[t(251)]=i[t(251)],e.config_remarks=i[t(293)])}),await editor_1[r(267)][r(254)](r(241),e)},n=async e=>{var i,t=_0x2e4a,r=_0x5261;null!=e&&(void 0!==e[r(241)]&&e[r(241)]instanceof Array&&await a(e[r(241)]),void 0!==e[t(415)]&&(e=e[r(305)],this[r(303)]({app_id:e[r(286)]||e[r(277)]||r(248),name:e[r(264)],c_id:e[r(291)]||"0"})),e=await editor_1[r(267)][r(307)](r(290)),0<(i=await this[r(308)](e)).length&&await editor_1[t(428)][r(254)](r(256),[{app_id:e,config_id:i[0][t(409)]}]),await editor_1[r(267)][r(254)](r(273),r(289)))},o=await editor_1[r(267)][r(307)](r(273));if(void 0!==o&&0===util_1[r(267)][r(278)](o,r(289)))return i();t=(0,path_1[t(413)])(editor_1[r(267)][t(414)](),r(283));if((0,fs_extra_1[r(243)])(t)&&(void 0===await editor_1[r(267)][r(307)](r(305))||null===await editor_1[r(267)][r(307)](r(305))))try{n((0,fs_extra_1[r(279)])(t))}catch(e){return i()}i()})},generateConfigSet:function(e,i=""){var t=_0x19478a,r=_0x134c03;return{config_id:util_1[r(267)][t(403)](e),config_name:e,config_remarks:i}},copyConfigSet:async function(o,c="",_=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;if(""===_&&(_=await editor_1[r(267)][r(307)](t(390))),""===c){var a=(await editor_1[t(428)][r(307)](t(394))||[])[r(295)](e=>e[r(277)]===_);if(void 0===a)return i(r(300));c=a[r(296)]}var a=await editor_1[r(267)][r(307)](r(241))||[],n=a[r(295)](e=>e[r(277)]==_&&e[r(296)]===c);if(void 0===n)return i(r(260));i=generateConfigItem(_,o,n[r(262)]||[]);a[r(299)](i),await editor_1[r(267)][r(254)]("configs",a),e()})},deleteConfigSet:async function(o,c=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;""===c&&(c=await editor_1[r(267)][r(307)](r(290)));let a=await editor_1[r(267)][r(307)](t(435));var n=(a=a||[])[r(263)](e=>e[r(277)]==c&&e[r(296)]===o);if(n<0)return i(r(280));a[r(253)](n,1),await editor_1[r(267)][t(425)](r(241),a);i=a.filter(e=>e.app_id===c);e(i[Math[r(298)](Math[t(444)](i[r(284)]-1,n-1),0)])})},readServiceList:async function(){var e=_0x134c03;return await editor_1[e(267)][e(302)](e(262))||[]},writeServiceList:async function(e){var i=_0x19478a,t=_0x134c03;return await editor_1[t(267)][t(301)]("lang",editor_1.default[i(419)]()),editor_1.default[t(301)](t(262),e)},readServiceGroupList:async function(){var e=_0x134c03;return await editor_1[e(267)][e(302)]("groups")||[]},writeServiceGroupList:async function(e){var i=_0x19478a,t=_0x134c03;return await editor_1[t(267)][i(386)](t(272),editor_1[t(267)][t(294)]()),editor_1[t(267)][t(301)](t(258),e)},readServiceFilter:async function(){var e=_0x19478a,i=_0x134c03;return await editor_1[i(267)][e(439)](i(274)+editor_1[i(267)][i(294)]())||{status:e(397),platforms:[i(265)]}},writeServiceFilter:async function(e){var i=_0x19478a,t=_0x134c03;return editor_1[t(267)][t(301)](t(274)+editor_1.default[i(419)](),e)},readBindGame:async function(){var e=_0x134c03;return editor_1[e(267)][e(307)](e(305))},writeBindGame:async function(n){return new Promise(async(e,i)=>{var t,r=_0x5261;await editor_1[r(267)][r(254)](r(305),n);let a=await this[r(288)](n[r(277)]);void 0===(a=void 0===a&&0<(t=await this[r(308)](n[r(277)]))[r(284)]?t[0]:a)&&(a=this.generateConfigSet(r(282))),await this[r(292)](a,n[r(277)]),e()})},readConfigSet:async function(c=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;""===c&&(c=await editor_1[t(428)][r(307)](r(290)));let a,n=await editor_1[r(267)].readProjectProfile(t(394))||[];do{let i=n[t(410)](e=>e[r(277)]===c),e=await editor_1[r(267)][r(307)](r(241));if(void 0===i||null===e)break;var o=e.find(e=>e[r(277)]==c&&e[t(409)]==(null==i?void 0:i[t(409)]));if(void 0===o)break;a=getConfigSetByConfig(o)}while(0);e(a)})},writeConfigSet:async function(_,f=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;""===f&&(f=await editor_1[t(428)][r(307)](t(390)));let a=await editor_1[r(267)][r(307)](r(256))||[],n=a[r(295)](e=>e[t(405)]===f),o=(void 0===n?(n={app_id:f,config_id:_[r(296)]},a[t(393)](n)):n[r(296)]=_[r(296)],await editor_1.default[r(254)](r(256),a),await editor_1[r(267)][r(307)](r(241)));var c=(o=o||[])[t(410)](e=>e[r(277)]==f&&e[r(296)]===_[r(296)]);void 0===c?o[r(299)](generateConfigItem(f,_)):(c[r(296)]=_[r(296)],c[t(401)]=_[r(251)],c[r(293)]=_[r(293)]),await editor_1[r(267)][r(254)](r(241),o),e()})},readConfigSets:async function(o=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;""===o&&(o=await editor_1[r(267)][r(307)](r(290)));let a=await editor_1[r(267)][r(307)](t(435)),n=(a=a||[],[]);a[r(281)](e=>e[r(277)]===o)[r(275)](e=>e[r(296)]&&n[r(299)](getConfigSetByConfig(e))),e(n)})},readEnableServices:async function(f=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;let a=await editor_1[r(267)][r(307)](r(290));if(""===f){var n=await this[t(388)]();if(void 0===n)return i(r(285));f=n[r(296)]}let o=await editor_1[t(428)][t(404)](r(241)),c=(o=o||[],[]);do{var _=o[r(295)](e=>e[r(277)]==a&&e[r(296)]===f);if(void 0===_||void 0===_[r(262)]||0===_.services[t(411)])break;_[t(445)][r(281)](e=>e[r(306)])[r(275)](e=>c[t(393)](e[r(297)]))}while(0);e(c)})},wirteEnableService:async function(_,f,s=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;let a=await editor_1.default[r(307)](r(290));if(""===s){var n=await this[t(388)]();if(void 0===n)return i(r(271));s=n[r(296)]}let o=await editor_1[t(428)][r(307)](r(241));n=(o=o||[])[r(295)](e=>e[r(277)]==a&&e[t(409)]===s);if(void 0===n)return i(r(259));void 0===n[t(445)]&&(n[r(262)]=[]);let c=n[t(445)][t(410)](e=>e[r(297)]===_);void 0===c?(c={service_id:_,enable:f,param:{}},n[t(445)][r(299)](c)):c[r(306)]=f,await editor_1[r(267)][t(425)](r(241),o),e()})},readServiceParam:async function(f,s=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;let a=await editor_1[t(428)][r(307)](r(290));if(""===s){var n=await this[r(288)]();if(void 0===n)return i(r(304));s=n[r(296)]}let o=await editor_1[r(267)][r(307)](r(241)),c=(o=o||[],{});do{var _=o[r(295)](e=>e[r(277)]==a&&e[r(296)]===s);if(void 0===_||void 0===_.services||0===_[r(262)][t(411)])break;_=_[r(262)][r(295)](e=>e[r(297)]===f);void 0!==_&&void 0!==_[t(423)]&&null!==_[r(276)]&&(c=_[r(276)])}while(0);e(c)})},writeServiceParam:async function(_,f,s=""){return new Promise(async(e,i)=>{const t=_0x2e4a,r=_0x5261;let a=await editor_1[r(267)][r(307)](r(290));if(""===s){var n=await this[r(288)]();if(void 0===n)return i(r(246));s=n[t(409)]}let o=await editor_1[r(267)][r(307)](r(241));n=(o=o||[])[r(295)](e=>e[r(277)]==a&&e[r(296)]===s);if(void 0===n)return i(r(246));void 0===n[t(445)]&&(n[t(445)]=[]);let c=n[t(445)][r(295)](e=>e[t(438)]===_);void 0===c?(c={service_id:_,enable:!1,param:f},n[r(262)].push(c)):c[t(423)]=f,await editor_1[r(267)][r(254)](t(435),o),e()})},readDevMode:async function(){const i=_0x19478a,t=_0x134c03;return 0!==(await this[t(249)]())[t(281)](e=>/service-cocosads/[i(450)](e[t(269)]))[t(284)]}};
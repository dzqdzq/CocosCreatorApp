"use strict";const _0x3461da=_0x2c92;function _0x51af(){const e=["param","152952sOClFt","writeConfigSet","name","app_id","./editor","generateID","40698084SZcumK","2991284ThpcQG","./util","399278ZOpTOg","shift","game.app_id","length","Config file error! (deleteConfigSet => configs.findIndex)","Config file error! (wirteEnableService => config.find)","map","config_remarks","writeGlobalProfile","push","writeProjectProfile","readServiceList","All","config_id","writeBindGame","defineProperty","services","readConfigSet","appid","1812622OGZMmh","configs","Config file error! (writeServiceParam => readConfigSet)","2.0.0","52405AGOxco","Config file error! (readServiceParam => readConfigSet)","getLang","forEach","compareVersion","join","test","511wPAKPA","10hXBZzT","appConfigMaps","1234lShFNQ","Config file error! (copyConfigSet => configs.find)","UNKNOW","splice","min","getProjectPath","config_name","readConfigSets","filter","readProjectProfile","Default","default","generateConfigSet","settings/service.json","cscv","28722EajXPG","path","Config file error! (wirteEnableService => readConfigSet)","1258148fBTvjA","service_component_name","1561GDCdqj","905XmuWMv","Config file error! (copyConfigSet => appConfigMaps.find)","find","4xkqWIS","13376376PDzAAs","770589vAAquQ","game","fs-extra","1014TlIUgc","2966367XFcVjf","79750385SaPFnt","existsSync","max"];return(_0x51af=function(){return e})()}!function(){for(var e=_0x2c92,i=_0x51af();;)try{if(968332==+parseInt(e(265))+parseInt(e(321))/2+parseInt(e(305))/3*(parseInt(e(303))/4)+parseInt(e(269))/5*(parseInt(e(308))/6)+parseInt(e(276))/7*(parseInt(e(314))/8)+parseInt(e(304))/9+-parseInt(e(277))/10*(parseInt(e(310))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}();const _0x289de9=_0x50f7;function _0x2c92(e,i){const t=_0x51af();return(_0x2c92=function(e,i){return e-=257,t[e]})(e,i)}function _0x50f7(e,i){const t=_0x2cbb();return(_0x50f7=function(e,i){return e-=182,t[e]})(e,i)}!function(){for(var i=_0x2c92,e=_0x50f7,t=_0x2cbb();;)try{if(671788==+parseInt(e(232))*(parseInt(e(236))/2)+parseInt(e(190))/3+-parseInt(e(240))/4*(parseInt(e(191))/5)+-parseInt(e(213))/6*(-parseInt(e(245))/7)+parseInt(e(199))/8*(parseInt(e(242))/9)+-parseInt(e(198))/10*(-parseInt(e(234))/11)+-parseInt(e(247))/12)break;t[i(332)](t[i(324)]())}catch(e){t[i(332)](t[i(324)]())}}();var __importDefault=this&&this.__importDefault||function(e){return e&&e[_0x50f7(228)]?e:{default:e}};function _0x2cbb(){const e=_0x2c92,i=["filter.",e(313),e(329),e(297),"service_id","234279qnwdEE","enable",e(316),e(299),e(307),e(320),e(318),e(278),"lang","cid","readJsonSync",e(266),"findIndex",e(287),e(281),e(283),e(292),"game.app_id",e(288),e(309),"5TRFWFd",e(260),e(333),e(267),e(331),"groups",e(261),"120OouBYb","408rYYnTQ",e(312),e(282),e(258),e(285),e(296),e(275),e(257),e(259),e(268),"length",e(317),e(289),e(291),e(294),e(271),e(280),e(311),e(327),"default",e(262),e(332),e(302),e(330),e(263),"readConfigSets",e(319),"Config file error! (readEnableServices => readConfigSet)",e(293),"__esModule","forEach",e(315),"readGlobalProfile",e(300),"game",e(323),e(301),e(279)];return(_0x2cbb=function(){return i})()}Object[_0x289de9(197)](exports,_0x289de9(228),{value:!0});const editor_1=__importDefault(require(_0x289de9(248))),util_1=__importDefault(require(_0x3461da(322))),path_1=require(_0x3461da(295)),fs_extra_1=require(_0x289de9(246));let generateConfigItem=(e,i,t=[])=>({app_id:e,config_id:i[_0x289de9(207)],config_name:i[_0x289de9(203)],config_remarks:i[_0x289de9(222)],services:t}),getConfigSetByConfig=e=>({config_id:e[_0x3461da(259)],config_name:e[_0x3461da(285)],config_remarks:e[_0x289de9(222)]});exports[_0x289de9(218)]={updateConfigFile:async function(){return new Promise(async(i,e)=>{var t=_0x2c92,r=_0x50f7;let a=async e=>{const r=_0x50f7;e[r(239)](e=>{var i=_0x2c92,t=r;void 0===e[t(207)]&&(i=this[i(291)](t(211)),e[t(207)]=i[t(207)],e[t(203)]=i[t(203)],e[t(222)]=i[t(222)])}),await editor_1[r(218)][r(193)](r(182),e)},n=async e=>{var i,t=_0x2c92,r=_0x50f7;null!=e&&(void 0!==e[r(182)]&&e[r(182)]instanceof Array&&await a(e[r(182)]),void 0!==e[r(233)]&&(e=e[t(306)],this[r(192)]({app_id:e[t(264)]||e.app_id||r(185),name:e[r(244)],c_id:e[r(251)]||"0"})),e=await editor_1[t(290)][r(189)](r(188)),0<(i=await this[t(286)](e))[r(209)]&&await editor_1[r(218)][r(193)](t(278),[{app_id:e,config_id:i[0].config_id}]),await editor_1[r(218)][r(193)](r(227),r(208)))},o=await editor_1[r(218)][t(288)]("cscv");if(void 0!==o&&0===util_1[r(218)][t(273)](o,r(208)))return i();var c=(0,path_1[t(274)])(editor_1[r(218)][t(284)](),r(187));if((0,fs_extra_1[r(216)])(c)&&(void 0===await editor_1[r(218)][r(189)](r(233))||null===await editor_1[r(218)][t(288)](r(233))))try{n((0,fs_extra_1[r(252)])(c))}catch(e){return i()}i()})},generateConfigSet:function(e,i=""){var t=_0x3461da,r=_0x289de9;return{config_id:util_1[t(290)][r(225)](e),config_name:e,config_remarks:i}},copyConfigSet:async function(o,c="",f=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;if(""===f&&(f=await editor_1[r(218)][r(189)](t(325))),""===c){var a=(await editor_1[r(218)][t(288)](t(278))||[])[r(221)](e=>e[t(317)]===f);if(void 0===a)return i(r(235));c=a[r(207)]}var a=await editor_1[r(218)][t(288)](r(182))||[],n=a[r(221)](e=>e[r(210)]==f&&e[t(259)]===c);if(void 0===n)return i(r(215));i=generateConfigItem(f,o,n[r(219)]||[]);a[r(220)](i),await editor_1[r(218)][t(333)](r(182),a),e()})},deleteConfigSet:async function(o,c=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;""===c&&(c=await editor_1[t(290)][t(288)](r(188)));let a=await editor_1[r(218)][r(189)](r(182));var n=(a=a||[])[r(183)](e=>e[r(210)]==c&&e[r(207)]===o);if(n<0)return i(r(217));a[r(201)](n,1),await editor_1[r(218)][r(193)](r(182),a);i=a[r(184)](e=>e[r(210)]===c);e(i[Math[r(200)](Math[r(186)](i[r(209)]-1,n-1),0)])})},readServiceList:async function(){var e=_0x3461da,i=_0x289de9;return await editor_1[i(218)][i(231)](e(262))||[]},writeServiceList:async function(e){var i=_0x289de9;return await editor_1[i(218)][i(195)](i(250),editor_1[i(218)][i(214)]()),editor_1[i(218)][i(195)](i(219),e)},readServiceGroupList:async function(){var e=_0x289de9;return await editor_1[e(218)][e(231)]("groups")||[]},writeServiceGroupList:async function(e){var i=_0x289de9;return await editor_1[i(218)].writeGlobalProfile(i(250),editor_1[i(218)][i(214)]()),editor_1[i(218)][i(195)](i(196),e)},readServiceFilter:async function(){var e=_0x289de9;return await editor_1[e(218)][e(231)](e(237)+editor_1[e(218)][e(214)]())||{status:e(202),platforms:[e(202)]}},writeServiceFilter:async function(e){var i=_0x289de9;return editor_1[i(218)][i(195)](i(237)+editor_1[i(218)][i(214)](),e)},readBindGame:async function(){var e=_0x289de9;return editor_1[e(218)][e(189)](e(233))},writeBindGame:async function(n){return new Promise(async(e,i)=>{var t=_0x2c92,r=_0x50f7;await editor_1[t(290)].writeProjectProfile("game",n);let a=await this[r(223)](n[t(317)]);void 0===(a=void 0===a&&0<(t=await this[r(224)](n[r(210)]))[r(209)]?t[0]:a)&&(a=this[r(212)](r(211))),await this[r(230)](a,n[r(210)]),e()})},readConfigSet:async function(c=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;""===c&&(c=await editor_1[r(218)][r(189)](r(188)));let a,n=await editor_1[r(218)][r(189)](r(249))||[];do{let i=n[r(221)](e=>e[r(210)]===c),e=await editor_1[t(290)][r(189)](t(266));if(void 0===i||null===e)break;var o=e[t(302)](e=>e[r(210)]==c&&e[r(207)]==(null==i?void 0:i[r(207)]));if(void 0===o)break;a=getConfigSetByConfig(o)}while(0);e(a)})},writeConfigSet:async function(f,d=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;""===d&&(d=await editor_1[r(218)][r(189)](t(325)));let a=await editor_1[r(218)][r(189)](t(278))||[],n=a[t(302)](e=>e[r(210)]===d),o=(void 0===n?(n={app_id:d,config_id:f[r(207)]},a[t(332)](n)):n[t(259)]=f[r(207)],await editor_1[t(290)][t(333)]("appConfigMaps",a),await editor_1[r(218)][r(189)](r(182)));var c=(o=o||[])[r(221)](e=>e[r(210)]==d&&e[r(207)]===f[r(207)]);void 0===c?o.push(generateConfigItem(d,f)):(c[r(207)]=f[r(207)],c[r(203)]=f[r(203)],c[r(222)]=f[t(330)]),await editor_1[r(218)].writeProjectProfile(r(182),o),e()})},readConfigSets:async function(o=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;""===o&&(o=await editor_1[r(218)][r(189)](r(188)));let a=await editor_1[t(290)][t(288)](t(266)),n=(a=a||[],[]);a[r(184)](e=>e[r(210)]===o)[t(272)](e=>e[r(207)]&&n[t(332)](getConfigSetByConfig(e))),e(n)})},readEnableServices:async function(d=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;let a=await editor_1[t(290)][t(288)](r(188));if(""===d){var n=await this[t(263)]();if(void 0===n)return i(r(226));d=n[r(207)]}let o=await editor_1[r(218)][r(189)](r(182)),c=(o=o||[],[]);do{var f=o[r(221)](e=>e[r(210)]==a&&e[r(207)]===d);if(void 0===f||void 0===f[r(219)]||0===f[r(219)][r(209)])break;f[r(219)][r(184)](e=>e[r(243)])[r(229)](e=>c[r(220)](e[r(241)]))}while(0);e(c)})},wirteEnableService:async function(f,d,_=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;let a=await editor_1[t(290)][r(189)](r(188));if(""===_){var n=await this[t(263)]();if(void 0===n)return i(r(204));_=n[r(207)]}let o=await editor_1[r(218)][r(189)](r(182));n=(o=o||[])[t(302)](e=>e[r(210)]==a&&e[r(207)]===_);if(void 0===n)return i(t(328));void 0===n[r(219)]&&(n[t(262)]=[]);let c=n[r(219)][r(221)](e=>e[r(241)]===f);void 0===c?(c={service_id:f,enable:d,param:{}},n[r(219)][r(220)](c)):c[r(243)]=d,await editor_1[t(290)][r(193)]("configs",o),e()})},readServiceParam:async function(d,_=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;let a=await editor_1[t(290)][r(189)](t(325));if(""===_){var n=await this[r(223)]();if(void 0===n)return i(t(270));_=n[r(207)]}let o=await editor_1[r(218)][r(189)](r(182)),c=(o=o||[],{});do{var f=o[r(221)](e=>e[r(210)]==a&&e[r(207)]===_);if(void 0===f||void 0===f[r(219)]||0===f[r(219)][t(326)])break;f=f[r(219)][r(221)](e=>e[r(241)]===d);void 0!==f&&void 0!==f[t(313)]&&null!==f[r(238)]&&(c=f[r(238)])}while(0);e(c)})},writeServiceParam:async function(f,d,_=""){return new Promise(async(e,i)=>{const t=_0x2c92,r=_0x50f7;let a=await editor_1[t(290)][r(189)](r(188));if(""===_){var n=await this[r(223)]();if(void 0===n)return i(r(194));_=n[r(207)]}let o=await editor_1[t(290)][r(189)](t(266));n=(o=o||[])[r(221)](e=>e[t(317)]==a&&e[r(207)]===_);if(void 0===n)return i(t(267));void 0===n[r(219)]&&(n[r(219)]=[]);let c=n[r(219)][r(221)](e=>e[r(241)]===f);void 0===c?(c={service_id:f,enable:!1,param:d},n[t(262)][r(220)](c)):c[r(238)]=d,await editor_1[r(218)][r(193)](r(182),o),e()})},readDevMode:async function(){const i=_0x3461da,t=_0x289de9;return 0!==(await this[t(206)]())[t(184)](e=>/service-cocosads/[t(205)](e[i(298)]))[t(209)]}};
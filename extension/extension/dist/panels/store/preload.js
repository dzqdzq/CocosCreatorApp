"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const electron_1=require("electron"),fs=require("fs"),readJson=function(e){try{return JSON.parse(require("fs").readFileSync(e,"utf-8"))}catch(e){return{}}};function trAsync(e){return new Promise((n,r)=>{electron_1.ipcRenderer.once("_translate_finished",(e,r)=>{n(r)}),electron_1.ipcRenderer.sendToHost("_translate",e)})}global.hostAPI={storeVersion:readJson(`${__dirname}/../../../package.json`).version,sendToHost:(e,...n)=>electron_1.ipcRenderer.sendToHost(e,n),async selectFile(e={}){function n(e){const n=e.split("/").slice(-1)[0],r=fs.readFileSync(e);return new File([r],n)}return new Promise(async(r,t)=>{electron_1.ipcRenderer.once("_selectFileFinished",(e,s)=>{s.canceled&&t(null),r(s.filePaths.map(n))}),electron_1.ipcRenderer.sendToHost("_selectFile",await async function(e){const n={};return e?(n.filters=e.filters,n.multi=e.multiSelections,n.title=e.title||await trAsync("extension.store.select_file"),JSON.stringify(n)):null}(e))})},jumpUrl:(e,n=!1)=>electron_1.ipcRenderer.sendToHost(`__${n?"cocos":"normal"}_jump`,e)};
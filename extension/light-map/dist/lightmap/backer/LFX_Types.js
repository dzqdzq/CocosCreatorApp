"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LFX_File=exports.LFX_MeshLightMapInfo=exports.LFX_TerrainLightMapInfo=exports.LFX_World=exports.LFX_Buffer=exports.LFX_Light=exports.LFX_Terrain=exports.LFX_Mesh=exports.LFX_Material=exports.LFX_Triangle=exports.LFX_Vertex=exports.LFX_Settings=void 0;class LFX_Settings{constructor(){this.MSAA=4,this.Size=1024,this.Gamma=2.2,this.SkyRadiance=[0,0,0],this.GIScale=.5,this.GISamples=25,this.GIPathLength=4,this.AOLevel=0,this.AOStrength=.5,this.AORadius=1,this.AOColor=[.5,.5,.5],this.Threads=1}}exports.LFX_Settings=LFX_Settings;class LFX_Vertex{constructor(){this.Position=[0,0,0],this.Normal=[0,0,0],this.UV=[0,0],this.LUV=[0,0]}}exports.LFX_Vertex=LFX_Vertex;class LFX_Triangle{constructor(){this.Index=[0,0,0],this.MaterialId=0}}exports.LFX_Triangle=LFX_Triangle;class LFX_Material{constructor(){this.Diffuse=[1,1,1],this.Texture=""}}exports.LFX_Material=LFX_Material;class LFX_Mesh{constructor(){this.CastShadow=!1,this.ReceiveShadow=!1,this.LightMapSize=0,this.VertexBuffer=new Array,this.TriangleBuffer=new Array,this.MaterialBuffer=new Array}}exports.LFX_Mesh=LFX_Mesh;class LFX_Terrain{constructor(){this.Position=[0,0,0],this.TileSize=0,this.BlockCount=[0,0],this.HeightField=new Uint16Array,this.LightMapSize=0}}exports.LFX_Terrain=LFX_Terrain;class LFX_Light{constructor(){this.Type=LFX_Light.POINT,this.Position=[0,0,0],this.Direction=[0,0,0],this.Color=[0,0,0],this.Illuminance=1,this.AttenStart=0,this.AttenEnd=1,this.AttenFallOff=1,this.SpotInner=1,this.SpotOuter=.7071,this.SpotFallOff=1,this.DirectScale=1,this.IndirectScale=1,this.GIEnable=!1,this.CastShadow=!1}}exports.LFX_Light=LFX_Light,LFX_Light.POINT=0,LFX_Light.SPOT=1,LFX_Light.DIRECTION=2;class LFX_Buffer{constructor(){this.Length=0,this.Buffer=new Uint8Array(2048),this._dview=new DataView(this.Buffer.buffer),this._seekPos=0}Reserve(t){if(this.Buffer.byteLength>t)return;let e=this.Buffer.byteLength;for(;e<t;)e+=e;const s=new Uint8Array(e);for(let t=0;t<this.Length;++t)s[t]=this.Buffer[t];this.Buffer=s,this._dview=new DataView(this.Buffer.buffer)}Assign(t){this.Buffer=t,this.Length=t.length,this._seekPos=t.byteOffset,this._dview=new DataView(t.buffer)}WriteInt8(t){this.Reserve(this.Length+1),this._dview.setInt8(this.Length,t),this.Length+=1}WriteInt16(t){this.Reserve(this.Length+2),this._dview.setInt16(this.Length,t,!0),this.Length+=2}WriteInt32(t){this.Reserve(this.Length+4),this._dview.setInt32(this.Length,t,!0),this.Length+=4}WriteHeightField(t){this.Reserve(this.Length+2*t.length);for(let e=0;e<t.length;++e)this._dview.setUint16(this.Length+2*e,t[e],!0);this.Length+=2*t.length}WriteIntArray(t){this.Reserve(this.Length+4*t.length);for(let e=0;e<t.length;++e)this._dview.setInt32(this.Length+4*e,t[e],!0);this.Length+=4*t.length}WriteFloat(t){this.Reserve(this.Length+4),this._dview.setFloat32(this.Length,t,!0),this.Length+=4}WriteFloatArray(t){this.Reserve(this.Length+4*t.length);for(let e=0;e<t.length;++e)this._dview.setFloat32(this.Length+4*e,t[e],!0);this.Length+=4*t.length}WriteString(t){this.Reserve(this.Length+t.length+4),this._dview.setInt32(this.Length,t.length,!0);for(let e=0;e<t.length;++e)this._dview.setInt8(this.Length+4+e,t.charCodeAt(e));this.Length+=t.length+4}ReadInt8(){const t=this._dview.getInt8(this._seekPos);return this._seekPos+=1,t}ReadInt16(){const t=this._dview.getInt16(this._seekPos,!0);return this._seekPos+=2,t}ReadInt(){const t=this._dview.getInt32(this._seekPos,!0);return this._seekPos+=4,t}ReadIntArray(t){for(let e=0;e<t.length;++e)t[e]=this._dview.getInt32(this._seekPos+4*e,!0);return this._seekPos+=4*t.length,t}ReadFloat(){const t=this._dview.getFloat32(this._seekPos,!0);return this._seekPos+=4,t}ReadFloatArray(t){for(let e=0;e<t.length;++e)t[e]=this._dview.getFloat32(this._seekPos+4*e,!0);return this._seekPos+=4*t.length,t}ReadString(){const t=this.ReadInt();let e="";for(let s=0;s<t;++s)e+=String.fromCharCode(this.ReadInt8());return e}}exports.LFX_Buffer=LFX_Buffer;class LFX_World{constructor(){this.Name="",this.Settings=new LFX_Settings,this.Textures=new Array,this.Terrains=new Array,this.Meshes=new Array,this.Lights=new Array}AddUniqueTexture(t){if(t.length>0){for(const e of this.Textures)if(e===t)return t;this.Textures.push(t)}return t}}exports.LFX_World=LFX_World;class LFX_TerrainLightMapInfo{constructor(){this.Id=0,this.BlockId=0,this.Index=0,this.Offset=[0,0],this.Scale=[0,0]}}exports.LFX_TerrainLightMapInfo=LFX_TerrainLightMapInfo;class LFX_MeshLightMapInfo{constructor(){this.Id=0,this.Index=0,this.Offset=[0,0],this.Scale=[0,0]}}exports.LFX_MeshLightMapInfo=LFX_MeshLightMapInfo;class LFX_File{constructor(){this.Verison=0,this.MeshInfos=new Array,this.TerrainInfos=new Array}}exports.LFX_File=LFX_File;
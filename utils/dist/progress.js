"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quickSpawn=quickSpawn;const child_process_1=require("child_process");function quickSpawn(t,d,c={downGradeLog:!0,onlyPrintWhenError:!0,prefix:""}){return new Promise((e,o)=>{c.prefix=c.prefix||"";var r=(0,child_process_1.spawn)(t,d,{cwd:c?.cwd||void 0,env:c?.env,...c});let n="";function i(r,e){c.onlyPrintWhenError?n+=e:("log"===r&&c.downGradeLog?r="debug":"warn"===r&&c.downGradeWaring?r="log":"error"===r&&c.downGradeError&&(r="warn"),console[r](c.prefix+e.toString()))}void 0!==c.logLevel&&0<=c.logLevel&&r.stdout.on("data",r=>{i("log",r)}),void 0!==c.logLevel&&1<=c.logLevel&&r.stderr.on("data",r=>{var e=r.toString();e&&"\n"!==e&&i("error",r)}),r.on("close",r=>{0!==r?o(c.prefix+(`Child process exit width code ${r}: ${t} `+d.toString())):e(!0)}),r.on("error",r=>{n&&console.debug(c.prefix+"child process output: ",{outputData:n}),console.error(c.prefix+(`child process error: ${t} `+d.toString())),o(r)}),r.on("exit",r=>{c.onlyPrintWhenError||console.debug(c.prefix+"Child process exit width code "+r)})})}
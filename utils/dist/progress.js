"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quickSpawn=void 0;const child_process_1=require("child_process");function quickSpawn(o,e,r={downGradeLog:!0,onlyPrintWhenError:!0,prefix:""}){return new Promise((n,i)=>{r.prefix=r.prefix||"";const t=(0,child_process_1.spawn)(o,e,Object.assign({cwd:(null===r||void 0===r?void 0:r.cwd)||void 0,env:null===r||void 0===r?void 0:r.env},r));let d="";function s(o,e){r.onlyPrintWhenError?d+=e:("log"===o&&r.downGradeLog?o="debug":"warn"===o&&r.downGradeWaring?o="log":"error"===o&&r.downGradeError&&(o="warn"),console[o](r.prefix+e.toString()))}void 0!==r.logLevel&&r.logLevel>=0&&t.stdout.on("data",o=>{s("log",o)}),void 0!==r.logLevel&&r.logLevel>=1&&t.stderr.on("data",o=>{const e=o.toString();e&&"\n"!==e&&s("error",o)}),t.on("close",t=>{0!==t?i(r.prefix+`Child process exit width code ${t}: ${o} ${e.toString()}`):n(!0)}),t.on("error",n=>{d&&console.debug(r.prefix+"child process output: ",{outputData:d}),console.error(r.prefix+`child process error: ${o} ${e.toString()}`),i(n)}),t.on("exit",o=>{!r.onlyPrintWhenError&&console.debug(r.prefix+`Child process exit width code ${o}`)})})}exports.quickSpawn=quickSpawn;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.data=exports.props=exports.template=void 0;const fs_1=require("fs"),path_1=require("path");function data(){return{type:"global"}}async function mounted(){this.refresh()}exports.template=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/program.html"),"utf8"),exports.props=["program","item","pkg"],exports.data=data,exports.methods={getRenderText(e){return e.attributes=e.attributes||{},e.attributes.path=`${this.program}.path`,JSON.stringify(e)},async refresh(){const e=this;if(!e.pkg)return;const t=await Editor.Profile.getConfig(e.pkg,e.program,"local");e.type=void 0!==t&&null!==t?"local":"global"},popup(e,t){const r=this;r.pkg&&Editor.Menu.popup({x:e,y:t,menu:[{label:Editor.I18n.t("preferences.menu.move_local"),enabled:"global"===r.type,async click(){const e=await Editor.Profile.getConfig(r.pkg,r.program);await Editor.Profile.setConfig(r.pkg,r.program,e),r.refresh()}},{label:Editor.I18n.t("preferences.menu.move_global"),enabled:"local"===r.type,async click(){const e=await Editor.Profile.getConfig(r.pkg,r.program,"local");await Editor.Profile.setConfig(r.pkg,r.program,e,"global"),await Editor.Profile.removeConfig(r.pkg,r.program,r.type),r.refresh()}}]})},showArgumentsMenu(e){const t=this,r=[];for(const e in t.item.arguments){const o=t.item.arguments[e],a={label:e,sublabel:o.label,click(){t.addArgument(e)}};r.push(a)}Editor.Menu.popup({x:e.x,y:e.y,menu:r})},addArgument(e){let t=this.$refs.commandArgument.value||"";t+=" ${"+e+"}",this.$refs.commandArgument.value=t.trim(),this.$refs.commandArgument.dispatch("confirm")}},exports.mounted=mounted;
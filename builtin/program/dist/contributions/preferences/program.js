"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.data=exports.props=exports.template=void 0;const fs_1=require("fs"),path_1=require("path");function data(){return{type:"global",localValue:null,defaultValue:null}}async function mounted(){this.refresh()}exports.template=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/program.html"),"utf8"),exports.props=["program","item","pkg"],exports.data=data,exports.methods={getRenderText(e){const t=this;return e.attributes=e.attributes||{},e.attributes.path=`${t.program}.path`,t.defaultValue&&t.defaultValue.path&&(e.attributes.placeholder=t.defaultValue.path),JSON.stringify(e)},async refresh(){const e=this;e.pkg&&(e.localValue=await Editor.Profile.getConfig(e.pkg,e.program,"local"),e.defaultValue=await Editor.Profile.getConfig(e.pkg,e.program,"default"),e.localValue&&(e.localValue.path||e.localValue.commandArgument)?e.type="local":e.type="global")},popup(e,t){const a=this;a.pkg&&Editor.Menu.popup({x:e,y:t,menu:[{label:Editor.I18n.t("preferences.menu.move_local"),enabled:"global"===a.type,async click(){const e=await Editor.Profile.getConfig(a.pkg,a.program,a.type);await Editor.Profile.setConfig(a.pkg,a.program,e,"local"),a.refresh()}},{label:Editor.I18n.t("preferences.menu.move_global"),enabled:"local"===a.type,async click(){const e=await Editor.Profile.getConfig(a.pkg,a.program,a.type);await Editor.Profile.setConfig(a.pkg,a.program,e,"global"),await Editor.Profile.removeConfig(a.pkg,a.program,a.type),a.refresh()}}]})},showArgumentsMenu(e){const t=this,a=[];for(const e in t.item.arguments){const r=t.item.arguments[e],o={label:e,sublabel:r.label,click(){t.addArgument(e)}};a.push(o)}Editor.Menu.popup({x:e.x,y:e.y,menu:a})},addArgument(e){let t=this.$refs.commandArgument.value||"";t+=" ${"+e+"}",this.$refs.commandArgument.value=t.trim(),this.$refs.commandArgument.dispatch("confirm")}},exports.mounted=mounted;
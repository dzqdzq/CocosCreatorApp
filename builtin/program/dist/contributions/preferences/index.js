"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.importConfig=exports.exportConfig=exports.ready=exports.$=exports.template=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),program_1=require("./program"),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;const vueTemplate=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/index.html"),"utf8"),ProgramPreferenceVM=Vue.extend({name:"ProgramPreferenceVM",components:{program:program_1.ProgramComponent},data:()=>({config:null}),async mounted(){const e=await Editor.Message.request("program","query-program-config");this.config=e},template:vueTemplate});async function ready(){var e;null===(e=this.vm)||void 0===e||e.$destroy(),this.vm=new ProgramPreferenceVM,this.vm.$mount(this.$.container)}async function exportConfig(){const e={},r=await Editor.Message.request("program","query-program-config");for(const o in r)if(r[o].properties)for(const t in r[o].properties){let r="global";const s=await Editor.Message.request("preferences","query-config",o,t,"local");void 0!==s&&null!==s&&(r="local"),e[`${o}.${t}`]={type:r,value:await Editor.Message.request("preferences","query-config",o,t)||{}}}return e}async function importConfig(e){const r=await Editor.Message.request("program","query-program-config");for(const o in r)if(r[o].properties)for(const t in r[o].properties)e[`${o}.${t}`]&&e[`${o}.${t}`].value&&await Editor.Message.request("preferences","set-config",o,t,e[`${o}.${t}`].value,e[`${o}.${t}`].type)}function close(){var e;null===(e=this.vm)||void 0===e||e.$destroy(),this.vm=null}exports.style=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../dist/index.css"),"utf8"),exports.template='<div class="container"></div>',exports.$={container:".container"},exports.ready=ready,exports.exportConfig=exportConfig,exports.importConfig=importConfig,exports.close=close;
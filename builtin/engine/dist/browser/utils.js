"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileEngine=compileEngine,exports.compileCommonEngine=compileCommonEngine,exports.getCCEnvConstants=getCCEnvConstants,exports.registerI18n=registerI18n,exports.rebuild=rebuild,exports.rebuildImportMaps=rebuildImportMaps;const fs_extra_1=require("fs-extra"),path_1=require("path"),i18n=require("@base/electron-i18n"),engineCompiler=require("../../static/engine-compiler/dist/index");async function compileEngine(e,n){return engineCompiler.compileEngine(e,n)}async function compileCommonEngine(e,n){return engineCompiler.compileEngine(e,n,{isNativeScene:!1})}function getCCEnvConstants(e){return engineCompiler.getCCEnvConstants(e)}function registerI18n(e){try{const r=(0,path_1.join)(e,"editor","i18n");(0,fs_extra_1.existsSync)(r)&&(0,fs_extra_1.statSync)(r).isDirectory()&&(0,fs_extra_1.readdirSync)(r).map(e=>{const i=(0,path_1.join)(r,e);var n;(0,fs_extra_1.statSync)(i).isDirectory()&&(n=(0,fs_extra_1.readdirSync)(i).reduce((e,n)=>{n=(0,path_1.join)(i,n);try{var r=require(n);e.ENGINE?e.ENGINE=Object.assign(e.ENGINE,r):e.ENGINE=r}catch(e){}return e},{}),i18n.register(n,e))})}catch(e){e instanceof Error&&console.log("Load I18n files failed: "+e.message)}}async function rebuild(e){return engineCompiler.rebuild(e)}async function rebuildImportMaps(){return engineCompiler.rebuildImportMaps()}
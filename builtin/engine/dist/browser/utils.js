"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rebuildImportMaps=exports.rebuild=exports.registerI18n=exports.compileEngine=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),i18n=require("@base/electron-i18n"),engineCompiler=require("../../static/engine-compiler/dist/index");async function compileEngine(e,r){return await engineCompiler.compileEngine(e,r)}function registerI18n(e){try{const r=(0,path_1.join)(e,"editor","i18n");if(!(0,fs_extra_1.existsSync)(r))return;if(!(0,fs_extra_1.statSync)(r).isDirectory())return;(0,fs_extra_1.readdirSync)(r).map(e=>{const i=(0,path_1.join)(r,e);if(!(0,fs_extra_1.statSync)(i).isDirectory())return;const t=(0,fs_extra_1.readdirSync)(i).reduce((e,r)=>{const t=(0,path_1.join)(i,r);try{const r=require(t);e.ENGINE?e.ENGINE=Object.assign(e.ENGINE,r):e.ENGINE=r}catch(e){}return e},{});i18n.register(t,e)})}catch(e){e instanceof Error&&console.log(`Load I18n files failed: ${e.message}`)}}async function rebuild(e){return await engineCompiler.rebuild(e)}async function rebuildImportMaps(){return await engineCompiler.rebuildImportMaps()}exports.compileEngine=compileEngine,exports.registerI18n=registerI18n,exports.rebuild=rebuild,exports.rebuildImportMaps=rebuildImportMaps;
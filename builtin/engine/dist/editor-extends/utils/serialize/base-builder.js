"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Builder=void 0;const serialization_1=require("cc/editor/serialization");class Builder{constructor(i){var e;this._mainBufferBuilder=new serialization_1.BufferBuilder,this.minify=!!i.minify,this.stringify=!("stringify"in i&&!i.stringify),this._useCCON=null!==(e=i.useCCON)&&void 0!==e&&e}dump(){return this._useCCON?this._dumpAsCCON():this._dumpAsJson()}get hasBinaryBuffer(){return this._useCCON}get mainBufferBuilder(){return this._mainBufferBuilder}_dumpAsJson(){const i=this.finalizeJsonPart();return this.stringify?JSON.stringify(i,null,this.minify?0:2):i}_dumpAsCCON(){const i=this.finalizeJsonPart(),{_mainBufferBuilder:e}=this,r=0===e.byteLength?[]:[e.get()];return new serialization_1.CCON(i,r)}}exports.Builder=Builder;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeFull=void 0;const cc_1=require("cc");async function deserializeFull(e){const i=new cc_1.deserialize.Details;i.reset();const r=(0,cc_1.deserialize)(e,i),s=i.uuidList;if(!s)return r;if(s.some(e=>"number"==typeof e))throw new Error(`Don't know how to handle numeric UUID in ${s}`);const n={};return await Promise.all(s.map(e=>new Promise((i,r)=>{cc_1.assetManager.loadAny(e,(s,t)=>{s?r(s):(n[e]=t,i())})}))),i.assignAssetsBy((e,i)=>{if(!(e in n))throw new Error(`Deserialized object is referencing ${e} which was not appeared in deserialize details.`);const r=n[e];if(!(r instanceof cc_1.Asset))throw new Error(`Deserialized object is referencing ${e} which was appeared in deserialize details but isn't an asset.`);return r}),r}exports.deserializeFull=deserializeFull;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=require("events");class ComponentManager extends events_1.EventEmitter{constructor(){super(...arguments),this.allow=!1,this._menus=[],this._map={},this._recycle={}}addMenu(e,t,s){void 0===s&&(s=-1),this._menus.push({menuPath:t,component:e,priority:s}),this.emit("add-menu",t)}removeMenu(e){for(let t=0;t<this._menus.length;t++){if(this._menus[t].component!==e)continue;const s=this._menus[t];this._menus.splice(t--,1),this.emit("delete-menu",s.menuPath)}}getMenus(){return this._menus}add(e,t){if(this.allow){this._map[e]=t;try{this.emit("add",e,t)}catch(e){console.error(e)}}}remove(e){if(!this.allow)return;if(!this._map[e])return;const t=this._map[e];this._recycle[e]=this._map[e],delete this._map[e];try{this.emit("remove",e,t)}catch(e){console.error(e)}}clear(){this.allow&&(this._map={},this._recycle={})}getComponent(e){return this._map[e]||null}getComponents(){return this._map}getRecycleComponent(e){return this._recycle[e]||null}getRecycleComponents(){return this._recycle}recycle(e){const t=this._recycle[e];t&&(this._map[e]=t,delete this._recycle[e])}}exports.default=ComponentManager;
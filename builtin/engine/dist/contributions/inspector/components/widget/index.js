"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyed=exports.mounted=exports.components=exports.computed=exports.methods=exports.template=void 0;const fs_1=require("fs"),path_1=require("path");exports.template=fs_1.readFileSync(path_1.join(__dirname,"./index.html"),"utf8");const LockFlags={top:1,middle:2,bottom:4,left:8,center:16,right:32};function mounted(){const e=this;e.resizeObserver=new window.ResizeObserver(()=>{e.$el.getBoundingClientRect().width>300?e.$el.setAttribute("layout","horizontal"):e.$el.setAttribute("layout","vertical")}),e.resizeObserver.observe(e.$el)}function destroyed(){this.resizeObserver.unobserve(this.$el)}exports.methods={isInvalid(e){const t=this;return!(!t.dumps||0===t.length)&&t.dumps.some(i=>i.value[e].value!==t.dump.value[e].value)},change(e,t){this.dump.value[e].value=t,this.dumps&&this.dumps.forEach(i=>{i.value[e].value=t})},getUnit(e){const t=this.dump.value;switch(e){case"editorTop":return t.isAbsoluteTop.value?"px":"%";case"editorBottom":return t.isAbsoluteBottom.value?"px":"%";case"editorLeft":return t.isAbsoluteLeft.value?"px":"%";case"editorRight":return t.isAbsoluteRight.value?"px":"%";case"editorHorizontalCenter":return t.isAbsoluteHorizontalCenter.value?"px":"%";case"editorVerticalCenter":return t.isAbsoluteVerticalCenter.value?"px":"%"}},changeUnit(e){const t=this;function i(i,l){if(!0!==l&&i===t.dump)return;const s=i.value;switch(e){case"editorTop":return s.isAbsoluteTop.value=!s.isAbsoluteTop.value,s.isAbsoluteTop.path;case"editorBottom":return s.isAbsoluteBottom.value=!s.isAbsoluteBottom.value,s.isAbsoluteBottom.path;case"editorLeft":return s.isAbsoluteLeft.value=!s.isAbsoluteLeft.value,s.isAbsoluteLeft.path;case"editorRight":return s.isAbsoluteRight.value=!s.isAbsoluteRight.value,s.isAbsoluteRight.path;case"editorHorizontalCenter":return s.isAbsoluteHorizontalCenter.value=!s.isAbsoluteHorizontalCenter.value,s.isAbsoluteHorizontalCenter.path;case"editorVerticalCenter":return s.isAbsoluteVerticalCenter.value=!s.isAbsoluteVerticalCenter.value,s.isAbsoluteVerticalCenter.path}}const l=i(t.dump,!0);t.dumps&&t.dumps.forEach(i),this.$root.$emit("set-property",{path:l})},select(e){const t=this,i=e.path.find(e=>e&&e.classList&&e.classList.contains("button"));if(!i)return;let l,s;switch(i.getAttribute("dimension")){case"horizontal":l={isAlignLeft:{value:!1},isAlignRight:{value:!1},isAlignHorizontalCenter:{value:!1}};break;case"left":l={isAlignLeft:{value:!0},isAlignRight:{value:!1},isAlignHorizontalCenter:{value:!1}};break;case"center":l={isAlignLeft:{value:!1},isAlignRight:{value:!1},isAlignHorizontalCenter:{value:!0}};break;case"right":l={isAlignLeft:{value:!1},isAlignRight:{value:!0},isAlignHorizontalCenter:{value:!1}};break;case"h-stretch":l={isAlignLeft:{value:!0},isAlignRight:{value:!0},isAlignHorizontalCenter:{value:!1}};break;case"vertical":s={isAlignTop:{value:!1},isAlignVerticalCenter:{value:!1},isAlignBottom:{value:!1}};break;case"top":s={isAlignTop:{value:!0},isAlignVerticalCenter:{value:!1},isAlignBottom:{value:!1}};break;case"middle":s={isAlignTop:{value:!1},isAlignVerticalCenter:{value:!0},isAlignBottom:{value:!1}};break;case"bottom":s={isAlignTop:{value:!1},isAlignVerticalCenter:{value:!1},isAlignBottom:{value:!0}};break;case"v-stretch":s={isAlignTop:{value:!0},isAlignVerticalCenter:{value:!1},isAlignBottom:{value:!0}}}Editor.Message.send("scene","snapshot"),t.dumps&&t.dumps.forEach(e=>{l&&(e.value.isAlignLeft.value!==l.isAlignLeft.value&&(e.value.isAlignLeft.value=l.isAlignLeft.value,t.$root.$emit("set-property",{path:e.path+".isAlignLeft"})),e.value.isAlignRight.value!==l.isAlignRight.value&&(e.value.isAlignRight.value=l.isAlignRight.value,t.$root.$emit("set-property",{path:e.path+".isAlignRight"})),e.value.isAlignHorizontalCenter.value!==l.isAlignHorizontalCenter.value&&(e.value.isAlignHorizontalCenter.value=l.isAlignHorizontalCenter.value,t.$root.$emit("set-property",{path:e.path+".isAlignHorizontalCenter"}))),s&&(e.value.isAlignTop.value!==s.isAlignTop.value&&(e.value.isAlignTop.value=s.isAlignTop.value,t.$root.$emit("set-property",{path:e.path+".isAlignTop"})),e.value.isAlignVerticalCenter.value!==s.isAlignVerticalCenter.value&&(e.value.isAlignVerticalCenter.value=s.isAlignVerticalCenter.value,t.$root.$emit("set-property",{path:e.path+".isAlignVerticalCenter"})),e.value.isAlignBottom.value!==s.isAlignBottom.value&&(e.value.isAlignBottom.value=s.isAlignBottom.value,t.$root.$emit("set-property",{path:e.path+".isAlignBottom"})))})},toggleLock(e){const t=this,i=t.isLock(e);let l=[e],s=t.dump.value._lockFlags.value,o=t.dump.value.isStretchWidth.value,a=t.dump.value.isStretchHeight.value;const r=["left","right"];o&&r.includes(e)&&(l=r);const u=["top","bottom"];a&&u.includes(e)&&(l=u),l.forEach(e=>{const t=LockFlags[e];i?s&=~t:s|=t}),t.dumps&&t.dumps.forEach(e=>{e.value._lockFlags.value=s,t.$root.$emit("set-property",{path:e.path})})},isLock(e){return this.dump.value._lockFlags.value&LockFlags[e]}},exports.computed={dimensionHorizontal(){const{isAlignLeft:e,isAlignRight:t,isAlignHorizontalCenter:i}=this.dump.value;let l="";return e.value&&(l="left"),t.value&&(l="right"),e.value&&t.value&&(l="stretch"),i.value&&(l="center"),l},dimensionVertical(){const{isAlignTop:e,isAlignBottom:t,isAlignVerticalCenter:i}=this.dump.value;let l="";return e.value&&(l="top"),t.value&&(l="bottom"),e.value&&t.value&&(l="stretch"),i.value&&(l="middle"),l}},exports.components={"widget-rect":require("./rect"),"widget-icon":require("./icon")},exports.mounted=mounted,exports.destroyed=destroyed;
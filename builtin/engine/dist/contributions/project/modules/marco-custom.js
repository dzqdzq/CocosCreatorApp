"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const Vue=require("vue/dist/vue"),utils_1=require("./utils");exports.style="\n.item { display: flex; }\nui-prop { flex: 1; --left-width: 40%; }\n.item ui-prop { padding-right: 6px; }\nui-label { padding-left: 7px; }\nui-prop ui-icon { visibility: hidden; cursor: pointer; opacity: 0.6; }\nui-prop ui-icon:hover { opacity: 1; }\nui-prop:hover ui-icon { visibility: visible; }\n\n.add { text-align: center; }\n.add ui-button { width: 85%;  }\n",exports.template='\n<ui-section expand class="modules config">\n    <ui-label slot="header" value="Custom Macro"></ui-label>\n\n    <div class="item"\n        v-for="item in macro"\n    >\n        <ui-prop>\n            <div slot="label">\n                <ui-icon value="del"\n                    @click="delMacro(item)"\n                ></ui-icon>\n                <ui-icon value="edit"\n                    @click="editMacro($event, item.key)"\n                ></ui-icon>\n                <ui-label\n                    v-if="item.key !== editName"\n                    :value="item.key"\n                ></ui-label>\n                <ui-input\n                    v-else\n                    :value="item.key"\n                    @blur="changeMacroName(item, $event.target.value)"\n                    @confirm="changeMacroName(item, $event.target.value)"\n                ></ui-input>\n            </div>\n            <ui-checkbox slot="content"\n                :value="item.value"\n                @confirm="toggleMacro(item)"\n            ></ui-checkbox>\n        </ui-prop>\n    </div>\n    \n    <div\n        v-show="generateMacro"\n    >\n        <ui-prop>\n            <div slot="label">\n                <ui-icon value="del"></ui-icon>\n                <ui-icon value="edit"></ui-icon>\n                <ui-input ref="addInput"\n                    @blur="confirmNewMacro"\n                    @confirm="confirmNewMacro"\n                ></ui-input>\n            </div>\n            <ui-checkbox slot="content" disabled></ui-checkbox>\n        </ui-prop>\n    </div>\n\n    <div class="add">\n        <ui-button\n            @confirm="addMacro"\n        >\n            <ui-icon value="add"></ui-icon>\n        </ui-button>\n    </div>\n</ui-section>\n',exports.$={modules:".modules"};const component={data:{generateMacro:!1,macro:[],editName:""},methods:{t:e=>e?(e=e.replace("i18n:",""),Editor.I18n.t(e)||e):"",async refresh(){const e=await Editor.Profile.getProject("engine","macroCustom");this.macro=e},async save(){Editor.Profile.setProject("engine","macroCustom",this.macro)},addMacro(){const e=this;e.generateMacro=!0,requestAnimationFrame(()=>{e.$refs.addInput.focus()})},editMacro(e,n){this.editName=n;const i=e.target.parentElement.parentElement;requestAnimationFrame(()=>{i.querySelector("ui-input").focus()})},async delMacro(e){const n=this;if(0===(await Editor.Dialog.info("Do you want to delete custom macro?",{title:"Delete Custom Macro",buttons:["Confirm","Cancel"]})).response){const i=n.macro.indexOf(e);i>=0&&(n.macro.splice(i,1),n.save())}},confirmNewMacro(){const e=this;e.generateMacro=!1;const n=e.$refs.addInput.value;e.$refs.addInput.value="",n&&(utils_1.checkMacro(n)?(e.macro.push({key:n,value:!1}),e.editName="",e.save()):console.warn(`Invalid macro: ${n}`))},toggleMacro(e){e.value=!e.value,this.save()},changeMacroName(e,n){const i=this;if(!utils_1.checkMacro(n))return console.warn(`Invalid macro: ${n}`),void(i.editName="");e.key=n,i.save()}},components:{}};async function ready(){component.el=this.$.modules,new Vue(component).refresh()}exports.ready=ready;
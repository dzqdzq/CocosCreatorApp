"use strict";const{join:join}=require("path"),{writeFileSync:writeFileSync,readFileSync:readFileSync,readdirSync:readdirSync,statSync:statSync,outputFileSync:outputFileSync}=require("fs-extra");function readDirRecurse(e,t,n=""){const r=readdirSync(e);for(const s of r){const r=join(e,s),c=statSync(r),i=join(n,s);c.isFile()?t(i):readDirRecurse(r,t,i)}}exports.tsc=function(){return["./"]},exports.lessc=function(){return[{source:"./source/contributions/project/modules/project-modules.less",dist:"./dist/contributions/project/modules/project-modules.css"},{source:"./source/contributions/preferences/engine.less",dist:"./dist/contributions/preferences/engine.css"}]},exports.file=function(e){const t=join(__dirname,"./static/cc-template.d.ts"),n=join(__dirname,"./modules/cc/cc.d.ts"),r=join(e.enginePath,"./bin/.declarations/cc.d.ts"),s=join(e.enginePath,"./bin/.declarations/cc.editor.d.ts");writeFileSync(n,`\n/// <reference path="${r}"/>\n\n/// <reference path="${s}"/>\n\n${readFileSync(t)}\n\n`.replace(/\\/g,"\\\\"));const c=join(__dirname,"./modules/cc/editor");var i;return readDirRecurse(join(e.enginePath,"editor","exports"),e=>{const t=e.endsWith(".ts")?e.substr(0,e.length-3):e,n=join(c,`${t}.js`),r=`\nconst modsMgr = require('cc/mods-mgr');\nmodule.exports = modsMgr.syncImport('${`cc/editor/${((e=e).endsWith(".ts")?e.substr(0,e.length-3):e).replace(/\\/g,"\\\\")}`}');\n`;outputFileSync(n,r,{encoding:"utf8"})}),[{source:"./source",dist:"./dist",filter:e=>/\.html$/.test(e)},{source:"./modules/cc",dist:"../../node_modules/cc"}]},exports.clear=function(){return["./dist"]};
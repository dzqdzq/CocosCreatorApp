"use strict";module.exports=function(t){const{Widget:e,UITransform:o}=t,i=global.cc,n=1,s=2,r=4,c=8,g=16,l=32;e.prototype.setLockTop=function(t){this._setLock(n,t)},e.prototype.getLockTop=function(){return this._lockFlags&n},e.prototype.setLockBottom=function(t){this._setLock(r,t)},e.prototype.getLockBottom=function(){return this._lockFlags&r},e.prototype.setLockLeft=function(t){this._setLock(c,t)},e.prototype.getLockLeft=function(){return this._lockFlags&c},e.prototype.setLockRight=function(t){this._setLock(l,t)},e.prototype.getLockRight=function(){return this._lockFlags&l},e.prototype.setLockHorizontalCenter=function(t){this._setLock(g,t)},e.prototype.getLockHorizontalCenter=function(){return this._lockFlags&g},e.prototype.setLockVerticalCenter=function(t){this._setLock(s,t)},e.prototype.getLockVerticalCenter=function(){return this._lockFlags&s},e.prototype._setLock=function(t,e){e!==(this._lockFlags&t)>0&&(e?this._lockFlags|=t:this._lockFlags&=~t)},e.prototype._adjustWidgetToAllowMovingInEditor=function(t){if(!(t&i.internal.TransformBit.POSITION))return;if(i._widgetManager.isAligning)return;const e=this,o=e.node.getPosition(),n=this._lastPos,s=new i.Vec3(o);s.subtract(n);let r=e.node.parent;const c=new i.Vec3(1,1,1);if(e.target&&(r=e.target,i.internal.computeInverseTransForTarget(e.node,r,new i.Vec3,c)),!r)return;const g=i.internal.getReadonlyNodeSize(r),l=new i.Vec3;0!==g.width&&0!==g.height&&i.Vec3.set(l,s.x/g.width,s.y/g.height,l.z),e.isAlignTop&&!e.getLockTop()&&(e._top-=(e._isAbsTop?s.y:l.y)*c.y),e.isAlignBottom&&!e.getLockBottom()&&(e._bottom+=(e._isAbsBottom?s.y:l.y)*c.y),e.isAlignLeft&&!e.getLockLeft()&&(e._left+=(e._isAbsLeft?s.x:l.x)*c.x),e.isAlignRight&&!e.getLockRight()&&(e._right-=(e._isAbsRight?s.x:l.x)*c.x),e.isAlignHorizontalCenter&&!e.getLockHorizontalCenter()&&(e._horizontalCenter+=(e._isAbsHorizontalCenter?s.x:l.x)*c.x),e.isAlignVerticalCenter&&!e.getLockVerticalCenter()&&(e._verticalCenter+=(e._isAbsVerticalCenter?s.y:l.y)*c.y),this._recursiveDirty(),e.node.getPosition(e._lastPos)},e.prototype._adjustWidgetToAllowResizingInEditor=function(){if(i._widgetManager.isAligning)return;const t=this,e=t.node.getComponent(o);if(!e)return;this.setDirty();const n=e.contentSize,s=this._lastSize,r=new i.Vec3(n.width-s.width,n.height-s.height,0);let c=t.node.parent;const g=new i.Vec3(1,1,1);if(t.target&&(c=t.target,i.internal.computeInverseTransForTarget(t.node,c,new i.Vec3,g)),!c)return;const l=i.internal.getReadonlyNodeSize(c),a=new i.Vec3;0!==l.width&&0!==l.height&&i.Vec3.set(a,r.x/l.width,r.y/l.height,a.z);const h=e.anchorPoint;t.isAlignTop&&!t.getLockTop()&&(t._top-=(t._isAbsTop?r.y:a.y)*(1-h.y)*g.y),t.isAlignBottom&&!t.getLockBottom()&&(t._bottom-=(t._isAbsBottom?r.y:a.y)*h.y*g.y),t.isAlignLeft&&!t.getLockLeft()&&(t._left-=(t._isAbsLeft?r.x:a.x)*h.x*g.x),t.isAlignRight&&!t.getLockRight()&&(t._right-=(t._isAbsRight?r.x:a.x)*(1-h.x)*g.x),this._recursiveDirty()}};
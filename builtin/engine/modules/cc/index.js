"use strict";const ps=require("path"),ipc=require("@base/electron-base-ipc"),vStacks=require("v-stacks"),modsMgr=require("./mods-mgr");if("__MAIN__"in window){const e=new Error("Try not to run the engine in the window process.");e.stack=vStacks.ignoreStack(e.stack,1),console.warn(e)}const info=ipc.sendSync("packages-engine:query-engine-info");window.CC_EDITOR=!0,window.EditorExtends=require(ps.join(info.editor,"./builtin/engine/dist/editor-extends"));const timeLabel="Import engine";let ccm;console.time(timeLabel);try{ccm=modsMgr.syncImport("cc")}catch(e){throw Editor.Message.send("engine","import-engine-error",e.toString()),e}console.timeEnd(timeLabel),window.ccm=ccm,ccm.assetManager.init({importBase:"import://",nativeBase:"import://"}),require("./polyfill/engine"),module.exports=ccm,EditorExtends.init();const handle=require("./overwrite");handle(ccm,info);
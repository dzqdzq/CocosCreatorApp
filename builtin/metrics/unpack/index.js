const packageJSON=require("../package.json"),JSZip=require("jszip"),{join:join,basename:basename}=require("path"),{writeFileSync:writeFileSync,readdirSync:readdirSync,statSync:statSync,readFileSync:readFileSync}=require("fs-extra"),skips=[".idea","unpack",".DS_Store",".git",".idea",".gitignore","src"];function step(e,n,i,a){if(i=i||basename(e),skips.includes(i))return;const r=statSync(e);if(r.isDirectory()){const r=readdirSync(e);for(const c of r)step(join(e,c),a?n:n.folder(i))}else r.isFile()?n.file(i,readFileSync(e)):console.error(`${e} was not added to zip!`)}function unpack(){const e=join(__dirname,`../../${packageJSON.name}`),n=join(e,`unpack/${packageJSON.name}.zip`),i=new JSZip;step(e,i,packageJSON.name,!0),i.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(e=>{writeFileSync(n,e)})}(async()=>{unpack()})();
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logMgr=exports.LogMgr=void 0;const path_1=require("path"),fs_extra_1=require("fs-extra");function getRealTime(){var t=new Date;return t.toLocaleDateString().replace(/\//g,"-")+" "+t.toTimeString().slice(0,8)}class LogMgr{static Name="metrics.log";logFile=void 0;outputLog=!1;debug=!1;async init(t=!1,e=!1){this.outputLog=t,this.debug=e;try{Editor.Project.tmpDir&&(this.logFile=(0,path_1.join)(Editor.Project.tmpDir,"logs",LogMgr.Name)),this.outputLog&&this.logFile&&(this.debug?await(0,fs_extra_1.appendFile)(this.logFile,"Cocos Creator v"+Editor.App.version+"\n"):await(0,fs_extra_1.outputFile)(this.logFile,"Cocos Creator v"+Editor.App.version+"\n"))}catch(t){console.debug(t)}}async collectToFile(t,e){try{var o;"string"!=typeof e&&(e=JSON.stringify(e)),this.debug&&console.debug(t,e),this.outputLog&&this.logFile&&(o="----------------------------------------------------------------\n"+getRealTime()+`: ${t}:${e}
`,await(0,fs_extra_1.appendFile)(this.logFile,o))}catch(t){console.debug(t)}}}exports.LogMgr=LogMgr,exports.logMgr=new LogMgr;
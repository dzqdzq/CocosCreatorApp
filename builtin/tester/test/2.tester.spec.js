"use strict";const{expect:expect}=require("chai");function wait(t){return new Promise(e=>{setTimeout(()=>{e()},t||200)})}describe("测试 Tester",()=>{describe("Ipc 模块",()=>{it("启动消息记录器",()=>{Tester.Ipc.record()}),it("模拟测试消息",async()=>{Editor.Message.broadcast("tester:test",1,2,3),await wait(500),expect(Tester.Ipc.count("tester:test")).to.equal(1),Editor.Message.broadcast("tester:test",1,2,3),await wait(500),expect(Tester.Ipc.count("tester:test")).to.equal(2);const t=Tester.Ipc.get("tester:test",0),e=Tester.Ipc.get("tester:test",1);expect(t.params).to.deep.equal([1,2,3]),expect(e.params).to.deep.equal([1,2,3]),expect(e.time).to.least(t.time)})}),describe("dom 模块",async()=>{await Editor.Panel.open("tester.test");const t=Tester.Dom.selector("tester.test").find(".test-button");await t.click(),expect(await t.attr("active")).to.equal("true");const e=Tester.Dom.selector("tester.test").find(".test-input");await e.click(),await e.input("即将清空"),await e.esc(),await e.input("测试文字"),await e.enter(),await Editor.Panel.close("tester.test")})});
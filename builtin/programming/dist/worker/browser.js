"use strict";var __importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.unload=exports.load=void 0;const electron_worker_1=__importDefault(require("@base/electron-worker")),asserts_1=require("../utils/asserts"),path_1=__importDefault(require("path")),worker_message_define_1=require("../worker-message-define");class ProgrammingWorker{constructor(){this._worker=electron_worker_1.default.create("Programming")}static async create(){const r=new ProgrammingWorker;return await r._initialize(),r}shutdown(){}async request(r,...e){return await this._worker.send(r,...e)}openDevTools(){this._worker.debug(!0)}async _initialize(){const r=require.resolve("@editor/creator/dist/require");await this._worker.init({preload:r}),this._worker.require(path_1.default.join(__dirname,"./worker-index")),this._worker.debug(!1)}}let programmingWorker=null;function assertsLoaded(r){asserts_1.assertsNonNullable(r,"Programming worker has not been created.")}async function load(){asserts_1.asserts(!programmingWorker,"Programming worker has already been created."),programmingWorker=await ProgrammingWorker.create()}async function unload(){assertsLoaded(programmingWorker),programmingWorker.shutdown()}exports.load=load,exports.unload=unload,exports.methods=worker_message_define_1.workerMessageNames.reduce((r,e)=>(r[e]=(async(...r)=>(asserts_1.assertsNonNullable(programmingWorker),await programmingWorker.request(e,...r))),r),{}),exports.methods["open-dev-tools"]=(()=>{programmingWorker?programmingWorker.openDevTools():console.error("Programming worker has not been ready.")});
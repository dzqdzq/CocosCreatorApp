"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unload=exports.load=exports.methods=void 0;const browser_1=require("../worker/browser"),intelligence_1=require("../intelligence"),query_shared_settings_1=require("../shared/query-shared-settings");async function load(){Editor.Message.__protected__.addBroadcastListener("asset-db:ready",regenerateCommonTsConfig),Editor.Message.__protected__.addBroadcastListener("asset-db:db-ready",regenerateCommonTsConfig),Editor.Message.__protected__.addBroadcastListener("asset-db:db-close",regenerateCommonTsConfig),await(0,browser_1.load)()}async function unload(){Editor.Message.__protected__.removeBroadcastListener("asset-db:ready",regenerateCommonTsConfig),Editor.Message.__protected__.removeBroadcastListener("asset-db:db-ready",regenerateCommonTsConfig),Editor.Message.__protected__.removeBroadcastListener("asset-db:db-close",regenerateCommonTsConfig)}async function regenerateCommonTsConfig(){await(0,intelligence_1.generateCommonTsConfig)()}exports.methods=Object.assign(Object.assign({},browser_1.methods),{"query-shared-settings":async()=>await(0,query_shared_settings_1.querySharedSettings)(console),async"custom-macro-changed"(){await(0,intelligence_1.updateCustomMacro)()}}),exports.load=load,exports.unload=unload;
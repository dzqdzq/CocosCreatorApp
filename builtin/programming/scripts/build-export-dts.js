const gift=require("tfig"),ps=require("path"),fs=require("fs-extra"),JSON5=require("json5");function absolutePath(e){return ps.join(__dirname,e).replace(/\\/g,"/")}function genModuleComment(e){let t="/**\n";return e.split("\n").forEach(e=>{t+=` * ${e}\n`}),t+=" **/\n"}function rebaseRelativePath(e,t,n){const i=ps.join(ps.dirname(t),e);return ps.relative(ps.dirname(n),i).replace(/\\/g,"/")}const configFilePath=absolutePath("../cce-module.jsonc"),configFileDir=ps.dirname(configFilePath),moduleMap=JSON5.parse(fs.readFileSync(configFilePath,"utf8"));for(const[e,t]of Object.entries(moduleMap)){const n=ps.join(configFileDir,t.types);gift.bundle({input:[n],entries:{[e]:n},output:ps.join(__dirname,"../editor-export/",e.replace(/\//g,".")+".d.ts")}).groups.forEach(e=>{fs.outputFileSync(e.path,genModuleComment(t.description)+e.code,"utf8")})}
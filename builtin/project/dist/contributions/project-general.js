"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.methods=exports.template=exports.$=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),Vue=require("vue/dist/vue");exports.style="\n.general > ui-prop { --left-width: 40%; }\n",exports.$={general:".general"},exports.template=fs_1.readFileSync(path_1.join(__dirname,"../../static/contributions/project-general.html"),"utf8");const component={data:{renderPipeline:null,renderPipelines:[]},methods:{async refresh(){const e=this;e.renderPipeline=await Editor.Profile.getProject("project","general.renderPipeline");const r=await Editor.Package.getPackages({name:"asset-db",enable:!0});r&&r[0]||await new Promise(e=>{setTimeout(e,1e4)});const t=await Editor.Profile.getConfig("engine","deferred_pipeline");let a=await Editor.Message.request("asset-db","query-assets",{pattern:"db://**/*.rpp"});Array.isArray(a)||(a=[]),t||(a=a.filter(e=>"5d45ba66-829a-46d3-948e-2ed3fa7ee421"!==e.uuid),"5d45ba66-829a-46d3-948e-2ed3fa7ee421"===e.renderPipeline&&(await Editor.Profile.removeProject("project","general.renderPipeline","project"),e.renderPipeline=await Editor.Profile.getProject("project","general.renderPipeline")));const i=await Promise.all(a.map(e=>new Promise(r=>{Editor.Message.request("asset-db","query-asset-meta",e.uuid).then(r).catch(()=>{r(null)})})));e.renderPipelines=a.map((e,r)=>{const t=i[r];return{uuid:e.uuid,name:e.name,contributed:t&&t.userData&&t.userData.contributed?t.userData.contributed:""}})},_onRenderPipelineChanged(e){Editor.Profile.setProject("project","general.renderPipeline",e.target.value)}}};function ready(){component.el=this.$.general,new Vue(component).refresh()}exports.methods={},exports.ready=ready;
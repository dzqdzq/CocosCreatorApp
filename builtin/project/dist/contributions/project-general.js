"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.methods=exports.template=exports.$=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),Vue=require("vue/dist/vue");exports.style="\n.general > ui-prop { --left-width: 40%; }\n",exports.$={general:".general"},exports.template=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../static/contributions/project-general.html"),"utf8");const component={data:{renderPipeline:null,renderPipelines:[],defaultScene:""},methods:{async refresh(){const e=this;e.renderPipeline=await Editor.Profile.getProject("project","general.renderPipeline"),e.defaultScene=await Editor.Profile.getProject("scene","current-scene");const t=await Editor.Package.getPackages({name:"asset-db",enable:!0});t&&t[0]||await new Promise(e=>{setTimeout(e,1e4)});const r=await Editor.Profile.getConfig("engine","deferred_pipeline");let a=await Editor.Message.request("asset-db","query-assets",{pattern:"db://**/*.rpp"});Array.isArray(a)||(a=[]),r||(a=a.filter(e=>"5d45ba66-829a-46d3-948e-2ed3fa7ee421"!==e.uuid),"5d45ba66-829a-46d3-948e-2ed3fa7ee421"===e.renderPipeline&&(await Editor.Profile.removeProject("project","general.renderPipeline","project"),e.renderPipeline=await Editor.Profile.getProject("project","general.renderPipeline")));const n=await Promise.all(a.map(e=>new Promise(t=>{Editor.Message.request("asset-db","query-asset-meta",e.uuid).then(t).catch(()=>{t(null)})})));e.renderPipelines=a.map((e,t)=>{const r=n[t];return{uuid:e.uuid,name:e.name,contributed:r&&r.userData&&r.userData.contributed?r.userData.contributed:""}})},_onRenderPipelineChanged(e){Editor.Profile.setProject("project","general.renderPipeline",e.target.value)},_onDefaultSceneChanged(e){Editor.Profile.setProject("scene","current-scene",e.target.value)}}};function ready(){component.el=this.$.general,new Vue(component).refresh()}exports.methods={},exports.ready=ready;
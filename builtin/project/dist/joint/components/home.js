"use strict";async function mounted(){this.layouts=await Editor.Profile.getProject("project","custom_joint_texture_layouts")||[],this.joint=this.layouts[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.components=exports.watch=exports.data=void 0,exports.data={joint:null,layouts:[],info:"Valid on all devices",blocks:[],renameIndex:-1,animation:0,size:0,pixels:0,doc:Editor.Utils.Url.getDocUrl("animation/joint-texture-layout.html")},exports.watch={layouts:{deep:!0,handler(){this.save()}},blocks(){const e=this;e.animation=0,e.size=0,e.pixels=0,e.blocks.forEach(t=>{e.pixels+=t.pixels}),e.size=12*Math.ceil(Math.sqrt(e.pixels)/12)},size(e){const t=this;t.joint.textureLength=e,t.info=e<1024?"Valid on all devices":e<2048?"May exceeds max texture size limit on devices with no float texture support":"May exceeds max texture size limit on many mobile devices"}},exports.components={layout:require("./layout")},exports.methods={getName(e){return this.layouts[e].name||`Texture - ${e}`},async removeLayout(e){const t=this,o=t.layouts[e];if(!o)return;let s=Editor.I18n.t("project.joint.removeTextureWarn");s=s.replace("${name}",t.getName(e)),1!==(await Editor.Dialog.warn(s,{buttons:["Yes","Cancel"],default:0,cancel:1,title:Editor.I18n.t("project.remove")})).response&&(o===t.joint&&(t.joint=null),t.layouts.splice(e,1))},renameStart(e){const t=this;t.renameIndex!==e&&(t.renameIndex=e,t.$nextTick(()=>{t.$refs.renameInput[e].value=t.getName(e),t.$refs.renameInput[e].focus()}))},renameConfirm(e){const t=e.target.value,o=this.layouts[this.renameIndex];this.renameIndex=-1,t&&o.name!==t&&(o.name=t)},removeContent(e){this.joint.contents.splice(e,1)},addLayout(){const e=`Texture - ${this.layouts.length}`;this.layouts.push({name:e,textureLength:0,contents:[]})},addContent(){this.joint.contents.push({skeleton:"",clips:[]})},save(){const e=this;void 0===e._timer&&(e._timer=setTimeout(()=>{e._timer=void 0,Editor.Profile.setProject("project","custom_joint_texture_layouts",JSON.parse(JSON.stringify(e.layouts)))},400))}},exports.mounted=mounted;
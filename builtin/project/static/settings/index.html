<div class="settings">
    <div class="settings-loading" v-if="!dbReady">
        <ui-loading></ui-loading>
    </div>
    <div class="settings-info" v-else>
        <div class="slider">
            <!-- 左侧分类 -->
            <ul>
                <template v-for="(item, label) in data">
                    <li>
                        <!-- 每个功能的名字 -->
                        <ui-label :value="item.title"></ui-label>
                        <ul>
                            <!-- 功能里注册的选项卡 -->
                            <li v-for="subItem,key in item.tabs" :active="tab === label && subTab === key"
                                @click="changeTab(label, key)" :title="t(subItem.label)">
                                <ui-label :value="subItem.label"></ui-label>
                            </li>
                        </ul>
                    </li>
                </template>
            </ul>
        </div>

        <!-- 右侧详细设置 -->
        <div class="content">
            <!-- 自动渲染 -->
            <ui-setting type="project" v-if="data[tab] && data[tab].tabs[subTab] && data[tab].tabs[subTab].content"
                :package="tab">
                <div v-for="(config, path) in data[tab].tabs[subTab].content" :key="path">
                    <ui-icon value="setting" @click="popup($event.target.pageX, $event.target.pageY, path)"></ui-icon>
                    <ui-prop type="ui" :label="config.label" :label-tooltip="config.description"
                        :render="getRenderText(config.render, path)"></ui-prop>
                </div>
            </ui-setting>

            <!-- 自定义选项 -->
            <div :ref="`${tab}-${subTab}`" v-if="data[tab] && data[tab].tabs[subTab] && data[tab].tabs[subTab].custom"
                :class="{ 'align-custom-panel': alignCustomPanelFollowContent }"></div>
        </div>
    </div>

</div>
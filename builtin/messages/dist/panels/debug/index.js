"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const path_1=require("path"),fs_extra_1=require("fs-extra"),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1,exports.style=fs_extra_1.readFileSync(path_1.join(__dirname,"./index.css"),"utf8"),exports.template=fs_extra_1.readFileSync(path_1.join(__dirname,"../../../static","./debug/index.html"),"utf8");const list=[];exports.$={content:".content"},exports.methods={broadcast(t){list.push(t),list.length>300&&list.shift()},request(t){t.loading=!0,list.push(t),list.length>300&&list.shift()},reply(t){const s=list.find(s=>s.id===t.id);s&&(s.loading=!1),list.push(t),list.length>300&&list.shift()},send(t){list.push(t),list.length>300&&list.shift()}},exports.ready=function(){Editor.Message.broadcast("messages:stop");const t={app:path_1.join(Editor.App.path,"builtin"),global:path_1.join(Editor.App.home,"packages"),local:path_1.join(Editor.Project.path,"packages")};new Vue({el:this.$.content,data:{list:list,message:null,record:!1},watch:{list(){const t=this.$refs.slider;t.clientHeight+t.scrollTop>t.scrollHeight-10&&requestAnimationFrame(()=>{t.scrollTop=t.scrollHeight-t.clientHeight})}},methods:{start(){Editor.Message.broadcast("messages:start"),this.record=!0},stop(){Editor.Message.broadcast("messages:stop"),this.record=!1},clear(){for(this.message=null;list.length;)list.shift()},getURL:(s="")=>(s=s.substr(1,s.length-2),Editor.Utils.Path.contains(t.app,s)?"db://packages/"+path_1.relative(t.app,s):Editor.Utils.Path.contains(t.global,s)?"db://packages/"+path_1.relative(t.global,s):Editor.Utils.Path.contains(t.local,s)?"db://packages/"+path_1.relative(t.local,s):s)}})},exports.beforeClose=function(){},exports.close=function(){Editor.Message.broadcast("messages:stop")};
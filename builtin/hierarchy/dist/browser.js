"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const sceneState={};exports.methods={open(){Editor.Panel.open("hierarchy")},async staging(e){e&&e.assetUuid&&(sceneState[e.assetUuid]=e,e.expandLevels&&e.expandLevels.length&&Editor.Profile.setTemp("hierarchy",e.assetUuid,e))},async unstaging(){const e=await Editor.Message.request("scene","query-current-scene");let r=sceneState[e];return!r&&e&&(r=await Editor.Profile.getTemp("hierarchy",e)),r||(r={assetUuid:"",animationUuid:"",expandLevels:["0"]}),Array.isArray(r.expandLevels)||(r.expandLevels=["0"]),e&&(r.assetUuid=e),r},async"link-prefab"(){Editor.Message.send("scene","snapshot");const e=Editor.Selection.getLastSelected("node"),r=Editor.Selection.getLastSelected("asset");let t="";if(e){(await Editor.Message.request("scene","query-node",e)).isScene&&(t=Editor.I18n.t("hierarchy.menu.link_prefab_error_node_isScene"))}else t=Editor.I18n.t("hierarchy.menu.link_prefab_error_node_empty");if(r){const e=await Editor.Message.request("asset-db","query-asset-info",r);e&&"cc.Prefab"===e.type||(t=Editor.I18n.t("hierarchy.menu.link_prefab_error_asset_invalid"))}else t=Editor.I18n.t("hierarchy.menu.link_prefab_error_asset_empty");if(t)return void await Editor.Dialog.warn(t,{title:Editor.I18n.t("hierarchy.operate.dialogWarning")});1!==(await Editor.Dialog.warn(Editor.I18n.t("hierarchy.menu.link_prefab_make_sure"),{buttons:["Yes","Cancel"],default:0,cancel:1,title:Editor.I18n.t("hierarchy.operate.dialogWarning")})).response&&await Editor.Message.request("scene","link-prefab",e,r)},async"unlink-prefab"(){Editor.Message.send("scene","snapshot");const e=Editor.Selection.getLastSelected("node");let r="";if(e){(await Editor.Message.request("scene","query-node",e)).__prefab__||(r=Editor.I18n.t("hierarchy.menu.unlink_prefab_error_prefab_empty"))}else r=Editor.I18n.t("hierarchy.menu.link_prefab_error_node_empty");r?await Editor.Dialog.warn(r,{title:Editor.I18n.t("hierarchy.operate.dialogWarning")}):await Editor.Message.request("scene","unlink-prefab",e,!1)},async"unlink-prefab-recursively"(){Editor.Message.send("scene","snapshot");const e=Editor.Selection.getLastSelected("node");let r="";if(e){(await Editor.Message.request("scene","query-node",e)).__prefab__||(r=Editor.I18n.t("hierarchy.menu.unlink_prefab_error_prefab_empty"))}else r=Editor.I18n.t("hierarchy.menu.link_prefab_error_node_empty");r?await Editor.Dialog.warn(r,{title:Editor.I18n.t("hierarchy.operate.dialogWarning")}):await Editor.Message.request("scene","unlink-prefab",e,!0)}};
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.popupContextMenu=exports.popupSearchMenu=exports.popupPanelMenu=exports.popupCreateMenu=void 0;const electron_1=require("electron"),utils=__importStar(require("./utils")),panel_data_1=require("./panel-data");function createMenu(e){return[{template:"create-node",enabled:utils.enableContextMenu(),click:t=>(e(t.params[0]),!1)}]}async function popupCreateMenu(){Editor.Menu.popup({menu:createMenu(e=>{panel_data_1.vueElement.tree.addTo(e)})})}function createPanelMenu(){return[{label:Editor.I18n.t("hierarchy.menu.newNode"),enabled:utils.enableContextMenu(),submenu:createMenu(e=>{panel_data_1.vueElement.tree.addTo(e)})},{label:Editor.I18n.t("hierarchy.menu.paste"),accelerator:"CmdOrCtrl+V",enabled:!utils.isEmptyCopyNodes()&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.paste()}}]}async function popupPanelMenu(){Editor.Menu.popup({menu:createPanelMenu()})}function createSearchMenu(){const{searchType:e}=panel_data_1.vueElement.panel;return[{label:Editor.I18n.t("hierarchy.menu.searchName"),type:"radio",checked:"name"===e,click(){panel_data_1.vueElement.panel.searchType="name"}},{label:Editor.I18n.t("hierarchy.menu.searchUuid"),type:"radio",checked:"uuid"===e,click(){panel_data_1.vueElement.panel.searchType="uuid"}},{label:Editor.I18n.t("hierarchy.menu.searchPath"),type:"radio",checked:"path"===e,click(){panel_data_1.vueElement.panel.searchType="path"}},{label:Editor.I18n.t("hierarchy.menu.searchComponent"),type:"radio",checked:"component"===e,click(){panel_data_1.vueElement.panel.searchType="component"}},{label:Editor.I18n.t("hierarchy.menu.searchAsset"),type:"radio",checked:"asset"===e,click(){panel_data_1.vueElement.panel.searchType="asset"}}]}async function popupSearchMenu(){Editor.Menu.popup({menu:createSearchMenu()})}function createConsoleMenu(e){return[{type:"separator"},{label:Editor.I18n.t("hierarchy.menu.showUuid"),click(){electron_1.clipboard.writeText(e.uuid),console.info("UUID ",Editor.I18n.t("hierarchy.menu.doneCopied")," ",e.uuid)}},{label:Editor.I18n.t("hierarchy.menu.showPath"),click(){electron_1.clipboard.writeText(e.path),console.info("PATH ",Editor.I18n.t("hierarchy.menu.doneCopied")," ",e.path)}}]}function createSceneMenu(e){return[{label:Editor.I18n.t("hierarchy.menu.newNode"),enabled:!utils.canNotCreateNode(e)&&utils.enableContextMenu(),submenu:createMenu(t=>{t.parent=e.uuid,panel_data_1.vueElement.tree.addTo(t)})},{label:Editor.I18n.t("hierarchy.menu.paste"),accelerator:"CmdOrCtrl+V",enabled:!utils.canNotPasteNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.paste(e.uuid)}},{type:"separator"},{label:Editor.I18n.t("hierarchy.menu.locateAsset"),enabled:utils.isExistedAsset(),click(){panel_data_1.vueElement.tree.twinkleAsset()}},...createConsoleMenu(e)]}function createNodeMenu(e){return[{label:Editor.I18n.t("hierarchy.menu.newNode"),enabled:!utils.canNotCreateNode(e)&&utils.enableContextMenu(),submenu:createMenu(t=>{t.parent=e.uuid,panel_data_1.vueElement.tree.addTo(t)})},{type:"separator"},{label:Editor.I18n.t("hierarchy.menu.copy"),accelerator:"CmdOrCtrl+C",enabled:!utils.canNotCopyNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.copy(e.uuid)}},{label:Editor.I18n.t("hierarchy.menu.duplicate"),accelerator:"CmdOrCtrl+D",enabled:!utils.canNotCopyNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.duplicate(e.uuid)}},{label:Editor.I18n.t("hierarchy.menu.cut"),accelerator:"CmdOrCtrl+X",enabled:!utils.canNotCutNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.cut(e.uuid)}},{label:Editor.I18n.t("hierarchy.menu.paste"),accelerator:"CmdOrCtrl+V",enabled:!utils.canNotPasteNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.paste(e.uuid)}},{label:Editor.I18n.t("hierarchy.menu.rename"),accelerator:"Enter",enabled:!utils.canNotRenameNode(e)&&utils.enableContextMenu(),click(){e.state="rename"}},{type:"separator"},{label:Editor.I18n.t("assets.menu.selectAll"),accelerator:"CmdOrCtrl+A",click(){panel_data_1.vueElement.tree.selectAll(e.uuid)}},{type:"separator"},{label:Editor.I18n.t("hierarchy.menu.delete"),accelerator:"Delete",enabled:!utils.canNotDeleteNode(e)&&utils.enableContextMenu(),click(){panel_data_1.vueElement.tree.delete(e.uuid)}},...createConsoleMenu(e)]}async function popupContextMenu(e){const t=e.isScene||e.isPrefabRoot?createSceneMenu(e):createNodeMenu(e);Editor.Menu.popup({menu:t})}exports.popupCreateMenu=popupCreateMenu,exports.popupPanelMenu=popupPanelMenu,exports.popupSearchMenu=popupSearchMenu,exports.popupContextMenu=popupContextMenu;
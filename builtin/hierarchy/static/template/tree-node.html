<div>
    <ui-drag-item class="tree-node" type="cc.Node"
        :draggable="draggable.toString()"
        :state="state"
        :selected="isSelected"
        :style="{ paddingLeft: node.left + 'px' }"
        :class="{'parent':node.isParent}"
        :expand="node.isExpand"
        :is-scene="node.isScene"
        :is-prefab-root="node.isPrefabRoot"
        :is-prefab-node="node.isPrefabNode"
        :is-animation-node="node.isAnimationNode"
        :active="node.isActive.toString()"
        @click.right.stop="popupMenu(node)"
        @click.stop="click(node, $event)"
        @dragstart="dragStart(node, $event)" 
        @dragover="dragOver(node, $event)"
        @dragleave="dragLeave(node, $event)"
        @drop="drop(node, $event)"
        @dblclick="dblclick(node)"
    >
        <ui-icon class="arrow" value="arrow-triangle"
            :isParent="node.isParent" 
            @click.stop="toggle(node,$event)"
            @dblclick.stop
        ></ui-icon>

        <ui-icon class="root" value="scene" color="true"
            v-if="node.isScene"
        ></ui-icon>

        <ui-icon class="root" value="prefab" color="true"
            v-if="node.isPrefabRoot" 
        ></ui-icon>

    <template
        v-if="state!=='rename'"
    >
        <label class="name"
            :twinkle="isTwinkle" 
        >{{node.name}}</label>

        <ui-icon class="prefab-added-node" value="add" tooltip="i18n:hierarchy.menu.added_prefab_node_tooltip"
            v-if="node.isAddedChild"
        ></ui-icon>
    </template>

        <div class="rename"
            v-else
            :state="renameInputState"
            :title="t('menu.' + renameInputState)"
        >
            <input ref='renameInput'
                :value="renameValue"
                @input="renameChange()"
                @blur="renameSubmit()"
                @keydown.stop
                @keydown.enter="renameSubmit()"
                @keydown.esc="renameCancel()"
            >
        </div>
        
        <section class="loading"
            v-if="state==='loading'"
        >
            <ui-loading></ui-loading>
        </section>
        
         <ui-icon class="lock" tooltip="i18n:hierarchy.menu.lockInScene"
            v-if="!node.isScene && !node.isPrefabRoot"
            :value="node.locked?'lock':'unlock'"
            :locked="node.locked"
            @click.stop="toggleLock(node)"
        ></ui-icon>
    </ui-drag-item>
    <div class="tree-node"
        :style="addInputStyle"
        v-if="state==='add'" 
    >
        <div class="rename"
            :state="addInputState"
            :title="t('menu.' + addInputState)"
        >
            <input ref='addInput'
                :value="addValue"
                @input="addChange()"
                @blur="addSubmit()"
                @keydown.stop
                @keydown.enter="addSubmit()"
                @keydown.esc="addCancel()"
            >
        </div>
    </div>
</div>

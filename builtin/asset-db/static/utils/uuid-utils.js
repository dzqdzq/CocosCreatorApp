for(var Uuid=("undefined"==typeof CC_EDITOR||CC_EDITOR)&&require("node-uuid"),Base64KeyChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AsciiTo64=new Array(128),i=0;i<128;++i)AsciiTo64[i]=0;for(i=0;i<64;++i)AsciiTo64[Base64KeyChars.charCodeAt(i)]=i;const Reg_Dash=/-/g,Reg_Uuid=/^[0-9a-fA-F-]{36}$/,Reg_NormalizedUuid=/^[0-9a-fA-F]{32}$/,Reg_CompressedUuid=/^[0-9a-zA-Z+/]{22,23}$/,Reg_UuidInLibPath=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;var UuidUtils={NonUuidMark:".",compressUuid:function(e,i){if(Reg_Uuid.test(e))e=e.replace(Reg_Dash,"");else if(!Reg_NormalizedUuid.test(e))return e;var r=!0===i?2:5;return UuidUtils.compressHex(e,r)},compressHex:function(e,i){var r,s=e.length;r=void 0!==i?i:s%3;for(var t=e.slice(0,r),o=[];r<s;){var u=parseInt(e[r],16),n=parseInt(e[r+1],16),a=parseInt(e[r+2],16);o.push(Base64KeyChars[u<<2|n>>2]),o.push(Base64KeyChars[(3&n)<<4|a]),r+=3}return t+o.join("")},decompressUuid:function(e){if(23===e.length){let i=[];for(let r=5;r<23;r+=2){let s=AsciiTo64[e.charCodeAt(r)],t=AsciiTo64[e.charCodeAt(r+1)];i.push((s>>2).toString(16)),i.push(((3&s)<<2|t>>4).toString(16)),i.push((15&t).toString(16))}e=e.slice(0,5)+i.join("")}else{if(22!==e.length)return e;{let i=[];for(let r=2;r<22;r+=2){let s=AsciiTo64[e.charCodeAt(r)],t=AsciiTo64[e.charCodeAt(r+1)];i.push((s>>2).toString(16)),i.push(((3&s)<<2|t>>4).toString(16)),i.push((15&t).toString(16))}e=e.slice(0,2)+i.join("")}}return[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20)].join("-")},isUuid:function(e){return Reg_CompressedUuid.test(e)||Reg_NormalizedUuid.test(e)||Reg_Uuid.test(e)},getUuidFromLibPath(e){var i=e.match(Reg_UuidInLibPath);return i?encodeURI(i[1]):""},uuid:function(){var e=Uuid.v4();return UuidUtils.compressUuid(e,!0)}};module.exports=UuidUtils;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const asset_db_1=require("@editor/asset-db"),cc_1=require("cc");class VideoImporter extends asset_db_1.Importer{get version(){return"1.0.0"}get name(){return"video-clip"}get assetType(){return cc_1.js.getClassName(cc_1.VideoClip)}async import(e){return await e.copyToLibrary(e.extname,e.source),await new Promise(t=>{const r=document.createElement("video"),s=document.createElement("source");r.appendChild(s),r.addEventListener("loadedmetadata",async()=>{const s=this.createVideo(e,r.duration);await e.saveToLibrary(".json",EditorExtends.serialize(s)),t()}),s.src=e.source}),!0}createVideo(e,t){const r=new cc_1.VideoClip;return r._duration=t,r.name=e.basename,r._setRawAsset(e.extname),r}}exports.default=VideoImporter;
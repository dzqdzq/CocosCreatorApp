"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const asset_db_1=require("@editor/asset-db"),fs_extra_1=require("fs-extra"),migrates_1=require("../scene/migrates"),cc_1=require("cc");class RenderTextureImporter extends asset_db_1.Importer{get version(){return"1.1.1"}get name(){return"render-texture"}get assetType(){return"cc.RenderTexture"}get migrations(){return migrations}get migrationHook(){return migrates_1.migrationHook}async import(e){const t=await fs_extra_1.readJSON(e.source);await e.saveToLibrary(".json",JSON.stringify(t,void 0,2));const r=await e.createSubAsset("spriteFrame","rt-sprite-frame",{displayName:e.basename});return e.userData.redirect=r.uuid,r.userData.imageUuidOrDatabaseUri=e.uuid,!0}}exports.default=RenderTextureImporter;const migrations=[{version:"1.1.0",migrate:migrateAssetContent}];async function migrateAssetContent(e){const t=e.getSwapSpace().json||await fs_extra_1.readJSON(e.source);if(t.content){const{name:e,width:r,height:s}=t.content,a=new cc_1.RenderTexture;e&&(a._name=e),r&&(a._width=r),s&&(a._height=s),delete t.content,Object.assign(t,JSON.parse(EditorExtends.serialize(a)))}}
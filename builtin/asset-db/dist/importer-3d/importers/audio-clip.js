"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const asset_db_1=require("@editor/asset-db");class AudioImporter extends asset_db_1.Importer{get version(){return"1.0.0"}get name(){return"audio-clip"}get assetType(){return"cc.AudioClip"}async import(e){return e.userData.downloadMode=0,await e.copyToLibrary(e.extname,e.source),await new Promise(t=>{const a=document.createElement("audio");a.addEventListener("loadedmetadata",async()=>{const r=this.createAudio(e,a.duration);await e.saveToLibrary(".json",EditorExtends.serialize(r)),t()}),a.src=e.source}),!0}createAudio(e,t){const a=new cc.AudioClip;return a._loadMode=e.userData.downloadMode,a._duration=t,a.name=e.basename,a._setRawAsset(e.extname),a}}exports.default=AudioImporter;
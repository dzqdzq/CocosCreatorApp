"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const gltf_1=__importDefault(require("./gltf")),fbx_to_gltf_1=require("./gltf/fbx-to-gltf"),fbx_converter_1=require("./utils/fbx-converter"),model_convert_routine_1=require("./utils/model-convert-routine");class FbxImporter extends gltf_1.default{get version(){return super.version}get name(){return"fbx"}async getGltfFilePath(e){var t,r;const o=e.userData;let i;if(o.legacyFbxImporter)i=await fbx_to_gltf_1.fbxToGlTf(e,this.assetDB,this.version);else{const n={};n.unitConversion=null===(t=o.fbx)||void 0===t?void 0:t.unitConversion,n.animationBakeRate=null===(r=o.fbx)||void 0===r?void 0:r.animationBakeRate;const s=fbx_converter_1.createFbxConverter(n),a=await model_convert_routine_1.modelConvertRoutine("fbx.FBX-glTF-conv",e,this.assetDB,this.version,s);if(!a)throw new Error(`Failed to import ${e.source}`);i=a}return o.meshOptimizer?await this.getOptimizerPath(e,i,o.meshOptimizerOptions||{}):i}}exports.default=FbxImporter;
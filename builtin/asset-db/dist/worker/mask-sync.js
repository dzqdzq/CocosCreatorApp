"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetDBMask=void 0,exports.assetDBStart=assetDBStart,exports.assetAdd=assetAdd,exports.assetAdded=assetAdded,exports.assetChange=assetChange,exports.assetChanged=assetChanged,exports.assetDelete=assetDelete,exports.assetDeleted=assetDeleted;const data={wait:!1,percent:"0/0",execList:{}};function updateImportMaskImmediately(){let t="",e=0;for(const s in data.execList){if(5<=++e)break;t+=data.execList[s].url+"<br />"}exports.assetDBMask.update("import-asset",Editor.I18n.t("asset-db.mask.loading")+" "+data.percent,t)}function updateImportMask(){data.wait||(updateImportMaskImmediately(),data.wait=!0,setTimeout(()=>{data.wait=!1,updateImportMaskImmediately()},200))}function assetDBStart(t,e){exports.assetDBMask.update("import-asset",""+Editor.I18n.t("asset-db.mask.startup",{name:t}),e)}function assetAdd(t){data.execList[t.uuid]=t,updateImportMask()}function assetAdded(t){var{current:e,total:s}=t._assetDB.assetProgressInfo;data.percent=e+"/"+s,delete data.execList[t.uuid],updateImportMask()}function assetChange(t){data.execList[t.uuid]=t,updateImportMask()}function assetChanged(t){var{current:e,total:s}=t._assetDB.assetProgressInfo;data.percent=e+"/"+s,delete data.execList[t.uuid],updateImportMask()}function assetDelete(t){data.execList[t.uuid]=t,updateImportMask()}function assetDeleted(t){var{current:e,total:s}=t._assetDB.assetProgressInfo;data.percent=e+"/"+s,delete data.execList[t.uuid],updateImportMask()}class AssetDBMask{enabled=!Editor.App.args.debugAssets;add(...t){this.enabled&&Editor.Task.__protected__.addSyncTask(...t)}remove(t){this.enabled&&Editor.Task.__protected__.removeSyncTask(t)}update(...t){this.enabled&&Editor.Task.__protected__.updateSyncTask(...t)}}exports.assetDBMask=new AssetDBMask;
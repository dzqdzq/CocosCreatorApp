"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetDeleted=exports.assetDelete=exports.assetChanged=exports.assetChange=exports.assetAdded=exports.assetAdd=void 0;const data={wait:!1,percent:"0/0",execList:{}};function updateImportMaskImmediately(){let e="",t=0;for(let a in data.execList){if(++t>=5)break;e+=`${data.execList[a].url}<br />`}Editor.Task.updateSyncTask("import-asset",`${Editor.I18n.t("asset-db.mask.loading")} ${data.percent}`,e)}function updateImportMask(){data.wait||(data.wait=!0,setTimeout(()=>{data.wait=!1,updateImportMaskImmediately()},200))}function assetAdd(e){data.execList[e.uuid]=e,updateImportMask()}function assetAdded(e){const t=e._assetDB.taskManager._execID-e._assetDB.taskManager._execThread,a=e._assetDB.taskManager.total();data.percent=`${t}/${a}`,delete data.execList[e.uuid],updateImportMask()}function assetChange(e){data.execList[e.uuid]=e,updateImportMask()}function assetChanged(e){const t=e._assetDB.taskManager._execID-e._assetDB.taskManager._execThread,a=e._assetDB.taskManager.total();data.percent=`${t}/${a}`,delete data.execList[e.uuid],updateImportMask()}function assetDelete(e){data.execList[e.uuid]=e,updateImportMask()}function assetDeleted(e){const t=e._assetDB.taskManager._execID-e._assetDB.taskManager._execThread,a=e._assetDB.taskManager.total();data.percent=`${t}/${a}`,delete data.execList[e.uuid],updateImportMask()}exports.assetAdd=assetAdd,exports.assetAdded=assetAdded,exports.assetChange=assetChange,exports.assetChanged=assetChanged,exports.assetDelete=assetDelete,exports.assetDeleted=assetDeleted;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fs=require("fs"),{join:join}=require("path");let filesList=[];function convertTime(e){const t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}async function readImageList(e,t=!1){t||(filesList=[]);const s=fs.readdirSync(e);return await Promise.all(s.map(async t=>{const s=join(e,t),i=fs.statSync(s);if(i.isDirectory())readImageList(s,!0);else if(t.endsWith(".png")){const e={};e.path=s,e.filename=t,e.size=parseInt(`${i.size/1e3}`)+"KB",e.birthtime=convertTime(i.birthtime);const r=await Editor.Message.request("asset-db","query-url",s);r&&(e.uuid=await Editor.Message.request("asset-db","query-uuid",r)),e.mtime=convertTime(i.mtime),filesList.push(e)}})),filesList}exports.default=readImageList;
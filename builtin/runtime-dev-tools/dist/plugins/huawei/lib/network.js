"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.post=exports.get=exports.download=void 0;let https=require("https"),qs=require("querystring"),fs=require("fs-extra");const request=require("request"),progress=require("request-progress");function download(e,t,r,o){progress(request(e),{delay:200}).on("progress",function(e){r&&r(e.percent)}).on("error",function(e){o(e,!1)}).on("end",function(){o(null,!0)}).pipe(fs.createWriteStream(t))}function get(e){return new Promise((t,r)=>{https.get(e,e=>{e.on("data",e=>{t(e)})}).on("error",e=>{r(e)})})}function post(e,t,r,o){return new Promise((n,s)=>{let i={hostname:e,port:t,path:r,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},u=https.request(i,function(e){e.setEncoding("utf8");let t="";e.on("data",function(e){t+=e}),e.on("end",function(e){n(t)})});u.on("error",function(e){s(e),console.log("problem with request: "+e.message)}),u.write(qs.stringify(o)),u.end()})}exports.download=download,exports.get=get,exports.post=post;
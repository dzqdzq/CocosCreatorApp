"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unload=exports.load=exports.methods=void 0;const express_1=require("./express"),plugin_1=require("./plugin"),utils_1=require("./utils");async function load(){Editor.Package.getPackages({enable:!0}).forEach(plugin_1.attach),Editor.Package.__protected__.on("enable",plugin_1.attach),Editor.Package.__protected__.on("disable",plugin_1.detach),(0,express_1.setPort)(await Editor.Profile.getConfig("server","server.preview_port")),(0,express_1.startup)()}function unload(){(0,express_1.stop)()}exports.methods={queryPort:()=>(0,express_1.getPort)(),queryIPList:()=>Editor.Network.queryIPList(),scanLAN:async()=>(await(0,utils_1.scan)()).filter(Boolean),async"change-preview-port"(e,t){(0,express_1.getPort)()!==t&&((0,express_1.setPort)(t),await(0,express_1.stop)(),await(0,express_1.startup)())}},exports.load=load,exports.unload=unload;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unload=exports.load=exports.methods=void 0;const express_1=require("./express"),plugin_1=require("./plugin"),utils_1=require("./utils");async function load(){Editor.Package.getPackages({enable:!0}).forEach(plugin_1.attach),Editor.Package.on("enable",plugin_1.attach),Editor.Package.on("disable",plugin_1.detach),express_1.setPort(await Editor.Profile.getConfig("server","server.preview_port")),express_1.startup()}function unload(){express_1.stop()}exports.methods={queryPort:()=>express_1.getPort(),queryIPList:()=>Editor.Network.queryIPList(),scanLAN:async()=>(await utils_1.scan()).filter(Boolean),async"change-preview-port"(e,t){express_1.getPort()!==t&&(express_1.setPort(t),await express_1.stop(),await express_1.startup())}},exports.load=load,exports.unload=unload;
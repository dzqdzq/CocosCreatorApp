"use strict";function translate(e,a,t,o){if(e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e,s)=>{if(null!==e&&void 0!==e){if("object"==typeof e){let l;e.name=`[${s}]`,e.path=`${a}.${s}`,t&&(l=t.map(e=>{if(e[s])return e[s].value}),e.values=l),collectAssets(e,o),translate(e.value,e.path,l,o),delete e.displayName}}else console.warn(`data in node dump (${a} ${s}) is ${e}!`)});else for(const s of Object.keys(e)){const l=e[s];if(null!==l&&void 0!==l){if("object"==typeof l){let e;if(l.name=s,l.path=`${a}.${s}`,collectAssets(l,o),collectGroups(l),t)try{e=t.map(e=>{if(e[s])return e[s].value}),l.values=e}catch(a){e=void 0}translate(l.value,l.path,e,o)}}else console.warn(`data in node dump (${a} ${s}) is ${l}!`)}}function collectAssets(e,a){e.visible&&Array.isArray(e.extends)&&e.value&&e.value.uuid&&e.extends.includes("cc.Asset")&&(a[e.type]||(a[e.type]={}),void 0===a[e.type][e.value.uuid]&&(a[e.type][e.value.uuid]=0),a[e.type][e.value.uuid]++)}function collectGroups(e){if(e&&e.value&&"object"==typeof e.value){e.groups||(e.groups={});for(const a in e.value){const t=e.value[a];if(!t||!t.group)continue;"object"!=typeof t.group&&(t.group={id:"default",name:t.group});const o=t.group.id||"default";e.groups[o]||(e.groups[o]={displayOrder:1/0,style:"tab"});const s=JSON.parse(JSON.stringify(t.group));delete s.id,delete s.name,Object.assign(e.groups[o],s)}}}function translationDump(e,a,t){if(e.active.path="active",e.name.path="name",e.isScene)return translationSceneDump(e,a,t);e.position.path="position",e.rotation.path="rotation",e.scale.path="scale",e.layer.path="layer",a&&(e.active.values=a.map(e=>e.active.value),e.name.values=a.map(e=>e.name.value),e.position.values=a.map(e=>e.position.value),e.rotation.values=a.map(e=>e.rotation.value),e.scale.values=a.map(e=>e.scale.value),e.layer.values=a.map(e=>e.layer.value));for(let o=0;o<e.__comps__.length;o++){const s=e.__comps__[o];if(s.path=`__comps__.${o}`,!(!a||a.every(e=>e.__comps__[o]&&e.__comps__[o].type===s.type)))break;collectGroups(s),translate(s.value,s.path,a?a.map(e=>e.__comps__[o].value):void 0,t)}return e}function translationSceneDump(e,a,t){e.autoReleaseAssets.path="autoReleaseAssets",Object.keys(e._globals).forEach(o=>{const s=e._globals[o];s.name=s.type,s.path=`_globals.${o}`,translate(s.value,s.path,a?a.map(e=>e._globals[o].value):void 0,t)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.translationDump=void 0,exports.translationDump=translationDump;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.beforeClose=exports.close=exports.ready=exports.update=exports.methods=exports.$=exports.style=exports.template=exports.listeners=void 0;const extension_1=require("./../../panels/inspector/extension"),utils_1=require("./utils");exports.listeners={"change-dump"(e){const n=this;if(!e.target)return;n.snapshotLock||(Editor.Message.send("scene","snapshot"),n.snapshotLock=!0);const t=e.target.dump;try{for(let e=0;e<n.uuidList.length;e++){const s=n.uuidList[e];e>0&&(t.values[e]=t.value),Editor.Message.send("scene","set-property",{uuid:s,path:t.path,dump:{type:t.type,isArray:t.isArray,value:t.value}})}}catch(e){console.error(e)}},"confirm-dump"(e){this.snapshotLock=!1}},exports.template='\n<ui-drag-area class="container">\n    <section class="prefab" hidden missing>\n        <ui-label value="Prefab"></ui-label>\n        <ui-button role="unlink" tooltip="i18n:inspector.prefab.unlink">\n            <ui-icon value="unlink"></ui-icon>\n        </ui-button>\n        <ui-button role="local" tooltip="i18n:inspector.prefab.local">\n            <ui-icon value="location"></ui-icon>\n        </ui-button>\n        <ui-button role="reset" tooltip="i18n:inspector.prefab.reset">\n            <ui-icon value="reset"></ui-icon>\n        </ui-button>\n        <ui-button role="save" tooltip="i18n:inspector.prefab.save">\n            <ui-icon value="save-o"></ui-icon>\n        </ui-button>\n    </section>\n\n    <header class="header">\n        <ui-checkbox class="active"></ui-checkbox>\n        <ui-input class="name"></ui-input>\n    </header>\n\n    <section class="component scene">\n        <ui-prop class="release" type="dump"></ui-prop>\n        <ui-prop class="ambient" type="dump"></ui-prop>\n        <ui-prop class="fog" type="dump"></ui-prop>\n        <ui-prop class="shadows" type="dump"></ui-prop>\n        <ui-prop class="skybox" type="dump"></ui-prop>\n    </section>\n\n    <ui-section class="component node" expand>\n        <header class="component-header" slot="header">\n            <span class="name">Node</span>\n            <ui-icon class="menu" value="setting" tooltip="i18n:inspector.menu.component"></ui-icon>\n            <ui-link class="link" tooltip="i18n:inspector.menu.help_url">\n                <ui-icon value="help"></ui-icon>\n            </ui-link>\n        </header>\n        \n        <ui-prop class="position" type="dump"></ui-prop>\n        <ui-prop class="rotation" type="dump"></ui-prop>\n        <ui-prop class="scale" type="dump"></ui-prop>\n        <ui-prop class="layer" type="dump" html="false">\n            <ui-label slot="label" value="Layer"></ui-label>\n            <div class="layer-content" slot="content">\n                <ui-select class="layer-select"></ui-select>\n                <ui-button class="layer-edit">Edit</ui-button>\n            </div>\n        </ui-prop>\n    </ui-section>\n\n    <section class="section-header"></section>\n    <section class="section-body"></section>\n    <section class="section-footer"></section>\n    <section class="section-missing"></section>\n\n    <footer class="footer">\n        <ui-button>\n            <ui-label value="i18n:inspector.add_component"></ui-label>\n        </ui-button>\n    </footer>\n\n    <section class="section-asset"></section>\n</ui-drag-area>\n',exports.style='\n:host {\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.container {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: scroll;\n    padding-left: 10px;\n}\n\n.container[hoving] {\n    outline: 2px solid var(--color-focus-fill-weaker);\n    outline-offset: -2px;\n}\n\n.prefab {\n    display: flex;\n    padding: 5px 0 10px 0;\n}\n.prefab[hidden] {\n    display: none;\n}\n.prefab > ui-label {\n    flex: 1;\n    color: var(--color-success-fill);\n}\n.prefab > ui-button {\n    padding: 0 7px;\n    margin-left: 10px;\n}\n.prefab[missing] > ui-label {\n    color: var(--color-danger-fill);\n}\n\n.header {\n    display: none;\n    margin-top: 7px;\n}\n.header > .name {\n    flex: 1;\n}\n\n.scene {\n    display: none;\n}\n.scene > ui-prop {\n    margin: 10px 0;\n}\n:host([sub-type="scene"]) > .container > .scene {\n    display: block;\n}\n:host([sub-type="scene"]) > .container > .prefab,\n:host([sub-type="scene"]) > .container > .node,\n:host([sub-type="scene"]) > .container > .section-header,\n:host([sub-type="scene"]) > .container > .section-body,\n:host([sub-type="scene"]) > .container > .section-footer,\n:host([sub-type="scene"]) > .container > .section-missing,\n:host([sub-type="scene"]) > .container > .footer {\n    display: none;\n}\n\n.section-missing:not(:empty) {\n    margin-top: 10px;\n    border-top: 1px solid var(--color-normal-border);\n    padding: 0 5px;\n}\n\n.section-missing > section {\n    display: flex;\n}\n\n.section-missing .name {\n    flex: 1;\n    color: var(--color-warn-fill);\n}\n\n.section-missing > section > ui-icon {\n    padding: 0 5px;\n    cursor: pointer;\n}\n\n.node {\n    display: none;\n}\n.node .layer-content {\n    display: flex;\n}\n.node .layer-content > .layer-select {\n    flex: 1;\n}\n.node .layer-content > .layer-edit {\n    margin-left: 6px;\n}\n\n:host([sub-type="node"]) > .container > .node {\n    display: block;\n}\n.component {\n    margin-top: 10px;\n}\n.component .component-header {\n    flex: 1;\n}\n.component .component-header > .menu,\n.component .component-header > .link {\n    padding: 0 5px;\n    float: right;\n    transition: color 0.15s;\n}\n.component .component-header > .menu:hover {\n    opacity: 0.8;\n }\n .component .component-header > .link {\n    display: none;\n }\n .component .component-header > .link[value] {\n    display: inline-block;\n}\n\n.component ui-prop {\n    margin-top: 6px;\n}\n\n.component ui-prop [slot="label"] {\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.footer {\n    display: none;\n    margin: 20px 0 ;\n    text-align: center;\n}\n\n.section-asset:empty {\n    display: none;\n}\n\n',exports.$={container:".container",prefab:".prefab",prefabUnlink:'.prefab > [role="unlink"]',prefabLocal:'.prefab > [role="local"]',prefabReset:'.prefab > [role="reset"]',prefabSave:'.prefab > [role="save"]',header:".header",active:".active",name:".name",scene:".scene",sceneRelease:".scene > .release",sceneAmbient:".scene > .ambient",sceneFog:".scene > .fog",sceneShadows:".scene > .shadows",sceneSkybox:".scene > .skybox",node:".node",nodeHeader:".node > header",nodeMenu:".node > header > .menu",nodeLink:".node > header > .link",nodePosition:".node > .position",nodeRotation:".node > .rotation",nodeScale:".node > .scale",nodeLayer:".node > .layer",nodeLayerSelect:".node > .layer .layer-select",nodeLayerButton:".node > .layer .layer-edit",sectionHeader:".section-header",sectionBody:".section-body",sectionFooter:".section-footer",sectionMissing:".section-missing",sectionAsset:".section-asset",footer:".footer",componentAdd:".footer > ui-button"};const Elements={panel:{ready(){const e=this;let n;e.__nodeChanged__=(t=>{Array.isArray(e.uuidList)&&e.uuidList.includes(t)&&(window.cancelAnimationFrame(n),n=window.requestAnimationFrame(async()=>{for(const n in Elements){const t=Elements[n];t.update&&await t.update.call(e)}}))}),Editor.Message.addBroadcastListener("scene:change-node",e.__nodeChanged__),e.__projectSettingChanged__=async function(n){if("layers"===n)for(const n in Elements){const t=Elements[n];t.update&&await t.update.call(e)}},Editor.Message.addBroadcastListener("project:setting-change",e.__projectSettingChanged__),e.$.container.addEventListener("dragover",n=>{n.preventDefault(),e.dump.isScene?n.dataTransfer.dropEffect="none":n.dataTransfer.dropEffect="copy"}),e.$.container.addEventListener("drop",async n=>{if(n.preventDefault(),n.stopPropagation(),e.dump.isScene)return;const t=[],{additional:s,value:o}=JSON.parse(JSON.stringify(Editor.UI.DragArea.currentDragInfo))||{};if(s&&s.forEach(e=>{"cc.Script"===e.type&&t.push(e.value)}),o&&!t.includes(o)&&t.push(o),t.length){Editor.Message.send("scene","snapshot");for(const n of t){const t=await Editor.Message.request("scene","query-script-name",n);if(t)for(const n of e.dumps)Editor.Message.send("scene","create-component",{uuid:n.uuid.value,component:t})}}})},async update(){const e=this,n=await Promise.all(e.uuidList.map(e=>Editor.Message.request("scene","query-node",e)).filter(Boolean));if(e.dump=n[0],e.dumps=[],e.uuidList=[],e.assets={},e.dump){e.$.container.style.display="flex",e.$.header.style.display="flex",e.$.footer.style.display="block";const t=e.dump.__type__;n.forEach(n=>{n.__type__===t&&(e.uuidList.push(n.uuid.value),e.dumps.push(n))}),utils_1.translationDump(e.dump,e.dumps.length>1?e.dumps:void 0,e.assets)}else e.$.container.style.display="none"},close(){Editor.Message.removeBroadcastListener("scene:change-node",this.__nodeChanged__),Editor.Message.removeBroadcastListener("project:setting-change",this.__projectSettingChanged__)}},prefab:{ready(){const e=this;e.$.prefab.addEventListener("confirm",n=>{const t=n.target;if(!e.dump||!e.dump.__prefab__||!t)return;const s=e.dump.__prefab__;switch(t.getAttribute("role")){case"unlink":Editor.Message.send("hierarchy","unlink-prefab");break;case"local":Editor.Message.send("assets","twinkle",s.uuid);break;case"reset":Editor.Message.send("scene","restore-prefab",s.rootUuid,s.uuid);break;case"save":Editor.Message.send("scene","apply-prefab",s.rootUuid)}})},async update(){const e=this;if(!e.dump||!e.dump.__prefab__||1!==e.dumps.length)return void e.$.prefab.setAttribute("hidden","");e.$.prefab.removeAttribute("hidden");const n=e.dump.__prefab__,t=n.prefabStateInfo;await Editor.Message.request("asset-db","query-asset-info",n.uuid)?(e.$.prefab.removeAttribute("missing"),t.isUnwrappable?e.$.prefabUnlink.removeAttribute("disabled"):e.$.prefabUnlink.setAttribute("disabled",""),t.isRevertable?e.$.prefabReset.removeAttribute("disabled"):e.$.prefabReset.setAttribute("disabled",""),t.isApplicable?e.$.prefabSave.removeAttribute("disabled"):e.$.prefabSave.setAttribute("disabled","")):(e.$.prefab.setAttribute("missing",""),e.$.prefabLocal.setAttribute("disabled",""),e.$.prefabReset.setAttribute("disabled",""),e.$.prefabSave.setAttribute("disabled",""))}},header:{ready(){const e=this;e.$.active.addEventListener("change",n=>{n.target.dump.value=n.target.value,e.$.active.dispatch("change-dump")}),e.$.name.addEventListener("change",n=>{n.target.dump.value=n.target.value,e.$.name.dispatch("change-dump")})},update(){const e=this;if(!e.dump)return;let n=!1,t=!1,s=!1,o=!1;e.dump.isScene?(n=!0,s=!0):e.dumps&&e.dumps.length>1&&(e.dumps.some(n=>n.active.value!==e.dump.active.value)&&(t=!0),e.dumps.some(n=>n.name.value!==e.dump.name.value)&&(o=!0)),e.$.active.value=e.dump.active.value,e.$.active.dump=e.dump.active,e.$.active.disabled=n,e.$.active.invalid=t,e.$.name.value=e.dump.name.value,e.$.name.dump=e.dump.name,e.$.name.disabled=s,e.$.name.invalid=o}},scene:{ready(){},update(){this.dump&&this.dump.isScene&&(this.$this.setAttribute("sub-type","scene"),this.$.container.removeAttribute("droppable"),this.$.sceneRelease.render(this.dump.autoReleaseAssets),this.dump._globals.ambient.displayName="Ambient",this.$.sceneAmbient.render(this.dump._globals.ambient),this.dump._globals.fog.displayName="Fog",this.$.sceneFog.render(this.dump._globals.fog),this.dump._globals.shadows.displayName="Shadows",this.$.sceneShadows.render(this.dump._globals.shadows),this.dump._globals.skybox.displayName="Skybox",this.$.sceneSkybox.render(this.dump._globals.skybox))}},node:{ready(){const e=this;e.$.nodeLink.value=Editor.I18n.t("ENGINE.help.cc.Node"),e.$.nodeMenu.addEventListener("click",n=>{n.stopPropagation(),exports.methods.nodeContextMenu(e.uuidList,e.dumps)}),e.$.nodeLink.addEventListener("click",e=>{e.stopPropagation()})},update(){const e=this;if(!e.dump||e.dump.isScene)return;e.$this.setAttribute("sub-type","node"),e.$.container.setAttribute("droppable","cc.Script"),e.$.nodePosition.render(e.dump.position),e.$.nodeRotation.render(e.dump.rotation),e.$.nodeScale.render(e.dump.scale),e.$.nodeLayer.render(e.dump.layer);const n=[];for(let t=0;t<e.dump.__comps__.length;t++){const s=e.dump.__comps__[t];e.dumps.every(e=>e.__comps__[t]&&e.__comps__[t].type===s.type)&&n.push(s)}const t=e.$.sectionBody;n.length&&t.__sections__&&t.__sections__.length&&t.__sections__.length===n.length&&n.every((e,n)=>e.type===t.__sections__[n].__type__)?t.__sections__.forEach((t,s)=>{const o=n[s];t.dump=o;const a=e.getHelpUrl(o.editor),i=t.querySelector("ui-link");a?i.setAttribute("value",a):i.removeAttribute("value"),Array.prototype.forEach.call(t.__panels__,e=>{e.update(o)})}):(t.innerText="",t.__sections__=[],n.forEach((s,o)=>{const a=document.createElement("ui-section");a.setAttribute("expand",""),a.setAttribute("class","component"),a.innerHTML=`\n                    <header class="component-header" slot="header">\n                        <ui-checkbox class="active"></ui-checkbox>\n                        <span class="name">${s.type}${s.isMounted?"+":""}</span>\n                        <ui-icon class="menu" value="setting" tooltip="i18n:inspector.menu.component"></ui-icon>\n                        <ui-link class="link" tooltip="i18n:inspector.menu.help_url">\n                            <ui-icon value="help"></ui-icon>\n                        </ui-link>\n                    </header>\n                    `,a.dump=s,a.__panels__=[],a.__type__=s.type;const i=a.querySelector("ui-checkbox");i.value=s.value.enabled.value,i.dump=s.value.enabled,i.addEventListener("change",e=>{e.stopPropagation(),i.dump.value=!!i.value,i.dispatch("change-dump")});const r=a.querySelector(".link"),c=e.getHelpUrl(s.editor);c&&(r.setAttribute("value",c),r.addEventListener("click",e=>{e.stopPropagation()})),a.querySelector(".menu").addEventListener("click",t=>{t.stopPropagation(),exports.methods.componentContextMenu(e.uuidList,a.dump,n.length,o)}),t.__sections__[o]=a,t.appendChild(a);let p=e.renderMap.section[a.__type__];if(!p||!p.length){if(Array.isArray(s.extends)){const n=s.extends[0];p=e.renderMap.section[n]}p||(p=e.renderMap.section["cc.Class"])}p.forEach(n=>{const t=document.createElement("ui-panel");t.setAttribute("src",n),t.injectionStyle('\n                            ui-prop,\n                            ui-section { margin-top: 5px; }\n\n                            ui-prop > ui-prop,\n                            ui-section > ui-prop[slot="header"],\n                            ui-prop [slot="content"] ui-prop { margin-top: 0; }\n                        '),t.shadowRoot.addEventListener("change-dump",n=>{exports.listeners["change-dump"].call(e,n)}),t.shadowRoot.addEventListener("confirm-dump",n=>{exports.listeners["confirm-dump"].call(e,n)}),a.appendChild(t),a.__panels__.push(t),t.dump=s,t.update(s)})}))}},missingComponent:{ready(){const e=this;e.$.sectionMissing.addEventListener("click",n=>{if("UI-ICON"!==n.target.tagName)return;if(!Array.isArray(e.dump.removedComponents))return;const t=n.target.getAttribute("index"),s=n.target.getAttribute("value"),o=e.dump.removedComponents[t];if(!o)return;const a=e.uuidList;switch(s){case"save-o":Editor.Message.request("scene","apply-removed-component",a[0],o.fileID);break;case"reset":Editor.Message.request("scene","revert-removed-component",a[0],o.fileID)}})},update(){const e=this;if(!e.dump||e.dump.isScene)return;const n=e.uuidList,t=e.$.sectionMissing;t.__sections__=t.__sections__||[],e.dump.removedComponents&&1===n.length||(e.dump.removedComponents=[]);for(let n=0;n<e.dump.removedComponents.length;n++){let s=t.__sections__[n];s||(s=document.createElement("section"),t.__sections__[n]=s,t.appendChild(s)),s.innerHTML=`\n                <span class="name">${e.dump.removedComponents[n].name}</span>\n                <ui-icon value="reset" index="${n}"></ui-icon>\n                <ui-icon value="save-o" index="${n}"></ui-icon>\n                `}for(;t.__sections__.length>e.dump.removedComponents.length;){const e=t.__sections__.pop();e.parentElement.removeChild(e)}}},layer:{ready(){const e=this;e.$.nodeLayerSelect.addEventListener("change",n=>{e.dumps.forEach(e=>{e.layer.value=n.target.value-0})}),e.$.nodeLayerButton.addEventListener("confirm",()=>{Editor.Message.send("project","open-settings","project","layer")})},async update(){if(!this.dump||this.dump.isScene)return;const e=this.dump.layer.enumList||[],n=await Editor.Profile.getProject("project","layer");Array.isArray(n)&&(e.unshift(...n),e.sort((e,n)=>e.value-n.value));let t="";if(e)for(let n of e)t+=`<option value="${n.value}">${n.name}</option>`;this.$.nodeLayerSelect.innerHTML=t,this.$.nodeLayerSelect.value=this.dump.layer.value}},footer:{ready(){const e=this;e.$.componentAdd.addEventListener("click",()=>{const n=Date.now();Editor.Panel._kitControl.open({$kit:e.$.componentAdd,name:"ui-kit.searcher",timestamp:n,type:"add-component",events:{confirm(n,t){Editor.Message.send("scene","snapshot"),e.uuidList.forEach(e=>{Editor.Message.send("scene","create-component",{uuid:e,component:t.name})})}}})})},update(){}},materials:{async update(){const e=this,n=[],t=Array.from(e.$.sectionAsset.children),s=e.assets["cc.Material"];let o=null;for(const a in s){if(!s[a])continue;let i=t.find(e=>e.getAttribute("uuid")===a);i||((i=document.createElement("ui-panel")).setAttribute("src",extension_1.queryType("asset")),i.setAttribute("type","asset"),i.setAttribute("uuid",a),i.panelObject.$.container.removeAttribute("whole"),i.update([a],extension_1.queryRendererMap("asset","section")),o?o.after(i):e.$.sectionAsset.prepend(i)),n.push(i),o=i}for(const e of t)e&&-1===n.indexOf(e)&&(await e.panel.beforeClose.call(e.panelObject),e.remove())},async beforeClose(){const e=Array.from(this.$.sectionAsset.children);for(const n of e){if(!1===await n.panel.beforeClose.call(n.panelObject))return!1}return!0}}};async function update(e,n){const t=this;t.uuidList=e||[],t.renderMap=n;for(const e in Elements){const n=Elements[e];n.update&&await n.update.call(t)}}async function ready(){const e=this;e.snapshotLock=!1;for(const n in Elements){const t=Elements[n];t.ready&&t.ready.call(e)}}async function close(){const e=this;for(const n in Elements){const t=Elements[n];t.close&&t.close.call(e)}}async function beforeClose(){const e=this;for(const n in Elements){const t=Elements[n];if(t.beforeClose){if(!1===await t.beforeClose.call(e))return!1}}return!0}exports.methods={getHelpUrl(e){if(!e||!e.help)return;const n=e.help;if(!n.startsWith("i18n:"))return n;const t=n.substr(5),s=Editor.I18n.t("ENGINE.help."+t);return s||Editor.I18n.t(t)},componentContextMenu(e,n,t,s){const o=e.length>1,a=e[0],i=Editor.Clipboard.read("_dump_component_");Editor.Menu.popup({menu:[{label:Editor.I18n.t("inspector.menu.reset_component"),click(){Editor.Message.send("scene","snapshot"),(n.values||[n.value]).forEach(e=>{Editor.Message.send("scene","reset-component",{uuid:e.uuid.value})})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.remove_component"),click(){Editor.Message.send("scene","snapshot"),n.values||[n.value].forEach((t,s)=>{const o=e[s],a=n.path.split(".").pop();Editor.Message.send("scene","remove-array-element",{uuid:o,path:"__comps__",index:a})})}},{label:Editor.I18n.t("inspector.menu.move_up_component"),enabled:!o&&0!==s,click(){Editor.Message.send("scene","snapshot"),Editor.Message.send("scene","move-array-element",{uuid:a,path:"__comps__",target:s,offset:-1})}},{label:Editor.I18n.t("inspector.menu.move_down_component"),enabled:!o&&s!==t-1,click(){Editor.Message.send("scene","snapshot"),Editor.Message.send("scene","move-array-element",{uuid:a,path:"__comps__",target:s,offset:1})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.copy_component"),enabled:!o,async click(){Editor.Clipboard.write("_dump_component_",{type:n.type,dump:JSON.parse(JSON.stringify(n))})}},{label:Editor.I18n.t("inspector.menu.paste_component_values"),enabled:!(!i||i.type!==n.type),async click(){Editor.Message.send("scene","snapshot"),(n.values||[n.value]).forEach((t,s)=>{Editor.Message.request("scene","set-property",{uuid:e[s],path:n.path,dump:i.dump})})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.paste_component"),enabled:!!i,async click(){Editor.Message.send("scene","snapshot"),(n.values||[n.value]).forEach(async(n,t)=>{const s=e[t];await Editor.Message.request("scene","create-component",{uuid:s,component:i.type});const o=await Editor.Message.request("scene","query-node",s),a=o.__comps__&&o.__comps__.length;if(a){const e=a-1,n=o.__comps__[e];n&&n.type===i.type&&await Editor.Message.request("scene","set-property",{uuid:s,path:`__comps__.${e}`,dump:i.dump})}})}}]})},nodeContextMenu(e,n){const t=n[0],s=t.length>1,o=Editor.Clipboard.read("_dump_node_"),a=Editor.Clipboard.read("_dump_component_");Editor.Menu.popup({menu:[{label:Editor.I18n.t("inspector.menu.reset_node"),enabled:!t.position.readonly&&!t.rotation.readonly&&!t.scale.readonly,click(){Editor.Message.send("scene","snapshot");for(const n of e)Editor.Message.send("scene","reset-node",{uuid:n})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.copy_node_value"),enabled:!s,async click(){Editor.Clipboard.write("_dump_node_",{type:t.type,attrs:["position","rotation","scale","layer"],dump:JSON.parse(JSON.stringify(t))})}},{label:Editor.I18n.t("inspector.menu.paste_node_value"),enabled:!!o,async click(){Editor.Message.send("scene","snapshot");for(const n of e)o.attrs.forEach(e=>{Editor.Message.send("scene","set-property",{uuid:n,path:e,dump:o.dump[e]})})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.paste_component"),enabled:!!a,async click(){Editor.Message.send("scene","snapshot"),(t.values||[t.value]).forEach(async(n,t)=>{const s=e[t];await Editor.Message.request("scene","create-component",{uuid:s,component:a.type});const o=await Editor.Message.request("scene","query-node",s),i=o.__comps__&&o.__comps__.length;if(i){const e=i-1,n=o.__comps__[e];n&&n.type===a.type&&await Editor.Message.request("scene","set-property",{uuid:s,path:`__comps__.${e}`,dump:a.dump})}})}},{type:"separator"},{label:Editor.I18n.t("inspector.menu.reset_node_position"),enabled:!t.position.readonly&&JSON.stringify(t.position.value)!==JSON.stringify(t.position.default),click(){Editor.Message.send("scene","snapshot");for(const n of e)Editor.Message.send("scene","reset-property",{uuid:n,path:"position"})}},{label:Editor.I18n.t("inspector.menu.reset_node_rotation"),enabled:!t.rotation.readonly&&JSON.stringify(t.rotation.value)!==JSON.stringify(t.rotation.default),click(){Editor.Message.send("scene","snapshot");for(const n of e)Editor.Message.send("scene","reset-property",{uuid:n,path:"rotation"})}},{label:Editor.I18n.t("inspector.menu.reset_node_scale"),enabled:!t.rotation.readonly&&JSON.stringify(t.scale.value)!==JSON.stringify(t.scale.default),click(){Editor.Message.send("scene","snapshot");for(const n of e)Editor.Message.send("scene","reset-property",{uuid:n,path:"scale"})}}]})}},exports.update=update,exports.ready=ready,exports.close=close,exports.beforeClose=beforeClose;
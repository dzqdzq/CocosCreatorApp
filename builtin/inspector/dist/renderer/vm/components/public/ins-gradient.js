"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyed=exports.mounted=exports.data=exports.watch=exports.methods=exports.components=exports.props=exports.template=void 0;const Chroma=require("chroma-js");function data(){return{value:{}}}function mounted(){this.refresh()}function destroyed(){}exports.template='\n<div class="ins-gradient"\n    @click.right="reset"\n>\n\n    <template\n        v-if="dump"\n    >\n        <div class="prop-name"\n            v-if="name"\n        >\n            <ui-label\n                :tooltip="title"\n                :value="name"\n            ></ui-label>\n            <ui-icon value="lock"\n                v-if="readonly || dump.readonly"\n            ></ui-icon>\n        </div>\n        <ins-resize-line></ins-resize-line>\n        <template\n            v-if="dumps && dumps.length > 1"\n        >\n            <div class="prop-content">\n                Unable to merge operations\n            </div>\n        </template>\n\n        <template\n            v-else\n        >\n            <div class="prop-content">\n                <ui-gradient\n                    :value="JSON.stringify(value)"\n                    @change="_onGradientChanged($event)"\n                ></ui-gradient>\n            </div>\n        </template>\n    </template>\n</div>\n',exports.props=["title","name","dump","dumps","readonly"],exports.components={"ins-resize-line":require("./ins-resize-line")},exports.methods={_onGradientChanged(e){this.dump.value.alphaKeys=(e.target.value.alpha||[]).map(e=>({time:e.progress,alpha:Math.round(255*e.value)})),this.dump.value.colorKeys=(e.target.value.color||[]).map(e=>{let t;try{t=Chroma(e.value).rgb()}catch(e){t=[255,255,255]}return{time:e.progress,color:t}})},refresh(){const e=this;if(e.dump.value){const t=(e.dump.value.alphaKeys||[]).map(e=>(void 0===e.time&&(e.time=0),void 0===e.alpha&&(e.alpha=255),{progress:e.time,value:e.alpha/255})),n=(e.dump.value.colorKeys||[]).map(e=>{void 0===e.time&&(e.time=0),void 0===e.color&&(e.color=[255,255,255]);let t="";try{t=Chroma(e.color).hex()}catch(e){t="#ffffff"}return{progress:e.time,value:t}});e.value={color:n,alpha:t}}}},exports.watch={"dump.value"(){this.refresh()}},exports.data=data,exports.mounted=mounted,exports.destroyed=destroyed;
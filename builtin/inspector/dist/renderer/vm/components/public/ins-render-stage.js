"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.data=exports.watch=exports.methods=exports.computed=exports.components=exports.props=exports.template=void 0;const{orderBy:orderBy}=require("lodash");function data(){return{stages:[],stage:{},stageIndex:-1}}async function mounted(){await this.loadAll()}exports.template='\n<ui-section class="asset-render-stage" no-border\n    :expand-key="\'stages\'+value.name"\n    :expand="$root.expand(\'stages\'+value.name, true)"\n>\n    <div slot="header" class="header">\n        <div class="prop-name">{{value.name}}</div>\n        <ui-select class="prop-content"\n            :value="stageIndex"\n            @confirm="stageIndex = $event.target.value"\n        >\n            <option\n                v-for="(stage, index) in stages"\n                :key="index + \' - \' + stage.name"\n                :value="index"\n            >{{stage.name}}</option>\n        </ui-select>\n    </div>\n\n    <div class="content"\n        v-if="orderStage.length"\n    >\n        <ins-prop auto="true"\n            v-for="(item,index) in orderStage"\n            :key="index"\n            :dump="item"\n            :dumps="[item]"\n        ></ins-prop>\n    </div>\n\n</ui-section>\n',exports.props=["value"],exports.components={"ins-prop":require("./ins-prop")},exports.computed={orderStage(){return orderBy(this.stage,"displayOrder")}},exports.methods={async loadAll(){this.stages=await Editor.Message.request("scene","query-all-render-stages"),this.show()},show(){const e=this;e.stageIndex=e.stages.findIndex(t=>t.name===e.value.type),-1===e.stageIndex?e.stage={}:e.stage=e.value.value}},exports.watch={async stageIndex(e){const t=this;if(-1===e)return;const s=Number(t.$parent.$parent.$parent.$parent.value.name),n=t.stages[e].name;t.value.type!==n&&(await Editor.Message.request("scene","select-render-stage",n,s,Number(t.value.name)),t.$root.$refs.asset._onConfirm())},"value.value"(){this.show()}},exports.data=data,exports.mounted=mounted;
"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,_){return new(o||(o=Promise))(function(n,r){function a(e){try{i(_.next(e))}catch(e){r(e)}}function s(e){try{i(_.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}i((_=_.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sp_Skeleton=exports.SP_SKELETON=void 0;const base_1=require("../common/base"),utlis_1=require("../common/utlis");exports.SP_SKELETON={__type__:"sp.Skeleton",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_visFlags:0,_customMaterial:null,_srcBlendFactor:2,_dstBlendFactor:4,_color:{__type__:"cc.Color",r:255,g:255,b:255,a:255},loop:!0,timeScale:1,_useTint:!1,_preCacheMode:1,_cacheMode:1,_defaultCacheMode:0,_debugBones:!1,_debugSlots:!1,_skeletonData:null,defaultSkin:"default",defaultAnimation:"",_sockets:[],_debugMesh:!1};class Sp_Skeleton{static create(){return JSON.parse(JSON.stringify(exports.SP_SKELETON))}static migrate(e){return __awaiter(this,void 0,void 0,function*(){const t=JSON.parse(JSON.stringify(exports.SP_SKELETON));for(let o in e){const _=e[o];"__type__"!==o&&void 0!==_&&null!==_&&(o.startsWith("_N$")&&(o=o.replace(/N\$/,"")),"_skeletonData"===o?t._skeletonData={__uuid__:yield base_1.ImporterBase.getUuid(_.__uuid__)}:"node"===o?(t.node=_,utlis_1.setColor(t,_.__id__,e)):"_dstBlendFactor"===o?t._dstBlendFactor=utlis_1.getBlendFactor2DTo3D(_):"_srcBlendFactor"===o?t._srcBlendFactor=utlis_1.getBlendFactor2DTo3D(_):t[o]=_)}return t})}static apply(e,t,o){return __awaiter(this,void 0,void 0,function*(){const _=yield Sp_Skeleton.migrate(t[e]);return o.splice(e,1,_),_})}}exports.Sp_Skeleton=Sp_Skeleton;
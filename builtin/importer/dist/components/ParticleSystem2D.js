"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,_){return new(r||(r=Promise))(function(a,i){function s(e){try{l(_.next(e))}catch(e){i(e)}}function o(e){try{l(_.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,o)}l((_=_.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParticleSystem2D=exports.PARTICLESYSTEM2D=void 0;const base_1=require("../common/base"),utlis_1=require("../common/utlis");exports.PARTICLESYSTEM2D={__type__:"cc.ParticleSystem2D",_name:"",_objFlags:0,node:null,_enabled:!0,__prefab:null,_materials:null,_visFlags:0,_srcBlendFactor:2,_dstBlendFactor:4,_color:{__type__:"cc.Color",r:255,g:255,b:255,a:255},preview:!0,_custom:!1,_file:null,_spriteFrame:null,_texture:null,playOnLoad:!0,autoRemoveOnFinish:!1,_totalParticles:150,duration:-1,emissionRate:10,life:1,lifeVar:0,_startColor:{__type__:"cc.Color",r:255,g:255,b:255,a:255},_startColorVar:{__type__:"cc.Color",r:0,g:0,b:0,a:0},_endColor:{__type__:"cc.Color",r:255,g:255,b:255,a:0},_endColorVar:{__type__:"cc.Color",r:0,g:0,b:0,a:0},angle:90,angleVar:20,startSize:50,startSizeVar:0,endSize:0,endSizeVar:0,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,sourcePos:{__type__:"cc.Vec2",x:0,y:0},posVar:{__type__:"cc.Vec2",x:0,y:0},_positionType:0,emitterMode:0,gravity:{__type__:"cc.Vec2",x:0,y:0},speed:180,speedVar:50,tangentialAccel:80,tangentialAccelVar:0,radialAccel:0,radialAccelVar:0,rotationIsDir:!1,startRadius:0,startRadiusVar:0,endRadius:0,endRadiusVar:0,rotatePerS:0,rotatePerSVar:0};class ParticleSystem2D{static create(){return JSON.parse(JSON.stringify(exports.PARTICLESYSTEM2D))}static migrate(e,t){return __awaiter(this,void 0,void 0,function*(){const t=JSON.parse(JSON.stringify(exports.PARTICLESYSTEM2D));for(const r in e){const _=e[r];if("__type__"!==r&&void 0!==_&&null!==_)if("node"===r)t.node=_,utlis_1.setColor(t,_.__id__,e);else if("_N$preview"===r)t.preview=_;else if("_materials"===r){if("_materials"===r){t._materials=[];for(let e=0;e<_.length;++e){let r=_[e];r&&(r={__uuid__:yield base_1.ImporterBase.getUuid(r.__uuid__)},t._materials.push(r))}}}else"_totalParticles"===r?t.totalParticles=_:"_spriteFrame"===r?t._spriteFrame={__uuid__:yield base_1.ImporterBase.getUuid(_.__uuid__,"spriteFrame")}:"_texture"===r?t._texture={__uuid__:yield base_1.ImporterBase.getUuid(_.__uuid__,"texture")}:"_file"===r?t._file={__uuid__:yield base_1.ImporterBase.getUuid(_.__uuid__)}:"_dstBlendFactor"===r?t._dstBlendFactor=utlis_1.getBlendFactor2DTo3D(_):"_srcBlendFactor"===r?t._srcBlendFactor=utlis_1.getBlendFactor2DTo3D(_):t[r]=_}return t})}static apply(e,t,r){return __awaiter(this,void 0,void 0,function*(){const _=yield ParticleSystem2D.migrate(t[e],r);return r.splice(e,1,_),_})}}exports.ParticleSystem2D=ParticleSystem2D;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validatorManager=exports.validator=void 0;const validator_1=require("./validator");class ValidatorManager{constructor(){this.validators={},this.defaultValidator=new validator_1.Validator}addRule(a,t,r){let e=this.defaultValidator;r&&(this.validators[r]=this.validators[r]||new validator_1.Validator,e=this.validators[r]),e.add(a,t)}async check(a,t,r,e=""){if(!Array.isArray(t))return"";try{if(["",void 0,null].includes(a)&&!t.includes("required"))return"";for(const i of t){const t=this.validators[e]||this.defaultValidator;if(!t.has(i))return console.warn(`Rule ${i} is not exist.(pkgName: ${e})`),"";const o=await t.checkRuleWithMessage(i,a,r);if(o)return o}}catch(a){return a.message}return""}}exports.validator=new validator_1.Validator,exports.validatorManager=new ValidatorManager;
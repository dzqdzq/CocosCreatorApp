"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const utils_1=require("../utils"),sort_plugin_scripts_1=require("@editor/lib-programming/dist/executor/sort-plugin-scripts");async function handle(s,e,t){if(s.md5Cache){for(const s of e.bundles){for(const e in s.assetVer.import)s.config.versions.import.push(e,s.assetVer.import[e]);for(const e in s.assetVer.native)s.config.versions.native.push(e,s.assetVer.native[e])}if(e.pluginVers&&e.settings.plugins.jsList.length>0){const s=[],i={};for(const r of Object.keys(e.pluginVers)){const n=t.getAssetInfo(r),o=await t.getMeta(r),p=(0,utils_1.removeDbHeader)(n.url);s.push([r,(0,sort_plugin_scripts_1.getPluginScriptDependencies)(o.userData)]),i[r]=p.replace(/\.[^\.]+$/,s=>"."+e.pluginVers[r]+s)}const r=(0,sort_plugin_scripts_1.sortPluginScripts)(s);e.settings.plugins.jsList=r.map(s=>i[s])}}else console.debug("options.md5Cache is false.")}exports.title="i18n:builder.tasks.settings.md5",exports.handle=handle;
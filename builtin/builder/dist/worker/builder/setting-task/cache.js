"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const fs_extra_1=require("fs-extra");async function handle(e,t,s){if(e.preview||!e.recompileConfig||!e.recompileConfig.enable)return;const n=Editor.Utils.Path.join(t.paths.dir,"res","settings.json");if(!fs_extra_1.existsSync(n))throw new Error("Get cache settings failed!");const o=await fs_extra_1.readJSON(n);if(!o)return void console.error("can't get cache settings...");const r=o.uuids,i=o.rawAssets,c=o.assetTypes,a=o.rawAssets={};for(const e in i){const t=i[e],s=a[e]={};for(const e in t){const n=t[e],o=n[1];"number"==typeof o&&(n[1]=c[o]),s[r[e]||e]=n}}const f=o.scenes;for(let e=0;e<f.length;++e){const t=f[e];"number"==typeof t.uuid&&(t.uuid=r[t.uuid])}const u=o.packedAssets;for(const e in u){const t=u[e];for(let e=0;e<t.length;++e)"number"==typeof t[e]&&(t[e]=r[t[e]])}const l=o.subpackages;for(const e in l){const t=l[e].uuids;if(t)for(let e=0,s=t.length;e<s;e++)"number"==typeof t[e]&&(t[e]=r[t[e]])}Object.assign(t.settings,o)}exports.title="i18n:tasks.settings.cache",exports.handle=handle;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const bundle_utils_1=require("../../../share/bundle-utils");async function handle(e,s,t){for(const e of s.bundles){e.config.importBase=e.importBase,e.config.nativeBase=e.nativeBase,e.config.name=e.name,e.config.deps=Array.from(e.deps).sort(),e.config.uuids=e.assets.sort(),Object.values(e.config.extensionMap).forEach(e=>e.sort());const t=e.config.redirect;e.isZip&&(e.config.isZip=!0,e.config.zipVersion=e.zipVer),e.isRemote&&s.settings.remoteBundles.push(e.name),e.isSubpackage&&s.settings.subpackages.push(e.name);const n=Object.keys(e.redirect).sort();for(const s of n)t.push(s,String(e.config.deps.indexOf(e.redirect[s])));e.name===bundle_utils_1.BuiltinBundleName.RESOURCES?s.settings.hasResourcesBundle=!0:e.name===bundle_utils_1.BuiltinBundleName.START_SCENE&&(s.settings.hasStartSceneBundle=!0)}}exports.title="i18n:builder.tasks.settings.init",exports.handle=handle;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const fs_extra_1=require("fs-extra");async function handle(e,t,r){const a=t.settings;a.debug=e.debug,a.designResolution=e.appTemplateData.resolution,a.platform=e.platform||a.platform,a.renderPipeline=e.renderPipeline;const s={url:Editor.App.icon,displayRatio:.4,totalTime:3e3,effect:"",clearColor:{x:.88,y:.88,z:.88,w:1},displayWatermark:!0};let l=await Editor.Profile.getProject("builder","splash-setting");if(e.replaceSplashScreen&&l)try{l=Object.assign({},s,l),a.splashScreen=formatSplashScreen(l)}catch(e){console.warn(e),a.splashScreen=formatSplashScreen(s)}else a.splashScreen=formatSplashScreen(s);for(const r of t.bundles)r.config.debug=e.debug}function formatSplashScreen(e){const t=Editor.UI.File.resolveToRaw(e.url);return e.base64src=`data:image/png;base64,${fs_extra_1.readFileSync(t).toString("base64")}`,delete e.url,e}exports.title="i18n:tasks.settings.cache",exports.handle=handle;
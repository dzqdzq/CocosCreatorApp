"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const sort_plugin_scripts_1=require("@editor/lib-programming/dist/executor/sort-plugin-scripts"),utils_1=require("../utils");async function handle(t,s,e){const i=s.settings;i.scriptPackages=s.scriptPackages.slice(0);const r=[],n={};for(const t of s.plugins){const s=await e.getAssetInfo(t),i=await e.getMeta(t);if(!i){console.warn(`Script:({asset(${s.url})}) does not import!`);continue}const o=utils_1.removeDbHeader(s.url).split("/").map(encodeURIComponent).join("/");r.push([t,sort_plugin_scripts_1.getPluginScriptDependencies(i.userData)]),n[t]=o.replace(/.ts$/,".js")}const o=sort_plugin_scripts_1.sortPluginScripts(r);i.jsList=o.map(t=>n[t])}exports.title="i18n:tasks.settings.script",exports.handle=handle;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const sort_plugin_scripts_1=require("@editor/lib-programming/dist/executor/sort-plugin-scripts"),utils_1=require("../utils");async function handle(t,s,e){const i=s.settings;i.scripting.scriptPackages=s.scriptPackages.map(t=>Build.Utils.relativeUrl(s.paths.engineDir,t));const r=[],n={};for(const t of s.plugins){const s=e.getAssetInfo(t),i=await e.getMeta(t);if(!i||!s){console.warn(`Script:({asset(${s&&s.url||t})}) does not import!`);continue}const o=(0,utils_1.removeDbHeader)(s.url);r.push([t,(0,sort_plugin_scripts_1.getPluginScriptDependencies)(i.userData)]),n[t]=o.replace(/.ts$/,".js")}const o=(0,sort_plugin_scripts_1.sortPluginScripts)(r);i.plugins.jsList=o.map(t=>n[t])}exports.title="i18n:builder.tasks.settings.script",exports.handle=handle;
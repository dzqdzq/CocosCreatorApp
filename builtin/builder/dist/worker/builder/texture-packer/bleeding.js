"use strict";var applyContourBleed=function(e,t,i,o,r,l,d){if(0!==o.width&&0!==o.height)for(var f=o.x,a=o.xMax,n=o.y,p=o.yMax,h=4*i,c=0,y=r.length,s=0,g=0,u=0,m=0,x=n*h+4*f,B=n,b=0;B<p;++B,x+=h)for(m=x,b=f;b<a;++b,m+=4)if(0===t[m+3])for(c=0;c<y;c++)if(s=b+r[c],g=B+l[c],s>=f&&s<a&&g>=n&&g<p&&t[(u=m+d[c])+3]>0){e[m]=t[u],e[m+1]=t[u+1],e[m+2]=t[u+2];break}},applyPaddingBleed=function(e,t,i,o,r){if(0!==r.width&&0!==r.height){var l=r.y,d=r.yMax-1,f=r.x,a=r.xMax-1,n=4*i,p=4*f,h=4*a,c=l*n,y=d*n,s=0,g=0;if(l-1>=0)for(s=c+p,g=c+h+3;s<=g;++s)e[s-n]=t[s];if(d+1<o)for(s=y+p,g=y+h+3;s<=g;++s)e[s+n]=t[s];if(f-1>=0)for(s=c+p,g=y+p;s<=g;s+=n)e[s-4]=t[s],e[s-3]=t[s+1],e[s-2]=t[s+2],e[s-1]=t[s+3];if(a+1<i)for(s=c+h,g=y+h;s<=g;s+=n)e[s+4]=t[s],e[s+5]=t[s+1],e[s+6]=t[s+2],e[s+7]=t[s+3];if(f-1>=0&&l-1>=0)for(g=(s=c+p)+4;s<g;s++)e[s-n-4]=t[s];if(a+1<i&&l-1>=0)for(g=(s=c+h)+4;s<g;s++)e[s-n+4]=t[s];if(f-1>=0&&d+1<o)for(g=(s=y+p)+4;s<g;s++)e[s+n-4]=t[s];if(a+1<i&&d+1<o)for(g=(s=y+h)+4;s<g;s++)e[s+n+4]=t[s]}},applyBleed=function(e,t,i,o){let r=0,l=null;if(e.contourBleed){console.time("apply contour bleed");for(var d=4*t.width,f=[-1,0,1,-1,1,-1,0,1],a=[-1,-1,-1,0,0,1,1,1],n=[],p=0;p<f.length;p++)n[p]=4*f[p]+a[p]*d;for(r=0,l=null;r<t.spriteFrameInfos.length;r++)l=t.spriteFrameInfos[r].trim,applyContourBleed(o,i,t.width,cc.rect(l.x,l.y,l.rotatedWidth,l.rotatedHeight),f,a,n);console.timeEnd("apply contour bleed")}if(e.paddingBleed){for(console.time("apply padding bleed"),r=0,l=null;r<t.spriteFrameInfos.length;r++)l=t.spriteFrameInfos[r].trim,applyPaddingBleed(o,i,t.width,t.height,cc.rect(l.x,l.y,l.rotatedWidth,l.rotatedHeight));console.timeEnd("apply padding bleed")}};module.exports={applyBleed:applyBleed};
"use strict";async function handle(s,t,o){if(!s.debug){for(const s of t.bundles){const t=s.config,o=n(t),e=t.paths,c=t.paths={},r=t.types=[];for(const s in e){const t=e[s],n=o[s];let i=r.indexOf(t[1]);-1===i&&(i=r.length,r.push(t[1])),t[1]=i,c[n]=t}const i=t.scenes;for(const s in i){const t=o[i[s]];i[s]=Number(t)}for(const s in t.extensionMap){const n=t.extensionMap[s];for(let s=0;s<n.length;++s){const t=o[n[s]];n[s]=t}n.sort()}const f=t.packs;for(const s in f){const t=f[s];for(let s=0;s<t.length;++s){const n=o[t[s]];t[s]=n}}const l=t.versions;for(const s of Object.values(l))for(let t=0;t<s.length;t+=2){const n=o[s[t]];s[t]=Number(n)}const p=t.redirect;for(let s=0;s<p.length;s+=2){const t=o[p[s]];p[s]=Number(t)}}s.debug||(t.settings.renderPipeline=Editor.Utils.UUID.compressUUID(t.settings.renderPipeline,!0))}function n(s){const t={},o={};function n(s){const n=(t[s]||0)+1;t[s]=n,s in o||(o[s]=s)}const e=s.paths;for(const s in e)n(s);const c=s.scenes;for(const s in c)n(c[s]);for(const t in s.extensionMap)s.extensionMap[t].forEach(n);const r=Object.keys(s.packs).sort(),i={};for(const t of r)s.packs[t].forEach(n),i[t]=s.packs[t];s.packs=i;const f=s.versions;for(const s of Object.values(f))for(let t=0;t<s.length;t+=2)n(s[t]);const l=s.redirect;for(let s=0;s<l.length;s+=2)n(l[s]);return s.uuids.sort((s,o)=>t[o]-t[s]),s.uuids.forEach((s,t)=>o[s]=String(t)),s.uuids=s.uuids.map(s=>Editor.Utils.UUID.compressUUID(s,!0)),o}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0,exports.title="i18n:builder.tasks.postprocess.compress",exports.handle=handle;
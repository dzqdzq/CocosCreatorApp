"use strict";async function handle(t,s,o){if(!t.debug){for(const t of s.bundles){const s=t.config,o=n(s),e=s.paths,c=s.paths={},r=s.types=[];for(const t in e){const s=e[t],n=o[t];let i=r.indexOf(s[1]);-1===i&&(i=r.length,r.push(s[1])),s[1]=i,c[n]=s}const i=s.scenes;for(const t in i){const s=o[i[t]];i[t]=Number(s)}for(const t in s.extensionMap){const n=s.extensionMap[t];for(let t=0;t<n.length;++t){const s=o[n[t]];n[t]=s}n.sort()}const f=s.packs;for(const t in f){const s=f[t];for(let t=0;t<s.length;++t){const n=o[s[t]];s[t]=n}}const l=s.versions;for(const t of Object.values(l))for(let s=0;s<t.length;s+=2){const n=o[t[s]];t[s]=Number(n)}const p=s.redirect;for(let t=0;t<p.length;t+=2){const s=o[p[t]];p[t]=Number(s)}}t.debug||(s.settings.renderPipeline=Editor.Utils.UUID.compressUUID(s.settings.renderPipeline,!0))}function n(t){const s={},o={};function n(t){const n=(s[t]||0)+1;s[t]=n,t in o||(o[t]=t)}const e=t.paths;for(const t in e)n(t);const c=t.scenes;for(const t in c)n(c[t]);for(const s in t.extensionMap)t.extensionMap[s].forEach(n);const r=t.packs,i=Object.keys(r).sort();for(const t of i)r[t].forEach(n);const f=t.versions;for(const t of Object.values(f))for(let s=0;s<t.length;s+=2)n(t[s]);const l=t.redirect;for(let t=0;t<l.length;t+=2)n(l[t]);return t.uuids.sort((t,o)=>s[o]-s[t]),t.uuids.forEach((t,s)=>o[t]=String(s)),t.uuids=t.uuids.map(t=>Editor.Utils.UUID.compressUUID(t,!0)),o}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0,exports.title="i18n:tasks.postprocess.compress",exports.handle=handle;
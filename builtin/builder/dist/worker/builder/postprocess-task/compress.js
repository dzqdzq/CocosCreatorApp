"use strict";async function handle(s,t,n){if(!s.debug){for(const s of t.bundles){const t=s.config,n=e(t),o=t.paths,r=t.paths={},c=t.types=[];for(const s in o){const t=o[s],e=n[s];let i=c.indexOf(t[1]);-1===i&&(i=c.length,c.push(t[1])),t[1]=i,r[e]=t}const i=t.scenes;for(const s in i){const t=n[i[s]];i[s]=Number(t)}for(const s in t.extensionMap){const e=t.extensionMap[s];for(let s=0;s<e.length;++s){const t=n[e[s]];e[s]=t}e.sort()}const f=t.packs;for(const s in f){const t=f[s];for(let s=0;s<t.length;++s){const e=n[t[s]];t[s]=e}}const l=t.versions;for(const s of Object.values(l))for(let t=0;t<s.length;t+=2){const e=n[s[t]];s[t]=Number(e)}const p=t.redirect;for(let s=0;s<p.length;s+=2){const t=n[p[s]];p[s]=Number(t)}}s.debug||(t.settings.rendering.renderPipeline=Editor.Utils.UUID.compressUUID(t.settings.rendering.renderPipeline,!0))}function e(s){const t={},n={};function e(s){const e=(t[s]||0)+1;t[s]=e,s in n||(n[s]=s)}const o=s.paths;for(const s in o)e(s);const r=s.scenes;for(const s in r)e(r[s]);for(const t in s.extensionMap)s.extensionMap[t].forEach(e);const c=Object.keys(s.packs).sort(),i={};for(const t of c)s.packs[t].forEach(e),i[t]=s.packs[t];s.packs=i;const f=s.versions;for(const s of Object.values(f))for(let t=0;t<s.length;t+=2)e(s[t]);const l=s.redirect;for(let s=0;s<l.length;s+=2)e(l[s]);return s.uuids.sort((s,n)=>t[n]-t[s]),s.uuids.forEach((s,t)=>n[s]=String(t)),s.uuids=s.uuids.map(s=>Editor.Utils.UUID.compressUUID(s,!0)),n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0,exports.title="i18n:builder.tasks.postprocess.compress",exports.handle=handle;
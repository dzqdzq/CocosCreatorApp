"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),crypto_1=require("crypto");async function handle(e,t,s){for(const s of t.bundles){let t=(0,path_1.join)(s.dest,(s.configOutPutName||(0,path_1.parse)(Build.CONFIG_NAME).name)+".json");if(e.md5Cache){const e=(0,crypto_1.createHash)("md5");e.update(JSON.stringify(s.config));const a=(0,fs_extra_1.readFileSync)(s.scriptDest);e.update(a);const r=e.digest("hex").slice(0,5);if(!s.isSubpackage){const e=(0,path_1.join)((0,path_1.dirname)(s.scriptDest),`${(0,path_1.parse)(s.scriptDest).name}.${r}${(0,path_1.extname)(s.scriptDest)}`);(0,fs_extra_1.renameSync)(s.scriptDest,e),s.scriptDest=e}t=(0,path_1.join)(s.dest,`${s.configOutPutName||(0,path_1.parse)(Build.CONFIG_NAME).name}.${r}.json`),s.version=r}const a=JSON.stringify(s.config,null,e.debug?4:0);(0,fs_extra_1.outputFileSync)(t,a,"utf8")}}exports.title="i18n:builder.tasks.postprocess.save_config",exports.handle=handle;
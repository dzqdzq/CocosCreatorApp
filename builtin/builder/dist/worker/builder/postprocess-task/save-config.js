"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),crypto_1=require("crypto");async function handle(e,t,s){for(const s of t.bundles){let t=path_1.join(s.dest,Build.CONFIG_NAME);if(e.md5Cache){const e=crypto_1.createHash("md5");e.update(JSON.stringify(s.config));const r=fs_extra_1.readFileSync(s.scriptDest);e.update(r);const a=e.digest("hex").slice(0,5);if(!s.isSubpackage){const e=path_1.join(path_1.dirname(s.scriptDest),`${path_1.parse(s.scriptDest).name}.${a}${path_1.extname(s.scriptDest)}`);fs_extra_1.renameSync(s.scriptDest,e),s.scriptDest=e}t=path_1.join(s.dest,`${path_1.parse(Build.CONFIG_NAME).name}.${a}.json`),s.version=a}const r=JSON.stringify(s.config,null,e.debug?4:0);fs_extra_1.outputFileSync(t,r,"utf8")}}exports.title="i18n:tasks.postprocess.save_config",exports.handle=handle;
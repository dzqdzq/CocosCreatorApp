"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),crypto_1=require("crypto");async function handle(e,t,s){const n=t.settings,i=this.bundleManager.bundles.filter(e=>e.output).sort((e,t)=>e.name.localeCompare(t.name));if(e.md5Cache&&"bundle"!==e.buildMode){for(const e of i)n.assets.bundleVers[e.name]=e.version;const e=(0,crypto_1.createHash)("md5");e.update(JSON.stringify(t.settings)),t.paths.settings=(0,path_1.join)((0,path_1.dirname)(t.paths.settings),`settings.${e.digest("hex").slice(0,5)}.json`)}const r=JSON.stringify(t.settings,null,e.debug?4:0);(0,fs_extra_1.outputFileSync)(t.paths.settings,r,"utf8")}exports.title="i18n:builder.tasks.postprocess.save_settings",exports.handle=handle;
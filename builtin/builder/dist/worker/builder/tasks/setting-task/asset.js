"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0;const bundle_utils_1=require("../../../../share/bundle-utils"),utils_1=require("../../utils");exports.title="i18n:builder.tasks.settings.options";const layerMask=[];for(let e=0;e<=19;e++)layerMask[e]=1<<e;async function handle(e,s,t){const n=this.bundleManager.bundles.filter(e=>e.output);for(const e of n)e.name===bundle_utils_1.BuiltinBundleName.RESOURCES?s.settings.assets.preloadBundles.push({bundle:bundle_utils_1.BuiltinBundleName.RESOURCES}):e.name===bundle_utils_1.BuiltinBundleName.START_SCENE?s.settings.assets.preloadBundles.push({bundle:bundle_utils_1.BuiltinBundleName.START_SCENE}):e.name===bundle_utils_1.BuiltinBundleName.MAIN&&s.settings.assets.preloadBundles.push({bundle:bundle_utils_1.BuiltinBundleName.MAIN}),e.isRemote&&s.settings.assets.remoteBundles.push(e.name),e.isSubpackage&&s.settings.assets.subpackages.push(e.name);e.preview||(e.startScene=t.getAssetInfo(e.startScene).url),e.debug||(s.settings.rendering.renderPipeline=(0,utils_1.compressUuid)(s.settings.rendering.renderPipeline,!0)),s.settings.assets.projectBundles=n.map(e=>e.name),s.settings.engine.builtinAssets=Array.from(this.bundleManager.bundleMap[bundle_utils_1.BuiltinBundleName.INTERNAL]._rootAssets)}exports.handle=handle;
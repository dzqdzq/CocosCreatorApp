"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.name=exports.title=void 0,exports.handle=handle;const path_1=require("path"),plugin_1=require("../../../plugin");async function handle(r,s,t){let a={};try{var e=plugin_1.pluginManager.platformConfigs[r.platform].type;e&&(a={["loadPluginIn"+(e[0].toUpperCase()+e.slice(1))]:!0})}catch(t){console.error(t),console.warn("Can not find platform type for "+r.platform)}if(s.pluginScripts=await Editor.Message.request("programming","query-sorted-plugins",a),!r.preview){s.paths.polyfillsJs=(0,path_1.join)(s.paths.dir,"src","polyfills.bundle.js"),s.paths.systemJs=(0,path_1.join)(s.paths.dir,"src","system.bundle.js"),s.paths.engineDir=r.buildEngineParam.output;e=r.buildScriptParam["importMapFormat"];let t;var i=(0,path_1.join)(s.paths.dir,"src"),e=(t=void 0===e?".json":".js",(0,path_1.join)(i,"import-map"+t));s.paths.importMap=e,r.buildScriptParam.commonDir=(0,path_1.join)(s.paths.dir,"src","chunks")}}exports.title="i18n:builder.tasks.sort_asset_bundle",exports.name="data-task/asset_script";
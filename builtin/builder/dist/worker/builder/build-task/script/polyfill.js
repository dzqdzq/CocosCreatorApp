"use strict";var __importDefault=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildPolyfillsX=void 0;const fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),build_polyfills_1=__importDefault(require("@editor/build-polyfills"));async function buildPolyfillsX(l,i){var s,e,t,o;const r={debug:!1,sourceMap:!1,file:path_1.default.join(i.paths.dir,"src","polyfills.bundle.js")};(null===(s=l.buildScriptParam.polyfills)||void 0===s?void 0:s.asyncFunctions)&&(r.asyncFunctions=!0);const u=null!==(t=null===(e=l.buildScriptParam.polyfills)||void 0===e?void 0:e.targets)&&void 0!==t?t:"> 0.5%";void 0!==(null===(o=l.buildScriptParam.polyfills)||void 0===o?void 0:o.coreJs)?r.coreJs={modules:["es"],blacklist:[],targets:u}:r.coreJs={modules:leastRequiredCoreJsModules,blacklist:[],targets:u},await(0,build_polyfills_1.default)(r)&&await fs_extra_1.default.pathExists(r.file)&&(i.paths.polyfillsJs=r.file)}exports.buildPolyfillsX=buildPolyfillsX;const leastRequiredCoreJsModules=["es.global-this"];
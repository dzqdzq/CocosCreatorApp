"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=void 0;const path_1=__importDefault(require("path")),project_scripts_1=require("./project-scripts"),build_time_constants_1=require("./build-time-constants"),engine_1=require("./engine"),import_map_1=require("./import-map"),polyfill_1=require("./polyfill"),system_js_1=require("./system-js"),utils_1=require("../../utils");async function handle(t,e,i){const s=this;await polyfill_1.buildPolyfillsX(t,e),await system_js_1.buildSystemJsX(t,e),await async function(){const r=path_1.default.join(e.paths.dir,"src"),o={imports:{}},l=build_time_constants_1.getBuildTimeConstants(t);s.updateProcess(Editor.I18n.t("builder.tasks.build_script")),console.time(Editor.I18n.t("builder.tasks.build_script")),console.debug(utils_1.getMemorySize()),await project_scripts_1.buildProjectScriptsX(t,e,i,o,l),console.timeEnd(Editor.I18n.t("builder.tasks.build_script")),s.updateProcess(Editor.I18n.t("builder.tasks.build_script")+"√"),s.updateProcess(Editor.I18n.t("builder.tasks.build_engine")),console.time(Editor.I18n.t("builder.tasks.build_engine")),console.debug(utils_1.getMemorySize()),await engine_1.buildEngineX(t,e,i,o,r,l),console.timeEnd(Editor.I18n.t("builder.tasks.build_engine")),s.updateProcess(Editor.I18n.t("builder.tasks.build_engine")+"√"),await import_map_1.outputImportMap(o,r,t,e)}()}exports.handle=handle;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuiltinHashType=exports.calculate=void 0;const utils_1=require("../../../share/utils"),XXH=require("xxhashjs"),UNIQUE_ID_SEP="-";function unique(e){const t={};for(let s=0;s<e.length;s++){const r=e[s],o=t[r];void 0===o?t[r]=1:(e[s]=r+UNIQUE_ID_SEP+o.toString(16),t[r]=o+1)}}function calculate(e,t){const s=XXH.h32(),r=[];for(let t=0;t<e.length;t++){let o=e[t];o=o.slice().sort(utils_1.compareUUID);for(let e=0;e<o.length;e++)s.update(o[e]);const l=s.digest().toString(16).padEnd(8,"0");r.push(l)}if(unique(r),"string"==typeof t){if(t.length<2)return console.error("hashName string length must >= 2"),r}else if(!(t="0123456789abcdef"[t]))return console.error("Invalid hashName"),r;return r.map(e=>t+e)}exports.calculate=calculate,exports.BuiltinHashType={PackedAssets:0,AutoAtlasImage:1};
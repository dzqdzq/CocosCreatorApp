"use strict";function compressJson(e){if("object"!=typeof e)return e;const r={};let t=e;const o=new Set;let c=[];if(Array.isArray(e)){if(collectArrayKey(e,r,o),o.size<1)return t;t=renameArrayJson(e,c=Array.from(c))}else{if(collectObjectKey(e,r,o),o.size<1)return t;t=renameObjectJson(e,c=Array.from(o))}return{keys:c,data:t}}function renameObjectJson(e,r){if(!e)return e;const t=Object.create(null);return Object.keys(e).forEach(o=>{let c=o;/^\d$/.test(o)&&r.push(o);const n=r.indexOf(o);-1!==n&&(c=n),e[o]&&"object"==typeof e[o]?Array.isArray(e[o])?t[c]=renameArrayJson(e[o],r):t[c]=renameObjectJson(e[o],r):t[c]=e[o]}),t}function renameArrayJson(e,r){return e?e.map(e=>e&&"object"==typeof e?Array.isArray(e)?renameArrayJson(e,r):renameObjectJson(e,r):e):e}function collectObjectKey(e,r,t){e&&Object.keys(e).forEach(o=>{null!==e[o]&&void 0!==e[o]&&(r[o]?t.add(o):r[o]=1,"object"==typeof e[o]&&(Array.isArray(e[o])?collectArrayKey(e[o],r,t):collectObjectKey(e[o],r,t)))})}function collectArrayKey(e,r,t){e&&e.forEach(e=>{e&&"object"==typeof e&&(Array.isArray(e)?collectArrayKey(e,r,t):collectObjectKey(e,r,t))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compressJson=void 0,exports.compressJson=compressJson;
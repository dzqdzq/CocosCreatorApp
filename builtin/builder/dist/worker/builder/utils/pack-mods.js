"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.packMods=void 0;const fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),concat_with_sourcemaps_1=__importDefault(require("concat-with-sourcemaps"));async function packMods(e,t,n,a){const{sourceMaps:r}=a,o=new concat_with_sourcemaps_1.default(!0,"all.js","\n");a.wrap&&o.add(null,"System.register([], function(_export, _context) { return { execute: function () {");for(const t of e)o.add(null,t.code,t.map);0!==Object.keys(t).length&&o.add(null,`(function(r) {\n${Object.keys(t).map(e=>`  r('${e}', '${t[e]}');`).join("\n")} \n})(function(mid, cid) {\n    System.register(mid, [cid], function (_export, _context) {\n    return {\n        setters: [function(_m) {\n            var _exportObj = {};\n\n            for (var _key in _m) {\n              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];\n            }\n      \n            _export(_exportObj);\n        }],\n        execute: function () { }\n    };\n    });\n});`),a.wrap&&o.add(null,"} }; });"),r&&o.sourceMap&&o.add(null,`//# sourceMappingURL=${path_1.default.basename(n)}.map`),await fs_extra_1.default.ensureDir(path_1.default.dirname(n)),await fs_extra_1.default.writeFile(n,o.content.toString()),r&&o.sourceMap&&await fs_extra_1.default.writeFile(`${n}.map`,o.sourceMap)}exports.packMods=packMods;
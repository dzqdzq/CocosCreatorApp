"use strict";async function handle(e,s,o){if(e.inlineSpriteFrames=!!e.inlineSpriteFrames,!e.inlineSpriteFrames)return void console.debug("options.inlineSpriteFrames is false");const n=[],t=[];for(let e=0;e<s.assetUuids.length;e++){const i=s.assetUuids[e],r=o.getAssetInfo(i);"cc.SpriteFrame"===r.type&&(n.push(r),t.push(r.uuid))}for(let e=0;e<t.length;e++){const o=t[e];Object.keys(s.jsonGroupMap).forEach(e=>{const n=s.jsonGroupMap[e],t=n.jsonUuids.indexOf(o);-1!==t&&n.jsonUuids.splice(t,1),n.jsonUuids.length<=1&&(delete s.jsonGroupMap[e],n.jsonUuids&&s.defaultGroup.jsonUuids.push(n.jsonUuids[0]))})}for(let e=0;e<t.length;e++){const n=t[e];let i=0;await o.forEach("dependUuidsMap",async e=>{(await o.getDependUuids(e)||[]).includes(n)&&Object.keys(s.jsonGroupMap).forEach(o=>{const t=s.jsonGroupMap[o];t.jsonUuids.includes(e)&&(t.jsonUuids.push(n),i++)})}),0===i&&(s.jsonGroupMap[n]={name:n,type:"spriteframe",jsonUuids:[n]})}for(let e=0;e<t.length;e++){const n=t[e],i=o.getAssetInfo(n);i&&/db\:\/\/[^\s]+\/resources/.test(i.path)&&(s.jsonGroupMap[n]={name:n,type:"spriteframe",jsonUuids:[n]},console.info(`add dummy group to allow download ${n} individually`))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.title=void 0,exports.title="i18n:tasks.sort_sprite_frame",exports.handle=handle;
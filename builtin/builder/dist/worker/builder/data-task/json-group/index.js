"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.name=exports.title=void 0;const bundle_utils_1=require("../../../../share/bundle-utils"),utils_1=require("./utils");async function handle(e,s,t){let o=0;for(const e of s.bundles)if(e.compressionType!==bundle_utils_1.BundleCompressionTypes.NONE)if(e.compressionType===bundle_utils_1.BundleCompressionTypes.MERGE_ALL_JSON)e.addGroup("NORMAL",e.assetsWithoutRedirect),o++;else{const s=[],n=e.scenes.concat(e.rootAssets);for(const o of n)e.getRedirect(o)||s.push(await utils_1.walk(t.getAssetInfo(o),t,e));utils_1.splitGroups(s,!0).forEach((s,t)=>{s.length<=1||(e.addGroup("NORMAL",s),o++)})}console.debug(`Number of json group: ${o}`)}exports.title="i18n:tasks.sort_json",exports.name="data-task/json",exports.handle=handle;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.name=exports.title=void 0;const bundle_utils_1=require("../../../share/bundle-utils");async function handle(e,t,s){console.debug("sort script group...");const{MAIN:i,START_SCENE:o}=bundle_utils_1.BuiltinBundleName,r=t.bundleMap[o]||t.bundleMap[i];for(const i of s.scriptUuids){const o=s.getAssetInfo(i),a=await s.getMeta(i);if(o)if(a)if(!a.userData.isPlugin||!a.userData.loadPluginInWeb&&(["web-desktop","web-mobile"].includes(e.platform)||e.preview)||!a.userData.loadPluginInNative&&["windows"].includes(e.platform)){const e=t.bundles.find(e=>o.url.startsWith(e.root+"/"));e?e.addScript(o):r.addScript(o)}else t.addPlugin(o);else console.error(`Get meta of script {asset(${o.url})} failed!`);else console.error(`Get asset info of script {asset(${i})} failed!`)}}exports.title="i18n:tasks.sort_script",exports.name="data-task/script",exports.handle=handle;
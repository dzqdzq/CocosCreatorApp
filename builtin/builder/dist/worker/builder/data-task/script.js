"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handle=exports.name=exports.title=void 0;const bundle_utils_1=require("../../../share/bundle-utils");async function handle(e,t,s){console.debug("sort script group...");const{MAIN:r,START_SCENE:o}=bundle_utils_1.BuiltinBundleName,i=t.bundleMap[o]||t.bundleMap[r];for(const e of s.scriptUuids){const r=s.getAssetInfo(e),o=await s.getMeta(e);if(r)if(o)if(o.userData.isPlugin&&o.userData.loadPluginInWeb)t.addPlugin(r);else{const e=t.bundles.find(e=>r.url.startsWith(e.root+"/"));e?e.addScript(r):i.addScript(r)}else console.error(`Get meta of script {asset(${r.url})} failed!`);else console.error(`Get asset info of script {asset(${e})} failed!`)}}exports.title="i18n:tasks.sort_script",exports.name="data-task/script",exports.handle=handle;
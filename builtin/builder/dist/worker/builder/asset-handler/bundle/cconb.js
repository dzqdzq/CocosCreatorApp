"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outputCCONFormat=exports.getDesiredCCONExtensionMap=exports.hasCCONFormatAssetInLibrary=exports.isCCONAssetInLibrary=void 0;const serialization_1=require("cc/editor/serialization"),fs_extra_1=require("fs-extra");function isCCONAssetInLibrary(t,e){return".cconb"===e}function hasCCONFormatAssetInLibrary(t){return t.library[".cconb"]}function getDesiredCCONExtensionMap(t){return t.exportCCON?".ccon":".cconb"}async function outputCCONFormat(t,e,r){if(r)await(0,fs_extra_1.outputFile)(`${e}.cconb`,(0,serialization_1.encodeCCONBinary)(t));else{const r=t.chunks.map(()=>".bin");await(0,fs_extra_1.outputJSON)(`${e}.json`,(0,serialization_1.encodeCCONJson)(t,r)),t.chunks.length&&await(0,fs_extra_1.outputFile)(`${e}.bin`,t.chunks[0])}}exports.isCCONAssetInLibrary=isCCONAssetInLibrary,exports.hasCCONFormatAssetInLibrary=hasCCONFormatAssetInLibrary,exports.getDesiredCCONExtensionMap=getDesiredCCONExtensionMap,exports.outputCCONFormat=outputCCONFormat;
"use strict";var applyContourBleed=function(e,t,i,r,o,f,d){if(0!==r.width&&0!==r.height)for(var l=r.x,a=r.xMax,n=r.y,p=r.yMax,h=4*i,y=0,g=o.length,c=0,s=0,u=0,x=0,m=n*h+4*l,B=n,w=0;B<p;++B,m+=h)for(x=m,w=l;w<a;++w,x+=4)if(0===t[x+3])for(y=0;y<g;y++)if(c=w+o[y],s=B+f[y],c>=l&&c<a&&s>=n&&s<p&&t[(u=x+d[y])+3]>0){e[x]=t[u],e[x+1]=t[u+1],e[x+2]=t[u+2];break}},applyPaddingBleed=function(e,t,i,r,o){if(0!==o.width&&0!==o.height){var f=o.y,d=o.yMax-1,l=o.x,a=o.xMax-1,n=4*i,p=4*l,h=4*a,y=f*n,g=d*n,c=0,s=0;if(f-1>=0)for(c=y+p,s=y+h+3;c<=s;++c)e[c-n]=t[c];if(d+1<r)for(c=g+p,s=g+h+3;c<=s;++c)e[c+n]=t[c];if(l-1>=0)for(c=y+p,s=g+p;c<=s;c+=n)e[c-4]=t[c],e[c-3]=t[c+1],e[c-2]=t[c+2],e[c-1]=t[c+3];if(a+1<i)for(c=y+h,s=g+h;c<=s;c+=n)e[c+4]=t[c],e[c+5]=t[c+1],e[c+6]=t[c+2],e[c+7]=t[c+3];if(l-1>=0&&f-1>=0)for(s=(c=y+p)+4;c<s;c++)e[c-n-4]=t[c];if(a+1<i&&f-1>=0)for(s=(c=y+h)+4;c<s;c++)e[c-n+4]=t[c];if(l-1>=0&&d+1<r)for(s=(c=g+p)+4;c<s;c++)e[c+n-4]=t[c];if(a+1<i&&d+1<r)for(s=(c=g+h)+4;c<s;c++)e[c+n+4]=t[c]}},applyBleed=function(e,t,i,r){let o=0,f=null;if(e.contourBleed){for(var d=4*t.width,l=[-1,0,1,-1,1,-1,0,1],a=[-1,-1,-1,0,0,1,1,1],n=[],p=0;p<l.length;p++)n[p]=4*l[p]+a[p]*d;for(o=0,f=null;o<t.spriteFrameInfos.length;o++)f=t.spriteFrameInfos[o].trim,applyContourBleed(r,i,t.width,cc.rect(f.x,f.y,f.rotatedWidth,f.rotatedHeight),l,a,n)}if(e.paddingBleed){for(console.time("apply padding bleed"),o=0,f=null;o<t.spriteFrameInfos.length;o++)f=t.spriteFrameInfos[o].trim,applyPaddingBleed(r,i,t.width,t.height,cc.rect(f.x,f.y,f.rotatedWidth,f.rotatedHeight));console.timeEnd("apply padding bleed")}};module.exports={applyBleed:applyBleed};
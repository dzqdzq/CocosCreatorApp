"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrateBuilderProfile=exports.migrateOptions=void 0;const _1_2_1_1=require("./version/1.2.1"),utils_1=require("./utils"),_1_2_2_1=require("./version/1.2.2"),_1_2_3_1=require("./version/1.2.3");async function migrateOptions(e){optionsMigrates.forEach(i=>{i(e)})}async function migrateBuilderProfile(e){const i=await Editor.Profile.getConfig("builder","","local");if(!i||0===Object.keys(i).length)return;i.version="object"==typeof i.version?i.version:{};let r=i.version.builder,t=Object.keys(migrateProfileMap).sort((e,i)=>utils_1.compareVersion(e,i)?1:-1);if(e&&(t=t.filter(i=>!utils_1.compareVersion(i,e))),0===(t=t.filter(e=>utils_1.compareVersion(e,r))).length)return;for(const e of t)await migrateProfileMap[e](),await Editor.Profile.setConfig("builder","version.builder",e);let o=await Editor.Profile.getConfig("builder","version");o&&"object"==typeof o||(o={}),o.builder=t[t.length-1],await Editor.Profile.setConfig("builder","version",o)}exports.migrateOptions=migrateOptions,exports.migrateBuilderProfile=migrateBuilderProfile;const migrateProfileMap={"1.2.1":_1_2_1_1.migrateProfile_1_2_1,"1.2.2":_1_2_2_1.migrateProfile_1_2_2,"1.2.3":_1_2_3_1.migrateProfile_1_2_3},optionsMigrates=[_1_2_1_1.migratePackagesOption,_1_2_2_1.migrateTaskName,_1_2_2_1.migrateHuaweiOption];
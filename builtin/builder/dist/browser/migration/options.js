"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migratePkgOptions=exports.migrateOptions=void 0;const buildPackageJSON=require("./../../../package.json");async function migrateOptions(t,o){if(!t)return;const e={common:t,__buildTaskOptions__:t,command:o};if(t.__version__&&await Editor.Profile.__protected__.migrateLocal("builder",t.__version__,e,buildPackageJSON.version),t.packages)for(const e of Object.keys(t.packages)){const i=t.packages[e];await migratePkgOptions(i,e,t,o)}}async function migratePkgOptions(t,o,e,i){if(!t.__version__)return void console.warn(`${o} 插件构建配置无版本号，将跳过数据迁移`);const s=Object.assign({},e);delete s.packages;const a={options:{[e.platform]:t},common:s,__buildTaskOptions__:e,command:i};await Editor.Profile.__protected__.migrateLocal(o,t.__version__,a),Object.assign(t,a.options[e.platform]),Object.assign(e,s)}exports.migrateOptions=migrateOptions,exports.migratePkgOptions=migratePkgOptions;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$=exports.template=exports.style=void 0,exports.ready=ready,exports.beforeClose=beforeClose,exports.close=close;const fs_1=require("fs"),path_1=require("path"),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let panel=null,vm;const vueTemplate=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/debug-tools.html"),"utf8"),BuilderDebugVM=Vue.extend({name:"BuilderDebugVM",data(){return{taskMap:{},debugOptions:{config:{},cacheConfig:{engine:!0}},debug:!1,tips:"",tipsTimer:null}},async mounted(){var e=await Editor.Message.request("builder","request-to-build-worker","build-worker:query-task-map"),e=(e&&(this.taskMap=e),await Editor.Profile.getConfig("builder","debug-tools"));Object.assign(this.debugOptions,e)},methods:{onConfirm(e,t,i){this.debugOptions.config[t]||(this.debugOptions.config[t]={}),this.debugOptions.config[t][i]=e},async save(){await Editor.Profile.setConfig("builder","debug-tools",this.debugOptions,"local"),clearTimeout(this.tipsTimer),this.tips="The debug configuration was saved successfully.",this.tipsTimer=setTimeout(()=>{this.tips=""},1e3)},async onDebug(e){this.debug=e,await Editor.Message.send("builder","request-to-build-worker","build-worker:change-debug-mode",e)},async noCacheOption(e,t){e=e.target.value;this.debugOptions.cacheConfig[t]=e,await Editor.Message.send("builder","request-to-build-worker","build-worker:change-cache-config",t,e)},isSelectAll(e,t){var i=this.taskMap[e];if(Array.isArray(i)&&t)for(const e of i)if(!1===t[e])return!1;return!0},selectAllTask(e,t){var i=this.taskMap[e];if(Array.isArray(i))for(const e of i)this.debugOptions.config[e]=t}},template:vueTemplate});function ready(){panel=this,vm?.$destroy(),(vm=new BuilderDebugVM).$mount(panel.$.container)}async function beforeClose(){return vm&&await vm.onDebug(!1),!0}function close(){vm?.$destroy(),vm=null,panel=null}exports.style=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../dist/debug-tools.css"),"utf8"),exports.template=`
<div class="container"></div>
`,exports.$={container:".container"};
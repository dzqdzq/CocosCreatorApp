"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.beforeClose=exports.ready=exports.$=exports.template=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let vm,panel=null;const vueTemplate=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/template/debug-tools.html"),"utf8"),BuilderDebugVM=Vue.extend({name:"BuilderDebugVM",data:()=>({taskMap:{},debugOptions:{config:{},cacheConfig:{engine:!0}},debug:!1,tips:"",tipsTimer:null}),async mounted(){const e=await Editor.Message.request("builder","request-to-build-worker","build-worker:query-task-map");e&&(this.taskMap=e);const t=await Editor.Profile.getConfig("builder","debug-tools");Object.assign(this.debugOptions,t)},methods:{onConfirm(e,t,s){this.debugOptions.config[t]||(this.debugOptions.config[t]={}),this.debugOptions.config[t][s]=e},async save(){await Editor.Profile.setConfig("builder","debug-tools",this.debugOptions,"local"),clearTimeout(this.tipsTimer),this.tips="The debug configuration was saved successfully.",this.tipsTimer=setTimeout(()=>{this.tips=""},1e3)},async onDebug(e){this.debug=e,await Editor.Message.send("builder","request-to-build-worker","build-worker:change-debug-mode",e)},async noCacheOption(e,t){const s=e.target.value;this.debugOptions.cacheConfig[t]=s,await Editor.Message.send("builder","request-to-build-worker","build-worker:change-cache-config",t,s)},isSelectAll(e,t){const s=this.taskMap[e];if(Array.isArray(s)&&t){for(const e of s)if(!1===t[e])return!1;return!0}return!0},selectAllTask(e,t){const s=this.taskMap[e];if(Array.isArray(s))for(const e of s)this.debugOptions.config[e]=t}},template:vueTemplate});function ready(){panel=this,null===vm||void 0===vm||vm.$destroy(),(vm=new BuilderDebugVM).$mount(panel.$.container)}async function beforeClose(){return vm&&await vm.onDebug(!1),!0}function close(){null===vm||void 0===vm||vm.$destroy(),vm=null,panel=null}exports.style=(0,fs_1.readFileSync)((0,path_1.join)(__dirname,"../../../dist/debug-tools.css"),"utf8"),exports.template='\n<div class="container"></div>\n',exports.$={container:".container"},exports.ready=ready,exports.beforeClose=beforeClose,exports.close=close;
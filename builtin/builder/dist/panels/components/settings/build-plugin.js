"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(){var a=function(e){return(a=Object.getOwnPropertyNames||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[n.length]=t);return n})(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=a(e),r=0;r<n.length;r++)"default"!==n[r]&&__createBinding(t,e,n[r]);return __setModuleDefault(t,e),t}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.computed=exports.components=exports.props=exports.template=void 0,exports.data=data,exports.mounted=mounted;const fs_extra_1=require("fs-extra"),path_1=require("path"),platformConfig=__importStar(require("../../../share/platforms-options")),buttonsComponent=__importStar(require("../buttons")),buildProp=__importStar(require("../build-prop/index")),Vue=require("vue/dist/vue.js");function data(){return{builtinPlugins:platformConfig.builtinPlugins,internalNativePlugins:platformConfig.internalNativePlugins}}function mounted(){var e=this;e.updatePluginRender(e.options.platform),e.dev=Editor.App.dev}Vue.config.productionTip=!1,Vue.config.devtools=!1,exports.template=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../../../static","/template/components/settings/build-plugin.html"),"utf8"),exports.props=["config","options","free","errorMap","name","type"],exports.components={"build-prop":buildProp,buttons:buttonsComponent},exports.computed={pkgOptions(){var e=this;return JSON.parse(JSON.stringify(e.options.packages&&e.options.packages[e.config.pkgName]||{}))}},exports.methods={t(e,t=!0){e=e.replace("i18n:","");t=Editor.I18n.t((t?"builder.":"")+e);return t&&"string"==typeof t?t:e},onConfirm(e,t){e=e.target.value;this.onDataUpdate(t,e)},onPanelUpdate(e,t,n){this.$emit("datachange",this.config.pkgName,e,t,n)},onDataUpdate(e,t,n){var r=this;r.$root.updateErrorMap(`packages.${r.config.pkgName}.`+e,n),r.$emit("datachange",r.config.pkgName,`packages.${r.config.pkgName}.`+e,t,n)},updatePluginRender(){const t=this,n=t.config;if(n.panelInfo){const r=document.createElement("ui-panel"),a={};Object.keys(n.panelInfo).forEach(e=>{a[e]=n.panelInfo[e]}),n.panelInfo.ready&&(a.ready=()=>(r.ready=!0,n.panelInfo.ready.call(r.panelObject,JSON.parse(JSON.stringify(t.options)),t.type,n.pkgName,JSON.parse(JSON.stringify(t.errorMap))))),a.style=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"./../../../../dist/build-plugin.css"),"utf8")+(a.style||""),r.config=a,r.setAttribute("name",n.displayName),t.$uiPanel=r,Vue.nextTick(()=>{var e=Array.isArray(t.$refs[n.pkgName])?t.$refs[n.pkgName][0]:t.$refs[n.pkgName];e?(e.innerHTML="",e.appendChild(r)):console.warn("Can't get pluginContent from "+n.pkgName)})}},async update(e,t){var n=this;n.$uiPanel&&n.$uiPanel.ready&&n.$uiPanel.update(JSON.parse(JSON.stringify(n.options)),t)}};
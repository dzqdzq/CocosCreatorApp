"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.computed=exports.data=exports.components=exports.props=exports.template=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),platformConfig=__importStar(require("../../../share/platforms-options")),buttonsComponent=__importStar(require("../buttons")),buildProp=__importStar(require("../build-prop/index")),Vue=require("vue/dist/vue.js");function data(){return{builtinPlugins:platformConfig.builtinPlugins,disabledPkg:["android","huawei-agc","ios","windows","mac","native","ohos"]}}function mounted(){this.updatePluginRender(this.options.platform),this.dev=Editor.App.dev}Vue.config.productionTip=!1,Vue.config.devtools=!1,exports.template=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../../../static","/template/components/settings/build-plugin.html"),"utf8"),exports.props=["config","options","free","errorMap","name","type"],exports.components={"build-prop":buildProp,buttons:buttonsComponent},exports.data=data,exports.computed={pkgOptions(){return JSON.parse(JSON.stringify(this.options.packages&&this.options.packages[this.config.pkgName]||{}))}},exports.methods={t(e,t=!0){e=e.replace("i18n:","");const n=Editor.I18n.t(`${t?"builder.":""}${e}`);return n&&"string"==typeof n?n:e},onConfirm(e,t){const n=e.target.value;this.onDataUpdate(t,n)},onPanelUpdate(e,t,n){this.$emit("datachange",this.config.pkgName,e,t,n)},onDataUpdate(e,t,n){this.$root.updateErrorMap(`packages.${this.config.pkgName}.${e}`,n),this.$emit("datachange",this.config.pkgName,`packages.${this.config.pkgName}.${e}`,t,n)},updatePluginRender(){const e=this,t=e.config;if(t.panelInfo){const n=document.createElement("ui-panel"),i={};Object.keys(t.panelInfo).forEach(e=>{i[e]=t.panelInfo[e]}),t.panelInfo.ready&&(i.ready=(()=>(n.ready=!0,t.panelInfo.ready.call(n.panelObject,JSON.parse(JSON.stringify(e.options)),e.type,t.pkgName,JSON.parse(JSON.stringify(e.errorMap)))))),i.style=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"./../../../../dist/build-plugin.css"),"utf8")+(i.style||""),n.config=i,n.setAttribute("name",t.displayName),e.$uiPanel=n,Vue.nextTick(()=>{const i=Array.isArray(e.$refs[t.pkgName])?e.$refs[t.pkgName][0]:e.$refs[t.pkgName];i?(i.innerHTML="",i.appendChild(n)):console.warn(`Can't get pluginContent from ${t.pkgName}`)})}},async update(e,t){this.$uiPanel&&this.$uiPanel.ready&&this.$uiPanel.update(JSON.parse(JSON.stringify(this.options)),t)}},exports.mounted=mounted;
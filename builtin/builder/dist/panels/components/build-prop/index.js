"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.name=exports.watch=exports.computed=exports.props=exports.template=void 0;const lodash=require("lodash");function mounted(){this.$refs.this&&this.updateRender(this.dump)}exports.template='\n<ui-prop type="build"\n    ref="this"\n    v-if="config"\n    class="build-prop"\n    @change.stop="onChange"\n    @confirm.stop="onConfirm"\n></ui-prop>\n',exports.props=["config","path","value","pkgName","configKey"],exports.computed={show(){return this.config&&this.config.ui||"object"!==this.config.type&&"array"!==this.config.type},disabled(){const e=this;if(!Array.isArray(e.config.disabledWhen))return!1;for(const t of e.config.disabledWhen)if(!e.pkgOptions[t])return!1;return!0},dump(){return"object"==typeof this.configKey?null:Object.assign(Object.assign({},this.config),{value:this.value})}},exports.watch={dump(e,t){const o=this;JSON.stringify(o.$refs.this.dump)!==JSON.stringify(e)&&o.$refs.this&&o.updateRender(o.dump)}},exports.name="build-prop",exports.methods={onChange(e){const t=e.target.dump;let o="error"===t.verifyLevel&&t.message||"";t.itemConfigs&&(o={},Object.keys(t.itemConfigs).forEach(e=>{const s=t.itemConfigs[e];s.message&&"error"===s.verifyLevel&&(o[e]=s.message)})),this.$emit("update",this.path,t.value,o)},onConfirm(e){const t=e.target.dump;this.$emit("data-confirm",this.path,t.value)},updateRender(e){const t=this;t.$root.options&&(t.$refs.this.customInfo={options:JSON.parse(JSON.stringify(t.$root.options)),pkgKey:e.verifyKey||t.$root.options.platform+(t.pkgName||"common")}),t.$refs.this.dump=e,t.$refs.this.render()}},exports.mounted=mounted;
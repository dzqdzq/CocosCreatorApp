"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PreviewContainer=void 0;const Vue=require("vue/dist/vue.js"),template="\n<div ref=\"container\" class=\"\">\n    <slot>\n        <div class=\"preview\"\n            :style=\"{\n                '--preview-scale': scale,\n                '--preview-top': isLandscape ? '50%' : '0',\n                '--preview-left': isLandscape? '0' : '50%',\n                '--preview-transform': isLandscape ? 'scale(var(--preview-scale, 1)) translateY(-50%)' : 'scale(var(--preview-scale, 1)) translateX(-50%)',\n                '--preview-width': containerWidth + 'px',\n                '--preview-height': containerHeight + 'px',\n                '--preview-background-color': backgroundColor,\n                '--preview-background-image': backgroundImage,\n                '--preview-logo-height': logoHeight + 'px',\n            }\"\n            :data-watermark=\"settings.watermarkLocation\"\n        >\n            <div class=\"preview__main\">\n                <div class=\"main\">\n                    <ui-image name=\"image\" class=\"logo\"\n                        v-if=\"settings.logoSrc\"\n                        :value=\"settings.logoSrc\"\n                    ></ui-image>\n                    <div class=\"text watermark\">\n                        <ui-label value=\"Created with Cocos\"\n                            v-if=\"previewWatermark\"\n                        ></ui-label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </slot>\n</div>\n";exports.PreviewContainer=Vue.extend({name:"PreviewContainer",props:{settings:{type:Object,required:!0},designWidth:{type:Number,default:1280},designHeight:{type:Number,default:720}},data:()=>({elWidth:0,elHeight:0}),computed:{isLandscape(){return this.designWidth>=this.designHeight},containerWidth(){return this.isLandscape,this.designWidth},containerHeight(){return this.isLandscape,this.designHeight},scale(){const e=this.isLandscape?this.designWidth:this.designHeight,t=Math.min(1,this.elWidth/e),i=Math.min(1,this.elHeight/e);return this.isLandscape?t:i},logoHeight(){return.185*this.containerHeight*this.settings.displayRatio},backgroundColor(){var e,t;const i=this;if("default"===(null===(e=i.settings.background)||void 0===e?void 0:e.type))return"rgba(4, 9, 10, 255)";if("color"===(null===(t=i.settings.background)||void 0===t?void 0:t.type)&&i.settings.background.color){return`rgba(${["x","y","z","w"].map(e=>255*i.settings.background.color[e]).join(", ")})`}return null},backgroundImage(){var e;const t=this;if("custom"===(null===(e=t.settings.background)||void 0===e?void 0:e.type)&&t.settings.backgroundSrc){return`url("${t.settings.backgroundSrc.replace(/\\/g,"/").split("?")[0]}")`}return null},previewWatermark(){var e;return this.settings.logoSrc&&"default"===(null===(e=this.settings.logo)||void 0===e?void 0:e.type)}},created(){this.elWidth=this.designWidth,this.elHeight=this.designHeight},mounted(){this.setup()},beforeDestroy(){this.teardown()},methods:{setup(){const e=this.$refs.container;if(!e)throw new Error("preview container not found");const t=new ResizeObserver(([e])=>{const t=e.contentRect.width,i=t*(9/16);this.elWidth=t,this.elHeight=i});t.observe(e),this.observer=t},teardown(){this.observer&&(this.observer.disconnect(),this.observer=void 0)}},template:template});
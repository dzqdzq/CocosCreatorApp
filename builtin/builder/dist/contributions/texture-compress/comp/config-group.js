"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r);var s=Object.getOwnPropertyDescriptor(e,r);s&&("get"in s?e.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,s)}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.beforeDestroy=exports.created=exports.methods=exports.computed=exports.data=exports.props=exports.components=exports.template=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),buildProp=__importStar(require("./../../../panels/components/build-prop")),event_bus_1=require("../event-bus");exports.template=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../../../static/contributions/config-group.html"),"utf8"),exports.components={"build-prop":buildProp},exports.props=["compressInfo","config","readonly","overwriteFormats"];const data=function(){return{currentPlatform:"web",selectInfos:[]}};function created(){event_bus_1.EventBus.$on("blank-click",this.onBlankClickBind=this.onBlankClick.bind(this))}function beforeDestroy(){event_bus_1.EventBus.$off("blank-click",this.onBlankClickBind)}exports.data=data,exports.computed={displayFormatInfo(){const t={},e=this;if(Object.keys(e.config).length&&e.config[e.currentPlatform])return Object.keys(e.config[e.currentPlatform]).forEach(r=>{const o=e.compressInfo.formatsInfo[r];if(!o)return void(t[r]={displayName:`${r}`,missing:!0});const s=JSON.parse(JSON.stringify(o));if(e.overwriteFormats[r]&&e.compressInfo.formatsInfo[e.overwriteFormats[r]]){const t=e.compressInfo.formatsInfo[e.overwriteFormats[r]];s.overwritedInfo={displayName:t.displayName,id:e.overwriteFormats[r]}}s.value=e.config[e.currentPlatform][r];const n=JSON.parse(JSON.stringify(e.compressInfo.textureFormatConfigs[o.formatType].options));e.readonly&&(n.quality.render=Object.assign(n.quality.render,{attributes:{disabled:!0}})),s.options=n,t[r]=s}),t}},exports.methods={onSelect(t){const e=this.selectInfos.findIndex(e=>e===t);-1===e?this.selectInfos.push(t):this.selectInfos.splice(e,1)},onBlankClick(){this.selectInfos=[]},addFormat(t){this.$emit("add",t,this.currentPlatform)},removeFormat(){this.selectInfos.forEach(t=>{this.$emit("remove",this.currentPlatform,t)}),this.selectInfos=[]},onChangeQuality(t,e,r){r&&e&&(this.config[this.currentPlatform][r]=this.config[this.currentPlatform][r]||{},this.config[this.currentPlatform][r][t]=e,this.$emit("update",this.currentPlatform,r,this.config[this.currentPlatform][r]))},getCustomConfigInfo(t){const e=this.compressInfo.formatsInfo[t];return e||{displayName:`${t}(missing)`,missing:!0}}},exports.created=created,exports.beforeDestroy=beforeDestroy;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.data=exports.props=exports.template=void 0,exports.template='\n<div class="custom-format" v-if="config && formatsInfo">\n    <ui-section class="content" expand>\n        <div class="config-header flex-spacing-between" slot="header">\n            <span>\n                <ui-input\n                    :value="config.name"\n                    :tooltip="config.name"\n                    @click.stop\n                    @confirm="onChangeFormatName($event.target.value)"\n                ></ui-input>\n            </span>\n            <span class="child-margin-right">\n                <ui-icon v-if="config.id" value="copy" tooltip="copy presetId" @click.stop="copyId"></ui-icon>\n                <ui-icon value="del" color="true" @click.stop="removeFormat"></ui-icon>\n            </span>\n        </div>\n        <div @confirm="onConfigChange" class="config-content">\n            <ui-prop>\n                <ui-label slot="label" value="i18n:builder.project.texture_compress.customFormat.format"></ui-label>\n                <ui-select slot="content" path="format"\n                    :value="config.format || Object.keys(formatsInfo)[0]"\n                >\n                    <option\n                        v-for="(format, formatId) in formatsInfo"\n                        :value="formatId"\n                        :key="formatId"\n                    >{{format.displayName}}</option>\n                </ui-select>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:builder.project.texture_compress.customFormat.overwrite"></ui-label>\n                <ui-checkbox slot="content" path="overwrite" :value="config.overwrite"></ui-checkbox>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:builder.project.texture_compress.customFormat.compressTools"></ui-label>\n                <div slot="content">\n                    <ui-prop class="config-item">\n                        <ui-label slot="label" value="i18n:builder.project.texture_compress.customFormat.program"></ui-label>\n                        <ui-file slot="content"\n                            path="path"\n                            protocols="file,project"\n                            :value="config.path"\n                        ></ui-file>\n                    </ui-prop>\n                    <ui-prop class="config-item">\n                        <ui-label slot="label" value="i18n:builder.project.texture_compress.customFormat.commandParams"></ui-label>\n                        <div\n                            slot="content"\n                        >\n                            <ui-input\n                                path="command"\n                                :value="config.command"\n                            ></ui-input>\n                            <ui-button @click="showAddParamsMenu">\n                                <ui-icon value="arrow-triangle"></ui-icon>\n                            </ui-button>\n                        </div>\n                    </ui-prop>\n                </div>\n            </ui-prop>\n        </div>\n    </ui-section>\n</div>\n',exports.props=["formatsInfo","config","customConfigs","overwriteFormats"];const data=function(){return{editTypList:{program:"程序",npm:"npm 库"}}};exports.data=data,exports.methods={removeFormat(){this.$emit("remove",this.config.id)},async onConfigChange(o){const t=o.target,e=t.getAttribute("path");if(!e)return;const i=this,n=t.value,r=i.config.id;if("overwrite"===e||"format"===e){const o=!!("overwrite"===e?n:i.config.overwrite),a="format"===e?n:i.config.format,s=i.config[e];if(!0===o){if(i.overwriteFormats[a]&&!0===o){const o=i.overwriteFormats[i.customConfigs[r].format];if(!i.customConfigs[o])return i.config[e]=!0,delete i.overwriteFormats[i.customConfigs[r].format],void i.$emit("update",r,"overwrite",!0);if(1===(await Editor.Dialog.info(Editor.I18n.t("builder.project.texture_compress.customFormat.conflictOverwrite",{rawFormat:a,conflictFormat:i.customConfigs[o]&&i.customConfigs[o].name||o}),{buttons:[Editor.I18n.t("builder.project.texture_compress.overwrite"),Editor.I18n.t("builder.project.texture_compress.cancel")],cancel:1,default:1})).response)return void(t.value=s);i.$emit("update",o,"overwrite",!1)}else i.config[e]=n;const c="format"===e?s:i.config.format;delete i.overwriteFormats[c],i.$set(i.overwriteFormats,a,r)}else i.config[e]=s,"overwrite"===e&&delete i.overwriteFormats[a]}i.$emit("update",r,e,n)},copyId(){Editor.Clipboard.write("text",this.config.id)},onChangeFormatName(o){this.$emit("update",this.config.id,"name",o)},showAddParamsMenu(o){const t=this,e=["src","dest","quality"].map(o=>({label:o,click:()=>{t.addParam(o)}}));Editor.Menu.popup({x:o.x,y:o.y,menu:e})},addParam(o){this.config.command+=" ${"+o+"}",this.$emit("update",this.config.id,"command",this.config.command)}};
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,o)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),compressPresets=__importStar(require("./page/compress-presets")),compressFormat=__importStar(require("./page/compress-format")),Vue=require("vue/dist/vue.js");exports.style=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"./texture-compress.css"),"utf8"),exports.template=(0,fs_extra_1.readFileSync)((0,path_1.join)(__dirname,"../../../static/contributions/texture-compress.html"),"utf8"),exports.$={modules:".texture-compress"};const component={components:{"compress-presets":compressPresets,"compress-format":compressFormat},data:{tab:"presets",tabList:{presets:{label:"i18n:builder.project.texture_compress.compress_preset",comp:"compress-presets"},format:{label:"i18n:builder.project.texture_compress.custom_format",comp:"compress-format"}},textureCompressConfig:null,configDirty:!1,customConfigs:null,overwriteFormats:{},genMipmaps:!0},methods:{t:e=>Editor.I18n.t(`builder.project.texture_compress.${e}`),async init(){this.genMipmaps=await Editor.Profile.getProject("builder","textureCompressConfig.genMipmaps");const e=await Editor.Message.request("builder","query-compress-config");e&&(this.textureCompressConfig=e,this.customConfigs=await Editor.Profile.getProject("builder","textureCompressConfig.customConfigs")||{},this.calcOverwriteFormats())},calcOverwriteFormats(){const e=this;if(e.customConfigs&&Object.keys(e.customConfigs)){const t={};Object.values(e.customConfigs).forEach(r=>{r.overwrite&&(t[r.format]&&(e.customConfigs[t[r.format]].overwrite=!1,console.debug(`conflic format config ${r.format}(${t[r.format]} is invalid.)`)),t[r.format]=r.id)}),e.overwriteFormats=t}},async onChangeTab(e,t){const r=this;r.tab=e,r.configDirty&&await r.init(),t&&process.nextTick(()=>{r.$refs[r.tabList[e].comp].jumpToConfig(t)})},onConfigChange(){this.configDirty=!0},async updateMipmapConfig(e){this.genMipmaps="on"===e.target.value,await Editor.Profile.setProject("builder","textureCompressConfig.genMipmaps",this.genMipmaps)}},async mounted(){await this.init()}};async function ready(){component.el=this.$.modules,new Vue(component)}exports.ready=ready;
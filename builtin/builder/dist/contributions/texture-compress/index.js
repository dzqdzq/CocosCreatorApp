"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),compressPresets=__importStar(require("./page/compress-presets")),compressFormat=__importStar(require("./page/compress-format")),Vue=require("vue/dist/vue");exports.style=fs_extra_1.readFileSync(path_1.join(__dirname,"./texture-compress.css"),"utf8"),exports.template=fs_extra_1.readFileSync(path_1.join(__dirname,"../../../static/contributions/texture-compress.html"),"utf8"),exports.$={modules:".texture-compress"};const component={components:{"compress-presets":compressPresets,"compress-format":compressFormat},data:{tab:"presets",tabList:{presets:{label:"i18n:builder.project.texture_compress.compress_preset",comp:"compress-presets"},format:{label:"i18n:builder.project.texture_compress.custom_format",comp:"compress-format"}},textureCompressConfig:null,configDirty:!1,customConfigs:null,overwriteFormats:{}},methods:{t:e=>Editor.I18n.t(`builder.project.texture_compress.${e}`),async init(){const e=await Editor.Message.request("builder","query-compress-config");if(!e)return;const t=this;if(t.textureCompressConfig=e,t.customConfigs=await Editor.Profile.getProject("builder","textureCompressConfig.customConfigs")||{},t.customConfigs&&Object.keys(t.customConfigs)){const e={};Object.values(t.customConfigs).forEach(r=>{r.overwrite&&(e[r.format]&&(t.customConfigs[e[r.format]].overwrite=!1,console.debug(`conflic format config ${r.format}(${e[r.format]} is invalid.)`)),e[r.format]=r.id)}),t.overwriteFormats=e}},async onChangeTab(e,t){const r=this;r.tab=e,r.configDirty&&await r.init(),t&&process.nextTick(()=>{r.$refs[r.tabList[e].comp].jumpToConfig(t)})},onConfigChange(){this.configDirty=!0}},async mounted(){await this.init()}};async function ready(){component.el=this.$.modules,new Vue(component)}exports.ready=ready;
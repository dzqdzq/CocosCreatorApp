"use strict";exports.style="\n:host {\n    display: flex;\n}\n\n.scene-gizmo-buttons {\n    border-radius: calc(var(--size-normal-radius) * 1px);\n    overflow: hidden;\n    font-size: 0;\n    border: 1px solid var(--color-normal-border);\n    display: flex;\n}\n\n.scene-gizmo-buttons > ui-button {\n    display: flex;\n    justify-content: center;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    cursor: pointer;\n    font-size: 12px;\n    user-select: none;\n    color: var(--color-normal-contrast);\n    border-radius: 0;\n}\n\n.scene-gizmo-buttons > ui-button > svg {\n    width: 12px;\n    height: 12px;\n    padding-top: 5px;\n}\n\n.scene-gizmo-buttons > ui-button[active] {\n    background: var(--color-active-fill);\n    color: var(--color-active-contrast);\n}\n\n.scene-gizmo-buttons .configuration {\n    display: none;\n    font-size: 12px;\n    text-align: left;\n    padding: 10px;\n    margin: 0;\n    position: absolute;\n    z-index: 99;\n    left: 80px;\n    top: 30px;\n    width: 200px;\n    background: var(--color-normal-fill-weaker);\n    overflow: hidden;\n    border-radius: 3px;\n}\n\n.scene-gizmo-buttons .configuration[active] {\n    display: block;\n}\n\n.scene-gizmo-buttons .configuration > .title {\n    margin-bottom: 10px;\n    border-bottom: 1px solid var(--color-normal-border-weakest);\n}\n\n.scene-gizmo-buttons .configuration > .column {\n    margin-top: 5px;\n    --left-width: 30px;\n}\n\n.scene-gizmo-buttons .configuration > .column > ui-button {\n    display: flex;\n    justify-content: center;\n    width: 24px;\n    height: 22px;\n    cursor: pointer;\n    font-size: 12px;\n    user-select: none;\n    color: var(--color-normal-contrast);\n    border: none;\n    border-radius: 3px;\n}\n\n.scene-gizmo-buttons .configuration > .column > ui-button[active] {\n    background: var(--color-active-fill-emphasis);\n    color: var(--color-active-contrast);\n}\n\n.scene-gizmo-buttons .configuration > .column > ui-button > svg {\n    width: 12px;\n    height: 12px;\n    padding-top: 5px;\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate {\n    display: flex;\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate > .part {\n    text-align: center;\n    padding-right: 5px;\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate > .together {\n    padding-top: 24px;\n    padding-left: 5px;\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate > .together > ui-icon {\n    cursor: pointer;\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate > .together > ui-icon[active] {\n    color: var(--color-focus-contrast-weaker);\n}\n\n.scene-gizmo-buttons .configuration > .column > .translate > .together > ui-icon:hover {\n    color: var(--color-focus-contrast-weakest);\n}\n\n.scene-gizmo-location {\n    display: flex;\n    margin-left: 10px;\n}\n\n.scene-gizmo-location > ui-button {\n    width: auto;\n}\n\n.camera-dimension {\n    display: flex;\n    margin-left: 10px;\n}\n\n.camera-dimension[hidden] {\n    display: none;\n    cursor: pointer;\n}\n\n@media all and (max-width: 880px) {\n    .scene-gizmo-location {\n        display: none;\n    }\n}\n",exports.template='\n<div class="scene-gizmo-buttons">\n    <ui-button class="position transparent" tooltip="i18n:scene.tooltips.translate_gizmo">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n            <path fill="currentColor" d="M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"></path>\n        </svg>\n    </ui-button>\n    <ui-button class="rotation transparent" tooltip="i18n:scene.tooltips.rotate_gizmo">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n            <path fill="currentColor" d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"></path>\n        </svg>\n    </ui-button>\n    <ui-button class="scale transparent" tooltip="i18n:scene.tooltips.scale_gizmo">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n            <path fill="currentColor" d="M448.1 344v112c0 13.3-10.7 24-24 24h-112c-21.4 0-32.1-25.9-17-41l36.2-36.2L224 295.6 116.8 402.9 153 439c15.1 15.1 4.4 41-17 41H24c-13.3 0-24-10.7-24-24V344c0-21.4 25.9-32.1 41-17l36.2 36.2L184.5 256 77.2 148.7 41 185c-15.1 15.1-41 4.4-41-17V56c0-13.3 10.7-24 24-24h112c21.4 0 32.1 25.9 17 41l-36.2 36.2L224 216.4l107.3-107.3L295.1 73c-15.1-15.1-4.4-41 17-41h112c13.3 0 24 10.7 24 24v112c0 21.4-25.9 32.1-41 17l-36.2-36.2L263.6 256l107.3 107.3 36.2-36.2c15.1-15.2 41-4.5 41 16.9z"></path>\n        </svg>\n    </ui-button>\n    <ui-button class="rect transparent" tooltip="i18n:scene.tooltips.rect_gizmo">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n        <path fill="currentColor" d="M512 128V32c0-17.67-14.33-32-32-32h-96c-17.67 0-32 14.33-32 32H160c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v96c0 17.67 14.33 32 32 32v192c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32h192c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32V160c17.67 0 32-14.33 32-32zm-96-64h32v32h-32V64zM64 64h32v32H64V64zm32 384H64v-32h32v32zm352 0h-32v-32h32v32zm-32-96h-32c-17.67 0-32 14.33-32 32v32H160v-32c0-17.67-14.33-32-32-32H96V160h32c17.67 0 32-14.33 32-32V96h192v32c0 17.67 14.33 32 32 32h32v192z"/>\n        </svg>\n    </ui-button>\n    <ui-button class="config transparent" tooltip="i18n:scene.increment_snap.title">\n        <ui-icon value="setting"></ui-icon>\n    </ui-button>\n    <div class="configuration" tabindex="1">\n        <div class="title">\n            <ui-label value="i18n:scene.increment_snap.title"></ui-label>\n        </div>\n        <ui-prop class="column">\n            <ui-button class="transparent translate-button" slot="label" tooltip="i18n:scene.increment_snap.enable_translate">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                    <path fill="currentColor" d="M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"></path>\n                </svg>\n            </ui-button>\n            <div class="translate" slot="content">\n                <div class="part">\n                    <ui-label value="X"></ui-label>\n                    <ui-num-input class="x-input" step="0.1" min="0"></ui-num-input>\n                </div>\n                <div class="part">\n                    <ui-label value="Y"></ui-label>\n                    <ui-num-input class="y-input" step="0.1" min="0"></ui-num-input>\n                </div>\n                <div class="part">\n                    <ui-label value="Z"></ui-label>\n                    <ui-num-input class="z-input" step="0.1" min="0"></ui-num-input>\n                </div>\n                <div class="together">\n                    <ui-icon class="together-button" value="link" tooltip="i18n:scene.increment_snap.xyz_together"></ui-icon>\n                </div>\n            </div>\n        </ui-prop>\n        <ui-prop class="column">\n            <ui-button class="transparent rotate-button" slot="label" tooltip="i18n:scene.increment_snap.enable_rotate">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                    <path fill="currentColor" d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"></path>\n                </svg>\n            </ui-button>\n            <ui-num-input class="rotate-input" slot="content" step="0.1" min="0"></ui-num-input>\n        </ui-prop>\n        <ui-prop class="column">\n            <ui-button class="transparent scale-button" slot="label" tooltip="i18n:scene.increment_snap.enable_scale">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n                    <path fill="currentColor" d="M448.1 344v112c0 13.3-10.7 24-24 24h-112c-21.4 0-32.1-25.9-17-41l36.2-36.2L224 295.6 116.8 402.9 153 439c15.1 15.1 4.4 41-17 41H24c-13.3 0-24-10.7-24-24V344c0-21.4 25.9-32.1 41-17l36.2 36.2L184.5 256 77.2 148.7 41 185c-15.1 15.1-41 4.4-41-17V56c0-13.3 10.7-24 24-24h112c21.4 0 32.1 25.9 17 41l-36.2 36.2L224 216.4l107.3-107.3L295.1 73c-15.1-15.1-4.4-41 17-41h112c13.3 0 24 10.7 24 24v112c0 21.4-25.9 32.1-41 17l-36.2-36.2L263.6 256l107.3 107.3 36.2-36.2c15.1-15.2 41-4.5 41 16.9z"></path>\n                </svg>\n            </ui-button>\n            <ui-num-input class="scale-input" slot="content" step="0.1" min="0"></ui-num-input>\n        </ui-prop>\n        <div class="title">\n            <ui-label value="i18n:scene.rect_tool_snap.title"></ui-label>\n        </div>\n        <ui-prop class="column">\n            <ui-label value="i18n:scene.rect_tool_snap.enable_snap"></ui-label>\n            <ui-checkbox class="rect-tool-snap-enable"\n                tooltip="i18n:scene.rect_tool_snap.enable_snap"\n            ></ui-checkbox>\n        </ui-prop>\n        <ui-prop class="column" style="--left-width: 50%;">\n            <ui-label slot="label" value="i18n:scene.rect_tool_snap.threshold"></ui-label>\n            <ui-num-input slot="content" class="threshold-input" slot="content" step="0.1" min="0"></ui-num-input>\n        </ui-prop>\n    </div>\n</div>\n\n<div class="scene-gizmo-buttons scene-gizmo-location">\n    <ui-button class="pivot transparent" tooltip="i18n:scene.tooltips.pivotTip">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n            <path fill="currentColor" d="M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"></path>\n        </svg>\n        <ui-label value="i18n:scene.tooltips.pivot"></ui-label>\n    </ui-button>\n    <ui-button class="coordinate transparent" tooltip="i18n:scene.tooltips.local_gizmo">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">\n            <path fill="currentColor" d="M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm-11.34 240.23c-2.89 4.82-8.1 7.77-13.72 7.77h-.31c-4.24 0-8.31 1.69-11.31 4.69l-5.66 5.66c-3.12 3.12-3.12 8.19 0 11.31l5.66 5.66c3 3 4.69 7.07 4.69 11.31V304c0 8.84-7.16 16-16 16h-6.11c-6.06 0-11.6-3.42-14.31-8.85l-22.62-45.23c-2.44-4.88-8.95-5.94-12.81-2.08l-19.47 19.46c-3 3-7.07 4.69-11.31 4.69H50.81C49.12 277.55 48 266.92 48 256c0-110.28 89.72-200 200-200 21.51 0 42.2 3.51 61.63 9.82l-50.16 38.53c-5.11 3.41-4.63 11.06.86 13.81l10.83 5.41c5.42 2.71 8.84 8.25 8.84 14.31V216c0 4.42-3.58 8-8 8h-3.06c-3.03 0-5.8-1.71-7.15-4.42-1.56-3.12-5.96-3.29-7.76-.3l-17.37 28.95zM408 358.43c0 4.24-1.69 8.31-4.69 11.31l-9.57 9.57c-3 3-7.07 4.69-11.31 4.69h-15.16c-4.24 0-8.31-1.69-11.31-4.69l-13.01-13.01a26.767 26.767 0 0 0-25.42-7.04l-21.27 5.32c-1.27.32-2.57.48-3.88.48h-10.34c-4.24 0-8.31-1.69-11.31-4.69l-11.91-11.91a8.008 8.008 0 0 1-2.34-5.66v-10.2c0-3.27 1.99-6.21 5.03-7.43l39.34-15.74c1.98-.79 3.86-1.82 5.59-3.05l23.71-16.89a7.978 7.978 0 0 1 4.64-1.48h12.09c3.23 0 6.15 1.94 7.39 4.93l5.35 12.85a4 4 0 0 0 3.69 2.46h3.8c1.78 0 3.35-1.18 3.84-2.88l4.2-14.47c.5-1.71 2.06-2.88 3.84-2.88h6.06c2.21 0 4 1.79 4 4v12.93c0 2.12.84 4.16 2.34 5.66l11.91 11.91c3 3 4.69 7.07 4.69 11.31v24.6z"></path>\n        </svg>\n        <ui-label value="i18n:scene.tooltips.local"></ui-label>\n    </ui-button>\n</div>\n\n<div class="camera-dimension">\n    <ui-label tooltip="i18n:scene.project_2d_tooltip" value="i18n:scene.project_2d_name"></ui-label>\n</div>\n',exports.$={position:".position",rotation:".rotation",scale:".scale",rect:".rect",config:".config",configuration:".configuration",translateButton:".translate-button",rotateButton:".rotate-button",scaleButton:".scale-button",xInput:".x-input",yInput:".y-input",zInput:".z-input",togetherButton:".together-button",rotateInput:".rotate-input",scaleInput:".scale-input",rectToolSnapEnable:".rect-tool-snap-enable",rectToolSnapThresholdInput:".threshold-input",pivot:".pivot",pivotLabel:".pivot > ui-label",coordinate:".coordinate",coordinateLabel:".coordinate > ui-label",cameraDimension:".camera-dimension"},exports.methods={updateGizmoTool(t){["position","rotation","scale","rect"].forEach(n=>{n===t?this.$[n].setAttribute("active",""):this.$[n].removeAttribute("active")})},updateGizmoPivot(t){this.pivot=t},updateGizmoCoordinate(t){this.coordinate=t},updateDimension(t){this.is2D=t,t?this.$.cameraDimension.removeAttribute("hidden"):this.$.cameraDimension.setAttribute("hidden","")},changeViewDimension(){!0===this.is2D?this.is2D=!1:this.is2D=!0,Editor.Message.send("scene","change-is2D",this.is2D),Editor.Profile.setConfig("scene","gizmos-infos.is2D",this.is2D)},initConfiguration(){this.$.config.addEventListener("click",()=>{this.showConfiguration()}),this.$.config.addEventListener("mouseleave",()=>{this.hideConfiguration()}),this.$.togetherButton.addEventListener("click",()=>{this.$.togetherButton.toggleAttribute("active"),this.$.yInput.toggleAttribute("disabled"),this.$.zInput.toggleAttribute("disabled"),this.$.togetherButton.hasAttribute("active")&&this.setConfigurationPositionYZSameAsX()}),this.$.configuration.addEventListener("mouseenter",()=>{clearTimeout(this.hideConfigurationTimeId)}),this.$.configuration.addEventListener("mouseleave",()=>{this.hideConfiguration()}),this.$.translateButton.addEventListener("click",async()=>{this.submitConfiguration("isPositionSnapEnabled",!this.$.translateButton.hasAttribute("active"))}),this.$.xInput.addEventListener("change",t=>{this.configData.position.x=t.target.value,this.$.togetherButton.hasAttribute("active")?this.setConfigurationPositionYZSameAsX():this.submitConfiguration("position",this.configData.position)}),this.$.yInput.addEventListener("change",t=>{this.configData.position.y=t.target.value,this.submitConfiguration("position",this.configData.position)}),this.$.zInput.addEventListener("change",t=>{this.configData.position.z=t.target.value,this.submitConfiguration("position",this.configData.position)}),this.$.rotateButton.addEventListener("click",()=>{this.submitConfiguration("isRotationSnapEnabled",!this.$.rotateButton.hasAttribute("active"))}),this.$.rotateInput.addEventListener("change",t=>{this.submitConfiguration("rotation",t.target.value)}),this.$.scaleButton.addEventListener("click",()=>{this.submitConfiguration("isScaleSnapEnabled",!this.$.scaleButton.hasAttribute("active"))}),this.$.scaleInput.addEventListener("change",t=>{this.submitConfiguration("scale",t.target.value)}),this.$.rectToolSnapEnable.addEventListener("change",async t=>{await Editor.Message.request("scene","set-rect-snapping-configs","enableSnapping",t.target.value)}),this.$.rectToolSnapThresholdInput.addEventListener("change",async t=>{await Editor.Message.request("scene","set-rect-snapping-configs","snapThreshold",t.target.value)})},async showConfiguration(){clearTimeout(this.hideConfigurationTimeId),this.$.configuration.setAttribute("active",""),await this.refreshConfiguration(),this.checkConfigurationPosition()},hideConfiguration(){clearTimeout(this.hideConfigurationTimeId),this.hideConfigurationTimeId=setTimeout(()=>{this.$.configuration.removeAttribute("active")},200)},async refreshConfiguration(){this.configData=await Editor.Message.request("scene","query-transform-snap-configs"),this.configData&&(this.$.xInput.setAttribute("value",this.configData.position.x),this.$.yInput.setAttribute("value",this.configData.position.y),this.$.zInput.setAttribute("value",this.configData.position.z),this.$.rotateInput.setAttribute("value",this.configData.rotation),this.$.scaleInput.setAttribute("value",this.configData.scale),this.rectToolConfigData=await Editor.Message.request("scene","query-rect-snapping-configs"),this.$.rectToolSnapEnable.setAttribute("value",this.rectToolConfigData.enableSnapping),this.$.rectToolSnapThresholdInput.setAttribute("value",this.rectToolConfigData.snapThreshold),this.checkConfigurationEnable())},checkConfigurationEnable(){const t={translateButton:"isPositionSnapEnabled",rotateButton:"isRotationSnapEnabled",scaleButton:"isScaleSnapEnabled"};for(const n in t){const i=t[n];this.configData[i]?this.$[n].setAttribute("active",""):this.$[n].removeAttribute("active")}},checkConfigurationPosition(){this.configData.position.x===this.configData.position.y&&this.configData.position.x===this.configData.position.z?(this.$.togetherButton.setAttribute("active",""),this.$.yInput.setAttribute("disabled",""),this.$.zInput.setAttribute("disabled","")):(this.$.togetherButton.removeAttribute("active"),this.$.yInput.removeAttribute("disabled"),this.$.zInput.removeAttribute("disabled"))},setConfigurationPositionYZSameAsX(){this.configData.position.z=this.configData.position.y=this.configData.position.x,this.$.yInput.setAttribute("value",this.configData.position.y),this.$.zInput.setAttribute("value",this.configData.position.z),this.submitConfiguration("position",this.configData.position)},async submitConfiguration(t,n){await Editor.Message.send("scene","set-transform-snap-configs",t,n),this.refreshConfiguration()}},exports.ready=async function(){this.pivot="center",this.coordinate="global";const t=await Editor.Profile.getProject("engine","modules.includeModules");t&&!t.includes("3d")?this.updateDimension(!0):this.updateDimension(!1),Editor.Message.addBroadcastListener("scene:ready",async()=>{const t=await Editor.Message.request("scene","query-gizmo-tool-name");this.updateGizmoTool(t);const n=await Editor.Message.request("scene","query-gizmo-pivot");this.updateGizmoPivot(n);const i=await Editor.Message.request("scene","query-gizmo-coordinate");this.updateGizmoCoordinate(i)}),Editor.Message.addBroadcastListener("scene:gizmo-tool-changed",t=>{this.updateGizmoTool(t)}),Editor.Message.addBroadcastListener("scene:gizmo-pivot-changed",t=>{this.updateGizmoPivot(t)}),Editor.Message.addBroadcastListener("scene:gizmo-coordinate-changed",t=>{this.updateGizmoCoordinate(t)}),Editor.Message.addBroadcastListener("engine:engine-modules-config-changed",t=>{this.updateDimension(!t.includes("3d"))}),["position","rotation","scale","rect"].forEach(t=>{this.$[t].addEventListener("click",()=>{Editor.Message.send("scene","change-gizmo-tool",t)})}),this.$.pivot.addEventListener("click",()=>{"pivot"===this.pivot?(this.pivot="center",this.$.pivot.setAttribute("tooltip","i18n:scene.tooltips.centerTip"),this.$.pivotLabel.setAttribute("value","i18n:scene.tooltips.center")):(this.pivot="pivot",this.$.pivot.setAttribute("tooltip","i18n:scene.tooltips.pivotTip"),this.$.pivotLabel.setAttribute("value","i18n:scene.tooltips.pivot")),Editor.Message.send("scene","change-gizmo-pivot",this.pivot)}),this.$.coordinate.addEventListener("click",()=>{"local"===this.coordinate?(this.coordinate="global",this.$.coordinate.setAttribute("tooltip","i18n:scene.tooltips.global_gizmo"),this.$.coordinateLabel.setAttribute("value","i18n:scene.tooltips.global")):(this.coordinate="local",this.$.coordinate.setAttribute("tooltip","i18n:scene.tooltips.local_gizmo"),this.$.coordinateLabel.setAttribute("value","i18n:scene.tooltips.local")),Editor.Message.send("scene","change-gizmo-coordinate",this.coordinate)}),this.initConfiguration(),document.body.addEventListener("keydown",async t=>{const n=function t(n){return n&&n.shadowRoot?t(n.shadowRoot.activeElement):n}(document.activeElement);if(!n||"INPUT"!==n.tagName)if(t.ctrlKey||t.metaKey||t.alyKey||t.shiftKey)switch(t.key){case"f":case"F":if(t.ctrlKey&&t.shiftKey){const t=Editor.Selection.getSelected("node");t&&t.length&&Editor.Message.send("scene","align-node-to-scene-view",t)}}else switch(t.key){case"w":case"W":Editor.Message.send("scene","change-gizmo-tool","position");break;case"e":case"E":Editor.Message.send("scene","change-gizmo-tool","rotation");break;case"r":case"R":Editor.Message.send("scene","change-gizmo-tool","scale");break;case"t":case"T":Editor.Message.send("scene","change-gizmo-tool","rect");break;case"f":case"F":const n=Editor.Selection.getSelected("node");n&&n.length&&Editor.Message.send("scene","focus-camera",n);break;case"2":this.changeViewDimension()}})};
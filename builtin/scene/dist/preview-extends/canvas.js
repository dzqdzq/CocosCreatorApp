"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const electron_base_ipc_1=require("@base/electron-base-ipc");class GlPreview{constructor(e,t){this.gl=null,this.canvas=null,this._registerName=e,this._name=t}async init(e){e||(e={width:100,height:100}),electron_base_ipc_1.sendToChannel(this._registerName,this._name,{index:e.index,width:e.width,height:e.height})}queryPreviewData(e){return e||(e={width:100,height:100}),new Promise((t,i)=>{electron_base_ipc_1.sendToChannel(this._registerName,this._name,{index:e.index,width:e.width,height:e.height}).option({original:!0}).callback((e,s)=>{if(e)return i(e);t(s)})})}resizeGL(e,t){this.canvas&&(this.canvas.width!==e&&(this.canvas.width=e),this.canvas.height!==t&&(this.canvas.height=t))}drawGL(e,t,i){var s;if(this.canvas){const a=new ImageData(new Uint8ClampedArray(e.buffer),t,i);null===(s=this.gl)||void 0===s||s.putImageData(a,0,0)}}initGL(e,t={}){e&&(e.style.transform="scale(1, -1)",this.canvas=e,this.gl=e.getContext("2d"))}destroyGL(){}}exports.default=GlPreview;
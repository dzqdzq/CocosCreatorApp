"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const selection_1=__importDefault(require("../../public/selection")),node_1=__importDefault(require("./node")),events_1=require("events");function checkToSetAnimState(e){const t=[];e.forEach(e=>{const n=node_1.default.query(e);t.push(n)}),cce.Engine.checkToSetAnimState(t)}class SceneSelection extends events_1.EventEmitter{constructor(){super(...arguments),this._hover=void 0}init(){selection_1.default.on("select",(e,t)=>{const n=node_1.default.query(e);n&&n._components&&(n.components.forEach(e=>{if(e&&e.onFocusInEditor)try{e.onFocusInEditor()}catch(e){console.error(e)}}),this.emit("select",e,t),checkToSetAnimState(selection_1.default.query()))}),selection_1.default.on("unselect",(e,t)=>{const n=node_1.default.query(e);if(!n||!n._components)return;n.components.forEach(e=>{if(e&&e.onLostFocusInEditor)try{e.onLostFocusInEditor()}catch(e){console.error(e)}}),this.emit("unselect",e,t);const o=selection_1.default.query(),c=o.indexOf(e);c>=0&&o.splice(c,1),checkToSetAnimState(o)})}isSelect(e){return selection_1.default.isSelect(e)}query(){return selection_1.default.query()}select(e){selection_1.default.select(e)}unselect(e){selection_1.default.unselect(e)}clear(){selection_1.default.clear()}reset(){selection_1.default.clear()}notice(){selection_1.default.notice()}_select(e){selection_1.default._select(e)}_unselect(e){selection_1.default._unselect(e)}}exports.default=new SceneSelection;
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransitionPreview=void 0;const animationApi=__importStar(require("cc/editor/new-gen-anim")),base_1=require("./base");class TransitionPreview extends base_1.AnimationGraphPreviewBase{constructor(){super(...arguments),this.transition=null}hide(){super.hide(),this.transition=null}show(e,t){if(!t)return base_1.PreviewState.NO_ANIMATION_GRAPH;if(!this.hasModel())return base_1.PreviewState.NO_MODEL;if(!animationApi.isAnimationTransition(e))return base_1.PreviewState.ILLEGAL_TRANSITION;this.playState!==base_1.PlayState.STOP&&this.stop(),this.setVariables(t);const i=e.from;if(!(i instanceof animationApi.MotionState))return base_1.PreviewState.NO_TRANSITION_SOURCE_MOTION;if(!i.motion)return base_1.PreviewState.NO_TRANSITION_SOURCE_MOTION;if(i.motion instanceof animationApi.ClipMotion&&!i.motion.clip)return base_1.PreviewState.NO_TRANSITION_SOURCE_MOTION;this.previewer.setSourceMotion(i.motion);const n=e.to;return n instanceof animationApi.MotionState&&n.motion?n.motion instanceof animationApi.ClipMotion&&!n.motion.clip?base_1.PreviewState.NO_TRANSITION_DESTINATION_MOTION:(this.previewer.setTargetMotion(n.motion),this.transition=e,this.cameraComp.enabled=!0,this.setProp(),this.active=!0,base_1.PreviewState.NO_ERROR):base_1.PreviewState.NO_TRANSITION_DESTINATION_MOTION}setProp(){this.transition&&(this.previewer.setTransitionDuration(this.transition.duration),this.previewer.setRelativeTransitionDuration(this.transition.relativeDuration),this.previewer.setExitTimes(this.transition.exitCondition),this.previewer.setExitTimeEnabled(this.transition.exitConditionEnabled),this.previewer.setDestinationStart(this.transition.destinationStart),this.update())}createPreviewer(e){return new animationApi.TransitionPreviewer(e)}getLightName(){return"transition preview light"}getUpdateMessageName(){return"scene:update-transition-preview"}}exports.TransitionPreview=TransitionPreview;
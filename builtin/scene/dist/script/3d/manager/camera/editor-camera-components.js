"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const cc_1=require("cc"),CAMERA_EDITOR_GIZMO_MASK=cc_1.Layers.Enum.GIZMOS|cc_1.Layers.Enum.IGNORE_RAYCAST;class EditorCameraComponent extends cc_1.Camera{constructor(){super(...arguments),this._uiEditorGizmoCamera=null}set projection(e){super.projection=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.projectionType=e)}get projection(){return super.projection}set fov(e){super.fov=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.fov=e)}get fov(){return super.fov}set orthoHeight(e){super.orthoHeight=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.orthoHeight=e)}get orthoHeight(){return super.orthoHeight}set near(e){super.near=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.nearClip=e)}get near(){return super.near}set far(e){super.far=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.farClip=e)}get far(){return super.far}set clearColor(e){super.clearColor=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.clearColor=e)}get clearColor(){return super.clearColor}set clearDepth(e){super.clearDepth=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.clearDepth=e)}get clearDepth(){return super.clearDepth}set clearStencil(e){super.clearStencil=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.clearStencil=e)}get clearStencil(){return super.clearStencil}set clearFlags(e){super.clearFlags=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.clearFlag=e)}set rect(e){super.rect=e,this._uiEditorGizmoCamera&&this._uiEditorGizmoCamera.setViewportInOrientedSpace(e)}set screenScale(e){super.screenScale=e,this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.screenScale=e)}onLoad(){var e;super.onLoad(),this._inEditorMode=!0,null===(e=this.camera)||void 0===e||e.initGeometryRenderer(),cce.Engine.getGeometryRenderer().renderer=this.camera.geometryRenderer}onEnable(){super.onEnable();const e=this._getRenderScene();this._uiEditorGizmoCamera&&(e.addCamera(this._uiEditorGizmoCamera),this._uiEditorGizmoCamera.enabled=!0)}onDisable(){super.onDisable(),this._uiEditorGizmoCamera&&this._uiEditorGizmoCamera.scene&&this._uiEditorGizmoCamera.scene.removeCamera(this._uiEditorGizmoCamera)}onDestroy(){super.onDestroy(),this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.detachCamera(),this._uiEditorGizmoCamera=null)}_createCamera(){const e=this._camera;if(super._createCamera(),this._camera!==e&&this._camera&&(this._uiEditorGizmoCamera&&(this._uiEditorGizmoCamera.detachCamera(),this._uiEditorGizmoCamera=null),this._uiEditorGizmoCamera=cc.director.root.createCamera(),this._uiEditorGizmoCamera)){this._uiEditorGizmoCamera.initialize({name:"Editor UIGizmoCamera",node:this._camera.node,projection:this.projection,window:cc.director.root.mainWindow,priority:this._priority+2}),this._uiEditorGizmoCamera.enabled=!0,this._uiEditorGizmoCamera.visibility=CAMERA_EDITOR_GIZMO_MASK,this._uiEditorGizmoCamera.setViewportInOrientedSpace(this._camera.viewport),this._uiEditorGizmoCamera.fov=this._camera.fov,this._uiEditorGizmoCamera.nearClip=this._camera.nearClip,this._uiEditorGizmoCamera.farClip=this._camera.farClip;const e=this._camera.clearColor;this._uiEditorGizmoCamera.clearColor=new cc_1.Color(e.x,e.y,e.z,0),this._uiEditorGizmoCamera.clearDepth=this._camera.clearDepth,this._uiEditorGizmoCamera.clearStencil=this._camera.clearStencil,this._uiEditorGizmoCamera.clearFlag=cc_1.gfx.ClearFlagBit.NONE}}}exports.default=EditorCameraComponent;
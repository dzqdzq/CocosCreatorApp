"use strict";var CameraShortcutUIType,__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraShortcutUIType=void 0,exports.showCameraShortcutTip=showCameraShortcutTip,exports.hideCameraShortcutTip=hideCameraShortcutTip;const snap_shortcut_1=__importDefault(require("./snap-shortcut")),wander_shortcut_1=__importDefault(require("./wander-shortcut")),PANEL_CONFIG_MAP=(!function(t){t.Snap="snap-shortcut",t.WanderShortcut="wander-shortcut"}(CameraShortcutUIType||(exports.CameraShortcutUIType=CameraShortcutUIType={})),{[CameraShortcutUIType.Snap]:snap_shortcut_1.default,[CameraShortcutUIType.WanderShortcut]:wander_shortcut_1.default}),cachePanelMap=new Map;function shouldAutoHide(t){return 0<t}function createUIPanel(t){var e=PANEL_CONFIG_MAP[t];if(!e)throw new Error("Unknown camera shortcut UI type: "+t);try{var r=document.createElement("ui-panel");return r.config=e,document.body.appendChild(r),r}catch(t){throw new Error("Failed to create UI panel for config: "+e)}}function spawnTimeout(t,e){return shouldAutoHide(e)?setTimeout(()=>hideCameraShortcutTip(t),e):null}function showCameraShortcutTip(t){var e=t["duration"],r=cachePanelMap.get(t.type);if(r&&r.element)return shouldAutoHide(e)?(r.timeoutID&&clearTimeout(r.timeoutID),void(r.timeoutID=spawnTimeout(t.type,t.duration))):void 0;cachePanelMap.set(t.type,{element:createUIPanel(t.type),timeoutID:spawnTimeout(t.type,t.duration)})}function hideCameraShortcutTip(e){var t=cachePanelMap.get(e);if(t)try{t.element.remove(),t.timeoutID&&clearTimeout(t.timeoutID)}catch(t){console.warn(`Error while hiding camera shortcut tip for type ${e}:`,t)}finally{cachePanelMap.delete(e)}}
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ruler=void 0;class Ruler{constructor(){this.rulerLen=0,this.isShow=!1}init(){const e=document.querySelector("#hLabels"),t=document.querySelector("#vLabels");this.hRulerCanvas=e,this.vRulerCanvas=t,this.hRulerCtx=this.hRulerCanvas.getContext("2d"),this.vRulerCtx=this.vRulerCanvas.getContext("2d"),this.rulerLen=35*cc.screen.devicePixelRatio;const{width:i,height:s}=cc.screen.windowSize;this.hRulerCanvas.width=i,this.hRulerCanvas.height=this.rulerLen,this.vRulerCanvas.width=this.rulerLen,this.vRulerCanvas.height=s}show(e){this.isShow=e}updateTicks(e){var t,i;const{width:s,height:h}=cc.screen.windowSize;if(null===(t=this.hRulerCtx)||void 0===t||t.clearRect(0,0,s,this.rulerLen),null===(i=this.vRulerCtx)||void 0===i||i.clearRect(0,0,this.rulerLen,h),!this.isShow)return;const l=`${12*cc.screen.devicePixelRatio}px Arial`,r=e.hTicks.levelForStep(50),u=e.hTicks.ticksAtLevel(r,!1);this.hRulerCtx.beginPath(),u.forEach((t,i)=>{t=Math.floor(10*t)/10;const s=Math.floor(this.valueToPixelH(t,e))+5;this.hRulerCtx.font=l,this.hRulerCtx.fillStyle="gray",this.hRulerCtx.textBaseline="bottom",this.hRulerCtx.fillText(t.toString(),s,this.rulerLen)}),this.hRulerCtx.closePath();const o=e.vTicks.levelForStep(50),n=e.vTicks.ticksAtLevel(o,!1);this.vRulerCtx.beginPath(),n.forEach((t,i)=>{t=Math.floor(10*t)/10;const s=Math.floor(this.valueToPixelV(t,e))-5;this.vRulerCtx.font=l,this.vRulerCtx.fillStyle="gray",this.vRulerCtx.fillText(t.toString(),0,s)}),this.vRulerCtx.closePath()}valueToPixelH(e,t){return e*t.xAxisScale+t.xAxisOffset}valueToPixelV(e,t){const{height:i}=cc.screen.windowSize;return-e*t.yAxisScale+i+t.yAxisOffset}resize(e,t){this.hRulerCanvas.width=e,this.hRulerCanvas.height=this.rulerLen,this.vRulerCanvas.width=this.rulerLen,this.vRulerCanvas.height=t}}exports.Ruler=Ruler;
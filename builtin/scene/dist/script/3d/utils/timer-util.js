"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimerUtil=void 0;let mainProcessIntervalIds=[];const remoteSetTimeout=require("@electron/remote").getGlobal("setTimeout"),remoteClearTimeout=require("@electron/remote").getGlobal("clearTimeout");class TimerUtil{constructor(e){this._timeInterval=200,this._callWaitingMap=new Map,this._timeInterval=null!==e&&void 0!==e?e:200}callFunctionLimit(e,t,...i){let a=this._callWaitingMap.get(e),r=!1;a?a.waitingTimer?(a.callFunc=t,a.args=i,a.needCallAfterWaiting=!0):r=!0:(a={needCallAfterWaiting:!1},this._callWaitingMap.set(e,a),r=!0),r&&(t(...i),a.waitingTimer=setTimeout(()=>{var t;if(a&&(a.waitingTimer=void 0),a&&a.needCallAfterWaiting&&(a.needCallAfterWaiting=!1,a.callFunc)){const i=null!==(t=a.args)&&void 0!==t?t:[];this.callFunctionLimit(e,a.callFunc,...i)}},this._timeInterval))}clear(){this._callWaitingMap.forEach(e=>{e.waitingTimer&&clearTimeout(e.waitingTimer)}),this._callWaitingMap.clear()}static setMainProcessTimeout(e,t){return remoteSetTimeout(e,t)}static clearMainProcessTimeout(e){remoteClearTimeout(e)}static setMainProcessInterval(e,t){const i=setInterval(e,t);return mainProcessIntervalIds.push(i),i}static clearMainProcessInterval(e){const t=mainProcessIntervalIds.indexOf(e);t>=0&&(clearInterval(e),mainProcessIntervalIds.splice(t,1))}static clearTimerAndInterval(){mainProcessIntervalIds.forEach(e=>{this.clearMainProcessInterval(e)}),mainProcessIntervalIds=[]}}exports.TimerUtil=TimerUtil;
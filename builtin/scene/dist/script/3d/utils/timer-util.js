"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimerUtil=void 0;let mainProcessIntervalIds=[];const remoteSetTimeout=require("@electron/remote").getGlobal("setTimeout"),remoteClearTimeout=require("@electron/remote").getGlobal("clearTimeout");class TimerUtil{constructor(e){this._timeInterval=200,this._callWaitingMap=new Map,this._timeInterval=null!==e&&void 0!==e?e:200}callFunctionLimit(e,t,...i){let r=this._callWaitingMap.get(e),a=!1;r?r.waitingTimer?(r.callFunc=t,r.args=i,r.needCallAfterWaiting=!0):a=!0:(r={needCallAfterWaiting:!1},this._callWaitingMap.set(e,r),a=!0),a&&(t(...i),r.waitingTimer=setTimeout(()=>{var t;if(r&&(r.waitingTimer=void 0),r&&r.needCallAfterWaiting&&(r.needCallAfterWaiting=!1,r.callFunc)){const i=null!==(t=r.args)&&void 0!==t?t:[];this.callFunctionLimit(e,r.callFunc,...i)}},this._timeInterval))}clear(){this._callWaitingMap.forEach(e=>{e.waitingTimer&&clearTimeout(e.waitingTimer)}),this._callWaitingMap.clear()}static setMainProcessTimeout(e,t){return remoteSetTimeout(e,t)}static clearMainProcessTimeout(e){remoteClearTimeout(e)}static setMainProcessInterval(e,t){const i=require("@electron/remote").getGlobal("setInterval")(e,t);return mainProcessIntervalIds.push(i),i}static clearMainProcessInterval(e){const t=mainProcessIntervalIds.indexOf(e);t>=0&&(require("@electron/remote").getGlobal("clearInterval")(e),mainProcessIntervalIds.splice(t,1))}static clearTimerAndInterval(){mainProcessIntervalIds.forEach(e=>{this.clearMainProcessInterval(e)}),mainProcessIntervalIds=[]}}exports.TimerUtil=TimerUtil;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimerUtil=void 0;let mainProcessTimerIds=[],mainProcessIntervalIds=[];class TimerUtil{constructor(e){this._timeInterval=200,this._callWaitingMap=new Map,this._timeInterval=null!==e&&void 0!==e?e:200}callFunctionLimit(e,i,...t){let r=this._callWaitingMap.get(e),a=!1;r?r.waitingTimer?(r.callFunc=i,r.args=t,r.needCallAfterWaiting=!0):a=!0:(r={needCallAfterWaiting:!1},this._callWaitingMap.set(e,r),a=!0),a&&(i(...t),r.waitingTimer=setTimeout(()=>{var i;if(r&&(r.waitingTimer=void 0),r&&r.needCallAfterWaiting&&(r.needCallAfterWaiting=!1,r.callFunc)){const t=null!==(i=r.args)&&void 0!==i?i:[];this.callFunctionLimit(e,r.callFunc,...t)}},this._timeInterval))}clear(){this._callWaitingMap.forEach(e=>{e.waitingTimer&&clearTimeout(e.waitingTimer)}),this._callWaitingMap.clear()}static setMainProcessTimeout(e,i){const t=require("@electron/remote").getGlobal("setTimeout")(e,i);return mainProcessTimerIds.push(t),t}static clearMainProcessTimeout(e){const i=mainProcessTimerIds.indexOf(e);i>=0&&(require("@electron/remote").getGlobal("clearTimeout")(e),mainProcessTimerIds.splice(i,1))}static setMainProcessInterval(e,i){const t=require("@electron/remote").getGlobal("setInterval")(e,i);return mainProcessIntervalIds.push(t),t}static clearMainProcessInterval(e){const i=mainProcessIntervalIds.indexOf(e);i>=0&&(require("@electron/remote").getGlobal("clearInterval")(e),mainProcessIntervalIds.splice(i,1))}static clearTimerAndInterval(){mainProcessTimerIds.forEach(e=>{this.clearMainProcessTimeout(e)}),mainProcessTimerIds=[],mainProcessIntervalIds.forEach(e=>{this.clearMainProcessInterval(e)}),mainProcessIntervalIds=[]}}exports.TimerUtil=TimerUtil;
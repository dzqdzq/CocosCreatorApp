"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMat4=void 0;const cc_1=require("cc"),utils_1=require("./utils"),vec3_1=require("./vec3"),quat_1=require("./quat");let _a00=0,_a01=0,_a02=0,_a03=0,_a10=0,_a11=0,_a12=0,_a13=0,_a20=0,_a21=0,_a22=0,_a23=0,_a30=0,_a31=0,_a32=0,_a33=0;const v3_1=new cc_1.Vec3,m3_1=new cc_1.Mat3;class MMat4{static clone(m){return new cc_1.Mat4(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08,m.m09,m.m10,m.m11,m.m12,m.m13,m.m14,m.m15)}static copy(m,a){return m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15,m}static set(m,a,_,t,s,r,e,c,n,M,h,i,o,u,b,x,l){return m.m00=a,m.m01=_,m.m02=t,m.m03=s,m.m04=r,m.m05=e,m.m06=c,m.m07=n,m.m08=M,m.m09=h,m.m10=i,m.m11=o,m.m12=u,m.m13=b,m.m14=x,m.m15=l,m}static identity(m){return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static transpose(m,a){if(m===a){const _=a.m01,t=a.m02,s=a.m03,r=a.m06,e=a.m07,c=a.m11;m.m01=a.m04,m.m02=a.m08,m.m03=a.m12,m.m04=_,m.m06=a.m09,m.m07=a.m13,m.m08=t,m.m09=r,m.m11=a.m14,m.m12=s,m.m13=e,m.m14=c}else m.m00=a.m00,m.m01=a.m04,m.m02=a.m08,m.m03=a.m12,m.m04=a.m01,m.m05=a.m05,m.m06=a.m09,m.m07=a.m13,m.m08=a.m02,m.m09=a.m06,m.m10=a.m10,m.m11=a.m14,m.m12=a.m03,m.m13=a.m07,m.m14=a.m11,m.m15=a.m15;return m}static invert(m,a){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;const _=_a00*_a11-_a01*_a10,t=_a00*_a12-_a02*_a10,s=_a00*_a13-_a03*_a10,r=_a01*_a12-_a02*_a11,e=_a01*_a13-_a03*_a11,c=_a02*_a13-_a03*_a12,n=_a20*_a31-_a21*_a30,M=_a20*_a32-_a22*_a30,h=_a20*_a33-_a23*_a30,i=_a21*_a32-_a22*_a31,o=_a21*_a33-_a23*_a31,u=_a22*_a33-_a23*_a32;let b=_*u-t*o+s*i+r*h-e*M+c*n;return 0===b?m:(b=1/b,m.m00=(_a11*u-_a12*o+_a13*i)*b,m.m01=(_a02*o-_a01*u-_a03*i)*b,m.m02=(_a31*c-_a32*e+_a33*r)*b,m.m03=(_a22*e-_a21*c-_a23*r)*b,m.m04=(_a12*h-_a10*u-_a13*M)*b,m.m05=(_a00*u-_a02*h+_a03*M)*b,m.m06=(_a32*s-_a30*c-_a33*t)*b,m.m07=(_a20*c-_a22*s+_a23*t)*b,m.m08=(_a10*o-_a11*h+_a13*n)*b,m.m09=(_a01*h-_a00*o-_a03*n)*b,m.m10=(_a30*e-_a31*s+_a33*_)*b,m.m11=(_a21*s-_a20*e-_a23*_)*b,m.m12=(_a11*M-_a10*i-_a12*n)*b,m.m13=(_a00*i-_a01*M+_a02*n)*b,m.m14=(_a31*t-_a30*r-_a32*_)*b,m.m15=(_a20*r-_a21*t+_a22*_)*b,m)}static determinant(m){return _a00=m.m00,_a01=m.m01,_a02=m.m02,_a03=m.m03,_a10=m.m04,_a11=m.m05,_a12=m.m06,_a13=m.m07,_a20=m.m08,_a21=m.m09,_a22=m.m10,_a23=m.m11,_a30=m.m12,_a31=m.m13,_a32=m.m14,_a33=m.m15,(_a00*_a11-_a01*_a10)*(_a22*_a33-_a23*_a32)-(_a00*_a12-_a02*_a10)*(_a21*_a33-_a23*_a31)+(_a00*_a13-_a03*_a10)*(_a21*_a32-_a22*_a31)+(_a01*_a12-_a02*_a11)*(_a20*_a33-_a23*_a30)-(_a01*_a13-_a03*_a11)*(_a20*_a32-_a22*_a30)+(_a02*_a13-_a03*_a12)*(_a20*_a31-_a21*_a30)}static multiply(m,a,_){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;let t=_.m00,s=_.m01,r=_.m02,e=_.m03;return m.m00=t*_a00+s*_a10+r*_a20+e*_a30,m.m01=t*_a01+s*_a11+r*_a21+e*_a31,m.m02=t*_a02+s*_a12+r*_a22+e*_a32,m.m03=t*_a03+s*_a13+r*_a23+e*_a33,t=_.m04,s=_.m05,r=_.m06,e=_.m07,m.m04=t*_a00+s*_a10+r*_a20+e*_a30,m.m05=t*_a01+s*_a11+r*_a21+e*_a31,m.m06=t*_a02+s*_a12+r*_a22+e*_a32,m.m07=t*_a03+s*_a13+r*_a23+e*_a33,t=_.m08,s=_.m09,r=_.m10,e=_.m11,m.m08=t*_a00+s*_a10+r*_a20+e*_a30,m.m09=t*_a01+s*_a11+r*_a21+e*_a31,m.m10=t*_a02+s*_a12+r*_a22+e*_a32,m.m11=t*_a03+s*_a13+r*_a23+e*_a33,t=_.m12,s=_.m13,r=_.m14,e=_.m15,m.m12=t*_a00+s*_a10+r*_a20+e*_a30,m.m13=t*_a01+s*_a11+r*_a21+e*_a31,m.m14=t*_a02+s*_a12+r*_a22+e*_a32,m.m15=t*_a03+s*_a13+r*_a23+e*_a33,m}static transform(m,a,_){const t=_.x,s=_.y,r=_.z;return a===m?(m.m12=a.m00*t+a.m04*s+a.m08*r+a.m12,m.m13=a.m01*t+a.m05*s+a.m09*r+a.m13,m.m14=a.m02*t+a.m06*s+a.m10*r+a.m14,m.m15=a.m03*t+a.m07*s+a.m11*r+a.m15):(_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15,m.m00=_a00,m.m01=_a01,m.m02=_a02,m.m03=_a03,m.m04=_a10,m.m05=_a11,m.m06=_a12,m.m07=_a13,m.m08=_a20,m.m09=_a21,m.m10=_a22,m.m11=_a23,m.m12=_a00*t+_a10*s+_a20*r+a.m12,m.m13=_a01*t+_a11*s+_a21*r+a.m13,m.m14=_a02*t+_a12*s+_a22*r+a.m14,m.m15=_a03*t+_a13*s+_a23*r+a.m15),m}static translate(m,a,_){return a===m?(m.m12+=_.x,m.m13+=_.y,m.m14+=_.y):(m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12+=_.x,m.m13+=_.y,m.m14+=_.z,m.m15=a.m15),m}static scale(m,a,_){const t=_.x,s=_.y,r=_.z;return m.m00=a.m00*t,m.m01=a.m01*t,m.m02=a.m02*t,m.m03=a.m03*t,m.m04=a.m04*s,m.m05=a.m05*s,m.m06=a.m06*s,m.m07=a.m07*s,m.m08=a.m08*r,m.m09=a.m09*r,m.m10=a.m10*r,m.m11=a.m11*r,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15,m}static rotate(m,a,_,t){let s=t.x,r=t.y,e=t.z,c=Math.sqrt(s*s+r*r+e*e);if(Math.abs(c)<utils_1.EPSILON)return null;s*=c=1/c,r*=c,e*=c;const n=Math.sin(_),M=Math.cos(_),h=1-M;_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11;const i=s*s*h+M,o=r*s*h+e*n,u=e*s*h-r*n,b=s*r*h-e*n,x=r*r*h+M,l=e*r*h+s*n,y=s*e*h+r*n,z=r*e*h-s*n,q=e*e*h+M;return m.m00=_a00*i+_a10*o+_a20*u,m.m01=_a01*i+_a11*o+_a21*u,m.m02=_a02*i+_a12*o+_a22*u,m.m03=_a03*i+_a13*o+_a23*u,m.m04=_a00*b+_a10*x+_a20*l,m.m05=_a01*b+_a11*x+_a21*l,m.m06=_a02*b+_a12*x+_a22*l,m.m07=_a03*b+_a13*x+_a23*l,m.m08=_a00*y+_a10*z+_a20*q,m.m09=_a01*y+_a11*z+_a21*q,m.m10=_a02*y+_a12*z+_a22*q,m.m11=_a03*y+_a13*z+_a23*q,a!==m&&(m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m}static rotateX(m,a,_){const t=Math.sin(_),s=Math.cos(_),r=a.m04,e=a.m05,c=a.m06,n=a.m07,M=a.m08,h=a.m09,i=a.m10,o=a.m11;return a!==m&&(m.m00=a.m00,m.m01=a.m01,m.m02=a.m02,m.m03=a.m03,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m04=r*s+M*t,m.m05=e*s+h*t,m.m06=c*s+i*t,m.m07=n*s+o*t,m.m08=M*s-r*t,m.m09=h*s-e*t,m.m10=i*s-c*t,m.m11=o*s-n*t,m}static rotateY(m,a,_){const t=Math.sin(_),s=Math.cos(_),r=a.m00,e=a.m01,c=a.m02,n=a.m03,M=a.m08,h=a.m09,i=a.m10,o=a.m11;return a!==m&&(m.m04=a.m04,m.m05=a.m05,m.m06=a.m06,m.m07=a.m07,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m00=r*s-M*t,m.m01=e*s-h*t,m.m02=c*s-i*t,m.m03=n*s-o*t,m.m08=r*t+M*s,m.m09=e*t+h*s,m.m10=c*t+i*s,m.m11=n*t+o*s,m}static rotateZ(m,a,_){const t=Math.sin(_),s=Math.cos(_),r=a.m00,e=a.m01,c=a.m02,n=a.m03,M=a.m04,h=a.m05,i=a.m06,o=a.m07;return a!==m&&(m.m08=a.m08,m.m09=a.m09,m.m10=a.m10,m.m11=a.m11,m.m12=a.m12,m.m13=a.m13,m.m14=a.m14,m.m15=a.m15),m.m00=r*s+M*t,m.m01=e*s+h*t,m.m02=c*s+i*t,m.m03=n*s+o*t,m.m04=M*s-r*t,m.m05=h*s-e*t,m.m06=i*s-c*t,m.m07=o*s-n*t,m}static fromTranslation(m,a){return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=a.x,m.m13=a.y,m.m14=a.z,m.m15=1,m}static fromScaling(m,a){return m.m00=a.x,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=a.y,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=a.z,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromRotation(m,a,_){let t=_.x,s=_.y,r=_.z,e=Math.sqrt(t*t+s*s+r*r);if(Math.abs(e)<utils_1.EPSILON)return null;t*=e=1/e,s*=e,r*=e;const c=Math.sin(a),n=Math.cos(a),M=1-n;return m.m00=t*t*M+n,m.m01=s*t*M+r*c,m.m02=r*t*M-s*c,m.m03=0,m.m04=t*s*M-r*c,m.m05=s*s*M+n,m.m06=r*s*M+t*c,m.m07=0,m.m08=t*r*M+s*c,m.m09=s*r*M-t*c,m.m10=r*r*M+n,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromXRotation(m,a){const _=Math.sin(a),t=Math.cos(a);return m.m00=1,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=t,m.m06=_,m.m07=0,m.m08=0,m.m09=-_,m.m10=t,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromYRotation(m,a){const _=Math.sin(a),t=Math.cos(a);return m.m00=t,m.m01=0,m.m02=-_,m.m03=0,m.m04=0,m.m05=1,m.m06=0,m.m07=0,m.m08=_,m.m09=0,m.m10=t,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromZRotation(m,a){const _=Math.sin(a),t=Math.cos(a);return m.m00=t,m.m01=_,m.m02=0,m.m03=0,m.m04=-_,m.m05=t,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=1,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static fromRT(m,a,_){const t=a.x,s=a.y,r=a.z,e=a.w,c=t+t,n=s+s,M=r+r,h=t*c,i=t*n,o=t*M,u=s*n,b=s*M,x=r*M,l=e*c,y=e*n,z=e*M;return m.m00=1-(u+x),m.m01=i+z,m.m02=o-y,m.m03=0,m.m04=i-z,m.m05=1-(h+x),m.m06=b+l,m.m07=0,m.m08=o+y,m.m09=b-l,m.m10=1-(h+u),m.m11=0,m.m12=_.x,m.m13=_.y,m.m14=_.z,m.m15=1,m}static getTranslation(m,a){return m.x=a.m12,m.y=a.m13,m.z=a.m14,m}static getScaling(m,a){const _=m3_1.m00=a.m00,t=m3_1.m01=a.m01,s=m3_1.m02=a.m02,r=m3_1.m03=a.m04,e=m3_1.m04=a.m05,c=m3_1.m05=a.m06,n=m3_1.m06=a.m08,M=m3_1.m07=a.m09,h=m3_1.m08=a.m10;return m.x=Math.sqrt(_*_+t*t+s*s),m.y=Math.sqrt(r*r+e*e+c*c),m.z=Math.sqrt(n*n+M*M+h*h),cc_1.Mat3.determinant(m3_1)<0&&(m.x*=-1),m}static getRotation(m,a){const _=a.m00+a.m05+a.m10;let t=0;return _>0?(t=2*Math.sqrt(_+1),m.w=.25*t,m.x=(a.m06-a.m09)/t,m.y=(a.m08-a.m02)/t,m.z=(a.m01-a.m04)/t):a.m00>a.m05&&a.m00>a.m10?(t=2*Math.sqrt(1+a.m00-a.m05-a.m10),m.w=(a.m06-a.m09)/t,m.x=.25*t,m.y=(a.m01+a.m04)/t,m.z=(a.m08+a.m02)/t):a.m05>a.m10?(t=2*Math.sqrt(1+a.m05-a.m00-a.m10),m.w=(a.m08-a.m02)/t,m.x=(a.m01+a.m04)/t,m.y=.25*t,m.z=(a.m06+a.m09)/t):(t=2*Math.sqrt(1+a.m10-a.m00-a.m05),m.w=(a.m01-a.m04)/t,m.x=(a.m08+a.m02)/t,m.y=(a.m06+a.m09)/t,m.z=.25*t),m}static toRTS(m,a,_,t){t.x=vec3_1.MVec3.set(v3_1,m.m00,m.m01,m.m02).length(),m3_1.m00=m.m00/t.x,m3_1.m01=m.m01/t.x,m3_1.m02=m.m02/t.x,t.y=vec3_1.MVec3.set(v3_1,m.m04,m.m05,m.m06).length(),m3_1.m03=m.m04/t.y,m3_1.m04=m.m05/t.y,m3_1.m05=m.m06/t.y,t.z=vec3_1.MVec3.set(v3_1,m.m08,m.m09,m.m10).length(),m3_1.m06=m.m08/t.z,m3_1.m07=m.m09/t.z,m3_1.m08=m.m10/t.z,cc_1.Mat3.determinant(m3_1)<0&&(t.x*=-1,m3_1.m00*=-1,m3_1.m01*=-1,m3_1.m02*=-1),quat_1.MQuat.fromMat3(a,m3_1),vec3_1.MVec3.set(_,m.m12,m.m13,m.m14)}static fromRTS(m,a,_,t){const s=a.x,r=a.y,e=a.z,c=a.w,n=s+s,M=r+r,h=e+e,i=s*n,o=s*M,u=s*h,b=r*M,x=r*h,l=e*h,y=c*n,z=c*M,q=c*h,f=t.x,v=t.y,d=t.z;return m.m00=(1-(b+l))*f,m.m01=(o+q)*f,m.m02=(u-z)*f,m.m03=0,m.m04=(o-q)*v,m.m05=(1-(i+l))*v,m.m06=(x+y)*v,m.m07=0,m.m08=(u+z)*d,m.m09=(x-y)*d,m.m10=(1-(i+b))*d,m.m11=0,m.m12=_.x,m.m13=_.y,m.m14=_.z,m.m15=1,m}static fromRTSOrigin(m,a,_,t,s){const r=a.x,e=a.y,c=a.z,n=a.w,M=r+r,h=e+e,i=c+c,o=r*M,u=r*h,b=r*i,x=e*h,l=e*i,y=c*i,z=n*M,q=n*h,f=n*i,v=t.x,d=t.y,p=t.z,w=s.x,S=s.y,g=s.z;return m.m00=(1-(x+y))*v,m.m01=(u+f)*v,m.m02=(b-q)*v,m.m03=0,m.m04=(u-f)*d,m.m05=(1-(o+y))*d,m.m06=(l+z)*d,m.m07=0,m.m08=(b+q)*p,m.m09=(l-z)*p,m.m10=(1-(o+x))*p,m.m11=0,m.m12=_.x+w-(m.m00*w+m.m04*S+m.m08*g),m.m13=_.y+S-(m.m01*w+m.m05*S+m.m09*g),m.m14=_.z+g-(m.m02*w+m.m06*S+m.m10*g),m.m15=1,m}static fromQuat(m,a){const _=a.x,t=a.y,s=a.z,r=a.w,e=_+_,c=t+t,n=s+s,M=_*e,h=t*e,i=t*c,o=s*e,u=s*c,b=s*n,x=r*e,l=r*c,y=r*n;return m.m00=1-i-b,m.m01=h+y,m.m02=o-l,m.m03=0,m.m04=h-y,m.m05=1-M-b,m.m06=u+x,m.m07=0,m.m08=o+l,m.m09=u-x,m.m10=1-M-i,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m}static frustum(m,a,_,t,s,r,e){const c=1/(_-a),n=1/(s-t),M=1/(r-e);return m.m00=2*r*c,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=2*r*n,m.m06=0,m.m07=0,m.m08=(_+a)*c,m.m09=(s+t)*n,m.m10=(e+r)*M,m.m11=-1,m.m12=0,m.m13=0,m.m14=e*r*2*M,m.m15=0,m}static perspective(m,a,_,t,s){const r=1/Math.tan(a/2),e=1/(t-s);return m.m00=r/_,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=r,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=(s+t)*e,m.m11=-1,m.m12=0,m.m13=0,m.m14=2*s*t*e,m.m15=0,m}static ortho(m,a,_,t,s,r,e){const c=1/(a-_),n=1/(t-s),M=1/(r-e);return m.m00=-2*c,m.m01=0,m.m02=0,m.m03=0,m.m04=0,m.m05=-2*n,m.m06=0,m.m07=0,m.m08=0,m.m09=0,m.m10=2*M,m.m11=0,m.m12=(a+_)*c,m.m13=(s+t)*n,m.m14=(e+r)*M,m.m15=1,m}static lookAt(m,a,_,t){const s=a.x,r=a.y,e=a.z,c=t.x,n=t.y,M=t.z;let h=s-_.x,i=r-_.y,o=e-_.z,u=1/Math.sqrt(h*h+i*i+o*o),b=n*(o*=u)-M*(i*=u),x=M*(h*=u)-c*o,l=c*i-n*h;const y=i*(l*=u=1/Math.sqrt(b*b+x*x+l*l))-o*(x*=u),z=o*(b*=u)-h*l,q=h*x-i*b;return m.m00=b,m.m01=y,m.m02=h,m.m03=0,m.m04=x,m.m05=z,m.m06=i,m.m07=0,m.m08=l,m.m09=q,m.m10=o,m.m11=0,m.m12=-(b*s+x*r+l*e),m.m13=-(y*s+z*r+q*e),m.m14=-(h*s+i*r+o*e),m.m15=1,m}static inverseTranspose(m,a){_a00=a.m00,_a01=a.m01,_a02=a.m02,_a03=a.m03,_a10=a.m04,_a11=a.m05,_a12=a.m06,_a13=a.m07,_a20=a.m08,_a21=a.m09,_a22=a.m10,_a23=a.m11,_a30=a.m12,_a31=a.m13,_a32=a.m14,_a33=a.m15;const _=_a00*_a11-_a01*_a10,t=_a00*_a12-_a02*_a10,s=_a00*_a13-_a03*_a10,r=_a01*_a12-_a02*_a11,e=_a01*_a13-_a03*_a11,c=_a02*_a13-_a03*_a12,n=_a20*_a31-_a21*_a30,M=_a20*_a32-_a22*_a30,h=_a20*_a33-_a23*_a30,i=_a21*_a32-_a22*_a31,o=_a21*_a33-_a23*_a31,u=_a22*_a33-_a23*_a32;let b=_*u-t*o+s*i+r*h-e*M+c*n;return b?(b=1/b,m.m00=(_a11*u-_a12*o+_a13*i)*b,m.m01=(_a12*h-_a10*u-_a13*M)*b,m.m02=(_a10*o-_a11*h+_a13*n)*b,m.m03=0,m.m04=(_a02*o-_a01*u-_a03*i)*b,m.m05=(_a00*u-_a02*h+_a03*M)*b,m.m06=(_a01*h-_a00*o-_a03*n)*b,m.m07=0,m.m08=(_a31*c-_a32*e+_a33*r)*b,m.m09=(_a32*s-_a30*c-_a33*t)*b,m.m10=(_a30*e-_a31*s+_a33*_)*b,m.m11=0,m.m12=0,m.m13=0,m.m14=0,m.m15=1,m):null}static toArray(m,a,_=0){return m[_+0]=a.m00,m[_+1]=a.m01,m[_+2]=a.m02,m[_+3]=a.m03,m[_+4]=a.m04,m[_+5]=a.m05,m[_+6]=a.m06,m[_+7]=a.m07,m[_+8]=a.m08,m[_+9]=a.m09,m[_+10]=a.m10,m[_+11]=a.m11,m[_+12]=a.m12,m[_+13]=a.m13,m[_+14]=a.m14,m[_+15]=a.m15,m}static fromArray(m,a,_=0){return m.m00=a[_+0],m.m01=a[_+1],m.m02=a[_+2],m.m03=a[_+3],m.m04=a[_+4],m.m05=a[_+5],m.m06=a[_+6],m.m07=a[_+7],m.m08=a[_+8],m.m09=a[_+9],m.m10=a[_+10],m.m11=a[_+11],m.m12=a[_+12],m.m13=a[_+13],m.m14=a[_+14],m.m15=a[_+15],m}static add(m,a,_){return m.m00=a.m00+_.m00,m.m01=a.m01+_.m01,m.m02=a.m02+_.m02,m.m03=a.m03+_.m03,m.m04=a.m04+_.m04,m.m05=a.m05+_.m05,m.m06=a.m06+_.m06,m.m07=a.m07+_.m07,m.m08=a.m08+_.m08,m.m09=a.m09+_.m09,m.m10=a.m10+_.m10,m.m11=a.m11+_.m11,m.m12=a.m12+_.m12,m.m13=a.m13+_.m13,m.m14=a.m14+_.m14,m.m15=a.m15+_.m15,m}static subtract(m,a,_){return m.m00=a.m00-_.m00,m.m01=a.m01-_.m01,m.m02=a.m02-_.m02,m.m03=a.m03-_.m03,m.m04=a.m04-_.m04,m.m05=a.m05-_.m05,m.m06=a.m06-_.m06,m.m07=a.m07-_.m07,m.m08=a.m08-_.m08,m.m09=a.m09-_.m09,m.m10=a.m10-_.m10,m.m11=a.m11-_.m11,m.m12=a.m12-_.m12,m.m13=a.m13-_.m13,m.m14=a.m14-_.m14,m.m15=a.m15-_.m15,m}static multiplyScalar(m,a,_){return m.m00=a.m00*_,m.m01=a.m01*_,m.m02=a.m02*_,m.m03=a.m03*_,m.m04=a.m04*_,m.m05=a.m05*_,m.m06=a.m06*_,m.m07=a.m07*_,m.m08=a.m08*_,m.m09=a.m09*_,m.m10=a.m10*_,m.m11=a.m11*_,m.m12=a.m12*_,m.m13=a.m13*_,m.m14=a.m14*_,m.m15=a.m15*_,m}static multiplyScalarAndAdd(m,a,_,t){return m.m00=a.m00+_.m00*t,m.m01=a.m01+_.m01*t,m.m02=a.m02+_.m02*t,m.m03=a.m03+_.m03*t,m.m04=a.m04+_.m04*t,m.m05=a.m05+_.m05*t,m.m06=a.m06+_.m06*t,m.m07=a.m07+_.m07*t,m.m08=a.m08+_.m08*t,m.m09=a.m09+_.m09*t,m.m10=a.m10+_.m10*t,m.m11=a.m11+_.m11*t,m.m12=a.m12+_.m12*t,m.m13=a.m13+_.m13*t,m.m14=a.m14+_.m14*t,m.m15=a.m15+_.m15*t,m}static strictEquals(m,a){return m.m00===a.m00&&m.m01===a.m01&&m.m02===a.m02&&m.m03===a.m03&&m.m04===a.m04&&m.m05===a.m05&&m.m06===a.m06&&m.m07===a.m07&&m.m08===a.m08&&m.m09===a.m09&&m.m10===a.m10&&m.m11===a.m11&&m.m12===a.m12&&m.m13===a.m13&&m.m14===a.m14&&m.m15===a.m15}static equals(m,a,_=utils_1.EPSILON){return Math.abs(m.m00-a.m00)<=_*Math.max(1,Math.abs(m.m00),Math.abs(a.m00))&&Math.abs(m.m01-a.m01)<=_*Math.max(1,Math.abs(m.m01),Math.abs(a.m01))&&Math.abs(m.m02-a.m02)<=_*Math.max(1,Math.abs(m.m02),Math.abs(a.m02))&&Math.abs(m.m03-a.m03)<=_*Math.max(1,Math.abs(m.m03),Math.abs(a.m03))&&Math.abs(m.m04-a.m04)<=_*Math.max(1,Math.abs(m.m04),Math.abs(a.m04))&&Math.abs(m.m05-a.m05)<=_*Math.max(1,Math.abs(m.m05),Math.abs(a.m05))&&Math.abs(m.m06-a.m06)<=_*Math.max(1,Math.abs(m.m06),Math.abs(a.m06))&&Math.abs(m.m07-a.m07)<=_*Math.max(1,Math.abs(m.m07),Math.abs(a.m07))&&Math.abs(m.m08-a.m08)<=_*Math.max(1,Math.abs(m.m08),Math.abs(a.m08))&&Math.abs(m.m09-a.m09)<=_*Math.max(1,Math.abs(m.m09),Math.abs(a.m09))&&Math.abs(m.m10-a.m10)<=_*Math.max(1,Math.abs(m.m10),Math.abs(a.m10))&&Math.abs(m.m11-a.m11)<=_*Math.max(1,Math.abs(m.m11),Math.abs(a.m11))&&Math.abs(m.m12-a.m12)<=_*Math.max(1,Math.abs(m.m12),Math.abs(a.m12))&&Math.abs(m.m13-a.m13)<=_*Math.max(1,Math.abs(m.m13),Math.abs(a.m13))&&Math.abs(m.m14-a.m14)<=_*Math.max(1,Math.abs(m.m14),Math.abs(a.m14))&&Math.abs(m.m15-a.m15)<=_*Math.max(1,Math.abs(m.m15),Math.abs(a.m15))}}exports.MMat4=MMat4,MMat4.IDENTITY=Object.freeze(new cc_1.Mat4);
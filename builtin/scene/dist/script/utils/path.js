"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&("get"in i?e.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0});const isWindows=!0,util=__importStar(require("./index"));function normalizeArray(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];i&&"."!==i&&(".."===i?r.length&&".."!==r[r.length-1]?r.pop():e&&r.push(".."):r.push(i))}return r}function trimArray(t){const e=t.length-1;let r=0;for(;r<=e&&!t[r];r++);let n=e;for(;n>=0&&!t[n];n--);return 0===r&&n===e?t:r>n?[]:t.slice(r,n+1)}const splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,splitTailRe=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,win32={};function win32SplitPath(t){var e,r;const n=null!==(e=splitDeviceRe.exec(t))&&void 0!==e?e:[],i=(n[1]||"")+(n[2]||""),o=n[3]||"",s=null!==(r=splitTailRe.exec(o))&&void 0!==r?r:[];return[i,s[1],s[2],s[3]]}function win32StatPath(t){var e;const r=null!==(e=splitDeviceRe.exec(t))&&void 0!==e?e:[],n=r[1]||"",i=!!n&&":"!==n[1];return{device:n,isUnc:i,isAbsolute:i||!!r[2],tail:r[3]}}function normalizeUNCRoot(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}win32.resolve=function(){let t="",e="",r=!1,n=!1;for(let o=arguments.length-1;o>=-1;o--){var i;if(o>=0?i=arguments[o]:t?(i=process.env["="+t])&&i.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(i=t+"\\"):i=process.cwd(),!util.isString(i))throw new TypeError("Arguments to path.resolve must be strings");if(!i)continue;const s=win32StatPath(i),l=s.device;n=s.isUnc;const a=s.isAbsolute,u=s.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&(t||(t=l),r||(e=u+"\\"+e,r=a),t&&r))break}return n&&(t=normalizeUNCRoot(t)),e=normalizeArray(e.split(/[\\\/]+/),!r).join("\\"),t+(r?"\\":"")+e||"."},win32.normalize=function(t){let e=win32StatPath(t),r=e.device,n=e.isUnc,i=e.isAbsolute,o=e.tail,s=/[\\\/]$/.test(o);return(o=normalizeArray(o.split(/[\\\/]+/),!i).join("\\"))||i||(o="."),o&&s&&(o+="\\"),n&&(r=normalizeUNCRoot(r)),r+(i?"\\":"")+o},win32.isAbsolute=function(t){return win32StatPath(t).isAbsolute},win32.join=function(){const t=[];for(let e=0;e<arguments.length;e++){const r=arguments[e];if(!util.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&t.push(r)}let e=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(e=e.replace(/^[\\\/]{2,}/,"\\")),win32.normalize(e)},win32.relative=function(t,e){t=win32.resolve(t),e=win32.resolve(e);const r=t.toLowerCase(),n=e.toLowerCase(),i=trimArray(e.split("\\")),o=trimArray(r.split("\\")),s=trimArray(n.split("\\")),l=Math.min(o.length,s.length);let a=l;for(var u=0;u<l;u++)if(o[u]!==s[u]){a=u;break}if(0==a)return e;let c=[];for(u=a;u<o.length;u++)c.push("..");return(c=c.concat(i.slice(a))).join("\\")},win32._makeLong=function(t){if(!util.isString(t))return t;if(!t)return"";const e=win32.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},win32.dirname=function(t){let e=win32SplitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},win32.basename=function(t,e){let r=win32SplitPath(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},win32.extname=function(t){return win32SplitPath(t)[3]},win32.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);const e=t.root||"";if(!util.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);const r=t.dir,n=t.base||"";return r?r[r.length-1]===win32.sep?r+n:r+win32.sep+n:n},win32.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);const e=win32SplitPath(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},win32.sep="\\",win32.delimiter=";";const splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,posix={};function posixSplitPath(t){var e;return null===(e=splitPathRe.exec(t))||void 0===e?void 0:e.slice(1)}posix.resolve=function(){let t="",e=!1;for(let r=arguments.length-1;r>=-1&&!e;r--){const n=r>=0?arguments[r]:process.cwd();if(!util.isString(n))throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n[0])}return t=normalizeArray(t.split("/"),!e).join("/"),(e?"/":"")+t||"."},posix.normalize=function(t){const e=posix.isAbsolute(t),r=t&&"/"===t[t.length-1];return(t=normalizeArray(t.split("/"),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},posix.isAbsolute=function(t){return"/"===t.charAt(0)},posix.join=function(){let t="";for(let e=0;e<arguments.length;e++){const r=arguments[e];if(!util.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&(t+=t?"/"+r:r)}return posix.normalize(t)},posix.relative=function(t,e){t=posix.resolve(t).substr(1),e=posix.resolve(e).substr(1);const r=trimArray(t.split("/")),n=trimArray(e.split("/")),i=Math.min(r.length,n.length);let o=i;for(var s=0;s<i;s++)if(r[s]!==n[s]){o=s;break}let l=[];for(s=o;s<r.length;s++)l.push("..");return(l=l.concat(n.slice(o))).join("/")},posix._makeLong=function(t){return t},posix.dirname=function(t){let e=posixSplitPath(t)||[],r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},posix.basename=function(t,e){let r=(posixSplitPath(t)||[])[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},posix.extname=function(t){return(posixSplitPath(t)||[])[3]},posix.format=function(t){if(!util.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);const e=t.root||"";if(!util.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+posix.sep:"")+(t.base||"")},posix.parse=function(t){if(!util.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);const e=posixSplitPath(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},posix.sep="/",posix.delimiter=":",exports.default=win32;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragDropUtils=void 0;const DroppableAssetTypes=["cc.Material"],excludeTypes=["cc.Prefab","cc.LabelAtlas"];class DragDropUtils{constructor(){this.tipsElement=null,this.droppableAssetTypes=[]}canDrop(e){return this.droppableAssetTypes.includes(e)}async updateDroppableAssetTypes(){var e=await Editor.Message.request("scene","query-creatable-asset-types");this.droppableAssetTypes=DroppableAssetTypes.concat(e)}async init(){await this.updateDroppableAssetTypes()}isSameType(t){return 0!==t.length&&(t=this.filterAssets(t)).every(e=>e.type===t[0].type)}filterAssets(e,p=[]){const s=[],i=new Map;return e.filter(e=>this.canDrop(e.type)).forEach(e=>{var[t]=e.value.split("@"),s=i.get(t)||[];p.includes(e.type)||(s.push(e),i.set(t,s))}),i.forEach((e,t)=>{e=e.some(e=>excludeTypes.includes(e.type))?e.filter(e=>excludeTypes.includes(e.type)):e;0<e.length&&s.push(...e)}),s}closeTips(){this.tipsElement&&(this.tipsElement.remove(),this.tipsElement=null)}showTips(e,t,s){this.tipsElement||(this.tipsElement=document.createElement("div"),this.tipsElement.textContent=e,this.tipsElement.style.position="absolute",this.tipsElement.style.top="0",this.tipsElement.style.left="0",this.tipsElement.style.padding="4px 8px",this.tipsElement.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.tipsElement.style.color="#fff",this.tipsElement.style.borderRadius="4px",this.tipsElement.style.pointerEvents="none",this.tipsElement.style.zIndex="9999",document.body.appendChild(this.tipsElement)),this.tipsElement&&(this.tipsElement.style.left=t+10+"px",this.tipsElement.style.top=s+10+"px")}}exports.DragDropUtils=DragDropUtils,exports.default=new DragDropUtils;
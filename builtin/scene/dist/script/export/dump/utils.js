"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ccClassAttrPropertyDefaultValue=exports.generatePath=exports.parsingPath=exports.getTypeInheritanceChain=exports.getTypeName=exports.getType=exports.getConstructor=exports.getDefault=void 0;const cc_1=require("cc");function getDefault(e){let t;return t="function"==typeof e.default?e.default():e.default}function getConstructor(e,t){return t&&t.ctor?t.ctor:null===e||void 0===e?null:e.constructor}function getType(e){return e?cc.js.getClassId(e)||e.name:"Unknown"}function getTypeName(e){return cc.js.getClassName(e)||"Unknown"}function getTypeInheritanceChain(e){return cc.Class.getInheritanceChain(e).map(e=>getTypeName(e)).filter(Boolean)}function parsingPath(e,t){t instanceof cc_1.Node&&(e=(e=(e=(e=e.replace(/^__comps__/,"_components")).replace(/^position$/,"_lpos")).replace(/^scale$/,"_lscale")).replace(/^rotation$/,"eulerAngles"));const r=(e||"").split("."),n=r.pop()||"";return{search:r.join("."),key:n}}function walkProps(e,t,r){var n,o,a;const s=null===(n=null===e||void 0===e?void 0:e.constructor)||void 0===n?void 0:n.__props__;if(s)for(const n of s){if(e[n]===t)return`${r}.${n}`;if(null===(a=null===(o=e[n])||void 0===o?void 0:o.constructor)||void 0===a?void 0:a.__props__)return walkProps(e[n],t,`${r}.${n}`)}}function generatePath(e,t,r,n){const o=e.constructor.__props__;if(o.includes(r)&&e[r]===n)return r;walkProps(e,r,n);for(const t of o)e[t];for(let t=0;t<e.components.length;t++){walkProps(e.components[t],r,`__comps__.${t}`)}return""}function ccClassAttrPropertyDefaultValue(e){if(void 0===e.type)return e.default?getDefault(e):null;const t={Boolean:!1,String:"",Float:0,Integer:0,BitMask:0}[e.type];if(void 0!==t)return t;switch(e.type){case"Enum":return e.enumList[0]&&e.enumList[0].value||0;case"Object":{const{ctor:t}=e;if(cc.js.isChildClassOf(t,cc.Asset)||cc.js.isChildClassOf(t,cc.Node)||cc.js.isChildClassOf(t,cc.Component))return null;try{return new t}catch(e){return console.error(e),null}}}return null}exports.getDefault=getDefault,exports.getConstructor=getConstructor,exports.getType=getType,exports.getTypeName=getTypeName,exports.getTypeInheritanceChain=getTypeInheritanceChain,exports.parsingPath=parsingPath,exports.generatePath=generatePath,exports.ccClassAttrPropertyDefaultValue=ccClassAttrPropertyDefaultValue,exports.default={getDefault:getDefault,getConstructor:getConstructor,getType:getType,getTypeName:getTypeName,getTypeInheritanceChain:getTypeInheritanceChain,parsingPath:parsingPath,generatePath:generatePath,ccClassAttrPropertyDefaultValue:ccClassAttrPropertyDefaultValue};
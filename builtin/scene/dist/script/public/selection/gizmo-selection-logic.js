"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("../gizmos/utils/set-util");const set_util_1=__importDefault(require("../gizmos/utils/set-util"));class GizmoSelectionLogic{constructor(){this.buffer=new set_util_1.default,this.selected=new set_util_1.default,this.lastSelects=new set_util_1.default}process(e,t=!1){const s=new set_util_1.default(e);this.buffer.addAll(s);const l=this.buffer.intersection(s),i=this.buffer.difference(s);let c,r;return t?(c=l.difference(this.lastSelects).union(i),r=i.difference(this.lastSelects).union(l.intersection(this.lastSelects))):(c=l,r=i.union(this.lastSelects.difference(l))),{shouldSelects:c=c.difference(r).difference(this.selected),shouldUnselects:r=r.intersection(this.selected)}}select(e){this.selected.addAll(e)}clear(){this.selected.clear(),this.lastSelects.clear(),this.buffer.clear()}confirm(){this.lastSelects.clear(),this.lastSelects.addAll(this.selected)}}exports.default=GizmoSelectionLogic;
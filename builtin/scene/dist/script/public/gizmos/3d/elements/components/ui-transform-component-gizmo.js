"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const Utils=require("../../../utils"),external_1=__importDefault(require("../../../utils/external")),NodeUtils=external_1.default.NodeUtils,gizmo_base_1=__importDefault(require("../gizmo-base")),rectangle_controller_1=__importDefault(require("../controller/rectangle-controller")),cc_1=require("cc"),tempQuat_a=new cc_1.Quat;class UITransformComponentGizmo extends gizmo_base_1.default{constructor(){super(...arguments),this._controller=null}init(){this.createController()}onShow(){this._controller.show(),this.updateController()}onHide(){this._controller.hide()}createController(){this._controller=new rectangle_controller_1.default(this.getGizmoRoot()),this._controller.setColor(new cc.Color(0,153,255)),this._controller.onControllerMouseDown=this.onControllerMouseDown.bind(this),this._controller.onControllerMouseMove=this.onControllerMouseMove.bind(this),this._controller.onControllerMouseUp=this.onControllerMouseUp.bind(this)}onControllerMouseDown(){}onControllerMouseMove(){}onControllerMouseUp(){}onGizmoKeyDown(t){}onGizmoKeyUp(t){}updateControllerTransform(){if(!this._isInited||null==this.target)return;let t=this.node,e=NodeUtils.getWorldPosition3D(t),o=tempQuat_a;NodeUtils.getWorldRotation3D(t,o);let r=NodeUtils.getWorldScale3D(t);this._controller.setPosition(e),this._controller.setRotation(o),this._controller.setScale(r)}updateControllerData(){if(!this._isInited||null==this.target)return;let t=this.target;if(t){let e=t.contentSize,o=t.anchorPoint,r=cc.v3();r.x=(.5-o.x)*e.width,r.y=(.5-o.y)*e.height,this._controller.updateSize(r,cc.v2(e.width,e.height))}else this._controller.hide()}updateController(){this.updateControllerTransform(),this.updateControllerData()}onTargetUpdate(){this.updateController()}onNodeChanged(){this.updateController()}}exports.default=UITransformComponentGizmo;
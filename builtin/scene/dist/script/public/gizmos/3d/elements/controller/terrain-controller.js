"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const controller_base_1=__importDefault(require("./controller-base")),controller_shape_1=__importDefault(require("../utils/controller-shape")),controller_utils_1=__importDefault(require("../utils/controller-utils")),{getModel:getModel,updatePositions:updatePositions,AttributeName:AttributeName,updateBoundingBox:updateBoundingBox,setNodeOpacity:setNodeOpacity}=require("../../../utils/engine/index"),external_1=__importDefault(require("../../../utils/external")),EditorCamera=external_1.default.EditorCamera,NodeUtils=external_1.default.NodeUtils,v3_up=cc.v3(0,1,0);class TerrainController extends controller_base_1.default{constructor(e,t={}){super(e),this._quadNode=null,this._quadMR=null,this._size=10,this.initShape(t)}initShape(e){this.createShapeNode("TerrainController");const t=controller_utils_1.default.quad(cc.v3(),this._size,this._size,v3_up,cc.Color.WHITE,e);t.parent=this.shape,this._quadNode=t,this._quadMR=getModel(this._quadNode),setNodeOpacity(this._quadNode,0),this.registerMouseEvents(this._quadNode,"quad")}onMouseDown(e){this.onControllerMouseDown&&this.onControllerMouseDown(e)}onMouseMove(e){this.onControllerMouseMove&&this.onControllerMouseMove(e)}onMouseUp(e){this.onControllerMouseUp&&this.onControllerMouseUp(e)}onHoverIn(e){}onHoverOut(e){this.onControllerHoverOut&&this.onControllerHoverOut(e)}onShow(){this._eventsRegistered||(this.registerCameraMovedEvent(),this._eventsRegistered=!0)}onHide(){this._eventsRegistered&&(this.unregisterCameraMoveEvent(),this._eventsRegistered=!1)}updateSize(e,t){const o=cc.v3(e/2,0,t/2),r=controller_shape_1.default.calcQuadData(o,e,t,v3_up);updatePositions(this._quadMR,r.positions),updateBoundingBox(this._quadMR,r.minPos,r.maxPos)}}exports.default=TerrainController;
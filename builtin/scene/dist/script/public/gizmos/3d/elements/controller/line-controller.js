"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const controller_base_1=__importDefault(require("./controller-base")),controller_utils_1=__importDefault(require("../utils/controller-utils")),controller_shape_1=__importDefault(require("../utils/controller-shape")),cc_1=require("cc"),engine_1=__importDefault(require("../../../utils/engine")),{AttributeName:AttributeName,getModel:getModel,updatePositions:updatePositions,setMeshColor:setMeshColor,setNodeOpacity:setNodeOpacity,getNodeOpacity:getNodeOpacity,panPlaneLayer:panPlaneLayer,updateBoundingBox:updateBoundingBox}=engine_1.default;class LineController extends controller_base_1.default{constructor(e){super(e),this._lineNode=null,this._lineMR=null,this.initShape()}initShape(){this.createShapeNode("LineController"),this._lineNode=this.createLineNode(new cc_1.Vec3,new cc_1.Vec3,"LineNode",this._color),this._lineMR=getModel(this._lineNode)}setColor(e){this._color=e,setMeshColor(this._lineNode,e)}setOpacity(e){setNodeOpacity(this._lineNode,e)}createLineNode(e,t,o,i){const l=controller_shape_1.default.calcLineData(e,t),n=controller_utils_1.default.createShapeByData(l,i,{unlit:!0});return n.name=o,n.parent=this.shape,n}updateData(e,t){const o=controller_shape_1.default.calcLineData(e,t);updatePositions(this._lineMR,o.positions),updateBoundingBox(this._lineMR,o.minPos,o.maxPos)}}exports.default=LineController;
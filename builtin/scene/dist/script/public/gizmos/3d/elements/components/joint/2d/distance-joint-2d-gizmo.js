"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const joint_2d_gizmo_1=__importDefault(require("./joint-2d-gizmo")),external_1=__importDefault(require("../../../../../utils/external")),cc_1=require("cc"),line_controller_1=__importDefault(require("../../../controller/line-controller")),NodeUtils=external_1.default.NodeUtils,Utils=require("../../../../../utils"),tempVec2_a=new cc_1.Vec2,tempVec3_a=new cc_1.Vec3,tempVec3_b=new cc_1.Vec3,tempQuat_a=new cc_1.Quat,tempMat4=new cc_1.Mat4;class DistanceJoint2DGizmo extends joint_2d_gizmo_1.default{createController(){super.createController();const e=this.getGizmoRoot();this._lineController=new line_controller_1.default(e),this._lineController.setColor(this._anchorColor),this._lineController.setOpacity(128)}onHide(){super.onHide(),this._lineController.hide()}updateAnchorControllerData(){super.updateAnchorControllerData();const e=this.target;if(e.connectedBody){this._lineController.show();const t=this.node;t&&t.getWorldMatrix(tempMat4);const o=tempVec3_a.set(e.anchor.x,e.anchor.y,0);cc_1.Vec3.transformMat4(o,o,tempMat4);const r=tempVec3_b.set(e.connectedAnchor.x,e.connectedAnchor.y,0);e.connectedBody.node.getWorldMatrix(tempMat4),cc_1.Vec3.transformMat4(r,r,tempMat4),this._lineController.updateData(o,r)}else this._lineController.hide()}}exports.default=DistanceJoint2DGizmo;
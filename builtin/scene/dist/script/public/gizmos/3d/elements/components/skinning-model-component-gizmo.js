"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const cc_1=require("cc"),external_1=__importDefault(require("../../../utils/external")),NodeUtils=external_1.default.NodeUtils,box_controller_1=__importDefault(require("../controller/box-controller")),gizmo_base_1=__importDefault(require("../gizmo-base")),{getBoundingBox:getBoundingBox,getRootBoneNode:getRootBoneNode}=require("../../../utils/engine"),EditorMath=external_1.default.EditorMath;class SkinningModelComponentGizmo extends gizmo_base_1.default{constructor(){super(...arguments),this._controller=null}init(){this.createController(),this._isInited=!0}onShow(){this._controller.show(),this.updateControllerTransform()}onHide(){this._controller.hide()}createController(){let t=this.getGizmoRoot();this._controller=new box_controller_1.default(t),this._controller.setOpacity(150)}updateControllerTransform(){this.updateControllerData()}updateControllerData(){if(!this._isInited||null==this.target)return;if(!getRootBoneNode(this.target))return void this._controller.hide();const t=getBoundingBox(this.target);if(t){const e=cc.v3();cc_1.Vec3.multiplyScalar(e,t.halfExtents,2);const o=cc.v3();cc_1.Vec3.copy(o,t.center),this._controller.updateSize(o,e)}else this._controller.hide()}onTargetUpdate(){this.updateControllerData()}onNodeChanged(){this.updateControllerData()}onUpdate(){this.updateControllerData()}}exports.default=SkinningModelComponentGizmo;
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const cc_1=require("cc"),controller_utils_1=__importDefault(require("../utils/controller-utils")),controller_base_1=__importDefault(require("./controller-base")),{setNodeOpacity:setNodeOpacity}=require("../../../utils/engine/index"),tempVec3_a=new cc_1.Vec3,tempQuat_a=new cc_1.Quat;class PlaneController extends controller_base_1.default{constructor(e){super(e),this._planeNode=null,this._arrowNode=null,this._color=cc_1.Color.GREEN,this._lockSize=!0,this.initShape(),this.registerCameraMovedEvent()}initShape(){this.createShapeNode("PlaneController"),this._planeNode=controller_utils_1.default.quad(cc_1.Vec3.ZERO,200,200,cc_1.Vec3.UNIT_Y,this._color,{unlit:!0}),setNodeOpacity(this._planeNode,128),this._planeNode.parent=this.shape,this._arrowNode=controller_utils_1.default.lineTo(cc_1.Vec3.ZERO,new cc_1.Vec3(0,100,0),this._color,{forwardPipeline:!0,bodyBBSize:0}),this._arrowNode.parent=this.shape}updateData(e,t){var o,l,r,i;null===(o=this._planeNode)||void 0===o||o.setPosition(e),null===(l=this._arrowNode)||void 0===l||l.setPosition(e),cc_1.Vec3.normalize(tempVec3_a,t),cc_1.Quat.rotationTo(tempQuat_a,cc_1.Vec3.UNIT_Y,tempVec3_a),null===(r=this._planeNode)||void 0===r||r.setRotation(tempQuat_a),null===(i=this._arrowNode)||void 0===i||i.setRotation(tempQuat_a)}}exports.default=PlaneController;
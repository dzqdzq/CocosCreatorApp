"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DynamicMeshPrimitive=void 0;class DynamicMeshPrimitive{constructor(i){this.boundingRadius=i.boundingRadius,this.doubleSided=i.doubleSided,this.indices=i.indices,this.maxPos=i.maxPos,this.minPos=i.minPos,this.normals=i.normals,this.positions=i.positions,this.primitiveType=i.primitiveType,this.uvs=i.uvs}transformToDynamicGeometry(){var i;return{primitiveMode:this.primitiveType,positions:flatPosition(this.positions),indices32:Uint32Array.from(null!==(i=this.indices)&&void 0!==i?i:[]),minPos:this.minPos,maxPos:this.maxPos}}}exports.DynamicMeshPrimitive=DynamicMeshPrimitive;const zeroFloat32=new Float32Array,flatPositionBitArrayPool=[];function flatPosition(i){var t;if(!i.length)return zeroFloat32;let o=null===(t=flatPositionBitArrayPool.find(t=>t&&t.key===3*i.length))||void 0===t?void 0:t.value;o||(o=new Float32Array(3*i.length),flatPositionBitArrayPool.unshift({key:3*i.length,value:o}),flatPositionBitArrayPool.length=4);let s=0;for(let t=0;t<i.length;t++)o[s=3*t]=i[t].x,o[s+1]=i[t].y,o[s+2]=i[t].z;return o}
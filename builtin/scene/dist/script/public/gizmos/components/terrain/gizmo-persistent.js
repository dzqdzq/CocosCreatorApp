"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const base_1=require("../base"),terrain_1=__importDefault(require("../../controller/terrain"));class TerrainPersistentGizmo extends base_1.SelectGizmo{get selectGizmo(){return this.target?this.target.gizmo:null}init(){var e=this.getGizmoRoot();this._controller=new terrain_1.default(e),this._controller.onControllerMouseDown=this.onControllerMouseDown.bind(this),this._controller.onControllerMouseMove=this.onControllerMouseMove.bind(this),this._controller.onControllerMouseUp=this.onControllerMouseUp.bind(this),this._controller.onControllerHoverOut=this.onControllerHoverOut.bind(this),this.updateController()}updateController(){var e;this._controller&&(this.target?(this._controller.updateWorldPosition(this.target.node.getWorldPosition()),(e=this.target.info)&&this._controller.updateSize(e.size.width,e.size.height),this._controller.show()):this._controller.hide(),cce.Engine.repaintInEditMode())}onTargetUpdate(){this.updateController()}onNodeChanged(){this.updateController()}onControllerMouseDown(e){var t;if(this.target&&Editor.Selection.getLastSelected("node")!==this.target.node.uuid)return e.propagationStopped=!0,Editor.Selection.select("node",this.target.node.uuid);null!=(t=this.selectGizmo)&&t.visible()&&null!=(t=this.selectGizmo)&&t.onControllerMouseDown(e)}onControllerMouseMove(e){var t;null!=(t=this.selectGizmo)&&t.visible()&&null!=(t=this.selectGizmo)&&t.onControllerMouseMove(e)}onControllerMouseUp(e){var t;null!=(t=this.selectGizmo)&&t.visible()&&null!=(t=this.selectGizmo)&&t.onControllerMouseUp(e)}onControllerHoverOut(){var e;null!=(e=this.selectGizmo)&&e.visible()&&null!=(e=this.selectGizmo)&&e.onControllerHoverOut()}}exports.default=TerrainPersistentGizmo;
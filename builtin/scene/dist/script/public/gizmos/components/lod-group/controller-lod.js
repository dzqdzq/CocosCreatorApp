"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const cc_1=require("cc"),rectangle_controller_1=require("../../node/rectangle-controller"),index_1=__importDefault(require("../../utils/engine/index")),create3DNode=index_1.default["create3DNode"];let rootCanvas=null,rootCanvasNode=null;const tempVec3_a=new cc_1.Vec3;class LODController extends rectangle_controller_1.RectangleController{static BACKGROUND_CONTENT_SIZE=new cc_1.Size(1.7872340425531914,.4);static BACKGROUND_COLOR=new cc_1.Color(5,5,5,102);static FONT_COLOR=new cc_1.Color(204,204,204,255);static FONT_SIZE=80;static LINE_HEIGHT=80;label;labelUITransform;sprite;spriteUITransform;constructor(e,t={}){super(e,t),this.initLODContent()}get2DCanvas(){return rootCanvas||(rootCanvasNode=create3DNode("Gizmo Canvas Node"),(rootCanvas=rootCanvasNode.addComponent(cc_1.Canvas)).fitDesignResolution_EDITOR=()=>{},rootCanvasNode.setParent(this._rootNode)),rootCanvas}setString(e){this.label.string=e}initShape(){cc_1.assetManager.preloadAny("7d8f9b89-4fd1-4c9f-a3ab-38ec7cded7ca@f9941"),super.initShape(),this.shape.setParent(this.get2DCanvas().node),this.shape.name="LOD Gizmo Controller"}initLODContent(){const o=this.shape.getChildByName("LOD Level")||new cc_1.Node("LOD Level"),s=(this.label=o.addComponent(cc_1.Label),this.shape.getChildByName("LOD Level Background")||new cc_1.Node("LOD Level Background"));this.sprite=s.addComponent(cc_1.Sprite),this.spriteUITransform=this.sprite.getComponent(cc_1.UITransform),this.spriteUITransform.anchorPoint.set(.5,1),this.labelUITransform=this.label.getComponent(cc_1.UITransform),this.labelUITransform.anchorPoint.set(.5,1),this.label.color=LODController.FONT_COLOR,this.label.fontSize=LODController.FONT_SIZE,this.label.lineHeight=LODController.LINE_HEIGHT,this.sprite.color=LODController.BACKGROUND_COLOR,cc_1.assetManager.loadAny("7d8f9b89-4fd1-4c9f-a3ab-38ec7cded7ca@f9941",(e,t)=>{e?console.error(e):t instanceof cc_1.SpriteFrame&&this.sprite.isValid&&(s.parent=this.shape,o.parent=this.shape,this.sprite.spriteFrame=t,this.spriteUITransform.setContentSize(LODController.BACKGROUND_CONTENT_SIZE),this.updateSize(cc_1.Vec3.ZERO,this._size),this.adjustControllerSize(),cce.Engine.repaintInEditMode())})}updateSize(e,t){super.updateSize(e,t),tempVec3_a.set(0,-t.x/2+this.labelUITransform.contentSize.y/2*this.label.node.getScale().y-this.spriteUITransform.contentSize.y/2*this.sprite.node.getScale().y),this.label.node.setPosition(tempVec3_a),tempVec3_a.set(0,-t.x/2),this.sprite.node.setPosition(tempVec3_a)}adjustControllerSize(){super.adjustControllerSize();var e=this.getDistScalar(),t=e/4;tempVec3_a.set(t,t,t),this.label.node.setScale(tempVec3_a),t=100*e,tempVec3_a.set(t,t,t),this.sprite.node.setScale(tempVec3_a)}}exports.default=LODController;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.update=exports.ready=exports.template=exports.$=exports.position=exports.DebugViewCompositeType=exports.DebugViewSingleType=void 0;const Vue=require("vue/dist/vue");let st,vm=null;var DebugViewSingleType,DebugViewCompositeType;async function ready(e){vm=new Vue({el:this.$.debugView,data:function(){return{showPanel:!1,show:!1,title:"i18n:scene.debug_view.shaded",menu:[{label:"i18n:scene.debug_view.base_shading",el:"ui-label",group:"radio",value:"SHADED",children:[{label:"i18n:scene.debug_view.shaded",el:"ui-radio",checked:!0,key:"SHADED"}]},{label:"i18n:scene.debug_view.rendering_debug_options",el:"ui-label",canExpand:!0,children:[{label:"i18n:scene.debug_view.lighting_with_base_color",el:"ui-checkbox",checked:!0,key:"LIGHTING_WITH_BASE_COLOR"},{label:"i18n:scene.debug_view.CSM_layer_coloration",el:"ui-checkbox",checked:!1,key:"CSM_LAYER_COLORATION"},{label:"i18n:scene.debug_view.rendering_single_option",el:"ui-label",group:"radio",value:"NONE",children:[{label:"i18n:scene.debug_view.disable_all_single_options",el:"ui-radio",key:"NONE"},{label:"i18n:scene.debug_view.model_info",el:"ui-label"},{label:"i18n:scene.debug_view.vertex_colors",el:"ui-radio",key:"VERTEX_COLOR"},{label:"i18n:scene.debug_view.world_normal",el:"ui-radio",key:"VERTEX_NORMAL"},{label:"i18n:scene.debug_view.world_tangent",el:"ui-radio",key:"VERTEX_TANGENT"},{label:"i18n:scene.debug_view.world_position",el:"ui-radio",key:"WORLD_POS"},{label:"i18n:scene.debug_view.mirrored_normal",el:"ui-radio",key:"VERTEX_MIRROR"},{label:"i18n:scene.debug_view.front_face_coloration",el:"ui-radio",key:"FACE_SIDE"},{label:"i18n:scene.debug_view.UV0",el:"ui-radio",key:"UV0"},{label:"i18n:scene.debug_view.UV1",el:"ui-radio",key:"UV1"},{label:"i18n:scene.debug_view.light_map_uv",el:"ui-radio",key:"UV_LIGHTMAP"},{label:"i18n:scene.debug_view.projection_depth_z",el:"ui-radio",key:"PROJ_DEPTH"},{label:"i18n:scene.debug_view.liner_depth_w",el:"ui-radio",key:"LINEAR_DEPTH"},{label:"i18n:scene.debug_view.material_info",el:"ui-label"},{label:"i18n:scene.debug_view.world_space_pixel_normals",el:"ui-radio",key:"FRAGMENT_NORMAL"},{label:"i18n:scene.debug_view.world_space_pixel_tangents",el:"ui-radio",key:"FRAGMENT_TANGENT"},{label:"i18n:scene.debug_view.world_space_pixel_binormals",el:"ui-radio",key:"FRAGMENT_BINORMAL"},{label:"i18n:scene.debug_view.base_color",el:"ui-radio",key:"BASE_COLOR"},{label:"i18n:scene.debug_view.diffues_color",el:"ui-radio",key:"DIFFUSE_COLOR"},{label:"i18n:scene.debug_view.specular_color",el:"ui-radio",key:"SPECULAR_COLOR"},{label:"i18n:scene.debug_view.opacity",el:"ui-radio",key:"TRANSPARENCY"},{label:"i18n:scene.debug_view.metallic",el:"ui-radio",key:"METALLIC"},{label:"i18n:scene.debug_view.roughness",el:"ui-radio",key:"ROUGHNESS"},{label:"i18n:scene.debug_view.specular_intencity",el:"ui-radio",key:"SPECULAR_INTENSITY"},{label:"i18n:scene.debug_view.lighting_info",el:"ui-label"},{label:"i18n:scene.debug_view.direct_diffuse",el:"ui-radio",key:"DIRECT_DIFFUSE"},{label:"i18n:scene.debug_view.direct_specular",el:"ui-radio",key:"DIRECT_SPECULAR"},{label:"i18n:scene.debug_view.direct_lighting",el:"ui-radio",key:"DIRECT_ALL"},{label:"i18n:scene.debug_view.ambient_diffuse",el:"ui-radio",key:"ENV_DIFFUSE"},{label:"i18n:scene.debug_view.ambient_specular",el:"ui-radio",key:"ENV_SPECULAR"},{label:"i18n:scene.debug_view.ambient_lighting",el:"ui-radio",key:"ENV_ALL"},{label:"i18n:scene.debug_view.emissive",el:"ui-radio",key:"EMISSIVE"},{label:"i18n:scene.debug_view.light_map",el:"ui-radio",key:"LIGHT_MAP"},{label:"i18n:scene.debug_view.shadows",el:"ui-radio",key:"SHADOW"},{label:"i18n:scene.debug_view.ambient_occlusion",el:"ui-radio",key:"AO"},{label:"i18n:scene.debug_view.misc_info",el:"ui-label"},{label:"i18n:scene.debug_view.fog_factor",el:"ui-radio",key:"FOG"}]},{label:"i18n:scene.debug_view.rendering_composite_options",el:"ui-label",group:"checkbox",checked:!0,children:[{label:"i18n:scene.debug_view.enable_all_composite_options",el:"ui-checkbox",key:"ALL"},{label:"i18n:scene.debug_view.lighting",el:"ui-label"},{label:"i18n:scene.debug_view.direct_diffuse",el:"ui-checkbox",key:"DIRECT_DIFFUSE"},{label:"i18n:scene.debug_view.direct_specular",el:"ui-checkbox",key:"DIRECT_SPECULAR"},{label:"i18n:scene.debug_view.ambient_diffuse",el:"ui-checkbox",key:"ENV_DIFFUSE"},{label:"i18n:scene.debug_view.ambient_specular",el:"ui-checkbox",key:"ENV_SPECULAR"},{label:"i18n:scene.debug_view.emissive",el:"ui-checkbox",key:"EMISSIVE"},{label:"i18n:scene.debug_view.light_map",el:"ui-checkbox",key:"LIGHT_MAP"},{label:"i18n:scene.debug_view.shadows",el:"ui-checkbox",key:"SHADOW"},{label:"i18n:scene.debug_view.ambient_occlusion",el:"ui-checkbox",key:"AO"},{label:"i18n:scene.debug_view.misc_info",el:"ui-label"},{label:"i18n:scene.debug_view.normalMap",el:"ui-checkbox",key:"NORMAL_MAP"},{label:"i18n:scene.debug_view.fog_factor",el:"ui-checkbox",key:"FOG"},{label:"i18n:scene.debug_view.tone_mapping",el:"ui-checkbox",key:"TONE_MAPPING"},{label:"i18n:scene.debug_view.cammacorrection",el:"ui-checkbox",key:"GAMMA_CORRECTION"}]}]}],v:null}},methods:{handleOnWrapClick(e){this.showPanel?this.showPanel=!this.showPanel:Editor.Message.broadcast("scene:toolbar-menu-active","debug-view")},handleOnChangeTitle(e){vm.title=e}}}),document.addEventListener("click",e=>{e.stopPropagation(),vm.showPanel=!1}),Editor.Message.addBroadcastListener("scene:toolbar-menu-active",e=>{vm.showPanel="debug-view"===e}),Editor.Message.addBroadcastListener("scene:ready",async()=>{const e=await Editor.Message.request("scene","query-is2D");vm.show=!e}),Editor.Message.addBroadcastListener("scene:dimension-changed",e=>{vm.show=!e})}async function update(){}async function close(){}!function(e){e[e.NONE=0]="NONE",e[e.VERTEX_COLOR=1]="VERTEX_COLOR",e[e.VERTEX_NORMAL=2]="VERTEX_NORMAL",e[e.VERTEX_TANGENT=3]="VERTEX_TANGENT",e[e.WORLD_POS=4]="WORLD_POS",e[e.VERTEX_MIRROR=5]="VERTEX_MIRROR",e[e.FACE_SIDE=6]="FACE_SIDE",e[e.UV0=7]="UV0",e[e.UV1=8]="UV1",e[e.UV_LIGHTMAP=9]="UV_LIGHTMAP",e[e.PROJ_DEPTH=10]="PROJ_DEPTH",e[e.LINEAR_DEPTH=11]="LINEAR_DEPTH",e[e.FRAGMENT_NORMAL=12]="FRAGMENT_NORMAL",e[e.FRAGMENT_TANGENT=13]="FRAGMENT_TANGENT",e[e.FRAGMENT_BINORMAL=14]="FRAGMENT_BINORMAL",e[e.BASE_COLOR=15]="BASE_COLOR",e[e.DIFFUSE_COLOR=16]="DIFFUSE_COLOR",e[e.SPECULAR_COLOR=17]="SPECULAR_COLOR",e[e.TRANSPARENCY=18]="TRANSPARENCY",e[e.METALLIC=19]="METALLIC",e[e.ROUGHNESS=20]="ROUGHNESS",e[e.SPECULAR_INTENSITY=21]="SPECULAR_INTENSITY",e[e.DIRECT_DIFFUSE=22]="DIRECT_DIFFUSE",e[e.DIRECT_SPECULAR=23]="DIRECT_SPECULAR",e[e.DIRECT_ALL=24]="DIRECT_ALL",e[e.ENV_DIFFUSE=25]="ENV_DIFFUSE",e[e.ENV_SPECULAR=26]="ENV_SPECULAR",e[e.ENV_ALL=27]="ENV_ALL",e[e.EMISSIVE=28]="EMISSIVE",e[e.LIGHT_MAP=29]="LIGHT_MAP",e[e.SHADOW=30]="SHADOW",e[e.AO=31]="AO",e[e.FOG=32]="FOG"}(DebugViewSingleType=exports.DebugViewSingleType||(exports.DebugViewSingleType={})),function(e){e[e.DIRECT_DIFFUSE=0]="DIRECT_DIFFUSE",e[e.DIRECT_SPECULAR=1]="DIRECT_SPECULAR",e[e.ENV_DIFFUSE=2]="ENV_DIFFUSE",e[e.ENV_SPECULAR=3]="ENV_SPECULAR",e[e.EMISSIVE=4]="EMISSIVE",e[e.LIGHT_MAP=5]="LIGHT_MAP",e[e.SHADOW=6]="SHADOW",e[e.AO=7]="AO",e[e.NORMAL_MAP=8]="NORMAL_MAP",e[e.FOG=9]="FOG",e[e.TONE_MAPPING=10]="TONE_MAPPING",e[e.GAMMA_CORRECTION=11]="GAMMA_CORRECTION",e[e.MAX_BIT_COUNT=12]="MAX_BIT_COUNT",e[e.ALL=1e4]="ALL"}(DebugViewCompositeType=exports.DebugViewCompositeType||(exports.DebugViewCompositeType={})),exports.position="right",Vue.component("DebugMenu",{props:{data:{type:Array,default:function(){return[]}},show:{type:Boolean,default:!1}},data:function(){return{showChildrenPanel:!1,showPanelList:[],currentTitleInfo:{tag:"UI-RADIO",title:null},disabledAllSingleOps:!0,tagOrder:{"UI-RADIO":0,"UI-CHECKBOX":1}}},watch:{show(e){e||(this.showChildrenPanel=e)}},methods:{emitChangeTitleEventHandler:function(e){e.stopPropagation();const n=e.target,i=n.getAttribute("title-label"),l=n.tagName;this.tagOrder;"UI-RADIO"===l?"NONE"===n.value?(this.disabledAllSingleOps=!0,this.$emit("change-title","i18n:scene.debug_view.shaded")):(this.disabledAllSingleOps=!1,this.$emit("change-title",i)):"UI-CHECKBOX"===l&&this.disabledAllSingleOps&&this.$emit("change-title","i18n:scene.debug_view.rendering_composite_options")},dispatchChangeTitleEventHandler(e){this.$emit("change-title",e)},handleOnMouseenter(e){e.stopPropagation();const n=null===e||void 0===e?void 0:e.target;n.hasAttribute("can-expand")&&(this.showChildrenPanel=!0,this.$nextTick(()=>{const e=n.parentNode.querySelector(".panel");if(e){let i=n;for(;i.parentElement;)i=i.parentElement;const l=i.getBoundingClientRect();e.getBoundingClientRect();e.style.position="absolute",e.style.top=`-${2*n.offsetHeight}px`,e.style.left=n.offsetParent.offsetWidth-25+"px",e.offsetHeight>l.height&&(e.style.height=l.height-200+"px",e.style.overflowY="scroll")}}))},handleOnMouseleave(e){e.stopPropagation();const n=null===e||void 0===e?void 0:e.currentTarget;n.hasAttribute("can-expand")&&n.nextElementSibling.querySelector(".panel")&&(st=setTimeout(()=>{this.showChildrenPanel=!1},100))},handleOnRadioGroupChange(e){e.stopPropagation();const n=DebugViewSingleType[null===e||void 0===e?void 0:e.target.value];Editor.Message.send("scene","debug-view",{type:"single",value:n})},handleOnCheckboxGroupChange(e){e.stopPropagation();const n=null===e||void 0===e?void 0:e.target,i=n.getAttribute("value"),l={key:DebugViewCompositeType[i],value:n.value};if("ALL"===i){const e=n.parentNode.querySelectorAll("ui-checkbox");for(const i of e)null===i||void 0===i||(i.checked=n.value)}Editor.Message.send("scene","debug-view",{type:"composite",value:l})},handleOnCheckboxChange(e){e.stopPropagation();const n=null===e||void 0===e?void 0:e.target,i=n.getAttribute("value"),l=null===n||void 0===n?void 0:n.value;Editor.Message.send("scene","debug-view",{type:i,value:l})},handleOnRadioChange(e){},renderEl(e,n,i={},l=[]){let a={},o=[];switch(e.el){case"ui-checkbox":case"ui-radio":const i="ui-checkbox"===e.el?this.handleOnCheckboxChange:this.handleOnRadioChange;a={attrs:{value:e.key,checked:null===e||void 0===e?void 0:e.checked,disabled:"CSM_LAYER_COLORATION"===e.key&&!this.disabledAllSingleOps},on:{change:i}},o=[this.renderEl({el:"ui-label",label:e.label},n)];break;case"ui-label":a={attrs:{value:e.label}}}return n(null===e||void 0===e?void 0:e.el,Object.assign({},a,i),[...o,...l])},renderLI(e,n){return n("li",{class:`${(null===e||void 0===e?void 0:e.key)?"":"sub-title"} children-label no-dot`},[e.canExpand?(null===e||void 0===e?void 0:e.children)&&n("debug-menu",{attrs:{style:"padding: 4px 0;"},props:{data:e.children,show:this.showChildrenPanel},on:{"change-title":this.dispatchChangeTitleEventHandler}}):[this.renderEl(e,n),this.renderItemGroup(e.children,n)]])},renderGroup(e,n){var i,l;let a;switch(e.group){case"radio":a=n("ui-radio-group",{attrs:{style:"width: 100%;","default-value":e.value},on:{change:this.handleOnRadioGroupChange}},[null===(i=null===e||void 0===e?void 0:e.children)||void 0===i?void 0:i.map(e=>{let i;switch(null===e||void 0===e?void 0:e.el){case"ui-radio":i=n(null===e||void 0===e?void 0:e.el,{class:"children-label no-dot",attrs:{style:"display: block",value:null===e||void 0===e?void 0:e.key,"title-label":null===e||void 0===e?void 0:e.label},on:{click:this.emitChangeTitleEventHandler}},[n("ui-label",{attrs:{value:null===e||void 0===e?void 0:e.label}})]);break;default:i=this.renderLI(e,n)}return i})]);break;case"checkbox":return n("div",{attrs:{style:"width: 100%;","checkbox-group":!0,value:null===e||void 0===e?void 0:e.key},on:{change:this.handleOnCheckboxGroupChange,click:this.emitChangeTitleEventHandler}},[null===(l=null===e||void 0===e?void 0:e.children)||void 0===l?void 0:l.map(e=>{let i;switch(null===e||void 0===e?void 0:e.el){case"ui-checkbox":i=n("ui-checkbox",{class:"children-label no-dot",attrs:{style:"display: block",value:null===e||void 0===e?void 0:e.key,checked:!0,disabled:!this.disabledAllSingleOps},on:{change:this.handleOnCheckboxGroupChange}},[n("ui-label",{attrs:{value:null===e||void 0===e?void 0:e.label}})]);break;default:i=this.renderLI(e,n)}return i})])}return a},renderItem(e,n){let i;return i=e.canExpand?this.renderLI(e,n):(null===e||void 0===e?void 0:e.group)?this.renderGroup(e,n):e.children&&e.children.length>0?e.children.map(e=>this.renderLI(e,n)):this.renderLI(e,n),n("ul",[i])},renderItemGroup(e=[],n){return e.map((e,i)=>n("div",{class:"panel-item-group"},[!e.key&&n("div",{class:"group-label",attrs:{"can-expand":e.canExpand},on:{mouseenter:this.handleOnMouseenter,mouseleave:this.handleOnMouseleave}},[n(e.el,{attrs:{value:e.label}}),n("ui-icon",{class:"next-icon",attrs:{value:"arrow-right"}})]),this.renderItem(e,n)]))},handleOnPanelMouseenter(e){clearTimeout(st)}},render:function(e){const{data:n,show:i,showChildrenPanel:l}=this;if(n.length){return e("div",{class:"panel",attrs:{style:i?"display: block":"display: none"},on:{click:e=>e.stopPropagation(),mouseenter:this.handleOnPanelMouseenter}},this.renderItemGroup(n,e))}return null}}),exports.$={debugView:".debug-view"},exports.template='\n    <div class="debug-view">\n        <div \n            v-if="show"\n            ref="wrap"\n            class="wrap"\n            @click.stop="handleOnWrapClick"\n        >\n            <ui-label class="selected-value" :value="title"></ui-label>\n            <ui-icon class="icon-arrow" value="arrow-triangle"></ui-icon>\n            <div \n                class="prop-content" \n                id="prop-content"\n                ref="propContent" \n            >\n                <debug-menu \n                    v-on:change-title="handleOnChangeTitle" \n                    :show="showPanel"\n                    :data="menu"\n                    key="-1"\n                />\n            </div>\n        </div>\n    </div>\n    \n    <style>\n        .debug-view {\n            cursor: pointer;\n            border-radius: calc(var(--size-normal-radius) * 2px);\n            background-color: var(--color-default-fill-emphasis);\n            margin-right: 8px;\n            white-space: nowrap;\n            box-shadow: inset 0 0 0 calc(var(--size-normal-border) * 1px) var(--color-default-border-normal);\n        }\n        \n        .debug-view > .wrap {\n            display: flex;\n            align-items: center;\n            height: 24px;\n            line-height: 24px;\n            position: relative;\n            padding: 0px 6px;\n        }\n\n        .debug-view > .wrap:hover {\n            color: var(--color-focus-contrast-emphasis);\n        }\n        \n         .selected-value {\n            display: inline-block;\n            margin-right: 0;\n            overflow: hidden;\n            white-space: nowrap;   \n            text-align: right;        \n         }\n         \n         .prop-content {\n            display: block;\n            pointer-events: none;\n            transition: opacity 0.2s;\n            position: absolute;\n            right: 0;\n            top: 28px;\n            z-index: 10;\n         }\n         \n         .icon-arrow{\n            margin-left: 12px;\n         }\n         \n         .icon-arrow[expanded]{\n            transition: all .3s linear;\n            transform: rotate(180deg);\n         }\n         \n         .sub-title{\n            cursor: auto;\n            pointer-events: none;\n            color: var(--color-normal-contrast-emphasis) !important;\n         }\n         \n         .ui-prop-content, .panel{\n            min-width: 200px;\n            background: var(--color-normal-fill);\n            border: 1px solid var(--color-default-border-weaker);\n            border-radius: calc(var(--size-normal-radius) * 1px);\n         }\n         \n         .panel{\n            background: var(--color-normal-fill);\n         }\n         \n         .prop-content > .panel{\n            pointer-events: all;\n         }\n\n         .group-label {\n            display: flex;\n            justify-items: center;\n            height: 24px;\n            line-height: 24px;\n            font-size: 12px;\n            padding-left: 6px;\n            border-radius: calc(var(--size-normal-radius) * 1px);\n            color: var(--color-normal-contrast-emphasis);\n            background-color: var(--color-normal-fill-emphasis);\n            cursor: auto;\n         }\n         \n         ui-radio, ui-radio-group {\n            border: none;\n         }\n         \n          .children-label {\n            position: relative;\n            padding-left: 24px;\n            padding-right: 6px;\n            color: var(--color-normal-contrast);\n            font-size: 12px;\n            white-space: nowrap;\n          }\n          \n         .children-label:not([hidden]){\n            height: 24px;\n            line-height: 24px;\n         } \n          \n         .panel-item-group>div[can-expand] + ul > .children-label {\n            height: 0;\n         }\n          \n          .children-label:not(.no-dot)[checked]::before{\n            content: \'\';\n            position: absolute;\n            top: 50%;\n            left: 9px;\n            margin-top: -2.5px;\n            display: inline-block;\n            width: 5px;\n            height: 5px;\n            border-radius: 50%;\n            background-color: var(--color-focus-fill-normal);\n          }\n          \n          .children-label > ui-label {\n            pointer-events: none;\n          }\n          \n          .no-dot{\n            padding-left: 8px;\n          }\n          \n          .children-label:hover{\n            background-color: var(--color-hover-fill);\n          }\n\n          .group-label .next-icon {\n            display: none;\n            font-size: 9px;\n            margin-left: 6px;\n            margin-right: 6px;\n          }\n\n          .group-label[can-expand] .next-icon {\n            display: inline-block;\n          }\n          \n           .group-label[can-expand] {\n                position: relative;\n                color: var(--color-normal-contrast-emphasis);\n                background-color: var(--color-normal-fill-emphasis);\n                cursor: pointer;\n           }\n           \n           .group-label[can-expand]:hover{\n             color: var(--color-normal-contrast);\n             background-color: var(--color-hover-fill);\n           }\n          \n           .panel {\n              display: none;\n              z-index: 10;\n              opacity: 1; \n              pointer-events: all;\n           }\n           \n    </style>\n',exports.ready=ready,exports.update=update,exports.close=close,exports.default=module.exports;
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,a,n,t){void 0===t&&(t=n);var r=Object.getOwnPropertyDescriptor(a,n);r&&("get"in r?a.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(e,t,r)}:function(e,a,n,t){void 0===t&&(t=n),e[t]=a[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(a,e,n);return __setModuleDefault(a,e),a};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.close=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue.js");let panel=void 0,vm=void 0;exports.position="right",exports.template='\n<style>\n.camera3d {\n    position: relative;\n    width: 24px;\n    height: 24px;\n    box-sizing: border-box;\n    background-color: var(--color-default-fill-emphasis);\n    border-top: 1px solid var(--color-default-border-normal);\n    border-bottom: 1px solid var(--color-default-border-normal);\n    border-left: 1px solid var(--color-default-border-normal);\n    border-radius: calc(var(--size-normal-radius) * 2px) 0 0 calc(var(--size-normal-radius) * 2px);\n}\n\n.camera3d > ui-button {\n    margin-top: -1px;\n    margin-left: -1px;\n    border-radius: calc(var(--size-normal-radius) * 2px) 0 0 calc(var(--size-normal-radius) * 2px);\n}\n\n.camera3d[style-2d] {\n    border-left: none;\n    margin-left: 0;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.camera3d[style-2d] > ui-button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.camera3d .popup {\n    position: absolute;\n    top: 30px;\n    right: 0;\n    z-index: 2;\n    padding: 10px 10px 5px 10px;\n    width: 210px;\n    background-color: var(--color-normal-fill);\n    border-radius: calc(var(--size-normal-radius) * 2px);\n    border: 1px solid var(--color-normal-fill-weakest);\n}\n\n.camera3d .popup ui-prop {\n    margin-bottom: 5px;\n    --left-width: 40%;\n}\n.camera3d .popup ui-prop ui-slider {\n    --ui-slider-bar-width: 55%;\n}\n</style>\n\n<div class="camera3d"></div>\n';const vueTemplate='\n<div class="camera3d" :style-2d="is2D">\n    <ui-button type="icon" class="transparent" @click.stop="toolbarMenu">\n        <ui-icon value="camera"></ui-icon>\n    </ui-button>\n    <div class="popup"\n        v-show="showMenu"\n        @click.stop\n    >\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.fov" tooltip="i18n:scene.editor_camera.fovTip"></ui-label>\n            <ui-slider slot="content" min="0.01" max="179"\n                :value="camera.fov"\n                @change="setFov($event.target.value)"\n            >\n            </ui-slider>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.far" tooltip="i18n:scene.editor_camera.farTip"></ui-label>\n            <ui-num-input slot="content" min="0.01"\n                :value="camera.far"\n                @change="setFar($event.target.value)"\n            >\n            </ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.near" tooltip="i18n:scene.editor_camera.nearTip"></ui-label>\n            <ui-num-input slot="content" min="0.01"\n                :value="camera.near"\n                @change="setNear($event.target.value)"\n            >\n            </ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.color" tooltip="i18n:scene.editor_camera.colorTip"></ui-label>\n            <ui-color slot="content"\n                :value="JSON.stringify(camera.color)"\n                @change="setColor($event.target.value)"\n            ></ui-color>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.wheel" tooltip="i18n:scene.editor_camera.wheelTip"></ui-label>\n            <ui-num-input slot="content" min="0.000001" max="100" step="0.01"\n                :value="camera.wheelSpeed"\n                @change="setWheelSpeed($event.target.value)"\n            ></ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.wander" tooltip="i18n:scene.editor_camera.wanderTip"></ui-label>\n            <ui-num-input slot="content" min="0.01" max="100" step="0.1"\n                :value="camera.wanderSpeed"\n                @change="setWanderSpeed($event.target.value)"\n            ></ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.enableAcceleration" tooltip="i18n:scene.editor_camera.enableAccelerationTip"></ui-label>\n            <ui-checkbox slot="content"\n                :value="camera.enableAcceleration"\n                @change="setEnableAcceleration($event.target.value)"\n            ></ui-checkbox>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.aperture" tooltip="i18n:scene.editor_camera.apertureTip"></ui-label>\n            <ui-select slot="content"\n                :value="camera.aperture"\n                @change="setAperture($event.target.value)"\n            >\n            <option v-for="item in camera.apertureList" :key="item.value" :value="item.value">{{item.name}}</option>\n            </ui-select>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.shutter" tooltip="i18n:scene.editor_camera.shutterTip"></ui-label>\n            <ui-select slot="content"\n                :value="camera.shutter"\n                @change="setShutter($event.target.value)"\n            >\n            <option v-for="item in camera.shutterList" :key="item.value" :value="item.value">{{item.name}}</option>\n            </ui-select>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.iso" tooltip="i18n:scene.editor_camera.isoTip"></ui-label>\n            <ui-select slot="content"\n                :value="camera.iso"\n                @change="setIso($event.target.value)"\n            >\n            <option v-for="item in camera.isoList" :key="item.value" :value="item.value">{{item.name}}</option>\n            </ui-select>\n        </ui-prop>\n    </div>\n</div>\n';function ready(e){panel&&close(),(panel=this).menuName="camera-3d",panel.$scene=e.nextElementSibling,vm=new Vue({el:panel.$.container,name:"SceneCamera3dToolbar",data:{is2D:!1,showMenu:!1,camera:{}},methods:{toolbarMenu(){Editor.Message.broadcast("scene:toolbar-menu-active",panel.menuName)},setFov(e){e-=0,panel.$scene.callSceneMethod("setCameraProperty",[{fov:e}])},setFar(e){e-=0,panel.$scene.callSceneMethod("setCameraProperty",[{far:e}])},setNear(e){e-=0,panel.$scene.callSceneMethod("setCameraProperty",[{near:e}])},setColor(e){panel.$scene.callSceneMethod("setCameraProperty",[{clearColor:e}])},setWheelSpeed(e){e-=0,panel.$scene.callSceneMethod("setCameraWheelSpeed",[e])},setWanderSpeed(e){e-=0,panel.$scene.callSceneMethod("setCameraWanderSpeed",[e])},setEnableAcceleration(e){panel.$scene.callSceneMethod("setCameraEnableAcceleration",[e])},setAperture(e){panel.$scene.callSceneMethod("setCameraProperty",[{aperture:e}])},setShutter(e){panel.$scene.callSceneMethod("setCameraProperty",[{shutter:e}])},setIso(e){panel.$scene.callSceneMethod("setCameraProperty",[{iso:e}])}},template:vueTemplate}),Editor.Message.__protected__.addBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.addBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.addBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive),panel.sceneReady()}function close(){Editor.Message.__protected__.removeBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.removeBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.removeBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive),panel=void 0}exports.$={container:".camera3d"},exports.methods={dimensionChanged(e){vm.is2D=e},async sceneReady(){const e=await Editor.Message.request("scene","query-is2D");panel.dimensionChanged(e)},toolbarMenuActive(e){e!==panel.menuName||vm.showMenu?vm.showMenu&&(vm.showMenu=!1):(vm.showMenu=!0,panel.cameraConfig())},async cameraConfig(){const e=await panel.$scene.callSceneMethod("getCameraProperty"),a=await panel.$scene.callSceneMethod("getCameraWheelSpeed"),n=await panel.$scene.callSceneMethod("getCameraWanderSpeed"),t=await panel.$scene.callSceneMethod("getCameraEnableAcceleration");vm.$set(vm,"camera",{fov:e.fov.value,far:e.far.value,near:e.near.value,aperture:e.aperture.value,apertureList:e.aperture.enumList,iso:e.iso.value,isoList:e.iso.enumList,shutter:e.shutter.value,shutterList:e.shutter.enumList,color:Object.values(e.clearColor.value),wheelSpeed:a,wanderSpeed:n,enableAcceleration:t})}},exports.ready=ready,exports.close=close,exports.default=__importStar(require("./camera3d"));
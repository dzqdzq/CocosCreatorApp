"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,n,a,t){void 0===t&&(t=a);var r=Object.getOwnPropertyDescriptor(n,a);r&&("get"in r?n.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(e,t,r)}:function(e,n,a,t){void 0===t&&(t=a),e[t]=n[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(n,e,a);return __setModuleDefault(n,e),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.close=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let $scene=null,panel=null,vm=null;const vueTemplate='\n<div class="camera3d" :style-2d="is2D">\n    <ui-button type="icon" class="transparent" @click.stop="toolbarMenu">\n        <ui-icon value="camera"></ui-icon>\n    </ui-button>\n    <div class="popup"\n        v-show="showMenu"\n        @click.stop\n    >\n        <ui-section expand>\n            <div class="header" slot="header">\n                <ui-label> Scene Camera </ui-label>\n                <ui-button class="transparent"\n                    @click.right.stop="onCameraSettings"\n                    @click.left.stop="onCameraSettings"\n                >\n                    <ui-icon value="menu"></ui-icon>\n                </ui-button>        \n            </div>\n            <div class="content" >\n                <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.fov" tooltip="i18n:scene.editor_camera.fovTip"></ui-label>\n                <ui-slider slot="content" min="0.01" max="179"\n                    :value="camera.fov"\n                    @change="setFov($event.target.value)"\n                >\n                </ui-slider>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.far" tooltip="i18n:scene.editor_camera.farTip"></ui-label>\n                <ui-num-input slot="content" min="0.01"\n                    :value="camera.far"\n                    @change="setFar($event.target.value)"\n                >\n                </ui-num-input>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.near" tooltip="i18n:scene.editor_camera.nearTip"></ui-label>\n                <ui-num-input slot="content" min="0.01"\n                    :value="camera.near"\n                    @change="setNear($event.target.value)"\n                >\n                </ui-num-input>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.color" tooltip="i18n:scene.editor_camera.colorTip"></ui-label>\n                <ui-color slot="content"\n                    :value="JSON.stringify(camera.color)"\n                    @change="setColor($event.target.value)"\n                ></ui-color>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.wheel" tooltip="i18n:scene.editor_camera.wheelTip"></ui-label>\n                <ui-slider slot="content" min="0.000001" max="100" step="0.01"\n                    :value="camera.wheelSpeed"\n                    @change="setWheelSpeed($event.target.value)"\n                ></ui-slider>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.wander" tooltip="i18n:scene.editor_camera.wanderTip"></ui-label>\n                <ui-slider slot="content" min="0.01" max="100" step="0.1"\n                    :value="camera.wanderSpeed"\n                    @change="setWanderSpeed($event.target.value)"\n                ></ui-slider>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.enableAcceleration" tooltip="i18n:scene.editor_camera.enableAccelerationTip"></ui-label>\n                <ui-checkbox slot="content"\n                    :value="camera.enableAcceleration"\n                    @change="setEnableAcceleration($event.target.value)"\n                ></ui-checkbox>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.aperture" tooltip="i18n:scene.editor_camera.apertureTip"></ui-label>\n                <ui-select slot="content"\n                    :value="camera.aperture"\n                    @change="setAperture($event.target.value)"\n                >\n                <option v-for="item in camera.apertureList" :key="item.value" :value="item.value">{{item.name}}</option>\n                </ui-select>\n            </ui-prop>\n            <ui-prop>\n                <ui-label slot="label" value="i18n:scene.editor_camera.shutter" tooltip="i18n:scene.editor_camera.shutterTip"></ui-label>\n                <ui-select slot="content"\n                    :value="camera.shutter"\n                    @change="setShutter($event.target.value)"\n                >\n                <option v-for="item in camera.shutterList" :key="item.value" :value="item.value">{{item.name}}</option>\n                </ui-select>\n            </ui-prop>\n            <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.iso" tooltip="i18n:scene.editor_camera.isoTip"></ui-label>\n            <ui-select slot="content"\n                :value="camera.iso"\n                @change="setIso($event.target.value)"\n            >\n            <option v-for="item in camera.isoList" :key="item.value" :value="item.value">{{item.name}}</option>\n            </ui-select>\n        </ui-prop>\n        </div>\n        </ui-section>\n    </div>\n</div>\n',SceneCamera3DVM=Vue.extend({name:"SceneCamera3dToolbar",data:()=>({is2D:!1,showMenu:!1,menuName:"camera-3d",camera:{fov:45,far:1e4,near:.01,aperture:19,apertureList:[],iso:0,isoList:[],shutter:7,shutterList:[],color:[51,51,51,255],wheelSpeed:.01,wanderSpeed:10,enableAcceleration:!0}}),methods:{toolbarMenu(){Editor.Message.broadcast("scene:toolbar-menu-active",this.menuName)},setFov(e){e-=0,this.camera.fov=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{fov:e}])},setFar(e){e-=0,this.camera.far=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{far:e}])},setNear(e){e-=0,this.camera.near=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{near:e}])},setColor(e){this.camera.color=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{clearColor:e}])},setWheelSpeed(e){e-=0,this.camera.wheelSpeed=e,$scene&&$scene.callSceneMethod("setCameraWheelSpeed",[e])},setWanderSpeed(e){e-=0,this.camera.wanderSpeed=e,$scene&&$scene.callSceneMethod("setCameraWanderSpeed",[e])},setEnableAcceleration(e){this.camera.enableAcceleration=e,$scene&&$scene.callSceneMethod("setCameraEnableAcceleration",[e])},setAperture(e){this.camera.aperture=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{aperture:e}])},setShutter(e){this.camera.shutter=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{shutter:e}])},setIso(e){this.camera.iso=e,$scene&&$scene.callSceneMethod("setCameraProperty",[{iso:e}])},onCameraSettings(){const e=[{label:"i18n:scene.editor_camera.settings.reset",click:async()=>{$scene&&(await $scene.callSceneMethod("resetCameraProperty"),await panel.cameraConfig())}}];Editor.Menu.popup({menu:e})}},template:vueTemplate});function ready(e){close(),panel=this,$scene=e.nextElementSibling,null===vm||void 0===vm||vm.$destroy(),(vm=new SceneCamera3DVM).$mount(panel.$.container),Editor.Message.__protected__.addBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.addBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.addBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive),panel.sceneReady()}function close(){panel&&(Editor.Message.__protected__.removeBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.removeBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.removeBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive)),null===vm||void 0===vm||vm.$destroy(),vm=null,panel=null,$scene=null}exports.position="right",exports.template='\n<style>\n.camera3d {\n    position: relative;\n    width: 24px;\n    height: 24px;\n    box-sizing: border-box;\n    background-color: var(--color-default-fill-emphasis);\n    border-top: 1px solid var(--color-default-border-normal);\n    border-bottom: 1px solid var(--color-default-border-normal);\n    border-left: 1px solid var(--color-default-border-normal);\n    border-radius: calc(var(--size-normal-radius) * 2px) 0 0 calc(var(--size-normal-radius) * 2px);\n}\n\n.camera3d > ui-button {\n    margin-top: -1px;\n    margin-left: -1px;\n    border-radius: calc(var(--size-normal-radius) * 2px) 0 0 calc(var(--size-normal-radius) * 2px);\n}\n\n.camera3d[style-2d] {\n    border-left: none;\n    margin-left: 0;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.camera3d[style-2d] > ui-button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.camera3d .popup {\n    position: absolute;\n    top: 30px;\n    right: 0;\n    z-index: 2;\n    padding: 10px 10px 5px 10px;\n    width: 210px;\n    background-color: var(--color-normal-fill);\n    border-radius: calc(var(--size-normal-radius) * 2px);\n    border: 1px solid var(--color-normal-fill-weakest);\n}\n\n.camera3d .popup ui-prop {\n    margin-bottom: 5px;\n    --left-width: 40%;\n}\n.camera3d .popup ui-prop ui-slider {\n    --ui-slider-bar-width: 55%;\n}\n\n.camera3d .header {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n    flex-direction: row;\n    width: 100%;\n}\n\n.camera3d .content {\n    padding: 4px;\n}\n</style>\n\n<div class="camera3d"></div>\n',exports.$={container:".camera3d"},exports.methods={dimensionChanged(e){vm&&(vm.is2D=e)},async sceneReady(){const e=await Editor.Message.request("scene","query-is2D");panel&&panel.dimensionChanged(e)},toolbarMenuActive(e){vm&&(e!==vm.menuName||vm.showMenu?vm.showMenu&&(vm.showMenu=!1):(vm.showMenu=!0,panel.cameraConfig()))},async cameraConfig(){if(!$scene)return;const e=await $scene.callSceneMethod("getCameraProperty"),n=await $scene.callSceneMethod("getCameraWheelSpeed"),a=await $scene.callSceneMethod("getCameraWanderSpeed"),t=await $scene.callSceneMethod("getCameraEnableAcceleration");vm&&vm.$set(vm,"camera",{fov:e.fov.value,far:e.far.value,near:e.near.value,aperture:e.aperture.value,apertureList:e.aperture.enumList,iso:e.iso.value,isoList:e.iso.enumList,shutter:e.shutter.value,shutterList:e.shutter.enumList,color:Object.values(e.clearColor.value),wheelSpeed:n,wanderSpeed:a,enableAcceleration:t})}},exports.ready=ready,exports.close=close,exports.default=__importStar(require("./camera3d"));
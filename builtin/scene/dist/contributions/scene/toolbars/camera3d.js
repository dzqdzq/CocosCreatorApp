"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue");let vm=null;async function ready(e){const a=e.nextElementSibling;let n=null;async function o(){const e=await a.callSceneMethod("getCameraProperty"),n=await a.callSceneMethod("getCameraWheelSpeed"),o=await a.callSceneMethod("getCameraWanderSpeed"),r=await a.callSceneMethod("getCameraEnableAcceleration");return{fov:e.fov,far:e.far,near:e.near,color:e.clearColor,wheelSpeed:n,wanderSpeed:o,enableAcceleration:r}}const r=await o();vm=new Vue({el:this.$.camera3d,data:{is3D:!0,flags:{show:!1},camera:{fov:r.fov,far:r.far,near:r.near,color:r.color,wheelSpeed:r.wheelSpeed,wanderSpeed:r.wanderSpeed,enableAcceleration:r.enableAcceleration}},methods:{visiblePopup(e){vm.flags.show?vm.flags.show=!vm.flags.show:Editor.Message.broadcast("scene:toolbar-menu-active","camera3d")},showPopup(){clearTimeout(n),n=setTimeout(async()=>{const e=await o();Object.keys(e).forEach(a=>{vm.camera[a]=e[a]}),vm.flags.show=!0},200)},hidePopup(){clearTimeout(n),n=setTimeout(()=>{vm.flags.show=!1},200)},setFov(e){e-=0,a.callSceneMethod("setCameraProperty",[{fov:e}])},setFar(e){e-=0,a.callSceneMethod("setCameraProperty",[{far:e}])},setNear(e){e-=0,a.callSceneMethod("setCameraProperty",[{near:e}])},setColor(e){a.callSceneMethod("setCameraProperty",[{clearColor:e}])},setWheelSpeed(e){e-=0,a.callSceneMethod("setCameraWheelSpeed",[e])},setWanderSpeed(e){e-=0,a.callSceneMethod("setCameraWanderSpeed",[e])},setEnableAcceleration(e){a.callSceneMethod("setCameraEnableAcceleration",[e])}}}),document.addEventListener("click",e=>{vm.flags.show=!1}),Editor.Message.addBroadcastListener("scene:toolbar-menu-active",e=>{vm.flags.show="camera3d"===e}),Editor.Message.addBroadcastListener("scene:dimension-changed",e=>{vm.is3D=!e}),vm.is3D=!await a.callSceneMethod("queryIs2D")}async function close(){}exports.position="right",exports.template='\n<style>\n.camera3d {\n    box-sizing: border-box;\n    width: calc(var(--size-normal-line) * 1px);\n    height: calc(var(--size-normal-line) * 1px);\n    background-color: var(--color-default-fill-emphasis);\n    text-align: center;\n    border-top: calc(var(--size-normal-border) * 1px) solid var(--color-default-border-normal);\n    border-bottom: calc(var(--size-normal-border) * 1px) solid var(--color-default-border-normal);\n}\n\n.camera3d[is3D]{\n   border-left: calc(var(--size-normal-border) * 1px) solid var(--color-default-border-normal);\n   border-radius: calc(var(--size-normal-radius) * 2px) 0 0 calc(var(--size-normal-radius) * 2px);\n}\n\n.camera3d .button {\n    cursor: pointer;\n}\n\n.camera3d .button .arrow {\n    font-size: 9px;\n    margin-left: -2px;\n    vertical-align: middle;\n}\n.camera3d .popup {\n    position: absolute;\n    opacity: 0;\n    pointer-events: none;\n    width: 160px;\n    top: 28px;\n    right: 10px;\n    z-index: 10;\n    padding: calc(var(--size-small-line) * 0.5px);\n    background: var(--color-normal-fill);\n    border-radius: calc(var(--size-normal-radius)*1px);\n    transition: opacity 0.2s;\n}\n.camera3d .popup[show] {\n    opacity: 1;\n    pointer-events: all;\n}\n.camera3d .popup ui-prop {\n    display: block;\n    margin-bottom: 5px;\n    --left-width: 40%;\n}\n</style>\n<div class="camera3d" :is3D="is3D">\n    <div class="button"\n        @click.stop="visiblePopup"\n    >\n    <ui-button type="icon" transparent>\n        <ui-icon value="camera"></ui-icon>\n    </ui-button>\n    </div>\n    <div class="popup"\n        :show="flags.show"\n        @click.stop\n    >\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.fov" tooltip="i18n:scene.editor_camera.fovTip"></ui-label>\n            <ui-slider slot="content" min="0.01" max="179"\n                :value="camera.fov"\n                @change="setFov($event.target.value)"\n            >\n            </ui-slider>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.far" tooltip="i18n:scene.editor_camera.farTip"></ui-label>\n            <ui-num-input slot="content" min="0.01"\n                :value="camera.far"\n                @change="setFar($event.target.value)"\n            >\n            </ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.near" tooltip="i18n:scene.editor_camera.nearTip"></ui-label>\n            <ui-num-input slot="content" min="0.01"\n                :value="camera.near"\n                @change="setNear($event.target.value)"\n            >\n            </ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.color" tooltip="i18n:scene.editor_camera.colorTip"></ui-label>\n            <ui-color slot="content"\n                :value="JSON.stringify(camera.color)"\n                @change="setColor($event.target.value)"\n            ></ui-color>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.wheel" tooltip="i18n:scene.editor_camera.wheelTip"></ui-label>\n            <ui-num-input slot="content" min="0.000001" max="100" step="0.01"\n                :value="camera.wheelSpeed"\n                @change="setWheelSpeed($event.target.value)"\n            ></ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.wander" tooltip="i18n:scene.editor_camera.wanderTip"></ui-label>\n            <ui-num-input slot="content" min="0.01" max="100" step="0.1"\n                :value="camera.wanderSpeed"\n                @change="setWanderSpeed($event.target.value)"\n            ></ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:scene.editor_camera.enableAcceleration" tooltip="i18n:scene.editor_camera.enableAccelerationTip"></ui-label>\n            <ui-checkbox slot="content"\n                :value="camera.enableAcceleration"\n                @change="setEnableAcceleration($event.target.value)"\n            ></ui-checkbox>\n        </ui-prop>\n    </div>\n</div>\n',exports.$={camera3d:".camera3d"},exports.ready=ready,exports.close=close,exports.default=module.exports;
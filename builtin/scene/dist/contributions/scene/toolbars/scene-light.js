"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.close=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const panel_constant_1=require("../../../panel/panel-constant"),Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let panel=null,vm=null;const vueTemplate='\n<div class="scene-light" \n    v-show="!is2D"\n    :active="active"\n    :disabled="disabled"\n>\n    <ui-button \n        :disabled="disabled"\n        type="icon"\n        class="transparent"\n        tooltip="i18n:scene.scene_view.is_scene_light_on"\n        @click.stop="toggleSceneLight"\n    >\n        <ui-icon value=\'spot-light\'></ui-icon>\n    </ui-button>\n</div>\n',SceneLightVM=Vue.extend({name:"SceneLightVM",data:()=>({is2D:!1,isNative:!1,active:!0,disabled:!1}),methods:{toggleSceneLight(){this.disabled||(this.active=!this.active,Editor.Message.send("scene","set-scene-light-on",this.active))}},template:vueTemplate});function ready(){close(),panel=this,null===vm||void 0===vm||vm.$destroy(),(vm=new SceneLightVM).$mount(panel.$.container),Editor.Message.__protected__.addBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.addBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.addBroadcastListener("scene:editor-preview-set-play",panel.onEditorPreviewPlay),panel.sceneReady()}function close(){panel&&(Editor.Message.__protected__.removeBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.removeBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.removeBroadcastListener("scene:editor-preview-set-play",panel.onEditorPreviewPlay)),null===vm||void 0===vm||vm.$destroy(),vm=null,panel=null}exports.position="right",exports.template='\n<style>\n    .scene-light {\n        position: relative;\n        background-color: var(--color-default-fill-emphasis);\n        box-shadow: inset 0 0 0 calc(var(--size-normal-border) * 1px) var(--color-default-border-normal);\n        margin-right: 8px;\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        overflow: hidden;\n    }\n\n    .scene-light[active] {\n        background-color: var(--colo-info-fill-important);\n        color: var(--color-info-contrast-important);\n        box-shadow: inset 0 0 0 calc(var(--size-normal-border) * 1px) var(--color-info-fill-important);\n    }\n    .scene-light[active] ui-button {\n        background-color: var(--color-info-fill-important);\n        color: var(--color-info-contrast-important);\n    }\n    /* vue2 对 disabled 有特殊处理 https://v2.vuejs.org/v2/guide/syntax.html#Attributes */\n    .scene-light[disabled] {\n        cursor: not-allowed;\n        box-shadow: none;\n    }\n</style>\n\n<div class="scene-light"></div>\n',exports.$={container:".scene-light"},exports.methods={dimensionChanged(e){vm&&(vm.is2D=e)},async sceneReady(){const e=await Editor.Message.request("scene","query-is2D");panel&&panel.dimensionChanged(e);const t=await Editor.Message.request("scene","query-scene-light-on"),n=await Editor.Message.request("scene","is-native");vm&&(vm.active=t,vm.isNative=n)},toolbarMenuActive(e){vm&&(e!==vm.menuName||vm.showMenu?vm.showMenu&&(vm.showMenu=!1):vm.showMenu=!0)},onEditorPreviewPlay(e){vm.isNative&&(e===panel_constant_1.EditorPreviewState.Start?vm.disabled=!0:e===panel_constant_1.EditorPreviewState.Stop&&(vm.disabled=!1))}},exports.ready=ready,exports.close=close,exports.default=__importStar(require("./scene-light"));
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,n,i,o){void 0===o&&(o=i);var t=Object.getOwnPropertyDescriptor(n,i);t&&("get"in t?n.__esModule:!t.writable&&!t.configurable)||(t={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(e,o,t)}:function(e,n,i,o){void 0===o&&(o=i),e[o]=n[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(n,e,i);return __setModuleDefault(n,e),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.close=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue.js");Vue.config.productionTip=!1,Vue.config.devtools=!1;let $scene=null,panel=null,vm=null;const vueTemplate='\n<div class="gizmo-settings"\n    :style-2d="is2D"\n>\n    <ui-button type="icon" class="transparent" \n        @click.stop="toolbarMenu"\n    >\n        <ui-icon value="setting"></ui-icon>\n    </ui-button>\n\n    <div class="popup"\n        v-show="showMenu"\n        @click.stop\n    >\n        <ui-prop :disabled="is2D" style="--left-width: auto;">\n            <ui-checkbox slot="label"\n                :value="gizmo.toolsVisibility3d"\n                @confirm="set3DToolsVisibility($event.target.value)"\n            >\n                <ui-label value="i18n:scene.gizmos.tools_visibility_3d"></ui-label>\n            </ui-checkbox>\n        </ui-prop>\n        <ui-prop :disabled="is2D">\n            <ui-checkbox slot="label"\n                :value="gizmo.is3DIcon"\n                @confirm="set3DIcon($event.target.value)"\n            >\n                <ui-label value="i18n:scene.gizmos.icon3d"></ui-label>\n            </ui-checkbox>\n            <ui-num-input slot="content" min="0" max="8" step="1"\n                :value="gizmo.iconSize"\n                @change="setIconSize($event.target.value)"\n            ></ui-num-input>\n        </ui-prop>\n        <ui-prop>\n            <ui-checkbox slot="label"\n                :value="gizmo.gridVisible"\n                @confirm="setGridVisible($event.target.value)"\n            >\n                <ui-label value="i18n:scene.gizmos.showGrid"></ui-label>\n            </ui-checkbox>\n            <ui-color slot="content"\n                :value="JSON.stringify(gizmo.gridColor)"\n                @change="setGridLineColor($event.target.value)"\n            ></ui-color>\n        </ui-prop>\n    </div>\n</div>\n',SceneGizmoVM=Vue.extend({name:"SceneGizmoVM",data:()=>({menuName:"gizmo-settings",toolsVisibility3d:!1,is2D:!1,showMenu:!1,mouseOver:!1,showColorPanel:!1,gizmo:{}}),methods:{toolbarMenu(){Editor.Message.broadcast("scene:toolbar-menu-active",this.menuName)},async setGridVisible(e){$scene&&await $scene.callSceneMethod("setGridVisible",[e]),await Editor.Profile.setConfig("scene","gizmos-infos.gridVisible",e)},async set3DToolsVisibility(e){$scene&&await $scene.callSceneMethod("setToolsVisibility3d",[e]),await Editor.Profile.setConfig("scene","gizmos-infos.toolsVisibility3d",e)},async set3DIcon(e){$scene&&await $scene.callSceneMethod("setIconGizmo3D",[e]),await Editor.Profile.setConfig("scene","gizmos-infos.is3DIcon",e)},async setIconSize(e){$scene&&await $scene.callSceneMethod("setIconGizmoSize",[e]),await Editor.Profile.setConfig("scene","gizmos-infos.iconSize",e)},async setGridLineColor(e){$scene&&await $scene.callSceneMethod("setGridLineColor",[e]),await Editor.Profile.setConfig("scene","gizmos-infos.gridColor",e)}},template:vueTemplate});function ready(e){close(),panel=this,$scene=e.nextElementSibling,null===vm||void 0===vm||vm.$destroy(),(vm=new SceneGizmoVM).$mount(panel.$.container),Editor.Message.__protected__.addBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.addBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.addBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive),panel.sceneReady()}function close(){panel&&(Editor.Message.__protected__.removeBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.__protected__.removeBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.__protected__.removeBroadcastListener("scene:toolbar-menu-active",panel.toolbarMenuActive)),null===vm||void 0===vm||vm.$destroy(),vm=null,panel=null,$scene=null}exports.position="right",exports.template='\n<style>\n.gizmo-settings {\n    position: relative;\n    width: 24px;\n    height: 24px;\n    box-sizing: border-box;\n    background-color: var(--color-default-fill-emphasis);\n    border-top: 1px solid var(--color-default-border-normal);\n    border-bottom: 1px solid var(--color-default-border-normal);\n    border-right: 1px solid var(--color-default-border-normal);\n    border-radius: 0 calc(var(--size-normal-radius) * 2px) calc(var(--size-normal-radius) * 2px) 0;\n}\n\n.gizmo-settings > ui-button {\n    margin-top: -1px;\n    margin-right: -1px;\n    border-radius: 0 calc(var(--size-normal-radius) * 2px) calc(var(--size-normal-radius) * 2px) 0;\n}\n\n.gizmo-settings[style-2d] {\n    border-right: none;\n    margin-right: 0;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.gizmo-settings[style-2d] > ui-button {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.gizmo-settings .popup {\n    position: absolute;\n    top: 30px;\n    right: -1px;\n    z-index: 2;\n    padding: 10px 10px 5px 10px;\n    width: 200px;\n    background-color: var(--color-normal-fill);\n    border-radius: calc(var(--size-normal-radius) * 2px);\n    border: 1px solid var(--color-normal-fill-weakest);\n}\n.gizmo-settings .popup ui-prop {\n    margin-bottom: 5px;\n    --left-width: 45%;\n}\n</style>\n\n<div class="gizmo-settings"></div>\n',exports.$={container:".gizmo-settings"},exports.methods={dimensionChanged(e){vm&&(vm.is2D=e)},async sceneReady(){const e=await Editor.Message.request("scene","query-is2D");panel&&panel.dimensionChanged(e)},toolbarMenuActive(e){vm&&(e!==vm.menuName||vm.showMenu?vm.showMenu&&(vm.showMenu=!1):(vm.showMenu=!0,panel.gizmoConfig()))},async gizmoConfig(){const e=await Editor.Profile.getConfig("scene","gizmos-infos");vm&&vm.$set(vm,"gizmo",e)}},exports.ready=ready,exports.close=close,exports.default=__importStar(require("./gizmo"));
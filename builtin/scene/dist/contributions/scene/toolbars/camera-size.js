"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue");let panel=void 0,vm=void 0;function ready(e){(panel=this).$scene=e.nextElementSibling,vm=new Vue({el:panel.$.container,components:{"view-select":require("../../ui-kit/view-select/index")},data:()=>({options:[],devices:[],designResolution:{},outputDevice:"__default_design__",show:!0}),methods:{async refresh(){vm.devices=await Editor.Message.request("device","query")||[],vm.designResolution=await Editor.Profile.getProject("project","general.designResolution")||{},vm.outputDevice=await Editor.Profile.getConfig("scene","camera.size")||"__default_design__";const e=vm.devices.map(e=>({label:`${e.name} (${e.width}x${e.height})`,name:e.name}));vm.options=[{label:`${Editor.I18n.t("scene.game_view.design_resolution")} (${vm.designResolution.width}x${vm.designResolution.height})`,name:"__default_design__"},{name:"__separator__"},...e,{name:"__separator__"},{label:Editor.I18n.t("scene.game_view.edit"),name:"edit..."}]},onChange(e){"edit..."!==e?(this.outputDevice=e||"__default_design__",Editor.Message.send("scene","change-target-resolution",this.outputDevice),Editor.Profile.setConfig("scene","camera.size",this.outputDevice)):Editor.Message.send("preferences","open-settings","device")}}}),Editor.Message.addBroadcastListener("device:devices-changed",panel.deviceChanged),Editor.Message.addBroadcastListener("scene:dimension-changed",panel.dimensionChanged),Editor.Message.addBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.addBroadcastListener("i18n:change",vm.refresh),vm.refresh(),panel.sceneReady()}function close(){Editor.Message.removeBroadcastListener("device:devices-changed",panel.deviceChanged),Editor.Message.removeBroadcastListener("device:dimension-changed",panel.dimensionChanged),Editor.Message.removeBroadcastListener("scene:ready",panel.sceneReady),Editor.Message.removeBroadcastListener("i18n:change",vm.refresh),panel=void 0,vm=void 0}exports.position="right",exports.template='\n<style>\n    .view-select-container {\n        user-select: none;\n        box-sizing: border-box;\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        display: flex;\n        align-items: center;\n        position: relative;\n        cursor: pointer;\n        background-color: var(--color-default-fill-emphasis);\n        width: 100px;\n        height: 24px;\n        box-shadow: inset 0 0 0 calc(var(--size-normal-border) * 1px) var(--color-default-border-normal);\n    }\n\n    .view-select-container .view-select {\n        display: flex;\n        padding-left: 6px;\n        padding-right: 20px;\n        width: 100%;\n        box-sizing: border-box;\n    }\n\n    .view-select #placeholder {\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translate(-4px, -50%);\n        padding: 0 2em 0 0.8em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        pointer-events: none;\n    }\n\n    .view-select .arrow-trangle {\n        display: block;\n        position: absolute;\n        right: 0;\n        top: 50%;\n        transform: translate(-4px, -50%);\n        font-size: 12px;\n        pointer-events: none;\n        outline: none;\n    }\n\n    .view-select .label {\n        overflow: hidden;\n    }\n\n    .view-select .label > span {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        display: block;\n    }\n\n    .view-select-container .options {\n        background-color: var(--color-normal-fill);\n        position: absolute;\n        will-change: top, left;\n        transform-origin: center top 0px;\n        top: 28px;\n        right: 10px;\n        max-height: 300px;\n        max-width: 396px;\n        overflow: auto;\n        padding: 5px 0;\n        box-sizing: border-box;\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        z-index: 99;\n    }\n\n    .options ul {\n        width: 100%;\n        list-style: none;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .options ul > li {\n        margin: 0;\n        padding-left: 8px;\n        clear: both;\n        font-size: inherit;\n        list-style: none;\n        cursor: pointer;\n        transition: background 0.2s ease-in-out;\n        height: 24px;\n        line-height: 24px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        box-sizing: border-box;\n    }\n\n    .view-select-container .view-select:hover {\n        color: var(--color-focus-contrast-emphasis);\n    }\n\n    .options ul > li:hover {\n        background: var(--color-hover-fill);\n    }\n\n    .options ul > .selected {\n        background-color: var(--color-focus-fill-emphasis);\n    }\n\n    .options ul > .separator {\n        font-size: 0px;\n        height: 1px;\n        width: calc(100% - 8px);\n        overflow: hidden;\n        background-color: var(--color-default-border-weakest);\n        pointer-events: none;\n        margin: 4px 0;\n        align-self: center;\n    }\n\n    .options ul .no_options {\n        display: inline-block;\n        min-width: 98px;\n        pointer-events: none;\n    }\n\n    .view-select-container[focused] {\n        border-color: var(--color-focus-border);\n    }\n    .view-select-container[disabled] {\n        cursor: not-allowed;\n        opacity: 0.4;\n        pointer-events: none;\n    }\n    .view-select-container[readonly] {\n        pointer-events: none;\n    }\n    .view-select-container[hidden] {\n        display: none;\n    }\n\n    .camera-size {\n        --color-normal-fill-weaker: var(--color-default-fill-emphasis);\n        margin-right: 8px;\n    }\n</style>\n<div class="camera-size">\n    <view-select tooltip="i18n:scene.camera_size.render_target_resolution"\n        v-show="show" \n        :options="options"\n        :value="outputDevice"\n        @change="onChange"\n    >\n    </view-select>\n</div>\n',exports.$={container:".camera-size"},exports.methods={deviceChanged(){vm.refresh(),"__default_design__"===vm.outputDevice||vm.devices.find(e=>e.name===vm.outputDevice)||(vm.outputDevice="__default_design__",Editor.Message.send("scene","change-target-resolution",vm.outputDevice))},dimensionChanged(e){vm.show=!e},async sceneReady(){vm.show=!await panel.$scene.callSceneMethod("queryIs2D")}},exports.ready=ready,exports.close=close,exports.default=module.exports;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.update=exports.ready=exports.methods=exports.$=exports.template=exports.position=void 0;const Vue=require("vue/dist/vue");let vm=null;async function ready(e){vm=new Vue({el:this.$.cameraSize,components:{"view-select":require("../../ui-kit/view-select/index")},data:()=>({options:[],devices:[],designResolution:{},outputDevice:"__default_design__",show:!0}),async mounted(){this.refresh()},methods:{async refresh(){this.options=[],this.devices=await Editor.Message.request("device","query")||[],this.designResolution=await Editor.Profile.getProject("project","general.designResolution")||{};const e=this.devices.map(e=>({label:`${e.name} (${e.width}x${e.height})`,name:e.name})),n=[{label:`${Editor.I18n.t("scene.game_view.design_resolution")} (${this.designResolution.width}x${this.designResolution.height})`,name:"__default_design__"},{name:"__separator__"},...e,{name:"__separator__"},{label:Editor.I18n.t("scene.game_view.edit"),name:"edit..."}];this.options=n,this.outputDevice=await Editor.Profile.getConfig("scene","camera.size")||"__default_design__"},onChange(e){"edit..."!==e?(this.outputDevice=e||"__default_design__",Editor.Message.send("scene","change-target-resolution",this.outputDevice),Editor.Profile.setConfig("scene","camera.size",this.outputDevice)):Editor.Message.request("preferences","open-settings","device")}}}),this.__broadcast=(async()=>{vm.refresh(),"__default_design__"===vm.outputDevice||vm.devices.find(e=>e.name===vm.outputDevice)||(vm.outputDevice="__default_design__",Editor.Message.send("scene","change-target-resolution",vm.outputDevice))}),Editor.Message.addBroadcastListener("device:devices-changed",this.__broadcast),Editor.Message.addBroadcastListener("scene:dimension-changed",e=>{vm.show=!e}),Editor.Message.addBroadcastListener("i18n:change",()=>{vm.refresh()})}async function update(){}async function close(){Editor.Message.removeBroadcastListener("device:devices-changed",this.__broadcast)}exports.position="right",exports.template='\n<div class="camera-size">\n    <view-select v-show="show" tooltip="i18n:scene.camera_size.render_target_resolution"\n        :options="options"\n        :value="outputDevice"\n        @change="onChange"\n    >\n    </view-select>\n</div>\n<style scoped>\n    .view-select-container {\n        user-select: none;\n        outline: none;\n        box-sizing: border-box;\n        font-size: inherit;\n        font-family: inherit;\n        border: calc(var(--size-normal-border) * 1px) solid var(--color-default-border-normal);\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        display: inline-flex;\n        position: relative;\n        contain: layout;\n        cursor: pointer;\n        background: var(--color-normal-fill-emphasis);\n        line-height: inherit;\n        width: 100px;\n        line-height: 24px;\n    }\n    .view-select-container .view-select {\n        -webkit-appearance: none;\n        cursor: pointer;\n        display: flex;\n        flex: 1;\n        outline: 0;\n        border: 0;\n        padding-left: 6px;\n        padding-right: 20px;\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        text-decoration: none;\n        text-overflow: ellipsis;\n        background: var(--color-normal-fill-weaker);\n        width: 100%;\n        color: inherit;\n        font-size: inherit;\n        line-height: inherit;\n        margin: calc(var(--size-normal-border) * -1px) 0;\n        box-sizing: border-box;\n    }\n\n    .view-select #placeholder {\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translate(-4px, -50%);\n        padding: 0 2em 0 0.8em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        pointer-events: none;\n    }\n\n    .view-select .arrow-trangle {\n        display: block;\n        position: absolute;\n        right: 0;\n        top: 50%;\n        transform: translate(-4px, -50%);\n        font-size: 12px;\n        pointer-events: none;\n        outline: none;\n    }\n\n    .view-select .label {\n        min-width: 0;\n        overflow: hidden;\n    }\n\n    .view-select .label > span {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        display: block;\n    }\n\n    .view-select-container .options {\n        background-color: var(--color-normal-fill-emphasis);\n        position: absolute;\n        will-change: top, left;\n        transform-origin: center top 0px;\n        top: 28px;\n        right: 10px;\n        max-height: 300px;\n        max-width: 180px;\n        overflow: auto;\n        padding: 5px 0;\n        box-sizing: border-box;\n        border-radius: calc(var(--size-normal-radius) * 2px);\n        z-index: 99;\n    }\n\n    .options ul {\n        width: 100%;\n        list-style: none;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .options ul > li {\n        margin: 0;\n        padding-left: 8px;\n        clear: both;\n        font-size: inherit;\n        list-style: none;\n        cursor: pointer;\n        transition: background 0.2s ease-in-out;\n        height: 24px;\n        line-height: 24px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        box-sizing: border-box;\n    }\n\n    .view-select-container .view-select:hover {\n        color: var(--color-focus-contrast-emphasis);\n    }\n\n    .options ul > li:hover {\n        background: var(--color-hover-fill);\n    }\n\n    .options ul > .selected {\n        background-color: var(--color-focus-fill-emphasis);\n    }\n\n    .options ul > .separator {\n        font-size: 0px;\n        height: 1px;\n        width: calc(100% - 8px);\n        overflow: hidden;\n        background-color: var(--color-default-border-weakest);\n        pointer-events: none;\n        margin: 4px 0;\n        align-self: center;\n    }\n\n    .options ul .no_options {\n        display: inline-block;\n        min-width: 98px;\n        pointer-events: none;\n    }\n\n    .view-select-container[focused] {\n        border-color: var(--color-focus-border);\n    }\n    .view-select-container[disabled] {\n        cursor: not-allowed;\n        opacity: 0.4;\n        pointer-events: none;\n    }\n    .view-select-container[readonly] {\n        pointer-events: none;\n    }\n    .view-select-container[hidden] {\n        display: none;\n    }\n\n    .camera-size {\n        --color-normal-fill-weaker: var(--color-default-fill-emphasis);\n        box-sizing: border-box;\n        height: 24px;\n        line-height: 24px;\n        margin: 0 8px;\n    }\n</style>\n',exports.$={cameraSize:".camera-size"},exports.methods={},exports.ready=ready,exports.update=update,exports.close=close,exports.default=module.exports;
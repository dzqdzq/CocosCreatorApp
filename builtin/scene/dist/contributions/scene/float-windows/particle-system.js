"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var l=Object.getOwnPropertyDescriptor(t,i);l&&("get"in l?t.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,l)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;let timer=null;const type="cc.ParticleSystem",width=200,height=160,bottom=10,right=10,template='\n<style>\n    .scene-particle ui-prop { --left-width: 60%; margin-bottom: 4px; }\n    .scene-particle .buttons { display: flex; justify-content: space-around; margin-bottom: 8px; }\n    .scene-particle .buttons ui-button { padding: 0 8px; width: 56px; }\n</style>\n<div class="scene-particle">\n    <div class="buttons">\n        <ui-button class="toggle">\n            <ui-icon class="toggle-icon" value="play"></ui-icon>\n        </ui-button>\n        <ui-button class="reset"><ui-icon value="refresh"></ui-icon></ui-button>\n        <ui-button class="stop"><ui-icon value="stop"></ui-icon></ui-button>\n    </div>\n    <ui-prop>\n        <ui-label slot="label" value="Playback Speed"></ui-label>\n        <ui-num-input slot="content" class="speed"></ui-num-input>\n    </ui-prop>\n    <ui-prop>\n        <ui-label slot="label" value="Playback Time"></ui-label>\n        <ui-num-input slot="content" class="time" disabled></ui-num-input>\n    </ui-prop>\n    <ui-prop>\n        <ui-label slot="label" value="Particle"></ui-label>\n        <ui-num-input slot="content" class="total" disabled></ui-num-input>\n    </ui-prop>\n</div>\n';async function ready(e,t,i){null!==timer&&clearTimeout(timer);const n=e.parentElement;if(!n)return;const l=t.nodes.length>1;if(!i[type]||!i[type][0].enabled)return void(e.hidden=!0);const r=i[type][0].uuid;let u=!1;const a=e.querySelector(".scene-particle .toggle"),o=e.querySelector(".scene-particle .toggle .toggle-icon"),c=e.querySelector(".scene-particle .reset"),s=e.querySelector(".scene-particle .stop");a.addEventListener("confirm",()=>{u?n.callSceneMethod("pauseParticle",[]):(n.callSceneMethod("playParticle",[]),Editor.Metrics._trackEventWithTimer({category:"particleSystem",id:"A100014",value:1}))}),c.addEventListener("confirm",()=>{n.callSceneMethod("restartParticle",[])}),s.addEventListener("confirm",()=>{n.callSceneMethod("stopParticle",[])});const p=e.querySelector(".scene-particle .speed"),d=e.querySelector(".scene-particle .total"),b=e.querySelector(".scene-particle .time");l&&(null===p||void 0===p||p.setAttribute("invalid",""),null===d||void 0===d||d.setAttribute("invalid",""),null===b||void 0===b||b.setAttribute("invalid","")),p.addEventListener("confirm",e=>{n.callSceneMethod("setParticlePlaySpeed",[r,Number(e.target.value)])}),async function e(){const t=await n.callSceneMethod("queryParticlePlayInfo",[r]);t&&(u=!!t.isPlaying,p.setAttribute("value",t.speed),d.setAttribute("value",t.particle),b.setAttribute("value",t.time),o.setAttribute("value",u?"pause":"play"),timer=setTimeout(()=>{e()},300))}()}async function close(){null!==timer&&clearTimeout(timer)}function update(e){}const configs={ready:ready,update:update,type:type,template:template,width:200,height:160,bottom:10,right:10,close:close};module.exports=configs,exports.default=__importStar(require("./particle-system"));
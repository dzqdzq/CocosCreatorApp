"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let timer=null;const type="cc.ParticleSystem",width=200,height=160,bottom=10,right=10,template='\n<style>\n    .scene-particle ui-prop { --left-width: 60%; margin-bottom: 4px; }\n    .scene-particle .buttons { display: flex; justify-content: space-around; margin-bottom: 8px; }\n    .scene-particle .buttons ui-button { padding: 0 8px; width: 56px; }\n</style>\n<div class="scene-particle">\n    <div class="buttons">\n        <ui-button class="toggle">\n            <ui-icon class="toggle-icon" value="play"></ui-icon>\n        </ui-button>\n        <ui-button class="reset"><ui-icon value="refresh"></ui-icon></ui-button>\n        <ui-button class="stop"><ui-icon value="stop"></ui-icon></ui-button>\n    </div>\n    <ui-prop>\n        <ui-label slot="label" value="Playback Speed"></ui-label>\n        <ui-num-input slot="content" class="speed"></ui-num-input>\n    </ui-prop>\n    <ui-prop>\n        <ui-label slot="label" value="Playback Time"></ui-label>\n        <ui-num-input slot="content" class="time" disabled></ui-num-input>\n    </ui-prop>\n    <ui-prop>\n        <ui-label slot="label" value="Particle"></ui-label>\n        <ui-num-input slot="content" class="total" disabled></ui-num-input>\n    </ui-prop>\n</div>\n';async function ready(e,t,i){null!==timer&&clearTimeout(timer);const l=e.parentElement;if(!l)return;const n=t.nodes.length>1;if(!i[type]||!i[type][0].enabled)return void(e.hidden=!0);const u=i[type][0].uuid;let a=!1;const c=e.querySelector(".scene-particle .toggle"),o=e.querySelector(".scene-particle .toggle .toggle-icon"),r=e.querySelector(".scene-particle .reset"),s=e.querySelector(".scene-particle .stop");c.addEventListener("confirm",()=>{a?l.callSceneMethod("pauseParticle",[]):(l.callSceneMethod("playParticle",[]),Editor.Metrics._trackEventWithTimer({category:"particleSystem",id:"A100014",value:1}))}),r.addEventListener("confirm",()=>{l.callSceneMethod("restartParticle",[])}),s.addEventListener("confirm",()=>{l.callSceneMethod("stopParticle",[])});const p=e.querySelector(".scene-particle .speed"),d=e.querySelector(".scene-particle .total"),m=e.querySelector(".scene-particle .time");n&&(null===p||void 0===p||p.setAttribute("invalid",""),null===d||void 0===d||d.setAttribute("invalid",""),null===m||void 0===m||m.setAttribute("invalid","")),p.addEventListener("confirm",e=>{l.callSceneMethod("setParticlePlaySpeed",[u,Number(e.target.value)])}),async function e(){const t=await l.callSceneMethod("queryParticlePlayInfo",[u]);t&&(a=!!t.isPlaying,p.setAttribute("value",t.speed),d.setAttribute("value",t.particle),m.setAttribute("value",t.time),o.setAttribute("value",a?"pause":"play"),timer=setTimeout(()=>{e()},300))}()}async function close(){null!==timer&&clearTimeout(timer)}function update(e){}const configs={ready:ready,update:update,type:type,template:template,width:200,height:160,bottom:10,right:10,close:close};module.exports=configs,exports.default=module.exports;
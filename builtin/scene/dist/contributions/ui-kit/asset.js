"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.element=void 0;const path_1=require("path");class element extends Editor.UI.DragObject{constructor(){if(super(),this.shadowRoot){this.shadowRoot.querySelector("#custom-style").innerHTML=".type ui-icon { color: var(--color-primary-fill-normal); }"}}_onAreaClick(){Editor.Message.broadcast("ui-kit:touch-asset",this.$root.value)}_onSelectClick(){if(this.$root.disabled||this.$root.readonly)return;const e=Date.now();Editor.Panel._kitControl.open({$kit:this.$root,name:"ui-kit.searcher",value:this.$root.value,droppable:this.$root.droppable,type:"asset",timestamp:e,events:{confirm:e=>{this.$root.value=e,this.$root.dispatch("confirm")},change:e=>{this.$root.value=e,this.$root.dispatch("change")}}})}async _onTranslationName(e){let t="";if(e&&"string"==typeof e){const s=await Editor.Message.request("asset-db","query-asset-info",e);if(s){t=s.source?path_1.basename(s.source):s.displayName?s.displayName:s.name;const e=this._droppable.split(",").filter(Boolean);let o=e.includes(s.type);s.extends&&s.extends.length&&e.forEach(e=>{s.extends&&s.extends.includes(e)&&(o=!0)}),o?(this.removeAttribute("error"),this.removeAttribute("state")):this.setAttribute("error",!0)}t?this.removeAttribute("missing"):(this.setAttribute("missing",!0),t="Missing Asset")}else this.removeAttribute("missing"),this.removeAttribute("error");return t}}exports.element=element;
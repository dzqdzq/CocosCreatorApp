"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validatePasteEnable=exports.PROPERTY_CLIPBOARD_HANDLE=exports.setVecInput=exports.setElementReadonly=exports.setElementInvalid=exports.getNameByDump=exports.getDocsURL=exports.isI18nValid=exports.isI18nPrefix=void 0;const sentry=require("@editor/creator/dist/sentry/index")["sentry"],i18nPrefix="i18n:",isI18nPrefix=e=>e.startsWith(i18nPrefix),isI18nValid=(exports.isI18nPrefix=isI18nPrefix,e=>{return!!(0,exports.isI18nPrefix)(e)&&(e=e.substring(i18nPrefix.length),!!Editor.I18n.t(e))}),getDocsURL=(exports.isI18nValid=isI18nValid,e=>{var t=e.displayName&&e.displayName.match(/(?<=(cc|sp)\.\s*)(\w+)/),t=t&&0<t.length?t[0]:"";return t?Editor.App.urls.api+`/class/${t}?id=`+e.name:""}),getNameByDump=(exports.getDocsURL=getDocsURL,e=>{if(e.displayName&&"string"==typeof e.displayName){var t=e.displayName.trim();if(t&&!(0,exports.isI18nPrefix)(t))return t;var r=t.substring(i18nPrefix.length);if(Editor.I18n.t(r))return t}let i=e.name||"";return(i=(i=(i=(i=i.trim().replace(/^\S/,e=>e.toUpperCase())).replace(/_/g," ")).replace(/ \S/g,e=>" "+e.toUpperCase())).replace(/([a-z])([A-Z])/g,"$1 $2")).trim()}),setElementInvalid=(exports.getNameByDump=getNameByDump,(e,t)=>{let r=e.value;const i=null!==e.value&&"object"==typeof e.value;i&&(r=JSON.stringify(e.value)),e.values&&e.values.some(e=>i?JSON.stringify(e)!==r:e!==r)?t.setAttribute("invalid",""):t.removeAttribute("invalid")}),vecAttrs=(exports.setElementInvalid=setElementInvalid,["min","max","step"]),setElementReadonly=(e,t)=>{e&&e.readonly?t.setAttribute("readonly",""):t.removeAttribute("readonly")},setVecInput=(exports.setElementReadonly=setElementReadonly,(t,r)=>{const i=r.getAttribute("local"),s=t.value;var e,n=t.values;i&&s&&void 0!==s[i]&&(null===s[i]?(e=new Error(`the ${i} of ${s} is null in `+t.name),sentry.catchException(e)):(r.setAttribute("value",s[i].toString()),n&&n.some(e=>e[i]!==s[i])?r.setAttribute("invalid",""):r.removeAttribute("invalid"),vecAttrs.forEach(e=>{e in t?r.setAttribute(e,t[e]):r.removeAttribute(e)}),(0,exports.setElementReadonly)(t,r),r.removeAttribute("warn"),r.removeAttribute("hidden"),t.lock&&(e=t.lock[i])&&(r.setAttribute("warn",""),e.default===s[i]&&r.setAttribute("hidden",""),e.message)&&r.setAttribute("tooltip",e.message)))}),validatePasteEnable=(exports.setVecInput=setVecInput,exports.PROPERTY_CLIPBOARD_HANDLE="PROPERTY_CLIPBOARD_HANDLE",(i,e)=>{var t,r;if(!e)return!1;try{var s=JSON.parse(e);const{type:n,value:a,enumList:l=[],bitmaskList:o=[]}=s;if(void 0===n||void 0===a)return!1;if(n!==i.type||Boolean(i.isArray)!==Array.isArray(a)||i.readonly)return!1;switch(n){case"BitMask":return o.length===(null==(t=i.bitmaskList)?void 0:t.length)&&o.every((e,t)=>{var r;return e.name===(null==(r=i.bitmaskList)?void 0:r[t].name)&&e.value===(null==(r=i.bitmaskList)?void 0:r[t].value)});case"Enum":return l.length===(null==(r=i.enumList)?void 0:r.length)&&l.every((e,t)=>{var r;return e.name===(null==(r=i.enumList)?void 0:r[t].name)&&e.value===(null==(r=i.enumList)?void 0:r[t].value)})&&l.some(e=>e.value===a);default:return!0}}catch(e){return!1}});exports.validatePasteEnable=validatePasteEnable;
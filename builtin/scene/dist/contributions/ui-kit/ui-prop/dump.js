"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.setInvalid=exports.update=exports.listeners=exports.template=void 0,exports.template="",exports.listeners={change(e){const t=this;t.__info__&&t.__info__.listeners&&t.__info__.listeners.change&&t.__info__.listeners.change.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("change-dump",{detail:e.detail}),e.stopPropagation(),e.preventDefault()},confirm(e){const t=this;t.__info__&&t.__info__.listeners&&t.__info__.listeners.confirm&&t.__info__.listeners.confirm.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("confirm-dump"),e.stopPropagation(),e.preventDefault()},cancel(e){const t=this;t.__info__.listeners&&t.__info__.listeners.cancel&&t.__info__.listeners.cancel.call(t.__infoThis__,e),t.$this.dump&&t.$this.dispatch("change-dump"),e.stopPropagation(),e.preventDefault()},preview(e){const t=this;if(t.$this.dump){const{method:i,value:s}=e.detail;t.$this.dispatch("preview-dump",{detail:{method:i,value:s}})}e.stopPropagation(),e.preventDefault()},create(e){const t=this;t.$this.dump&&t.$this.dispatch("create-dump"),e.stopPropagation(),e.preventDefault()},reset(e){const t=this;t.$this.dump&&t.$this.dispatch("reset-dump"),e.stopPropagation(),e.preventDefault()}};const elements={objectOptionalTypes:require("./types/object-optional-types"),Array:require("./types/array"),Unknown:require("./types/unknown"),Null:require("./types/null"),Number:require("./types/number"),Float:require("./types/number"),Integer:require("./types/number"),Boolean:require("./types/boolean"),String:require("./types/string"),Enum:require("./types/enum"),BitMask:require("./types/bit-mask"),"cc.Object":require("./types/object"),"cc.Color":require("./types/color"),"cc.Size":require("./types/size"),"cc.Vec2":require("./types/vec2"),"cc.Vec3":require("./types/vec3"),"cc.Vec4":require("./types/vec4"),"cc.Quat":require("./types/vec4"),"cc.Rect":require("./types/rect"),"cc.Mat4":require("./types/mat4"),"cc.AnimationCurve":require("./types/real-curve"),"cc.RealCurve":require("./types/real-curve"),"cc.CurveRange":require("./types/curve-range"),"cc.Gradient":require("./types/gradient"),"cc.GradientRange":require("./types/gradient-range"),"cc.SkeletalAnimation.Socket":require("./types/animation-socket"),"sp.Skeleton.SpineSocket":require("./types/animation-socket"),"dragonBones.ArmatureDisplay.DragonBoneSocket":require("./types/animation-socket"),"cc.ClickEvent":require("./types/click-event"),"cc.Node":require("./types/node"),"cc.Asset":require("./types/asset"),"cc.Component":require("./types/component")},checkValueMatchType={basicTypesLegalCCTypes:{Number:["Number","Float","Integer","BitMask","Enum"],Boolean:["Boolean","Enum"],String:["String","Enum"]},isLegal(e){const t=this.getBasicType(e.value),i=this.basicTypesLegalCCTypes[t];if(i&&!i.includes(e.type))return!1;if(void 0!==e.default){const t=this.getBasicType(e.default);if("Null"===t&&i)return!1;const s=this.basicTypesLegalCCTypes[t];if(s&&!s.includes(e.type))return!1}return!0},getBasicType(e){const t=Object.prototype.toString.call(e).match(/\s([^\]]+)]/);return t&&t[1]||""}};function getElementType(e){let t=e.type;return"Unknown"===t?t:(e.isArray?(t="Array",Array.isArray(e.value)?(t="Array",void 0===e.default||Array.isArray(e.default)||(t="Unknown")):t="Unknown"):Array.isArray(e.value)?t="Unknown":checkValueMatchType.isLegal(e)?e.extends&&(e.extends.includes("cc.Node")?t="cc.Node":e.extends.includes("cc.Asset")?t="cc.Asset":e.extends.includes("cc.Component")&&(t="cc.Component")):t="Unknown",e.optionalTypes&&(t="objectOptionalTypes"),t in elements||(t=null===e.value?"Null":"cc.Object"),t)}const i18nPrefix="i18n:";function i18nDisplayNameIfIllegalShowName(e){if("string"==typeof e.displayName){const t=e.displayName.trim();if(t.startsWith(i18nPrefix)){const i=t.substring(i18nPrefix.length);Editor.I18n.t(i)||(e.displayName="")}}}function update(e){const t=this;i18nDisplayNameIfIllegalShowName(e);const i=getElementType(e);t.$this.setAttribute("dump",i),e.readonly?t.$this.setAttribute("readonly",!0):t.$this.removeAttribute("readonly");const s=elements[i];if("false"!==t.$this.getAttribute("html")){if(t.__info__!==s){s.style=s.style||"";const e=t.$this.shadowRoot.querySelector("#custom-style");s.style&&e.innerHTML!==s.style?e.innerHTML=s.style:e.innerHTML="";let i="";s.template&&(i+=s.template),i&&(t.$this.innerHTML=i);const n={$this:t.$this,$:{}};if(s.methods)for(const e in s.methods)n[e]=s.methods[e];if(s.$)for(const e in s.$){const i=t.$this.querySelectorAll(s.$[e]);n.$[e]=i.length>1?i:i[0]||null}s.ready.call(n),t.__infoThis__=n,t.__info__=s}s.update.call(t.__infoThis__,e)}t.$this.dump=e}function setInvalid(e,t){let i=e.value;const s=null!==e.value&&"object"==typeof e.value;s&&(i=JSON.stringify(e.value)),e.values&&e.values.some(e=>s?JSON.stringify(e)!==i:e!==i)?t.setAttribute("invalid",""):t.removeAttribute("invalid")}function ready(){}exports.update=update,exports.setInvalid=setInvalid,exports.ready=ready;
"use strict";async function update(e){const t=this,s=t.$this;let n="root",a=s.parentElement;for(;a;){if(a.hasAttribute("cache-expand")){n=a.getAttribute("cache-expand");break}a=a.parentElement}const o=`${e.name}:${e.type}`;t.$.container.setAttribute("cache-expand",`${n}-${o}`);const r=t.$.label;s.setLabel(r,e),s.setAttribute("no-label",""),t.stageTypes=await Editor.Message.request("scene","query-all-render-stages");let i="";t.stageTypes.forEach(e=>{i+=`<option value="${e.name}">${e.name}</option>`}),t.$.select.innerHTML=i,t.$.select.value=e.type,s.setReadonly(e,t.$.select);const l=t.$.content;if("RenderStage"===e.type)return void(l.style.display="none");l.style.display="block";const p=Object.keys(t.$propList),c=[];for(let s in e.value){const n=e.value[s];if(!n.visible)continue;const a=`${n.type}:${n.name}`;c.push(a);let o=t.$propList[a];o||((o=document.createElement("ui-prop")).setAttribute("type","dump"),l.appendChild(o),t.$propList[a]=o),e.values&&(n.values=e.values.map(e=>e[s].value)),o.render(n)}for(const e of p)if(!c.includes(e)){const s=t.$propList[e];s&&s.parentElement&&s.parentElement.removeChild(s)}}function ready(){this.$propList={};const e=this.$this;this.$.select.addEventListener("change",async t=>{t.stopPropagation();const s=t.target.value;if(e.dump.type!==s){let t=0,n=e.parentElement;for(;n;){if(n.hasAttribute("array-index")){t=n.getAttribute("array-index");break}n=n.parentElement}const a=e.getAttribute("array-index");await Editor.Message.request("scene","select-render-stage",s,t,a),e.dispatch("change")}},!0)}function close(){this.$propList={}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.update=exports.$=exports.template=void 0,exports.template='\n<ui-section no-border expand>\n    <ui-label slot="header" class="prop-name"></ui-label>\n    <ui-select slot="header" class="prop-content"></ui-select>\n    <div class="content"></div>\n</ui-section>\n',exports.$={container:"ui-section",label:"ui-label",select:"ui-select",content:".content"},exports.update=update,exports.ready=ready,exports.close=close;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.style=exports.template=void 0;const defaultCurveConfig={xRange:[0,1],yRange:[0,1],precisionX:4,precisionY:4,showPreWrapMode:!0,showPostWrapMode:!0,type:"hermit",negative:!1},ChangeToCurveRange="change-to-curve-range";function update(e){var t,n,a,i;this.dump=e;const r=this.$this,o=this.$.label;r.setLabel(o,e);const u=JSON.parse(JSON.stringify(defaultCurveConfig)),l=this.$.curve;let p=!1;r.hasAttribute(ChangeToCurveRange)?(u.yRange=[null!==(t=e.value.min)&&void 0!==t?t:-1,null!==(n=e.value.max)&&void 0!==n?n:1],void 0!==e.value.min&&null!==e.value.min||(p=!0)):(u.yRange=[null!==(a=e.min)&&void 0!==a?a:-1,null!==(i=e.max)&&void 0!==i?i:1],void 0!==e.min&&null!==e.min||(p=!0)),u.negative=!(u.yRange[0]>=0&&!1===p),l._config=u,l.setAttribute("label",e.displayName||e.name),l.value=changeDumpValueToCurveValue(e.value)}function changeDumpValueToCurveValue(e){return e.radian&&(e.multiplier=1===e.multiplier?180:e.multiplier),{postWrapMode:e.postExtrap,preWrapMode:e.preExtrap,keys:e.keyFrames.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,point:{x:e.time,y:e.value},interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})),multiplier:e.multiplier}}function changeCurveValueToDumpValue(e){return e.radian&&(e.multiplier=e.multiplier||1),{postExtrap:e.postWrapMode,preExtrap:e.preWrapMode,keyFrames:e.keys.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,time:e.point.x,value:e.point.y,interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})),multiplier:e.multiplier}}function ready(){const e=this,t=e.$this,n=e.$.curve;n.hasBindListener||(n.addEventListener("change",n=>{const a=n.target.value,i=e.dump;a.keys.sort((e,t)=>e.point.x-t.point.x),i.value=changeCurveValueToDumpValue(a),t.hasAttribute(ChangeToCurveRange)?t.dispatch(ChangeToCurveRange,{detail:{value:a,path:i.path,type:i.type}}):t.dispatch("change"),n.stopPropagation(),n.preventDefault()}),n.hasBindListener=!0)}exports.template='\n<ui-label slot="label"></ui-label>\n<ui-curve slot="content"></ui-curve>\n',exports.style="\n:host .content::slotted(ui-curve) {\n    height: 20px;\n    border: var(--color-normal-border) 1px solid;\n    box-sizing: border-box;\n    background: var(--color-normal-fill-emphasis);\n    cursor: pointer;\n}\n",exports.$={curve:"ui-curve",label:"ui-label"},exports.update=update,exports.ready=ready;
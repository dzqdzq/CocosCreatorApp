"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.template=void 0;const defaultCurveConfig={xRange:[0,1],yRange:[0,1],precision:4,showPreWrapMode:!0,showPostWrapMode:!0,type:"hermit",negative:!1};function update(e){this.dump=e;const t=JSON.parse(JSON.stringify(defaultCurveConfig)),n=this.$.curve;t.yRange=e.value.min&&[e.value.min,e.value.max]||[0,1],t.negative=!(t.yRange[0]>=0),n._config=t,n.setAttribute("label",e.displayName||e.name),n.value=changeDumpValueToCurveValue(e.value)}function changeDumpValueToCurveValue(e){return e.radian&&(e.multiplier=1===e.multiplier?180:e.multiplier),{postWrapMode:e.postExtrap,preWrapMode:e.preExtrap,keys:e.keyFrames.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,point:{x:e.time,y:e.value},interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})),multiplier:e.multiplier}}function changeCurveValueToDumpValue(e){return e.radian&&(e.multiplier=e.multiplier||1),{postExtrap:e.postWrapMode,preExtrap:e.preWrapMode,keyFrames:e.keys.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,time:e.point.x,value:e.point.y,interpMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,outTangentWeight:e.outTangentWeight,inTangentWeight:e.inTangentWeight})),multiplier:e.multiplier}}function ready(){const e=this,t=e.$.curve;t.hasBindListener||(t.addEventListener("change",t=>{const n=t.target.value,a=e.dump;a.value=changeCurveValueToDumpValue(n),e.$this.dispatch("animation-curve-change",{detail:{value:n,path:a.path}}),t.stopPropagation(),t.preventDefault()}),t.hasBindListener=!0)}exports.template='\n<style>\n    .animation-curve-canvas {\n        width: 100%;\n        height: 22px;\n        border: var(--color-normal-border) 1px solid;\n        background: var(--color-normal-fill-emphasis);\n        cursor: pointer;\n    }\n</style>\n<ui-curve class="animation-curve-canvas"></ui-curve>\n',exports.$={curve:"ui-curve"},exports.update=update,exports.ready=ready;
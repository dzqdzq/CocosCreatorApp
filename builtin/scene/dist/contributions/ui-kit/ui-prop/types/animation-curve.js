"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.$=exports.template=void 0;const defaultCurveConfig={xRange:[0,1],yRange:[0,1],precision:4,showPreWrapMode:!0,showPostWrapMode:!0,type:"hermit",negative:!1};function update(e){this.dump=e;const a=JSON.parse(JSON.stringify(defaultCurveConfig));let n=!1;const t=this.$.curve;e.values&&e.values.length>1&&(n=!isValuesEqual(e.values),t.value=null),n||(a.yRange=e.value.min&&[e.value.min,e.value.max]||[0,1],a.negative=!(a.yRange[0]>=0),t._config=a,t.setAttribute("label",e.displayName||e.name),t.value=changeDumpValueToCurveValue(e.value))}function isValuesEqual(e){const a=JSON.stringify(e[0]);for(let n=e.length-1;n>0;n--)if(a!==JSON.stringify(e[n]))return!1;return!0}function changeDumpValueToCurveValue(e){return e.radian&&(e.multiplier=180),{postWrapMode:e.postWrapMode,preWrapMode:e.preWrapMode,keys:e.keyFrames.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,point:{x:e.time,y:e.value}})),multiplier:e.multiplier}}function changeCurveValueToDumpValue(e){return e.radian&&(e.multiplier=1),{postWrapMode:e.postWrapMode,preWrapMode:e.preWrapMode,keyFrames:e.keys.map(e=>({inTangent:e.inTangent,outTangent:e.inTangent,time:e.point.x,value:e.point.y})),multiplier:e.multiplier}}function ready(){const e=this,a=e.$.curve;a.hasBindListener||(a.addEventListener("change",a=>{const n=a.target.value,t=e.dump;if(t.value=changeCurveValueToDumpValue(n),t.values){new Array(t.values.length).fill(t.value)}e.$this.dispatch("animation-curve-change",{detail:{value:n,path:t.path}}),a.stopPropagation(),a.preventDefault()}),a.hasBindListener=!0)}exports.template='\n<style>\n    .animation-curve-canvas {\n        width: 100%;\n        height: 22px;\n        border: var(--color-normal-border) 1px solid;\n        background: var(--color-normal-fill-emphasis);\n        cursor: pointer;\n    }\n</style>\n<ui-curve class="animation-curve-canvas"></ui-curve>\n',exports.$={curve:"ui-curve"},exports.update=update,exports.ready=ready;
"use strict";async function update(e){const t=this,s=t.$this;let n="root",o=s.parentElement;for(;o;){if(o.hasAttribute("cache-expand")){n=o.getAttribute("cache-expand");break}o=o.parentElement}const a=`${e.name}:${e.type}`;t.$.container.setAttribute("cache-expand",`${n}-${a}`);const r=t.$.label;s.setLabel(r,e),s.setAttribute("no-label",""),t.flowTypes=await Editor.Message.request("scene","query-all-render-flows");let l="";t.flowTypes.forEach(e=>{l+=`<option value="${e.name}">${e.name}</option>`}),t.$.select.innerHTML=l,t.$.select.value=e.type,s.setReadonly(e,t.$.select);const i=t.$.content;if("RenderFlow"===e.type)return void(i.style.display="none");i.style.display="block";const p=Object.keys(t.$propList),c=[];for(const s in e.value){const n=e.value[s];if(!n.visible)continue;const o=`${n.type}:${n.name}`;c.push(o);let a=t.$propList[o];a?a.isConnected&&a.parentElement||i.appendChild(a):((a=document.createElement("ui-prop")).setAttribute("type","dump"),i.appendChild(a),t.$propList[o]=a),e.values&&(n.values=e.values.map(e=>e[s].value)),a.render(n)}for(const e of p)if(!c.includes(e)){const s=t.$propList[e];s&&s.parentElement&&s.parentElement.removeChild(s)}}function ready(){this.$propList={};const e=this.$this;this.$.select.addEventListener("change",async t=>{t.stopPropagation();const s=t.target.value;if(e.dump.type!==s){const t=e.getAttribute("array-index");await Editor.Message.request("scene","select-render-flow",s,t),e.dispatch("change")}},!0)}function close(){this.$propList={}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.update=exports.$=exports.template=void 0,exports.template='\n<ui-section no-border expand>\n    <ui-label slot="header" class="prop-name"></ui-label>\n    <ui-select slot="header" class="prop-content"></ui-select>\n    <div class="content"></div>\n</ui-section>\n',exports.$={container:"ui-section",label:"ui-label",select:"ui-select",content:".content"},exports.update=update,exports.ready=ready,exports.close=close;
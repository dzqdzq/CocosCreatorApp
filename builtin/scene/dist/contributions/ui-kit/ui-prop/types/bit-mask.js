"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const dum_element_base_1=require("../dum-element-base"),utils_1=require("../utils");class BitMask extends dum_element_base_1.DumpElementBase{constructor(){super(...arguments),this.type=["BitMask"],this.$selectPro=null,this.list=[],this._listeners=["change"],this.template=`
        <ui-label slot="label"></ui-label>
        <ui-select-pro slot="content" multiple type="checkbox"></ui-select-pro>
    `,this.style=""}parseAndSetData(s,l){return l.value=s,Reflect.has(l,"values")&&l.values.forEach((e,t)=>{l.values[t]=s}),!0}change(e,t){e.stopPropagation(),e.preventDefault(),e.detail&&(e=(e.detail||[]).reduce((e,t)=>e^t,0),this.parseAndSetData(e,t))}mounted(e){this.$selectPro=e.querySelector("ui-select-pro")}ready(){super.ready()}createSelectOptions(e){var t,s=e.bitmaskList||[];if(this.list=s.map(e=>e.value),this.$selectPro){this.$selectPro.innerHTML="";for(const l of s)0!==l.value&&4294967295!==l.value&&((t=document.createElement("ui-select-option-pro")).setAttribute("value",l.value),t.setAttribute("label",l.name),0!=(l.value&Number(e.value))&&t.setAttribute("selected",""),this.$selectPro.appendChild(t))}}update(e){var t,s,l;super.update(e),this.$selectPro&&(this.list&&(t=(e.bitmaskList||[]).length===this.list.length,s=(e.bitmaskList||[]).every(e=>this.list.includes(e.value)),l=this.$selectPro.value.reduce((e,t)=>e^t,0),t)&&s&&l===e.value||this.createSelectOptions(e),(0,utils_1.setElementReadonly)(e,this.$selectPro),(0,utils_1.setElementInvalid)(e,this.$selectPro))}}exports.default=BitMask;
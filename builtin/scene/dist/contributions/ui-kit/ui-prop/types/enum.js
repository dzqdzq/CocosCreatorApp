"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const lodash_1=require("lodash"),dum_element_base_1=require("../dum-element-base"),utils_1=require("../utils"),tagName={select:"UI-SELECT",radio:"UI-RADIO-GROUP"};class Enum extends dum_element_base_1.DumpElementBase{type=["Enum"];$content=null;_listeners=["change"];parseAndSetData(n,a){return a.value=n,"values"in a&&a.values.forEach((e,t)=>{a.values[t]=n}),!0}change(t,n){if(t.target){let e=t.target.value;void 0!==e&&(isFinite(e)&&(e=+e),this.parseAndSetData(e,n))}}template=`
        <ui-label slot="label"></ui-label>
        <ui-select slot="content"></ui-select>`;style="";mounted(e){this.$content=e.querySelector('[slot="content"]')}ready(){super.ready()}updateContent(e,t){if(!this.$parentElement)return null;let n=this.$parentElement.querySelector("[slot=content]");return null!=n&&n.tagName!==e&&this.$parentElement.removeChild(n),null==n||n.tagName!==e?(e=t(!1),this.$parentElement.insertAdjacentHTML("beforeend",e),n=this.$parentElement.lastElementChild):n.innerHTML=t(!0),n}renderSelect(e){if(this.$parentElement){let t="";if(e.enumList)for(const a of e.enumList)t+=`<option value="${a.value}">${(0,lodash_1.escape)(a.name)}</option>`;var n=this.updateContent(tagName.select,e=>e?t:`<ui-select slot="content">${t}</ui-select>`);return n&&n.value!==e.value?.toString()&&(n.value=e.value?.toString()),n}}renderRadioGroup(e){if(this.$parentElement){let t="";if(e.enumList)for(const a of e.enumList)t+=`<ui-radio-button value="${a.value}">${(0,lodash_1.escape)(a.name)}</ui-radio-button>`;var n=this.updateContent(tagName.radio,e=>e?t:`<ui-radio-group slot="content">
${t}</ui-radio-group>`);return n&&(n.innerHTML=t,n.value!==e.value?.toString())&&(n.value=e.value?.toString()),n}}update(e){var t;super.update(e),this.$parentElement&&(t=!0===e.radioGroup?this.renderRadioGroup(e):this.renderSelect(e))&&(this.$content=t,(0,utils_1.setElementInvalid)(e,this.$content),(0,utils_1.setElementReadonly)(e,this.$content))}}exports.default=Enum;
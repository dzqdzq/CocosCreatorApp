"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const dum_element_base_1=require("../dum-element-base"),modeTransformMap={"0 -> 2":["color","colorMin"],"2 -> 0":["colorMin","color"],"1 -> 3":["gradient","gradientMin"],"3 -> 1":["gradientMin","gradient"]};class GradientRange extends dum_element_base_1.DumpElementBase{type=["cc.GradientRange"];$section=null;$icon=null;_listeners=[];template=`
        <ui-label slot="label"></ui-label>
        <section slot="content"></section>
        <ui-icon value="arrow-triangle" slot="content" style="flex: none;"></ui-icon>
    `;style="";parseAndSetData(e,t){const a=JSON.parse(JSON.stringify(e));return Object.keys(t.value).forEach(e=>{t.value[e].value=a[e].value}),!0}updateProps(t){if(this.$section&&this.$icon)if(t.values&&t.values.some(e=>e.mode.value!==t.value.mode.value))this.$section.innerHTML="Cannot edit different types";else{var e=Array.from(this.$section.querySelectorAll("ui-prop"));switch(e.length||(this.$section.innerHTML=""),[0,2,3,1,4].includes(t.value.mode.value)&&!e[0]&&(e[0]=document.createElement("ui-prop"),e[0].setAttribute("type","dump"),e[0].setAttribute("no-label",""),this.$section.appendChild(e[0])),t.value.mode.value){case 0:e[0].render(t.value.color),e[1]&&this.$section.removeChild(e[1]);break;case 1:e[0].render(t.value.gradient),e[1]&&this.$section.removeChild(e[1]);break;case 2:e[0].render(t.value.colorMin),e[1]||(e[1]=document.createElement("ui-prop"),e[1].setAttribute("type","dump"),e[1].setAttribute("no-label",""),e[1].style.marginTop="4px",this.$section.appendChild(e[1])),e[1].render(t.value.colorMax);break;case 3:e[0].render(t.value.gradientMin),e[1]||(e[1]=document.createElement("ui-prop"),e[1].setAttribute("type","dump"),e[1].setAttribute("no-label",""),e[1].style.marginTop="4px",this.$section.appendChild(e[1])),e[1].render(t.value.gradientMax);break;case 4:e[0].render(t.value.gradient),e[1]&&this.$section.removeChild(e[1])}}}mounted(e){this.$section=e.querySelector("section"),this.$icon=e.querySelector("ui-icon")}ready(){super.ready(),this.$icon&&this.$parentElement&&this.$icon.addEventListener("click",()=>{if(this.$parentElement){const n=this.$parentElement.dump;if(n){const l=this;Editor.Menu.popup({menu:n.value.mode.enumList.map(a=>({label:a.name,type:"radio",enabled:!n.readonly,checked:a.value===n.value.mode.value,click(){const t=modeTransformMap[n.value.mode.value+" -> "+a.value];n.value.mode.value=a.value,t&&(n.value[t[1]].value=n.value[t[0]].value),"values"in n&&(n.values.forEach(e=>{e.mode.value=a.value,t&&(e[t[1]].value=e[t[0]].value)}),n.value.mode.values=n.value.mode.values.map(e=>a.value)),l.$icon&&(l.$icon.dump=n.value.mode),l.updateProps(n);var e=new Event("change-dump",{bubbles:!0,cancelable:!0});t&&l.$section&&Array.from(l.$section.querySelectorAll("ui-prop"))[0].dispatchEvent(e),l.$icon&&l.$icon.dispatchEvent(e)}}))})}}})}update(e){super.update(e),this.updateProps(e)}}exports.default=GradientRange;
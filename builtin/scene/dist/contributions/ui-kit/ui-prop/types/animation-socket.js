"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.methods=exports.$=exports.template=exports.listeners=void 0;const utils_1=require("../../utils");function update(e){this._dump=e,this.refreshSocketPathList(),this.$.select.value=e.value.path.value,this.$.node.value=e.value.target.value.uuid}function ready(){}exports.listeners={change(e){const t=this,u=e.target.getAttribute("local"),a=e.target.value;switch(u){case"path":t._dump.value.path.value=a,"values"in t._dump&&t._dump.values.forEach(e=>{e.path.value=a});break;case"target":t._dump.value.target.value={uuid:a},"values"in t._dump&&t._dump.values.forEach(e=>{e.target.value={uuid:a}})}}},exports.template='\n<ui-label slot="label"></ui-label>\n<ui-prop>\n    <ui-label slot="label">Path</ui-label>\n    <ui-select slot="content" local="path"></ui-select>\n</ui-prop>\n<ui-prop dump="cc.Asset" style="margin-top: 4px;">\n    <ui-label slot="label">Target</ui-label>\n    <ui-node droppable="cc.Node" slot="content" local="target"></ui-node>\n</ui-prop>\n',exports.$={label:"ui-label",select:"ui-select",node:"ui-node"},exports.methods={findComponent(){let e=this.$this;do{if((e=e.parentElement||e.getRootNode().host)&&e.dump&&Array.isArray(e.dump.extends)&&-1!==e.dump.extends.indexOf("cc.Component"))break}while(e);return e},async refreshSocketPathList(){var e,t;const u=this,a=u.findComponent();let l="";if(null===(t=null===(e=null===a||void 0===a?void 0:a.dump)||void 0===e?void 0:e.value)||void 0===t?void 0:t.uuid){const e=a.dump.value.uuid.value,t=await Editor.Message.request((0,utils_1.getMessageProtocolScene)(u.$this),"execute-component-method",{uuid:e,name:"querySockets",args:[]});if(t)for(const e of t)l+=`<option value="${e}">${e}</option>`}u.$.select.innerHTML=l}},exports.update=update,exports.ready=ready;
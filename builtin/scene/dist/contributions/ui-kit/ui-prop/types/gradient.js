"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.update=exports.methods=exports.$=exports.template=exports.listeners=void 0;const Chroma=require("chroma-js");function update(e){this._dump=e;const t=this.$this,a=this.$.label;t.setLabel(a,e),this.updateGradient()}function ready(){}exports.listeners={change(e){const t=this,{alpha:a,color:r}=e.target.value,o=(a||[]).map(e=>({time:e.progress,alpha:Math.round(255*e.value)})),s=(r||[]).map(e=>{let t;try{t=Chroma(e.value).rgb()}catch(e){t=[255,255,255]}return{time:e.progress,color:t}});t._dump.value.alphaKeys=o,t._dump.value.colorKeys=s,"values"in t._dump&&t._dump.values.forEach(e=>{e.alphaKeys=o,e.colorKeys=s})}},exports.template='\n<ui-label slot="label"></ui-label>\n<ui-gradient slot="content"></ui-gradient>\n',exports.$={label:"ui-label",gradient:"ui-gradient"},exports.methods={updateGradient(){const e=(this._dump.value.alphaKeys||[]).map(e=>(void 0===e.time&&(e.time=0),void 0===e.alpha&&(e.alpha=255),{progress:e.time,value:e.alpha/255})),t=(this._dump.value.colorKeys||[]).map(e=>{void 0===e.time&&(e.time=0),void 0===e.color&&(e.color=[255,255,255]);let t="";try{t=Chroma(e.color).hex()}catch(e){t="#ffffff"}return{progress:e.time,value:t}});this.$.gradient.value={color:t,alpha:e}}},exports.update=update,exports.ready=ready;
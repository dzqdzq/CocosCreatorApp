"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.close=exports.ready=exports.update=exports.methods=exports.$=exports.style=exports.template=void 0;const i18nPrefix="i18n:";function update(e){var t;const r=this,s=r.$this.renderInfo.panel,n=r.$.label;s.setLabel(e,n),r.$.type.value=`: ${e.type}`;const o=r.$this;o.setAttribute("no-label","");let a="root",p=o.parentElement;for(;p;){if(p.hasAttribute("cache-expand")){a=p.getAttribute("cache-expand")||"";break}p=p.parentElement}const i=e.path||`${e.name}:${e.type}`;r.$.container.setAttribute("cache-expand",`${a}-${i}`),o.hasAttribute("ui-section-config")&&r.$.container.setAttribute("class","config");const l=r.$.help;e.help&&(l.value=e.help,l.style.display="flex",(null===(t=e.editor)||void 0===t?void 0:t.help)&&(l.helpData=e.editor));const u=Object.keys(r.$propList),d=[];Object.keys(e.value).forEach((t,n)=>{var o,a;const p=e.value[t];if(!p.visible)return;d.push(t);let i=r.$propList[t];if(i){if(!i.isConnected||!i.parentElement)if(p.group&&e.groups){const{id:e="default",name:t}=p.group;r.appendChildByDisplayOrder(r.$groups[e].names[t],i)}else r.appendChildByDisplayOrder(r.$.container,i)}else{(i=document.createElement("ui-prop")).setAttribute("type","dump"),r.$propList[t]=i;const s=null!==(a=null===(o=p.group)||void 0===o?void 0:o.displayOrder)&&void 0!==a?a:p.displayOrder;if(i.displayOrder=void 0===s?n:Number(s),p.group&&e.groups){const{id:t="default",name:s}=p.group;!r.$groups[t]&&e.groups[t]&&("tab"===e.groups[t].style?r.$groups[t]=r.createTabGroup(e.groups[t]):"section"===e.groups[t].style&&(r.$groups[t]=r.createGroup(e.groups[t]))),r.$groups[t]&&(r.$groups[t].isConnected||r.appendChildByDisplayOrder(r.$.container,r.$groups[t]),"tab"===e.groups[t].style?r.appendToTabGroup(r.$groups[t],s):"section"===e.groups[t].style&&r.appendToGroup(r.$groups[t],s)),"tab"===e.groups[t].style?r.appendChildByDisplayOrder(r.$groups[t].tabs[s],i):"section"===e.groups[t].style&&r.appendChildByDisplayOrder(r.$groups[t].names[s],i)}else r.appendChildByDisplayOrder(r.$.container,i)}i.render(p),s.setReadonly(p,i)});for(const e of u)if(!d.includes(e)){const t=r.$propList[e];t&&t.parentElement&&t.parentElement.removeChild(t)}r.toggleGroup(r.$groups)}function ready(){this.$propList={},this.$groups={},this.$.help.addEventListener("click",e=>{e.stopPropagation()})}function close(){const e=this;for(const t in e.$groups)e.$groups[t].remove();e.$groups={}}exports.template='\n<ui-section expand>\n    <div slot="header" style="overflow: hidden;">\n        <ui-label name style="white-space: nowrap;"></ui-label>\n        <ui-label type style="white-space: nowrap;opacity: 0.55;margin-left: 4px;flex:auto;font-weight:normal;"></ui-label>\n        <ui-link style="display: none" tooltip="i18n:scene.menu.help_url">\n            <ui-icon value="help"><ui-icon>\n        </ui-link>\n    </div>\n</ui-section>\n',exports.style="\n:host { margin-left: 0; }\n",exports.$={container:"ui-section",label:"ui-label[name]",type:"ui-label[type]",help:"ui-link"},exports.methods={createGroup(e){const t=document.createElement("div");return t.setAttribute("class","ui-prop-group"),t.dump=e,t.names={},t.displayOrder=e.displayOrder,t},createTabGroup(e){const t=document.createElement("div");function r(e){const r=Object.keys(t.tabs)[e];t.childNodes.forEach(e=>{e.classList.contains("tab-content")&&(e.getAttribute("name")===r?e.style.display="block":e.style.display="none")})}return t.setAttribute("class","tab-group"),t.dump=e,t.tabs={},t.displayOrder=e.displayOrder,t.$header=document.createElement("ui-tab"),t.$header.setAttribute("class","tab-header"),t.appendChild(t.$header),t.$header.addEventListener("change",e=>{r(e.target.value)}),setTimeout(()=>{r(0)}),t},appendToGroup(e,t){if(e.names[t])return;const r=document.createElement("ui-section");r.setAttribute("class","ui-prop-group-content"),r.setAttribute("expand","");let s="ui-prop-group-content",n=e;for(;n;){if(n.hasAttribute("cache-expand")){s=n.getAttribute("cache-expand");break}n=n.parentElement}r.setAttribute("cache-expand",`${s}-${t}`);const o=document.createElement("ui-label");o.setAttribute("slot","header");let a=t;a=a.startsWith("i18n:")?this.getName({displayName:t}):this.getName({name:t}),o.setAttribute("value",a),r.appendChild(o),e.appendChild(r),e.names[t]=r},appendToTabGroup(e,t){if(e.tabs[t])return;const r=document.createElement("div");e.tabs[t]=r,r.setAttribute("class","tab-content"),r.setAttribute("name",t),e.appendChild(r);const s=document.createElement("ui-label");let n=t;n=n.startsWith("i18n:")?this.getName({displayName:t}):this.getName({name:t}),s.setAttribute("value",n);const o=document.createElement("ui-button");o.setAttribute("name",t),o.appendChild(s),e.$header.appendChild(o)},appendChildByDisplayOrder(e,t){const r=t.displayOrder||0,s=Array.from(e.children).find(e=>e.dump&&e.displayOrder>r?e:null);s?s.before(t):e.appendChild(t)},toggleGroup(e){for(const t in e){if("section"===e[t].dump.style){e[t].querySelectorAll(".ui-prop-group-content").forEach(e=>{Array.from(e.querySelectorAll(":scope > ui-prop")).some(e=>"none"!==getComputedStyle(e).display)?e.removeAttribute("hidden"):e.setAttribute("hidden","")})}if("tab"===e[t].dump.style){Array.from(e[t].querySelectorAll(".tab-content > ui-prop")).some(e=>"none"!==getComputedStyle(e).display)?e[t].removeAttribute("hidden"):e[t].setAttribute("hidden","")}}},getName(e){return this.$this.renderInfo.panel.getName(e)||""}},exports.update=update,exports.ready=ready,exports.close=close;
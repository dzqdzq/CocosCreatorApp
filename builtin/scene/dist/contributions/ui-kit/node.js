"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.element=void 0;class element extends Editor.UI.DragObject{constructor(){if(super(),this._nodeInfo=null,this.shadowRoot){this.shadowRoot.querySelector("#custom-style").innerHTML=".type ui-icon { color: var(--color-success-fill-normal); }"}}get filter(){try{return JSON.parse(this.getAttribute("filter"))}catch(t){console.error(t)}return null}set filter(t){"object"==typeof t?this.setAttribute("filter",JSON.stringify(t)):this.setAttribute("filter",t)}get nodeInfo(){return this._nodeInfo}_onAreaClick(){Editor.Message.broadcast("ui-kit:touch-node",this.$root.value)}_onSelectClick(){if(this.$root.disabled||this.$root.readonly)return;const t=Date.now();Editor.Panel._kitControl.open({$kit:this.$root,name:"ui-kit.searcher",value:this.$root.value,droppable:"cc.Node",type:"node",timestamp:t,filterOptions:this.$root.filter,events:{confirm:(t,e)=>{this.$root.value=t,this.$root._nodeInfo=e,this.$root.dispatch("confirm")},change:(t,e)=>{this.$root.value=t,this.$root._nodeInfo=e,this.$root.dispatch("change")},cancel:(t,e)=>{this.$root.value=t,this.$root._nodeInfo=e,this.$root.dispatch("cancel")}}})}async _onTranslationName(t){const e=await Editor.Message.request("scene","query-node",t);return e?(this.removeAttribute("missing"),e.name.value):(this.setAttribute("missing",!0),"Missing Node")}}exports.element=element;
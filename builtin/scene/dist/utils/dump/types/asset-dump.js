"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetDump=void 0;const{promisify:promisify}=require("util");class AssetDump{encode(e,s,u){s.value={uuid:e&&e._uuid||""}}async decode(e,s,u,a){if(Array.isArray(u.value)){const a=[];for(let e=0;e<u.value.length;e++){const s=u.value[e];if(s&&s.value.uuid&&!s.value.uuid.startsWith("ui-")){const t=await new Promise(e=>{cc.assetManager.loadAny(s.value.uuid,(u,a)=>{u?(console.error(`asset can't be load:${s.value.uuid}`),e(null)):e(a)})});if(t)a[e]=t;else{const s=EditorExtends.serialize.asAsset(u.value.uuid,cc.js._getClassById(u.type));s.initDefault(),a[e]=s}}else a[e]=null}e[s.key]=a}else if(u.value&&u.value.uuid&&!u.value.uuid.startsWith("ui-")){const a=await new Promise(e=>{cc.assetManager.loadAny(u.value.uuid,(s,a)=>{s?(console.error(`asset can't be load:${u.value.uuid}`),e(null)):e(a)})});if(a)e[s.key]=a;else{const a=EditorExtends.serialize.asAsset(u.value.uuid,cc.js._getClassById(u.type));a.initDefault(),e[s.key]=a}}else e[s.key]=null}}exports.assetDump=new AssetDump;
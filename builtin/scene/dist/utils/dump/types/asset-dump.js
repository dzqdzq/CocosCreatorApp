"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assetDump=void 0;const{promisify:promisify}=require("util");class AssetDump{encode(e,s,u){s.value={uuid:e&&e._uuid||""}}async decode(e,s,u,i){if(Array.isArray(u.value)){const i=[];for(let e=0;e<u.value.length;e++){const s=u.value[e];if(s&&s.value.uuid&&!s.value.uuid.startsWith("ui-")){const t=await promisify(cc.assetManager.loadAny)(s.value.uuid);if(t)i[e]=t;else{const s=EditorExtends.serialize.asAsset(u.value.uuid,cc.js._getClassById(u.type));s.initDefault(),i[e]=s}}else i[e]=null}e[s.key]=i}else if(u.value&&u.value.uuid&&!u.value.uuid.startsWith("ui-")){const i=await promisify(cc.assetManager.loadAny)(u.value.uuid);if(i)e[s.key]=i;else{const i=EditorExtends.serialize.asAsset(u.value.uuid,cc.js._getClassById(u.type));i.initDefault(),e[s.key]=i}}else e[s.key]=null}}exports.assetDump=new AssetDump;
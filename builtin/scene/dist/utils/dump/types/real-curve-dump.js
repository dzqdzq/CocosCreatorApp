"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.realCurveDump=void 0;class RealCurveDump{encode(e,t,n){t.value=this.encodeByObj(e,n),t.default&&(t.default=this.encodeByObj(t.default)),t.value.keyFrames.length||(t.value=t.default)}decode(e,t,n,a){if(n.value){const o=e[t.key];this.decodeByDump(n,o,a)}}encodeByObj(e,t){try{return{postExtrap:e.postExtrapolation,preExtrap:e.preExtrapolation,keyFrames:[...e.keyframes()].map(([e,t])=>({time:e,value:t.value,inTangent:t.leftTangent,outTangent:t.rightTangent,inTangentWeight:t.leftTangentWeight,outTangentWeight:t.rightTangentWeight,interpMode:t.interpolationMode,tangentWeightMode:t.tangentWeightMode}))}}catch(e){console.warn("Value dump failed."),console.warn(e);const n=t.ctor,a=cce.Utils.serialize(new n,{stringify:!1,forceInline:!0});return delete a.__type__,a}}decodeByDump(e,t,n){const a=e.value.keyFrames.map(e=>[e.time,{value:e.value,leftTangent:e.inTangent,rightTangent:e.outTangent,interpolationMode:e.interpMode,tangentWeightMode:e.tangentWeightMode,leftTangentWeight:e.inTangentWeight,rightTangentWeight:e.outTangentWeight}]);return t.assignSorted(a),t.postExtrapolation=e.value.postExtrap,t.preExtrapolation=e.value.preExtrap,t}}exports.realCurveDump=new RealCurveDump;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Pool{constructor(e,s){this._fn=e,this._idx=s-1,this._frees=new Array(s);for(let t=0;t<s;++t)this._frees[t]=e()}alloc(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);const e=this._frees[this._idx];return this._frees.splice(this._idx),--this._idx,e}free(e){++this._idx,this._frees[this._idx]=e}clear(e){for(let s=0;s<=this._idx;s++)e&&e(this._frees[s]);this._frees.splice(0),this._idx=-1}_expand(e){const s=this._frees;this._frees=new Array(e);const t=e-s.length;for(let e=0;e<t;++e)this._frees[e]=this._fn();for(let i=t,r=0;i<e;++i,++r)this._frees[i]=s[r];this._idx+=t}}exports.default=Pool;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseClient=void 0;class BaseClient{static getCrashTimeOfTenMin(e){return this.crashInfoList.filter(t=>t.day===e.day&&t.year===e.year&&t.month===e.month&&Math.abs(t.minute-e.minute)<=10).length}static async getAllCrashProfile(){var e;return null!==(e=await Editor.Profile.getConfig("scene","crash.native"))&&void 0!==e?e:[]}static async addCrashToProfile(e){this.crashInfoList.push(e),await Editor.Profile.setConfig("scene","crash.native",this.crashInfoList,"global")}static createDateInfo(){const e=new Date;return{day:e.getDay(),year:e.getFullYear(),month:e.getMonth(),minute:e.getMinutes()}}static getCrashTimesOfDay(e){return this.crashInfoList.filter(t=>t.day===e.day&&t.year===e.year&&t.month===e.month).length}constructor(){}load(e){void 0===BaseClient.crashInfoList&&(BaseClient.crashInfoList=[],BaseClient.getAllCrashProfile().then(e=>{BaseClient.crashInfoList.push(...e)})),this.webview=document.createElement("webview"),this.webview.setAttribute("webPreferences","webgl=1,nativeWindowOpen=1,contextIsolation=0,backgroundThrottling=0"),this.webview.setAttribute("contextIsolation","false"),this.webview.setAttribute("nodeintegration","true"),this.webview.setAttribute("nodeintegrationinsubframes","true"),this.webview.setAttribute("enableremotemodule","true"),this.webview.setAttribute("disablewebsecurity","true"),this.webview.setAttribute("allowpopups","true"),e.appendChild(this.webview)}unload(e){this.webview.setAttribute("src",""),this.webview.reload(),e.removeChild(this.webview)}show(){this.webview.setAttribute("style","pointer-events: none;flex:1;")}hide(){this.webview.setAttribute("style","display: none")}focus(){this.webview.focus()}reload(){this.webview.reload()}async restart(){return Promise.resolve(!0)}openDevTools(){var e,t;(null===(e=this.webview)||void 0===e?void 0:e.parentElement)?null===(t=this.webview)||void 0===t||t.openDevTools():console.warn(Editor.I18n.t("scene.game_view.devtool_invalid"))}getWebContentsId(){return this.webview.getWebContentsId()}}exports.BaseClient=BaseClient,BaseClient.isCrash=!1;
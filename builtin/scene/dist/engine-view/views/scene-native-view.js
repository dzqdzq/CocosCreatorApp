"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NativeView=void 0;const base_view_1=require("./base-view"),electronIpc=require("@base/electron-base-ipc"),scene_native_ipc_1=require("../ipc/scene-native-ipc"),listener_1=require("../listener"),tasks_1=__importDefault(require("../tasks"));class NativeView extends base_view_1.BaseView{constructor(){super(),this.ipc=new scene_native_ipc_1.HostIpc}async init(){electronIpc.send("engine-view:ready",!0),require("@editor/creator/dist/require"),Editor.Startup.ready.package?this.depend.finish(tasks_1.default.editorInit[0]):Editor.Startup.once("package-ready",()=>{this.depend.finish(tasks_1.default.editorInit[0])}),await this.depend.execute(tasks_1.default.assetDbReady[0])&&this.depend.finish(tasks_1.default.assetDbReady[0]),await this.depend.execute(tasks_1.default.packerDriverReady[0])&&this.depend.finish(tasks_1.default.packerDriverReady[0]),this.info=await this.depend.execute(tasks_1.default.queryEngineInfo[0]),this.depend.finish(tasks_1.default.queryEngineInfo[0]),(0,listener_1.init)(this)}}exports.NativeView=NativeView;
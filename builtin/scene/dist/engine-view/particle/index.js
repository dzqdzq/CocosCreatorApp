"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(){var i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),a=0;a<r.length;a++)"default"!==r[a]&&__createBinding(t,e,r[a]);return __setModuleDefault(t,e),t}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.particleMgr=void 0;const plist=__importStar(require("plist")),path_1=require("path"),fs_1=require("fs");class ParticleManager{async exportParticlePlist(e,t){var r=(await Editor.Dialog.save({title:"Save Particle",path:(0,path_1.join)(Editor.Project.path,"assets"),filters:[{name:"Particle",extensions:["plist"]}]})).filePath;if(r){var a=(0,path_1.join)(Editor.Project.path,"assets");if(Editor.Utils.Path.contains(a,r))try{var i=e||"db://internal/default_ui/atom.plist",s=await Editor.Message.request("asset-db","query-path",i),n=plist.parse((0,fs_1.readFileSync)(s,"utf8")),o=Object.assign(n,t),l="db://assets/"+(0,path_1.relative)(a,r);return await Editor.Message.request("asset-db","create-asset",l,plist.build(o),{overwrite:!0})}catch(e){console.error(e)}else await Editor.Dialog.warn(Editor.I18n.t("scene.messages.warning"),{detail:Editor.I18n.t("scene.messages.particle_system_2d.export_error"),buttons:[Editor.I18n.t("scene.messages.confirm")]})}}}const particleMgr=new ParticleManager;exports.particleMgr=particleMgr;
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.particleMgr=void 0;const plist=__importStar(require("plist")),path_1=require("path"),fs_1=require("fs");class ParticleManager{async exportParticlePlist(e,t){const r=(await Editor.Dialog.save({title:"Save Particle",path:(0,path_1.join)(Editor.Project.path,"assets"),filters:[{name:"Particle",extensions:["plist"]}]})).filePath;if(!r)return;const i=(0,path_1.join)(Editor.Project.path,"assets");if(Editor.Utils.Path.contains(i,r))try{const a=e||"db://internal/default_ui/atom.plist",s=await Editor.Message.request("asset-db","query-path",a),n=plist.parse((0,fs_1.readFileSync)(s,"utf8")),o=Object.assign(n,t),l="db://assets/"+(0,path_1.relative)(i,r);return await Editor.Message.request("asset-db","create-asset",l,plist.build(o),{overwrite:!0})}catch(e){return void console.error(e)}else await Editor.Dialog.warn(Editor.I18n.t("scene.messages.warning"),{detail:Editor.I18n.t("scene.messages.particle_system_2d.export_error"),buttons:[Editor.I18n.t("scene.messages.confirm")]})}}const particleMgr=new ParticleManager;exports.particleMgr=particleMgr;
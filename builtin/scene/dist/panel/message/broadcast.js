"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=exports.init=void 0;let $scene=null,$loading=null,cacheElem=null;function init(e){$scene=e.$.scene,$loading=e.$.loading,cacheElem=e}function apply(e){let c="";e["scene:ready"]=(()=>{$loading.setAttribute("disabled","")}),e["scene:close"]=(()=>{$loading.removeAttribute("disabled")}),e["asset-db:ready"]=((...e)=>{$scene.depend.finish("asset-db-ready"),"xxx"in window&&window.xxx._refreshScenes()}),e["asset-db:close"]=(()=>{$scene.depend.reset("asset-db-ready")}),e["selection:select"]=(async(e,s)=>{if("node"===e){if($scene.callSceneMethod("_selectNode",[s]),cacheElem.uiToolsVM){const e=await $scene.callSceneMethod("querySelection");cacheElem.uiToolsVM.selection=e}c=s}}),e["selection:unselect"]=(async(e,s)=>{if("node"===e){if($scene.callSceneMethod("_unselectNode",[s]),cacheElem.uiToolsVM){const e=await $scene.callSceneMethod("querySelection");cacheElem.uiToolsVM.selection=e}c===s&&(c="")}}),e["asset-db:asset-add"]=(async(e,c,s)=>{if($scene.managerReady)switch(c&&c.importer){case"typescript":case"javascript":$scene.callSceneMethod("loadScript",[e],!0);break;case"effect":$scene.callSceneMethod("registerEffects",[[e]],!0);default:$scene.callSceneMethod("assetChange",[e],!0)}}),e["asset-db:asset-change"]=(async(e,c,s)=>{if($scene.managerReady&&c.imported&&!c.invalid){switch($scene.callSceneMethod("releaseAsset",[e],!0),c&&c.importer){case"render-pipeline":break;case"typescript":case"javascript":$scene.callSceneMethod("scriptChange",[c],!0);break;case"effect":$scene.callSceneMethod("updateEffect",[e],!0)}$scene.callSceneMethod("assetChange",[e,c,s],!0)}}),e["asset-db:asset-delete"]=((e,c,s)=>{if($scene.managerReady){switch(c&&c.importer){case"typescript":case"javascript":$scene.callSceneMethod("removeScript",[c],!0);break;case"effect":$scene.callSceneMethod("removeEffects",[[e]],!0);break;case"terrain":$scene.callSceneMethod("onRemoveTerrain",[e,c],!0)}$scene.callSceneMethod("assetDelete",[e,c],!0)}}),e["programming:pack-build-end"]=(e=>{"editor"===e&&($scene.depend.finish("packer-driver-ready"),$scene.callSceneMethod("investigatePackerDriver"))}),e["project:change-design-resolution"]=(e=>{$scene.ipc.send("call-method",{module:"Startup",handler:"initDesignResolution",params:[e.width,e.height],queue:!0,timeout:!1})}),e["project:change-custom-layer"]=(e=>{$scene.ipc.send("call-method",{module:"Startup",handler:"initCustomLayer",params:[e],queue:!0,timeout:!1})}),e["project:update-physics-group"]=(()=>{$scene.callSceneMethod("updatePhysicsGroup",[],!0)})}exports.init=init,exports.apply=apply;
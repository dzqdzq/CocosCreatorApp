"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PanelIpc=void 0;const events_1=__importDefault(require("events"));class PanelIpc extends events_1.default{constructor(){super(...arguments),this._engineView=null}setEngineView(e){this._engineView=e}sendToScene(e,...n){const t=this._engineView;(null===t||void 0===t?void 0:t.callNativeSceneMethod)&&t.callNativeSceneMethod(t.isPreviewEnabled,e,...n)}async requestToScene(e,...n){const t=this._engineView;if(null===t||void 0===t?void 0:t.callNativeSceneMethod)return await t.callNativeSceneMethod(t.isPreviewEnabled,e,...n)}onSceneToPanel(e,...n){this.emit("onSceneToPanel",e,...n)}sendToBrowser(e,...n){Editor.Message.send("scene","panel-browser",e,...n)}async requestToBrowser(e,...n){return new Promise(t=>{let s=setTimeout(()=>{s=null,console.debug(`nativeWindowPanel requestToBrowser:${e} timeout`),t(!1)},1e3);Editor.Message.request("scene","panel-browser",e,...n).then(()=>{s&&(s=null,clearTimeout(s)),t(!0)})})}async onBrowserToPanel(e,n,...t){return new Promise(s=>{this.emit("onBrowserToPanel",{panel:e,method:n,args:t,callback:s})})}}const panelIpc=new PanelIpc;exports.PanelIpc=panelIpc;
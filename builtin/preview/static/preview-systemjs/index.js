import"systemjs-source/system.js";import"systemjs-source/extras/named-register.js";import{setResolutionDetailMap}from"../../../../node_modules/@cocos/creator-programming-quick-pack/runtime-lib/global-detail-resolver.js";import{systemJSPrototype}from"systemjs-source/system-core";const setResolutionDetailMapCallbackTag=Symbol("[[setResolutionDetailMapCallback]]");systemJSPrototype.setResolutionDetailMapCallback=function(e){this[setResolutionDetailMapCallbackTag]=e};let setupResolutionDetailMapPromise=null;const vendorPrepareImport=systemJSPrototype.prepareImport;systemJSPrototype.prepareImport=async function(){setupResolutionDetailMapPromise||(setupResolutionDetailMapPromise=(async()=>{try{await(async()=>{const{json:e,url:t}=await this[setResolutionDetailMapCallbackTag]();setResolutionDetailMap(e,t)})()}catch(e){console.debug(`Failed to load resolution detail map: ${e}`)}})()),await setupResolutionDetailMapPromise,vendorPrepareImport.apply(this,arguments)};
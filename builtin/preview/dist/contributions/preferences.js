"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const fs_1=require("fs"),path_1=require("path"),process_1=require("process"),Vue=require("vue/dist/vue");let vm=null;exports.style="\n.preview > ui-setting { display: flex; }\n.preview > ui-setting > ui-prop, .preview > div > ui-section { flex: 1; --left-width: 40%; }\n.preview > ui-setting > ui-icon { margin-right: 5px; visibility: hidden; pointer-event: none; }\n.preview > ui-setting[type='local'] > ui-icon { visibility: visible; color: var(--color-warn-fill); }\n\nui-section > ui-prop { border: 1px dashed transparent; padding: 0 5px 5px 5px; }\n.add-device { border-color: var(--color-normal-border-weakest); padding-top: 5px; }\nui-section > ui-prop > div[slot='content'] { display: flex; }\nui-section > ui-prop > div[slot='content'] > ui-button { margin-left: 10px; width: calc(var(--size-normal-font) * 8px); }\n",exports.template=fs_1.readFileSync(path_1.join(__dirname,"../../static/contributions/preferences.html"),"utf8"),exports.$={preview:".preview"};const component={data:{scenes:[],startScene:"current_scene",userDevices:{},tempDevice:{name:"device_name",width:960,height:640},clickNum:1},methods:{t(e){const t=`preview.project.general.${e}`;return Editor.I18n.t(t)},async refresh(){await this._refreshScenes(),this.startScene=await Editor.Profile.getConfig("preview","general.start_scene")},onSelectClick(e){const t=this;if(2===t.clickNum)return;t.clickNum=2,t._refreshScenes();const i=e.target;process_1.nextTick(()=>{i.click(),t.clickNum=1})},async _refreshScenes(){const e=await Editor.Message.request("asset-db","query-assets",{type:"scene"});e&&(this.scenes=e.map(e=>({uuid:e.uuid,name:path_1.basename(e.source)})))}}};function ready(){component.el=this.$.preview,(vm=new Vue(component)).refresh()}exports.ready=ready;
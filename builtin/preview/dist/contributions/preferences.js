"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=exports.$=exports.template=exports.style=void 0;const Vue=require("vue/dist/vue"),lodash=require("lodash");let vm=null;exports.style="\n.preview > div { display: flex; }\n.preview ui-icon { visibility: hidden;cursor: pointer; }\n.preview ui-icon[type='local'] { color: var(--color-warn-fill);visibility: visible; }\n.preview ui-prop { --left-width: 40%;padding-left: 5px;margin-bottom: 4px;flex: 1; }\n.preview > div:hover ui-icon { visibility: visible; }\n.preview ui-prop[disabled] { pointer-events: none;opacity: 0.6; }\n",exports.template='\n<div v-if="config.preview" class="preview" @confirm="onConfirm">\n    <div>\n        <ui-icon value="setting" tooltip="i18n:preferences.menu.position_info"\n            :type="types[\'preview.simulator_debugger\']"\n            @click.stop="onChangePosition($event.target.pageX, $event.target.pageY, \'preview.simulator_debugger\')">\n        </ui-icon>\n        <ui-prop>\n            <ui-label slot="label" value="i18n:preview.project.general.simulatorDebugger"></ui-label>\n            <ui-checkbox slot="content" path="preview.simulator_debugger"\n                :value="config.preview.simulator_debugger"\n            ></ui-checkbox>\n        </ui-prop>\n    </div>\n    <div>\n        <ui-icon value="setting" tooltip="i18n:preferences.menu.position_info"\n            :type="types[\'preview.wait_for_connect\']"\n            @click.stop="onChangePosition($event.target.pageX, $event.target.pageY, \'preview.wait_for_connect\')">\n        </ui-icon>\n        <ui-prop :tooltip="config.preview.simulator_debugger ? \'\' : \'i18n:preview.project.general.waitForConnectTips\'">\n            <ui-label slot="label" value="i18n:preview.project.general.waitForConnect"></ui-label>\n            <ui-checkbox slot="content" path="preview.wait_for_connect"\n                :value="config.preview.wait_for_connect"\n                :disabled="waitForConnectDisabled"\n            ></ui-checkbox>\n        </ui-prop>\n    </div>\n</div>\n',exports.$={preview:".preview"};const component={data:{config:{preview:null},types:{"preview.simulator_debugger":"global","preview.wait_for_connect":"global"},waitForConnectDisabled:!1},watch:{"config.preview.simulator_debugger":{async handler(e){const i=this;i.waitForConnectDisabled=!1,e||(i.waitForConnectDisabled=!0,lodash.set(i.config,"preview.wait_for_connect",!1),await Editor.Profile.setConfig("preview","preview.wait_for_connect",!1,i.types["preview.wait_for_connect"]))},deep:!0}},methods:{async refresh(e){const i=this,o=await Editor.Profile.getConfig("preview",e,"local");i.types[e]=void 0!==o&&null!==o?"local":"global"},async onConfirm(e){const i=e.target.value,o=e.target.getAttribute("path");lodash.set(this.config,o,i),await Editor.Profile.setConfig("preview",o,i,this.types[o])},onChangePosition(e,i,o){Editor.Menu.popup({x:e,y:i,menu:[{label:Editor.I18n.t("preferences.menu.move_local"),enabled:"global"===vm.types[o],async click(){const e=await Editor.Profile.getConfig("preview",o);await Editor.Profile.setConfig("preview",o,e),vm.refresh(o)}},{label:Editor.I18n.t("preferences.menu.move_global"),enabled:"local"===vm.types[o],async click(){const e=await Editor.Profile.getConfig("preview",o,"local");await Editor.Profile.setConfig("preview",o,e,"global"),await Editor.Profile.removeConfig("preview",o,vm.types[o]),vm.refresh(o)}}]})}}};async function ready(){component.el=this.$.preview,(vm=new Vue(component)).config.preview=Object.assign({},{simulator_debugger:await Editor.Profile.getConfig("preview","preview.simulator_debugger"),wait_for_connect:await Editor.Profile.getConfig("preview","preview.wait_for_connect")});for(const e of Object.keys(vm.types))await vm.refresh(e)}exports.ready=ready;
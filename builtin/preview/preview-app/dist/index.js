System.register(["./ui.js","./app-globals.js","./main.js"],function(n,e){"use strict";var t,r,o,i=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))(function(o,i){function a(n){try{c(r.next(n))}catch(n){i(n)}}function s(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(a,s)}c((r=r.apply(n,e||[])).next())})},a=this&&this.__generator||function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var r=Array(n),o=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};e&&e.id;return n("bootstrap",function(n){i(this,void 0,void 0,function(){return a(this,function(c){switch(c.label){case 0:return[4,function(n){return i(this,void 0,void 0,function(){var c,u,l;return a(this,function(f){switch(f.label){case 0:return[4,function(){return i(this,void 0,void 0,function(){var n,t;return a(this,function(r){switch(r.label){case 0:return[4,e.import("/socket.io/socket.io.js")];case 1:return n=r.sent(),(t=n.default()).on("browser:reload",function(){window.location.reload()}),t.on("browser:disconnect",function(){window.location.reload()}),[2,t]}})})}()];case 1:return c=f.sent(),u=new t.Ui({devices:n.devices,emit:function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];c.emit.apply(c,s([n],e))}}),window.addEventListener("error",function(n){r.globals.error=!0;var e=[].toString.call(n,n);return console.error(n),"[object Event]"===e?u.showError("load "+n.target.src+" failed"):u.showError(n.message+" in "+n.filename),!0},!0),window.addEventListener("unhandledrejection",function(n){u.showError(n.type+": "+n.reason.message),u.showError(n.reason.stack)},!0),n.settings.engineModules.findIndex(function(n){return"physics-ammo"===n})>=0?[4,e.import("cce:/internal/x/cc-fu/wait-for-ammo-instantiation")]:[3,4];case 2:return[4,(0,f.sent().default)()];case 3:f.sent(),f.label=4;case 4:return[4,System.import("cc")];case 5:return l=f.sent(),u.bindEngine(l),[4,o.main(u,n)];case 6:return f.sent(),[2]}})})}(n)];case 1:return c.sent(),[2]}})}).catch(function(n){console.error(n)})}),{setters:[function(n){t=n},function(n){r=n},function(n){o=n}],execute:function(){}}});
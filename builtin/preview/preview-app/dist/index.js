System.register(["./ui.js","./app-globals.js","./main.js"],function(e,n){"use strict";var t,r,o,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(s,c)}a((r=r.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},c=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};n&&n.id;return e("bootstrap",function(e){return i(this,void 0,void 0,function(){var a;return s(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,function(e){return i(this,void 0,void 0,function(){var a,u,l,f;return s(this,function(d){switch(d.label){case 0:return[4,function(){return i(this,void 0,void 0,function(){var e,t,r;return s(this,function(o){switch(o.label){case 0:return e=window.location.search.substr(1).split("&"),[4,n.import("/socket.io/socket.io.js")];case 1:return t=o.sent(),r=t.default(),-1===e.indexOf("autoReload=false")&&(r.on("browser:reload",function(){window.location.reload()}),r.on("browser:close",function(){window.close()}),r.on("browser:disconnect",function(){window.location.reload()})),[2,r]}})})}()];case 1:a=d.sent(),u=new t.Ui({devices:e.devices,emit:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];a.emit.apply(a,c([e],n,!1))}}),d.label=2;case 2:return d.trys.push([2,5,,6]),window.addEventListener("error",function(e){if(!e.message||!e.message.includes("debug-evaluate"))return r.globals.error=!0,console.error(e),u.showError(e),!0},!0),window.addEventListener("unhandledrejection",function(e){console.error(e),u.showError(e)},!0),[4,System.import("cc")];case 3:return l=d.sent(),u.bindEngine(l),[4,o.main(u,e)];case 4:return d.sent(),[3,6];case 5:return f=d.sent(),console.error(f),[3,6];case 6:return[2]}})})}(e)];case 1:return u.sent(),[3,3];case 2:return a=u.sent(),console.error(a),[3,3];case 3:return[2]}})})}),{setters:[function(e){t=e},function(e){r=e},function(e){o=e}],execute:function(){}}});
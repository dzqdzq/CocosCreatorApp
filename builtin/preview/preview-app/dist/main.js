System.register([],function(e,n){"use strict";var t=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,a)}c((r=r.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){var t,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],r=0}finally{t=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};n&&n.id;function s(e){return new Promise(function(n,t){var r=new XMLHttpRequest;r.responseType="text",r.addEventListener("load",function(){200===r.status&&n(JSON.parse(r.response))}),r.open("GET",e,!0),r.send()})}return e("main",function(e,n){var i;return t(this,void 0,void 0,function(){var o,a,c,u,l=this;return r(this,function(d){switch(d.label){case 0:return[4,System.import("cc")];case 1:return o=d.sent(),a=null!==(i=o.DebugMode[e.debugMode])&&void 0!==i?i:o.DebugMode.INFO,c={debugMode:a,overrideSettings:{}},u=n.settings.launch.launchScene,Object.assign(c.overrideSettings,n.settings),c.overrideSettings.profiling=c.overrideSettings.profiling||{},c.overrideSettings.profiling.showFPS=e.showFps,c.overrideSettings.screen=c.overrideSettings.screen||{},c.overrideSettings.screen.frameRate=e.frameRate,c.overrideSettings.screen.exactFitScreen=!!e.isFullscreen(),c.overrideSettings.assets=c.overrideSettings.assets||{},c.overrideSettings.assets.importBase="assets/general/import",c.overrideSettings.assets.nativeBase="assets/general/native",c.overrideSettings.assets.remoteBundles=[],c.overrideSettings.assets.subpackages=[],c.overrideSettings.launch=c.overrideSettings.launch||{},c.overrideSettings.launch.launchScene="",[4,o.game.init(c)];case 2:return d.sent(),o.assetManager.onAssetMissing(function(e,n,i,a){return t(l,void 0,void 0,function(){var t,c;return r(this,function(r){switch(r.label){case 0:t="The asset ".concat(a," used by ").concat(e.name,"{").concat(o.js.getClassName(e),"(").concat(e.uuid,")} is missing! \n"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s("/missing-asset/".concat(a))];case 2:return(c=r.sent())&&(t="The asset ".concat(c.path," used by ").concat(e.name,"{").concat(o.js.getClassName(e),"(").concat(e.uuid,")} is missing! \n")),c.path,c&&(t+="asset ".concat(c.path,"(").concat(a,") has been deleted at ").concat(new Date(c.removeTime).toLocaleString(),". \n")),[3,4];case 3:return r.sent(),console.debug("query missing asset ".concat(a," failed")),[3,4];case 4:return n&&n.node instanceof o.Node&&(t+="Node path: ".concat(n.node.getPathInHierarchy(),"\n")),i&&(t+="PropName: ".concat(i)),console.error(t),[2]}})})}),[4,o.game.run(function(){return t(l,void 0,void 0,function(){var n;return r(this,function(t){switch(t.label){case 0:return o.director.once(o.Director.EVENT_AFTER_SCENE_LAUNCH,function(){e.hideSplash(),function(e){var n=e.director.getScene();if(n&&0!==n.children.length){if(n.children.length>1)return!1;var t=n.children[0];return!(t.children.length>0||t._components.length>1||t._components.length>0&&!(t._components[0]instanceof e.Canvas))}return!0}(o)&&e.hintEmptyScene()}),e.showLoading(),o.game.pause(),[4,function(e){return s("scene/".concat(e,".json"))}(u)];case 1:n=t.sent();try{u=n[1]._id}catch(e){console.debug(e)}return o.assetManager.loadWithJson(n,{assetId:u},function(n,t){var r=100*n/t*.6;e.reportLoadProgress(r)},function(n,t){if(n)return e.showError(n),void o.error(n);var r=t.scene;r._name=t._name,o.director.runSceneImmediate(r,function(){o.game.resume()})}),[2]}})})})];case 3:return d.sent(),[4,new Promise(function(e){setTimeout(e,100)})];case 4:return d.sent(),[2]}})})}),{setters:[],execute:function(){}}});
System.register([],function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t&&t.id;function s(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.responseType="text",r.addEventListener("load",function(){200===r.status&&t(JSON.parse(r.response))}),r.open("GET",e,!0),r.send()})}return e("main",function(e,t){var i;return n(this,void 0,void 0,function(){var o,a,c,u,l=this;return r(this,function(d){switch(d.label){case 0:return[4,System.import("cc")];case 1:return o=d.sent(),a=null!==(i=o.DebugMode[e.debugMode])&&void 0!==i?i:o.DebugMode.INFO,c={debugMode:a,overrideSettings:{}},u=t.settings.launch.launchScene,Object.assign(c.overrideSettings,t.settings),c.overrideSettings.profiling=c.overrideSettings.profiling||{},c.overrideSettings.profiling.showFPS=e.showFps,c.overrideSettings.screen=c.overrideSettings.screen||{},c.overrideSettings.screen.frameRate=e.frameRate,c.overrideSettings.screen.exactFitScreen=!!e.isFullscreen(),c.overrideSettings.assets=c.overrideSettings.assets||{},c.overrideSettings.assets.importBase="assets/general/import",c.overrideSettings.assets.nativeBase="assets/general/native",c.overrideSettings.assets.remoteBundles=[],c.overrideSettings.assets.subpackages=[],c.overrideSettings.launch=c.overrideSettings.launch||{},c.overrideSettings.launch.launchScene="",c.overrideSettings.splashScreen.totalTime=50,[4,o.game.init(c)];case 2:return d.sent(),o.assetManager.onAssetMissing(function(e,t,i,a){return n(l,void 0,void 0,function(){var n,c;return r(this,function(r){switch(r.label){case 0:n="The asset ".concat(a," used by ").concat(e.name,"{").concat(o.js.getClassName(e),"(").concat(e.uuid,")} is missing! \n"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s("/missing-asset/".concat(a))];case 2:return(c=r.sent())&&(n="The asset ".concat(c.path," used by ").concat(e.name,"{").concat(o.js.getClassName(e),"(").concat(e.uuid,")} is missing! \n")),c.path,c&&(n+="asset ".concat(c.path,"(").concat(a,") has been deleted at ").concat(new Date(c.removeTime).toLocaleString(),". \n")),[3,4];case 3:return r.sent(),console.debug("query missing asset ".concat(a," failed")),[3,4];case 4:return t&&t.node instanceof o.Node&&(n+="Node path: ".concat(t.node.getPathInHierarchy(),"\n")),i&&(n+="PropName: ".concat(i)),console.error(n),[2]}})})}),[4,o.game.run(function(){return n(l,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return o.director.once(o.Director.EVENT_AFTER_SCENE_LAUNCH,function(){e.hideSplash(),function(e){var t=e.director.getScene();if(t&&0!==t.children.length){if(t.children.length>1)return!1;var n=t.children[0];return!(n.children.length>0||n._components.length>1||n._components.length>0&&!(n._components[0]instanceof e.Canvas))}return!0}(o)&&e.hintEmptyScene()}),e.showLoading(),o.game.pause(),[4,function(e){return s("scene/".concat(e,".json"))}(u)];case 1:t=n.sent();try{u=t[1]._id}catch(e){console.debug(e)}return o.assetManager.loadWithJson(t,{assetId:u},function(t,n){var r=100*t/n*.6;e.reportLoadProgress(r)},function(t,n){if(t)return e.showError(t),void o.error(t);var r=n.scene;r._name=n._name,o.director.runSceneImmediate(r,function(){o.game.resume()})}),[2]}})})})];case 3:return d.sent(),[4,new Promise(function(e){setTimeout(e,100)})];case 4:return d.sent(),[2]}})})}),{setters:[],execute:function(){}}});
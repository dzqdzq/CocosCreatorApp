"use strict";function data(){return{state:0,image:{GLPreview:{name:"scene:motion-preview",method:"query-motion-preview-data"}},play:{time:0,state:0,speed:0,status:{timeLineLength:0,sourceMotionStart:0,sourceMotionRepeatCount:0,sourceMotionDuration:0,targetMotionStart:0,targetMotionRepeatCount:0,targetMotionDuration:0,exitTimesStart:0,exitTimesLength:0,transitionDurationStart:0,transitionDurationLength:0}}}}function mounted(){this.init()}function destroyed(){this.close()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyed=exports.mounted=exports.methods=exports.data=exports.computed=exports.watch=exports.props=exports.components=exports.template=void 0,exports.template='\n<div class="preview">\n    <inspector-resize-preview area="footer"></inspector-resize-preview>\n    <template\n        v-if="show"\n    >\n        <play-toolbar\n            :play="play"\n            :state="state"\n        ></play-toolbar>\n\n        <div class="operation"\n            v-if="motion && isBlend1D && motion.involvedBlendParamVariables"\n        >\n            <ui-prop class="prop"\n                v-for="(varInfo, varName) in motion.involvedBlendParamVariables"\n                v-bind:key="varName"\n            >\n                <ui-label slot="label" class="name"\n                    :tooltip="varName"\n                    :value="varName"\n                ></ui-label>\n                <ui-slider slot="content" class="content" step="0.1"\n                    :min="varInfo.min"\n                    :max="varInfo.max" \n                    :value="varInfo.value"\n                    @change.stop="updatePreviewBlendVariable([{name: varName, value: $event.target.value}])"\n                    @confirm.stop="confirmPreviewBlendVariable"\n                ></ui-slider>\n            </ui-prop>\n        </div>\n        <play-handle-2d\n            v-else-if="motion && isBlend2D"\n        ></play-handle-2d>\n        <image-canvas ref="image"\n            :config="image"\n            :play="play"\n            :state="state"\n        ></image-canvas>\n    </template>\n    <ui-label class="error-tip"\n        v-else\n        :value="\'i18n:animation-graph.preview.\'+$root.queryData.previewState[state]"\n    ></ui-label>\n</div>\n',exports.components={"play-toolbar":require("./preview-play-toolbar"),"play-handle-2d":require("./preview-play-handle-2d"),"image-canvas":require("./preview-image-canvas")},exports.props=["crumb"],exports.watch={crumb(){this.init()}},exports.computed={show(){return void 0!==this.$root.queryData.previewState.ILLEGAL_MOTION&&![this.$root.queryData.previewState.ILLEGAL_MOTION].includes(this.state)},motion(){return this.$root.viewMotion()},isBlend1D(){return this.motion&&this.motion.type===this.$root.queryData.animationBlendType[0]},isBlend2D(){return this.motion&&this.motion.type===this.$root.queryData.animationBlendType[1]}},exports.data=data,exports.methods={async init(){const e=this;e.state=await Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"showMotionPreview",args:[]});const t=e.$root.queryData.previewState;void 0!==t.NO_ERROR&&e.state!==t.NO_ERROR&&console.warn(Editor.I18n.t(`animation-graph.preview.${t[e.state]}`))},close(){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"hideMotionPreview",args:[]})},async setModel(e){await Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"setPreviewModel",args:[e]}),this.init()},update(e){const t=this;t.play=e,t.$refs.image&&(t.$refs.image.isDirty=!0)},timePlay(e){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"setTimeMotionPreview",args:[e]})},runPlay(){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"playMotionPreview",args:[]}),Editor.Metrics._trackEventWithTimer({category:"animationStateMachine",id:"A100014",value:1})},pausePlay(){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"pauseMotionPreview",args:[]})},stopPlay(){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"stopMotionPreview",args:[]})},async queryBlend2DThresholdsWeights(e){const t=this.motion.children.map(e=>e.threshold);return await Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"queryBlend2DThresholdsWeights",args:[t,e]})},updatePreviewBlendVariable(e){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"updatePreviewVariable",args:[e]})},confirmPreviewBlendVariable(){this.$root.metric("A100011")},updateMotionEditDataThreshold(e){Editor.Message.request("scene","execute-scene-script",{name:"animation-graph",method:"updateMotionEditData",args:["threshold",e]})}},exports.mounted=mounted,exports.destroyed=destroyed;
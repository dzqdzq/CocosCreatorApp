"use strict";function data(){return{totalWidth:0,baseWidth:0}}async function mounted(){await this.init()}async function destroyed(){this.close()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyed=exports.mounted=exports.methods=exports.computed=exports.data=exports.watch=exports.props=exports.template=void 0,exports.template='\n<div class="timelines">\n    <div class="tips"\n        v-if="Math.abs(play.status.sourceMotionDuration)<1e-5 || Math.abs(play.status.targetMotionDuration)<1e-5"\n    >\n        <ui-label value="i18n:animation-graph.transition.invalidDurationPreview"></ui-label>\n    </div>\n    <template\n        v-else\n    >\n        <div class="source timeline">\n            <div class="content"\n                :style="sourceStyle"\n            >\n                <div class="name">{{transition.from.name}}</div>\n            </div>\n            <div class="repeat"\n                v-for="i in Math.floor(play.status.sourceMotionRepeatCount)"\n                :style="calcSourceRepeat(i)"\n            ></div>\n        </div>\n        <div class="transit timeline">\n            <div class="content"\n                :style="transitStyle"\n            >\n                <i class="transit-i start" ref="transitStart"\n                    @mousedown="mouseDownTransitStart($event)"\n                    v-if="transition.exitConditionEnabled"\n                ></i>\n                <div class="name"\n                    @mousedown="mouseDownTransitName($event)"\n                >{{play.status.transitionDurationLength.toFixed(2)}}</div>\n                <i class="transit-i end" ref="transitEnd"\n                    @mousedown="mouseDownTransitEnd($event)"\n                ></i>\n            </div>\n        </div>\n        <div class="target timeline">\n            <div class="content"\n                :style="targetStyle"\n                @mousedown="mouseDownTransitDestinationStart($event)"\n            >\n                <i class="transit-i destination-start" ref="destinationStart"\n                    :style="destinationStartStyle"\n                ></i>\n                <div class="name">{{transition.to.name}}</div>\n            </div>\n            <div class="repeat"\n                v-for="i in Math.floor(play.status.targetMotionRepeatCount)"\n                :style="calcTargetRepeat(i)"\n            ></div>\n        </div>\n    </template>\n</div>\n',exports.props=["play","transition"],exports.watch={play(){this.update()}},exports.data=data,exports.computed={sourceStyle(){return{width:`${this.play.status.sourceMotionRepeatCount*this.play.status.sourceMotionDuration*this.baseWidth}px`}},transitStyle(){return{width:`${this.play.status.transitionDurationLength*this.baseWidth}px`,marginLeft:`${this.play.status.transitionDurationStart*this.baseWidth}px`}},targetStyle(){const t=this,n=t.play.status.targetMotionRepeatCount*t.play.status.targetMotionDuration*t.baseWidth,e=t.play.status.transitionDurationStart-t.play.status.targetMotionStart;return{width:`${n}px`,marginLeft:`${(t.play.status.transitionDurationStart-e)*t.baseWidth}px`}},destinationStartStyle(){return{width:`${(this.play.status.transitionDurationStart-this.play.status.targetMotionStart)*this.baseWidth}px`}}},exports.methods={init(){const t=this;t.resizeObserver=new window.ResizeObserver(()=>{t.update()}),t.resizeObserver.observe(t.$el)},close(){this.resizeObserver&&this.resizeObserver.unobserve(this.$el)},update(){const t=this;t.totalWidth=t.$el.clientWidth,t.baseWidth=t.totalWidth/t.play.status.timeLineLength},calcSourceRepeat(t){return{left:`${t*this.play.status.sourceMotionDuration*this.baseWidth}px`}},calcTargetRepeat(t){const n=this,e=n.play.status.transitionDurationStart-n.play.status.targetMotionStart;return{left:`${(n.play.status.transitionDurationStart-e)*n.baseWidth+t*n.play.status.targetMotionDuration*n.baseWidth}px`}},mouseDownTransitStart(t){const n=this;function e(t){if(!n.mouseDownPoint||"right"===n.mouseDownPoint.button)return;t.stopPropagation(),t.preventDefault();const{clientX:e}=n.mouseDownPoint,o=t.clientX-e;if(0===o)return;n.mouseDownPoint.hasMoved=!0;const i=n.mouseDownPoint.transitionDurationLength-o/n.baseWidth,s=n.mouseDownPoint.transitionDurationStart+o/n.baseWidth;if(s<=0)return;let a=i;n.transition.relativeDuration&&(a/=n.play.status.sourceMotionDuration),n.$root.changeTransitionProp(n.transition.index,"duration",a);let r=s;r/=n.play.status.sourceMotionDuration,n.$root.changeTransitionProp(n.transition.index,"exitCondition",r)}t.stopPropagation(),t.preventDefault(),n.mouseDownPoint={$element:t.target,hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",transitionDurationStart:n.play.status.transitionDurationStart,transitionDurationLength:n.play.status.transitionDurationLength},document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),n.mouseDownPoint=null,n.$root.metric("A100010")})},mouseDownTransitEnd(t){const n=this;function e(t){if(!n.mouseDownPoint||"right"===n.mouseDownPoint.button)return;t.stopPropagation(),t.preventDefault();const{clientX:e}=n.mouseDownPoint,o=t.clientX-e;if(0===o)return;n.mouseDownPoint.hasMoved=!0;let i=n.mouseDownPoint.transitionDurationLength+o/n.baseWidth;i<=0&&(i=0);let s=i;n.transition.relativeDuration&&(s/=n.play.status.sourceMotionDuration),n.$root.changeTransitionProp(n.transition.index,"duration",s)}t.stopPropagation(),t.preventDefault(),n.mouseDownPoint={$element:t.target,hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",transitionDurationLength:n.play.status.transitionDurationLength},document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),n.mouseDownPoint=null,n.$root.metric("A100010")})},mouseDownTransitName(t){const n=this;function e(t){if(!n.mouseDownPoint||"right"===n.mouseDownPoint.button)return;t.stopPropagation(),t.preventDefault();const{clientX:e}=n.mouseDownPoint,o=t.clientX-e;if(0===o)return;n.mouseDownPoint.hasMoved=!0;let i=n.mouseDownPoint.transitionDurationStart+o/n.baseWidth;i<=0&&(i=0),i/=n.play.status.sourceMotionDuration,n.$root.changeTransitionProp(n.transition.index,"exitCondition",i)}t.stopPropagation(),t.preventDefault(),n.transition.exitConditionEnabled&&(n.mouseDownPoint={$element:t.target,hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",transitionDurationStart:n.play.status.transitionDurationStart,transitionDurationLength:n.play.status.transitionDurationLength},document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),n.mouseDownPoint=null,n.$root.metric("A100010")}))},mouseDownTransitDestinationStart(t){const n=this;function e(t){if(!n.mouseDownPoint||"right"===n.mouseDownPoint.button)return;t.stopPropagation(),t.preventDefault();const{clientX:e}=n.mouseDownPoint,o=t.clientX-e;if(0===o)return;n.mouseDownPoint.hasMoved=!0;let i=n.mouseDownPoint.destinationStart-o/n.baseWidth;i<=0&&(i=0);let s=i;s/=n.play.status.targetMotionDuration,n.$root.changeTransitionProp(n.transition.index,"destinationStart",s)}t.stopPropagation(),t.preventDefault(),n.transition.exitConditionEnabled&&(n.mouseDownPoint={$element:t.target,hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",destinationStart:n.play.status.transitionDurationStart-n.play.status.targetMotionStart},document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),n.mouseDownPoint=null,n.$root.metric("A100010")}))}},exports.mounted=mounted,exports.destroyed=destroyed;
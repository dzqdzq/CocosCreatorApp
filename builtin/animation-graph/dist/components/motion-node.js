"use strict";function data(){return{}}function mounted(){this.resize()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.watch=exports.computed=exports.components=exports.data=exports.props=exports.template=void 0,exports.template='\n    <div class="state"\n        :style="style"\n        @mousedown="mouseDown($event)"\n        @dragenter="dragEnter($event)"\n        @dragleave="dragLeave($event)"\n        @drop="drop($event)"\n    >\n        <ui-label ref="name" class="name"\n            :value="dump.name"\n        ></ui-label>\n        <motion-prop\n            :dump=dump\n        ></motion-prop>\n    </div>\n',exports.props=["dump"],exports.data=data,exports.components={"motion-prop":require("./motion-prop")},exports.computed={style(){return{top:`${this.dump.top}px`,left:`${this.dump.left}px`}}},exports.watch={dump(){this.resize()}},exports.methods={resize(){const t=this;window.requestAnimationFrame(()=>{t.setPosition()})},mouseDown(t){const e=this;function o(t){if(!e.mouseDownPoint||"right"===e.mouseDownPoint.button)return;t.stopPropagation(),t.preventDefault();const{clientX:o,clientY:n,left:i,top:p}=e.mouseDownPoint,r=t.clientX-o,a=t.clientY-n;if(Math.abs(r)<4&&Math.abs(a)<4)return;e.mouseDownPoint.hasMoved=!0;const s=e.$parent.$parent.graph;e.dump.left=i+r/s.scale,e.dump.top=p+a/s.scale}t.stopPropagation(),e.mouseDownPoint={hasMoved:!1,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,button:0===t.button?"left":"right",left:e.dump.left,top:e.dump.top},document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(n){e.mouseDownPoint&&("right"===e.mouseDownPoint.button?e.mouseDownPoint.hasMoved||e.contextMenu(e.mouseDownPoint):e.mouseDownPoint.hasMoved?e.$root.moveMotion(e.dump.level,{editorData:e.getCenterXY()}):e.$parent.select(e.dump)),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t),e.mouseDownPoint=null})},contextMenu(){const t=this,e=[],o=t.getCenterXY();o.centerX+=50,o.centerY+=50;const n=t.$root.queryData.envType;t.dump.type!==n.AnimationBlend1D&&t.dump.type!==n.AnimationBlend2D||e.push({label:Editor.I18n.t("animation-graph.motion.addAnim"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.ClipMotion,editorData:o})}},{label:Editor.I18n.t("animation-graph.motion.add1D"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.AnimationBlend1D,editorData:o})}},{label:Editor.I18n.t("animation-graph.motion.add2D"),click(){t.$root.addMotionToMotion(t.dump.level,{type:n.AnimationBlend2D,editorData:o})}}),e.length>0&&e.push({type:"separator"}),1!==t.dump.level.length&&e.push({label:Editor.I18n.t("animation-graph.motion.remove"),click(){t.$root.removeMotionInMotion(t.dump.level)}}),Editor.Menu.popup({menu:e})},getCenter(){const t=this.$el.offsetWidth,e=this.$el.offsetHeight;return{left:this.dump.left+t/2,top:this.dump.top+e/2}},setPosition(){const t=this;t.dump.width=t.$el.offsetWidth,t.dump.height=t.$el.offsetHeight;const e=t.$parent.getPosition({width:t.dump.width,height:t.dump.height,centerX:t.dump.editorData.centerX,centerY:t.dump.editorData.centerY});t.dump.top=e.top,t.dump.left=e.left},getCenterXY(){const t=this;return t.$parent.getCenterXY({width:t.dump.width,height:t.dump.height,left:t.dump.left,top:t.dump.top})},changeMotionValue(t,e,o){const n=this,i=n.$root.queryData.envType,p=t.target.value;switch(e.type){case i.ClipMotion:n.$root.changeClipMotionInMotion(e.level,p);break;case i.AnimationBlend1D:n.$root.changeAnimationBlend1DInMotion(e.level,o,p);break;case i.AnimationBlend2D:n.$root.changeAnimationBlend2DInMotion(e.level,o,i.animationBlendValue,p)}},dragEnter(t){},dragLeave(t){},drop(t){}},exports.mounted=mounted;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const dumpEncode=cce.Dump.encode,DumpDecode=cce.Dump.decode;class EditStateComponent{async change(o,e){const t=Object.keys(e);for(const c of t)await DumpDecode.decodePatch(c,e[c],o)}encode(o){const e=o.constructor;if(!e.__props__)return null;const t={};return e.__props__.forEach(c=>{try{if(void 0===o[c])return;const r=cc.Class.attr(e,c);t[c]=dumpEncode.encodeObject(o[c],r,o),this.modifyProp(t[c],c)}catch(e){console.warn(`Component property dump failed:\n Component: ${o.constructor.name}\n Property: ${c}`),console.warn(e)}}),t}reset(o){const e=o.constructor;e.__props__&&e.__props__.forEach(t=>{try{const c=cc.Class.attr(e,t);if(c&&cc.Class._isCCClass(c.ctor)&&null===o[t]&&(o[t]=new c.ctor),Array.isArray(o[t]))for(const e of o[t])this.reset(e)}catch(o){console.warn(o)}})}modifyProp(o,e){if(o.name=e,o.value&&"object"==typeof o.value)for(const e in o.value)"object"==typeof o.value[e]&&this.modifyProp(o.value[e],e)}}exports.default=new EditStateComponent;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=void 0;const cc_1=require("cc"),util_1=require("util");function getAnimationComp(e,n){const t=cce.Node.query(e);if(!t)return console.debug(`can not get node from uuid ${e}`),null;if(n)return t.getComponent(n);for(const e of["cc.Animation","cc.SkeletalAnimation"]){const n=t.getComponent(e);if(n)return n}return null}exports.methods={async createAniCompFromAsset(e,n,t){if(!e||!n)return!1;t=t||"cc.Animation";const o=cce.Node.query(e);let c=o.getComponent(t);c||(cce.SceneFacadeManager.createComponent({uuid:e,component:t}),c=o.getComponent(t));const a=await util_1.promisify(cc_1.assetManager.loadAny)(n);return c.defaultClip=a,cce.SceneFacadeManager.snapshot(),cce.Node.emit("change",o),!0},async addClipFromAsset(e,n,t){if(!e||!n)return!1;const o=getAnimationComp(e,t);if(!o)return console.debug(`get animaton component from ${e} failed!`),!1;const c=await util_1.promisify(cc_1.assetManager.loadAny)(n);return o.defaultClip=c,cce.SceneFacadeManager.snapshot(),cce.Node.emit("change",cce.Node.query(e)),!0}};
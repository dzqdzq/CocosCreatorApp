"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.computed=exports.watch=exports.data=exports.props=exports.template=void 0;const animation_ctrl_1=require("../../share/animation-ctrl"),animation_editor_1=require("../../share/animation-editor"),pop_menu_1=require("../../share/pop-menu");function data(){return{}}exports.template='\n<div :class="propertyClass"\n    v-if="dumps"\n    :missing="dumps.missing"\n    :selected="selected"\n    @mousedown.stop="onMouseDown"\n>\n    <div class="property-content" :part="dumps.isPart">\n        <ui-icon class="arrow" v-if="typeof(isExpand) === \'boolean\'" :expand="isExpand" value="arrow-triangle" @click.stop="onExpandClick($event)"></ui-icon>\n        <span v-if="dumps.isPart" style="padding-left: 20px;"></span>\n        <ui-label class="name" :tooltip="dumps.displayName + (dumps.missing ? \'(missing)\' : \'\')">{{dumps.displayName}}{{dumps.missing ? \'(missing)\' : \'\'}}</ui-label>\n    </div>\n    <div class="right">\n        <ui-icon v-if="color && typeof(isExpand) !== \'boolean\'" class="curve" value="line" :style="{ \'color\': color }"></ui-icon>\n        <ui-icon v-else class="curve" value="line"></ui-icon>\n        <span class="operate">\n            <i class="key"\n                name="key"\n                :empty="empty"\n                :tooltip="operateTitle"\n            ></i>\n        </span>\n    </div>\n</div>\n',exports.props=["keyFrames","frame","prop","type","nodePath","select","lock","missing","index","isExpand","color","empty"],exports.data=data,exports.watch={},exports.computed={dumps(){if(!this.nodePath)return;const t=animation_ctrl_1.animationCtrl.getPropData(this.nodePath,this.prop);return t?{displayName:t.displayName,isPart:void 0!==t.parentPropKey,missing:this.missing,isCurveSupport:t.isCurveSupport}:void 0},propertyClass(){let t="";return`content-item property ${t=this.index%2==0?"dark":"light"}`},selected(){return this.select&&this.nodePath===this.select.nodePath&&this.select.prop===this.prop},lightCurve(){if(!this.select)return!1;const{nodePath:t,prop:e}=this.select,a=animation_ctrl_1.animationCtrl.clipsDump.pathsDump[t][e];return!a||e===this.prop&&!a.partKeys||!(!a.partKeys||!a.partKeys.includes(this.prop))},operateTitle(){const t=this;return t.empty?t.t("create_key"):t.t("remove_key")},params(){return{prop:this.prop,nodePath:this.nodePath,type:this.type}},disabled(){return this.lock}},exports.methods={t:t=>Editor.I18n.t(`animator.property.${t}`),createPopMenuData(t,e,a,i,o){return{label:this.t(t),click(){animation_ctrl_1.animationCtrl[e](a)},enabled:i,accelerator:o?o.accelerator:void 0}},onMouseDown(t){if(!t.target)return;const e=this,a=t.target.getAttribute("name");if("showPopMenu"===a||2===t.button){const a=(0,pop_menu_1.getPopMenuMap)(pop_menu_1.onPropMenus,!0);return a.copyProp.enabled=!e.lock,a.copyProp.click=(()=>{animation_ctrl_1.animationCtrl.copyProp(e.params)}),a.pasteProp.enabled=!e.lock&&e.canPaste(),a.pasteProp.click=(()=>{animation_ctrl_1.animationCtrl.pasteProp(e.params)}),a.clearPropKeys.click=(()=>{animation_ctrl_1.animationCtrl.clearPropKeys(e.params)}),a.removeProp.enabled=!e.dumps.isPart,a.removeProp.click=(()=>{animation_ctrl_1.animationCtrl.removeProp(e.params)}),void Editor.Menu.popup({x:t.pageX,y:t.pageY,menu:Object.values(a)})}"key"===a?e.disabled||(e.empty?animation_ctrl_1.animationCtrl.createKey({nodePath:e.nodePath,prop:e.prop}):animation_ctrl_1.animationCtrl.removeKey({nodePath:e.nodePath,prop:e.prop},!0)):animation_editor_1.animationEditor.updateSelectProperty({nodePath:e.nodePath,prop:e.prop,clipUuid:animation_ctrl_1.animationCtrl.clipsDump.uuid,isCurveSupport:e.dumps.isCurveSupport})},onExpandClick(){animation_editor_1.animationEditor.updatePropExpandState(this.prop,!this.isExpand)},canPaste(){const t=this,e=animation_ctrl_1.animationCtrl.copyPropInfo;if(!e||!t.type)return!1;for(const a of e.curvesDump)if(a.type.value===t.type.value)return!0;return!1}};
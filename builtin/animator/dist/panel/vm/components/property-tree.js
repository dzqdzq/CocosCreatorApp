"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.computed=exports.watch=exports.data=exports.props=exports.template=void 0;const animation_ctrl_1=require("../../share/animation-ctrl"),animation_editor_1=require("../../share/animation-editor");function data(){return{}}exports.template='\n<div :class="propertyClass"\n    v-if="dumps"\n    :missing="dumps.missing"\n    :selected="selected"\n    @mousedown="onMouseDown"\n>\n    <div class="property-content" :part="dumps.isPart">\n        <ui-icon class="arrow" :expand="isExpand" value="arrow-triangle" v-if="typeof(isExpand) === \'boolean\'" @click.stop="onExpandClick($event)"></ui-icon>\n        <span v-if="dumps.isPart" style="padding-left: 12px;"></span>\n        <ui-label class="name" :tooltip="dumps.displayName + (dumps.missing ? \'(missing)\' : \'\')">{{dumps.displayName}}{{dumps.missing ? \'(missing)\' : \'\'}}</ui-label>\n    </div>\n    <div class="right">\n        <ui-icon v-if="missing" value="lock" :tooltip="missing ? \'i18n:animator.tips.has_missing_property\' : \'\'"></ui-icon>\n        <ui-icon v-else-if="color && lightCurve" class="curve" value="line" :style="{ \'color\': color }"></ui-icon>\n        <ui-icon v-else-if="color" class="curve" value="line"></ui-icon>\n        <span class="operate">\n            <i class="key"\n                name="key"\n                :empty="empty"\n                :tooltip="operateTitle"\n            ></i>\n        </span>\n    </div>\n</div>\n',exports.props=["keyFrames","frame","prop","type","nodePath","select","lock","missing","index","isExpand","color","empty"],exports.data=data,exports.watch={},exports.computed={dumps(){if(!this.nodePath)return;const t=animation_ctrl_1.animationCtrl.getPropData(this.nodePath,this.prop);return t?{displayName:t.displayName,isPart:void 0!==t.parentPropKey,missing:t.missing,isCurveSupport:t.isCurveSupport}:void 0},propertyClass(){let t="";return`content-item property ${t=this.index%2==0?"dark":"light"}`},selected(){return this.select&&this.nodePath===this.select.nodePath&&this.select.prop===this.prop},lightCurve(){if(!this.select)return!1;const{nodePath:t,prop:e}=this.select,i=animation_ctrl_1.animationCtrl.clipsDump.pathsDump[t][e];return!i||e===this.prop&&!i.partKeys||!(!i.partKeys||!i.partKeys.includes(this.prop))},operateTitle(){const t=this;return t.empty?t.t("create_key"):t.t("remove_key")},params(){return{prop:this.prop,nodePath:this.nodePath,type:this.type}},disabled(){if(this.lock||this.dumps.missing)return!0}},exports.methods={t:t=>Editor.I18n.t(`animator.property.${t}`),createPopMenuData(t,e,i,a,r){return{label:this.t(t),click(){animation_ctrl_1.animationCtrl[e](i)},enabled:a,accelerator:r?r.accelerator:void 0}},onMouseDown(t){if(!t.target)return;const e=this,i=t.target.getAttribute("name");if("showPopMenu"===i||2===t.button){const i=[];return e.dumps.isPart||i.push(this.createPopMenuData("remove_prop","removeProp",e.params,!e.lock,{accelerator:"Delete"})),i.push(this.createPopMenuData("clear_keys","clearPropKeys",e.params,!e.disabled)),i.push(this.createPopMenuData("copy_prop","copyProp",{nodePath:e.nodePath,prop:e.prop,type:e.type},!e.lock,{accelerator:"CmdOrCtrl+C"})),e.canPaste()&&i.push(this.createPopMenuData("paste_prop","pasteProp",e.params,!e.disabled,{accelerator:"CmdOrCtrl+V"})),void Editor.Menu.popup({x:t.pageX,y:t.pageY,menu:i})}"key"===i?e.disabled||(e.empty?animation_ctrl_1.animationCtrl.createKey({nodePath:e.nodePath,prop:e.prop}):animation_ctrl_1.animationCtrl.removeKey({nodePath:e.nodePath,prop:e.prop},!0)):animation_editor_1.animationEditor.updateSelectProperty({nodePath:e.nodePath,prop:e.prop,missing:e.dumps.missing,clipUuid:animation_ctrl_1.animationCtrl.clipsDump.uuid,isCurveSupport:e.dumps.isCurveSupport})},onExpandClick(){animation_editor_1.animationEditor.updatePropExpandState(this.prop,!this.isExpand)},canPaste(){const t=this,e=animation_ctrl_1.animationCtrl.copyPropInfo;if(!e||!t.type)return!1;for(const i of e.curvesDump)if(i.type.value===t.type.value)return!0;return!1}};
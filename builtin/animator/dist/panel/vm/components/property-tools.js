"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.components=exports.computed=exports.watch=exports.data=exports.props=exports.template=void 0;const utils_1=require("../../utils"),animation_ctrl_1=require("../../share/animation-ctrl"),animation_editor_1=require("../../share/animation-editor");function data(){return{multi:!1}}exports.template='\n<div class="property-tools">\n    <div class="left">\n        <ui-label value="i18n:animator.property.title"></ui-label>\n    </div>\n    <div class="right">\n        <slot></slot>\n        <ui-icon \n            tooltip="i18n:animator.property.create_prop" \n            value="add" \n            @mousedown="showPropMenu"\n        ></ui-icon>\n    </div>\n</div>\n',exports.props=["menu","lock","properties","selectNode","nodePath","selectedIds"],exports.data=data,exports.watch={async updateFlag(){await this.refresh()}},exports.computed={propertiesMenu(){if(!this.menu)return[];const t=utils_1.sortPropertyMenu(this.menu,this.properties);return this.createMenu(t)}},exports.components={},exports.methods={t:t=>Editor.I18n.t(`animator.property.${t}`),createMenu(t){const e=this;let o=[];if(t.key){const r=t.menuName?t.menuName:t.displayName;return o.push({label:r,enabled:!t.disable,click(){e.createProp(t.key)}}),o}for(const r of Object.keys(t)){const i=t[r];i.key?o=o.concat(e.createMenu(i)):o.push({label:r,submenu:e.createMenu(i)})}return o},async createProp(t){let e=!1;const o=this;if(o.selectedIds&&o.selectedIds.size>1){let t=Array.from(o.selectedIds);if((t=t.filter(t=>animation_ctrl_1.animationCtrl.nodesDump.uuid2path[t])).length>1){const t=await Editor.Dialog.info(Editor.I18n.t("animator.is_add_prop_multi.title"),{buttons:[Editor.I18n.t("animator.is_add_prop_multi.add_to_current"),Editor.I18n.t("animator.is_add_prop_multi.add_to_all")],default:0,cancel:-1});if(-1===t.response)return;e=!!t.response}}animation_ctrl_1.animationCtrl.createProp({prop:t},e)},async showPropMenu(t){if(!(this.lock||this.nodePath&&!this.selectNode))return this.menu&&this.selectNode?void Editor.Menu.popup({x:t.pageX,y:t.pageY,menu:this.propertiesMenu}):(animation_editor_1.animationEditor.showToast("i18n:animator.property.should_select_node_first"),void console.warn("[Animation Editor]"+Editor.I18n.t("animator.property.should_select_node_first")));animation_editor_1.animationEditor.showToast("i18n:animator.property.create_prop_tips")}};
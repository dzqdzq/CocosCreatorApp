"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.methods=exports.components=exports.watch=exports.data=exports.props=exports.template=void 0;const animation_ctrl_1=require("../../share/animation-ctrl"),animation_editor_1=require("../../share/animation-editor");function data(){return{multi:!1}}exports.template='\n<div class="property-tools"\n    @mousedown.stop="$root.onStartResize($event, \'center\')"\n>\n    <div\n        @click="$root.toggleExpandLayoutChange(\'property\')"\n    >\n        <ui-icon value="arrow-triangle"\n            :class="$root.expandLayout.property ? \'expand\' : \'collapse\'"\n        ></ui-icon>\n        <ui-label value="i18n:animator.property.title"></ui-label>\n    </div>\n    <div class="right">\n        <slot></slot>\n        <ui-button class="transparent icon-btn" @mousedown.stop="showPropMenu">\n            <ui-icon \n                tooltip="i18n:animator.property.create_prop" \n                value="add" \n            ></ui-icon>\n        </ui-button>\n    </div>\n</div>\n',exports.props=["menu","lock","selectNode","nodePath"],exports.data=data,exports.watch={async updateFlag(){await this.refresh()}},exports.components={},exports.methods={t:t=>Editor.I18n.t(`animator.property.${t}`),createMenu(t){const e=this;let o=[];if(t.key){const n=t.menuName?t.menuName:t.displayName;return o.push({label:n,enabled:!t.disable,click(){e.createProp(t.key)}}),o}for(const n of Object.keys(t)){const r=t[n];r.key?o=o.concat(e.createMenu(r)):o.push({label:n,submenu:e.createMenu(r)})}return o},async createProp(t){let e=!1;const o=this;if(o.selectedIds&&o.selectedIds.size>1){let t=Array.from(o.selectedIds);if((t=t.filter(t=>animation_ctrl_1.animationCtrl.nodesDump.uuid2path[t])).length>1){const t=await Editor.Dialog.info(Editor.I18n.t("animator.is_add_prop_multi.title"),{buttons:[Editor.I18n.t("animator.is_add_prop_multi.add_to_current"),Editor.I18n.t("animator.is_add_prop_multi.add_to_all")],default:0,cancel:-1});if(-1===t.response)return;e=!!t.response}}animation_ctrl_1.animationCtrl.createProp({prop:t},e)},showPropMenu(t){if(!(this.lock||this.nodePath&&!this.selectNode))return this.menu&&this.selectNode?void Editor.Menu.popup({x:t.pageX,y:t.pageY,menu:this.menu}):(animation_editor_1.animationEditor.showToast("i18n:animator.property.should_select_node_first"),void console.warn("[Animation Editor]"+Editor.I18n.t("animator.property.should_select_node_first")));animation_editor_1.animationEditor.showToast("i18n:animator.property.create_prop_tips")}};
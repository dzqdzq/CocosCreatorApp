"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.components=exports.computed=exports.watch=exports.data=exports.props=exports.template=void 0;const animation_ctrl_1=require("../../share/animation-ctrl"),animation_editor_1=require("../../share/animation-editor"),pop_menu_1=require("../../share/pop-menu"),utils_1=require("../../utils");function data(){return{}}function mounted(){}exports.template='\n<div class="events" :style="\'transform: translateX(\' + offset + \'px)\'">\n    <template\n        v-if="events"\n        v-for="(info, index) in events"\n    >\n        <ui-icon value="key-empty"\n            :style="queryKeyStyle(info.x)"\n            :index="index"\n            name="event"\n            @mousedown="onMouseDown($event, info)"\n            @click.right="onPopMenu($event, info.frame)"\n            @dblclick="openEventEditor(info.frame)"\n        ></ui-icon>\n    </template>\n    <template\n        v-if="selectEvent"\n        v-for="(info, index) in selectEvent"\n    >\n        <ui-icon value="key" class="preview"\n            name="event"\n            :style="queryKeyStyle(info.x)"\n        ></ui-icon>\n    </template>\n</div>\n',exports.props=["events","offset","selectInfo"],exports.data=data,exports.watch={},exports.computed={selectEvent(){return this.selectInfo?this.selectInfo.data:null}},exports.components={},exports.methods={t:(e,t="event.")=>Editor.I18n.t(`animator.${t}${e}`),display:e=>e>=0,onPopMenu(e,t){const n=this,o=(0,pop_menu_1.getPopMenuMap)(pop_menu_1.onEventMenus,!0);o.editEventKey.click=(()=>{n.openEventEditor(t)}),o.copyEventKey.click=(()=>{animation_ctrl_1.animationCtrl.copyEvents(n.selectEvent?n.selectEvent.map(e=>e.frame):[t])}),o.pasteEventKey.enabled=!!animation_ctrl_1.animationCtrl.copyEventInfo,o.pasteEventKey.click=(()=>{animation_ctrl_1.animationCtrl.pasteEvent(t)}),o.removeEventKey.click=(()=>{animation_ctrl_1.animationCtrl.deleteEvent(n.selectEvent?n.selectEvent.map(e=>e.frame):[t])}),Editor.Menu.popup({menu:Object.values(o)})},onMouseDown(e,t){const n=this;if(e.stopPropagation(),0!==e.button)return;let o={};const i=JSON.parse(JSON.stringify(t)),a=n.selectInfo&&n.selectInfo.frames.indexOf(t.frame),s=(0,utils_1.checkCtrlOrCommand)(e);s&&n.selectInfo?(o=JSON.parse(JSON.stringify(n.selectInfo)),-1!==a?(o.data.splice(a,1),o.frames.splice(a,1)):(o.data.push(i),o.frames.push(t.frame))):"number"!=typeof a||-1===a?o={startX:e.x,data:[i],offset:0,offsetFrame:0,frames:[t.frame]}:(n.selectInfo.startX=e.x,o=n.selectInfo),animation_editor_1.animationEditor.startDragEvent(o,s)},openEventEditor(e){animation_editor_1.animationEditor.openEventEditor(e)},queryKeyStyle:e=>`transform: translateX(${e-6|0}px);`},exports.mounted=mounted;
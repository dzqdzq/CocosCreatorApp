"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mounted=exports.methods=exports.components=exports.computed=exports.watch=exports.data=exports.props=exports.template=void 0;const path_1=require("path"),animation_ctrl_1=require("../../share/animation-ctrl"),ipc_event_1=require("../../share/ipc-event");exports.template='\n<section class="mask tips-mask"\n    @confirm="onConfirm"\n>\n    <div v-if="!root" class="tips clip">\n        <ui-label class="message" value="i18n:animator.mask.need_select_node"></ui-label>\n    </div>\n    <div v-else-if="root && active === false" class="tips comp">\n        <ui-label value="i18n:animator.mask.node_active_false"></ui-label>\n    </div>\n    <ui-drag-area v-else droppable="cc.AnimationClip" @drop="onDrop">\n        <div v-if="currentState === \'enterAniMode\'" class="tips animationMode">\n            <ui-button name="enter_animation_mode">\n                <ui-label value="i18n:animator.mask.enter_animation_mode"></ui-label>\n            </ui-button>\n        </div>\n        <div v-if="currentState === \'needAniComponent\'" class="tips comp">\n            <ui-label class="message" value="i18n:animator.mask.need_animation_component"></ui-label>\n            <div class="mb15">\n                <ui-button name="add_animation_component">\n                    <ui-label value="i18n:animator.mask.add_animation_component"></ui-label>\n                </ui-button>\n            </div>\n        </div>\n        <div v-if="currentState === \'needAniClip\'" class="tips clip">\n            <ui-label value="i18n:animator.mask.need_animation_clip"></ui-label>\n            <ui-link @click="onConfirm">\n                <ui-label name="add_animation_clip" value="i18n:animator.mask.add_animation_clip"></ui-label>\n            </ui-link>\n            <span> | </span>\n            <ui-link @click="onConfirm">\n                <ui-label name="select_animation_clip" value="i18n:animator.tips.select_animation_clip"></ui-label>\n            </ui-link>\n        </div>\n        <div>\n            (<ui-label value="i18n:animator.mask.create_from_clip"></ui-label>)\n        </div>\n    </ui-drag-area>\n</section>\n';const ASSET_DB="db://assets",ASSET_Dir=(0,path_1.join)(Editor.Project.path,"assets");function data(){return{}}function mounted(){}exports.props=["root","hasComp","hasClip","animationMode","compIndex","active"],exports.data=data,exports.watch={},exports.computed={currentState(){const{active:n,root:a,hasClip:i,hasComp:t,animationMode:e}=this;return a?!1===n?"needActiveNode":t?i?"enterAniMode":"needAniClip":"needAniComponent":"needSelectNode"}},exports.components={},exports.methods={t:n=>Editor.I18n.t(`animator.mask.${n}`),async onConfirm(n){switch(n.target.getAttribute("name")){case"enter_animation_mode":animation_ctrl_1.animationCtrl.enter();break;case"add_animation_component":animation_ctrl_1.animationCtrl.addAnimationComponent();break;case"add_animation_clip":await animation_ctrl_1.animationCtrl.createAniClip();break;case"select_animation_clip":Editor.Panel._kitControl.open({$kit:n.target,name:"ui-kit.searcher",value:"",droppable:"cc.AnimationClip",type:"asset",timestamp:Date.now(),events:{confirm:async n=>{await animation_ctrl_1.animationCtrl.addClipFromAsset(n)?await(0,ipc_event_1.IsetEditClip)(n)&&await animation_ctrl_1.animationCtrl.enter():console.debug(`addClipFromAsset ${n} falied!`)}}})}},async onDrop(n){const a=Editor.UI.DragArea.currentDragInfo;if("cc.AnimationClip"!==a.type)return;const i=a.value;"needAniComponent"===this.currentState?await animation_ctrl_1.animationCtrl.createAniCompFromAsset(i):"needAniClip"===this.currentState?await animation_ctrl_1.animationCtrl.setDefautClip(i):await animation_ctrl_1.animationCtrl.addClipFromAsset(i),await(0,ipc_event_1.IsetEditClip)(i)&&await animation_ctrl_1.animationCtrl.enter()}},exports.mounted=mounted;
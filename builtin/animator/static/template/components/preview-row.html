<div :class="previewClass"
    v-if="display"
    :style="previewStyle"
    @mouseup="onPopMenu"
    @dragover="onDragOver"
    @drop="onDrop"
    @dragleave="onDragLeave"
>
    <div class="row-wrap"
        :style="{transform: 'translateX('+ offset +'px)'}"
    >
        <div class="stick"
            v-if="type && selectKey && selectKey.length > 0 && stickInfo"
            :style="stickStyle"
            name="stick"
            @mousedown.stop="onStickMouseDown"
        ></div>
        <!-- 节点预览显示的关键帧线条 -->
        <template v-if="keyData && !type && !draggable">
            <div
                class="line"
                v-for="(item, i) in keyData"
                v-if="keyData[i + 1]"
                :style="queryLineStyle(item, keyData[i + 1])"
                :index="i"
                :frame="item.frame"
            ></div>
        </template>

        <!-- 属性轨道显示的关键帧线条 -->
        <template v-if="keyData && type && !draggable">
            <div
                class="line"
                v-for="(item, i) in keyData"
                v-if="keyData[i + 1]"
                :style="queryLineStyle(item, keyData[i + 1])"
                :title="t('line_tips')"
                @dblclick="openBezierEditor(item)"
            ></div>
        </template>

        <!-- 选中关键帧后的中间线条 -->
        <!-- <template v-if="selectKey && selectKey.length > 1 && !draggable && keyType !== 'image'">
            <div
                class="line active"
                v-for="(item, i) in selectKey"
                v-if="selectKey[i + 1]"
                :style="queryLineStyle(item, selectKey[i + 1])"
                :index="i"
                @mousedown.stop="onMouseDown($event, item.rawIndex, true)"
            ></div>
        </template> -->

        <!-- 关键帧显示 -->
        <template
            v-if="keyData"
        >
            <div
                :class="keyType"
                name="key"
                v-for="(item, index) in keyData"
                :style="queryKeyStyle(item.x)"
                :index="index"
                :frame="item.frame"
                @mousedown.stop="onMouseDown($event, index)"
            >    
                <template
                    v-if="type && keyType === 'image'"
                >
                    <ui-image class="sprite-key"
                        max-height
                        :value="item.dump.value && item.dump.value.uuid || ''"
                    ></ui-image>
                </template>
                <template 
                    v-else
                >
                    <div  class="dot"></div>
                </template>
            </div>
        </template>
    
        <!-- 选中的关键数据显示 -->
        <template v-if="selectKey">
            <div 
                v-for="item in selectKey"
                :class="calcSelectClass(keyType === 'image')" 
                name="key"
                :style="queryKeyStyle(item.x)"
            >
                <template
                    v-if="type && keyType === 'image'"
                >
                    <ui-image class="sprite-key"
                        max-height
                        :value="item.dump.value && item.dump.value.uuid || ''"
                    ></ui-image>
                </template>
                <template 
                    v-else
                >
                    <div class="dot"></div>
                </template>
            </div>
        </template>
    </div>
    <div class="tips" v-if="draggable">{{tips}}</div>
</div>

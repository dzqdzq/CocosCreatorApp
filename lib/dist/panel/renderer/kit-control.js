"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const EventEmitter=require("events").EventEmitter,ipc=require("@base/electron-base-ipc");let optionsCache=null,$kit=null;class KitControl extends EventEmitter{getOptionsCache(){return new Promise((e,t)=>{ipc.send("editor-lib-panel-kit:call","getOptionsCache").callback((i,n={})=>{if(i)return t(i);optionsCache=i,e(n)})})}async open(e){if(!e)return;const t=($kit=e.$kit).getBoundingClientRect(),i={x:t.x,y:t.y+t.height,screen:{x:screen.availLeft,y:screen.availTop,width:screen.availWidth,height:screen.availHeight},timestamp:Date.now()};optionsCache=Object.assign(i,e),await this.registerEvent(optionsCache),delete optionsCache.$kit,ipc.send("editor-lib-panel-kit:call","open",JSON.parse(JSON.stringify(optionsCache)))}move(e,t){return ipc.send("editor-lib-panel-kit:call","move",e,t)}hide(){return optionsCache=null,ipc.send("editor-lib-panel-kit:call","hide")}hold(){return optionsCache=null,ipc.send("editor-lib-panel-kit:call","hold")}register(e){return ipc.send("editor-lib-panel-kit:call","register",e)}async registerEvent(e){"object"==typeof e.events&&Object.keys(e.events).forEach(t=>{this._on(t,e.timestamp,e.events[t])})}_emit(...e){super.emit(...e)}emit(e,t,...i){ipc.send("editor-lib-panel-kit:call","emit",e,t,...i)}_on(e,t,i){super.on(e,(e,...n)=>{t===e&&i(...n)})}_hide(){this.removeAllListeners()}}module.exports=new KitControl,exports.default=module.exports,ipc.on("editor-lib-panel-kit:emit",(e,...t)=>{module.exports._emit(...t)}),ipc.on("editor-lib-panel-kit:hide",(e,...t)=>{module.exports._hide(...t)});
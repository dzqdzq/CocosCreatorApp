"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const{httpsRequest:httpsRequest}=require("https"),metrics_observer_base_1=require("./metrics-observer-base"),DebugView=!0,MeasurementId="G-GLCT09215F",ApiSecret="yvX39pMYRg2b_bFYdAaRSA",Path=`/mp/collect?measurement_id=G-GLCT09215F&api_secret=${ApiSecret}`;let stopTracking=!1;const headers={"Content-Type":"application/json","User-Agent":void 0},sendOptions={method:"POST",host:"www.google-analytics.com",path:Path,headers:headers};function sendData(e){stopTracking||httpsRequest(sendOptions,s=>204===s.statusCode?(console.debug(`Invalid Event ${e.events}`),void s.resume()):200<=s.statusCode&&s.statusCode<300?void 0:(console.debug(`Request Failed. Status Code: ${s.statusCode}`),stopTracking=!0,void s.resume())).on("error",e=>{console.debug("Metrics error"),console.debug(e)}).end(JSON.stringify(e))}class GoogleMetricsObserver extends metrics_observer_base_1.MetricsObserverBase{trackEvent(e,s){e.sendToCocosAnalyticsOnly}trackException(e,s){}sendAppInfo(e){headers["User-Agent"]=Editor.App.userAgent,sendData({client_id:e.cid,user_id:e.uid,events:[{name:"pageview",params:{debug_mode:DebugView||void 0}}],user_properties:{app_version:{value:Editor.App.version},operating_system:{value:{darwin:"Macintosh",win32:"Windows",linux:"Linux"}[process.platform]||process.platform}}})}}module.exports=new GoogleMetricsObserver;
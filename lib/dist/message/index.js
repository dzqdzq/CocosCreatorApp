"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Message=void 0;const events_1=require("events"),eventManager=new events_1.EventEmitter;let Handler=null;Handler="browser"===process.type?require("./browser/index"):require("./renderer/index"),exports.Message={request(e,r,...a){const n={name:e,message:r,args:a};return eventManager.emit("request",n),new Promise((s,t)=>{Handler.request&&Handler.request(e,r,...a).then(e=>{eventManager.emit("reply",n),s(e)}).catch(e=>{eventManager.emit("reply",n),t(e)})})},send(e,r,...a){eventManager.emit("send",{name:e,message:r,args:a}),Handler.send&&Handler.send(e,r,...a)},broadcast:(e,...r)=>(eventManager.emit("broadcast",{message:e,args:r}),Handler.broadcast&&Handler.broadcast(e,...r)),addBroadcastListener:(e,r)=>Handler.addBroadcastListener&&Handler.addBroadcastListener(e,r),removeBroadcastListener:(e,r)=>Handler.removeBroadcastListener&&Handler.removeBroadcastListener(e,r),__register__:(e,r)=>Handler.register&&Handler.register(e,r),__unregister__:e=>Handler.unregister&&Handler.unregister(e),__eb__:eventManager};
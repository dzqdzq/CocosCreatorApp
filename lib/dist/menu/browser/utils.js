"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeOption=exports.translationOption=exports.translationPath=void 0;const index_1=require("../../i18n/browser/index"),menu_template_1=require("./menu-template");function translationPath(e){return e.split("/").map(e=>{if(!e.startsWith("i18n:"))return e;let t=e.substr(5);return index_1.t(t)||t}).join("/")}function translationOption(e,t,a){t=t||{};const r={};return r.__path__=a&&a.__path__?`${a.__path__}/${e.label}`:e.label,e.__template__&&(r.__template__=e.__template__),"label"in e&&void 0!==e.label&&(r.label=translationPath(e.label)),"type"in e&&void 0!==e.type&&(r.type=e.type),"subLabel"in e&&void 0!==e.subLabel&&(r.subLabel=translationPath(e.subLabel)),"checked"in e&&void 0!==e.checked&&(r.checked=e.checked),"enabled"in e&&void 0!==e.enabled&&(r.enabled=e.enabled),"icon"in e&&void 0!==e.icon&&(r.icon=e.icon),"order"in e&&void 0!==e.order&&(r.level=e.order),"group"in e&&void 0!==e.group&&(r.group=e.group),"accelerator"in e&&void 0!==e.accelerator&&(r.accelerator=e.accelerator),"submenu"in e&&Array.isArray(e.submenu)&&(r.submenu=[],e.submenu.forEach(a=>{if(a.template){const e=menu_template_1.query(a.template);e&&e.forEach(e=>{const n=mergeOption(a,e);n.__template__=a.template,r.submenu.push(translationOption(n,t,r))})}else a.__template__=e.__template__,r.submenu.push(translationOption(a,t,r))})),"role"in e&&void 0!==e.role?r.role=e.role:r.click=async function(){return(!t||!t.click||!1!==await t.click(e,r))&&((!e.click||!1!==await e.click(e))&&(e.target&&e.message&&Editor.Message.send(e.target,e.message,...e.params||[]),!1))},r}function mergeOption(e,t){return{checked:e.checked||t.checked,enabled:e.enabled||t.enabled,order:e.order||t.order,group:e.group||t.group,label:t.label,icon:t.icon,role:t.role,subLabel:t.subLabel,type:t.type,submenu:t.submenu,accelerator:t.accelerator,message:t.message,target:t.target,params:t.params,click:t.click}}exports.translationPath=translationPath,exports.translationOption=translationOption,exports.mergeOption=mergeOption;
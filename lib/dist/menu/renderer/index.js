"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.popup=void 0;const ipc=require("@base/electron-base-ipc");let find=function(e,t){for(let n=0;n<e.length;n++){let s=e[n];if(s.label===t)return s}return null};function popup(e){void 0!==e.y&&"darwin"===process.platform&&(e.y+=26),ipc.send("editor-lib-menu:popup",JSON.parse(JSON.stringify(e))).callback((t,n,s)=>{if(t)console.warn(t);else if(s.__template__){const t=async function(e){return e.template===s.__template__?!(!e.click||!1!==await e.click(s))||(s.target?(Editor.Message.send(s.target,s.message,...s.params||[]),!0):console.warn("The message cannot be sent, 'target' does not exist.")):e.submenu&&e.submenu.some(t)};e.menu.some(t)}else{let t=n.split("/"),s={label:"",submenu:e.menu};t.forEach(e=>{if(!s||!s.submenu)return null;s=find(s.submenu,e)}),s.click&&s.click()}})}exports.popup=popup;
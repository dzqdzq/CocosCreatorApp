"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendGetRequest=exports.sendPostRequest=void 0;const{parse:parse}=require("url"),{stringify:stringify}=require("querystring"),{request:httpsRequest}=require("https");function sendPostRequest(e,t){return new Promise((r,s)=>{let o=parse(e),n={"Content-Type":"application/x-www-form-urlencoded","Content-Length":(t=stringify(t||{})).length,"User-Agent":Editor.App.userAgent},u={method:"POST",host:o.hostname,port:o.port||443,path:o.pathname,headers:n,ciphers:"ALL",secureProtocol:"TLSv1_method"},a="",i=httpsRequest(u,e=>{200===e.statusCode?e.on("data",e=>{a+=e}).on("end",()=>{var e=null;try{e=JSON.parse(a)}catch(e){return void s(e)}r(e)}):s(new Error("Connect Failed"))}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))});i.write(t),i.end()})}function sendGetRequest(e,t){return new Promise((r,s)=>{var o=parse(e);t=stringify(t||{});var n={"User-Agent":Editor.App.userAgent},u={method:"GET",host:o.hostname,port:o.port||443,path:o.pathname+"?"+t,headers:n,ciphers:"ALL",secureProtocol:"TLSv1_method"},a="";httpsRequest(u,e=>{200===e.statusCode?e.on("data",e=>{a+=e}).on("end",()=>{var e=null;try{e=JSON.parse(a)}catch(e){return s(e)}r(e)}):s(new Error("Connect Failed"))}).on("error",e=>{s(e)}).setTimeout(8e3,()=>{s(new Error("timeout"))}).end()})}exports.sendPostRequest=sendPostRequest,exports.sendGetRequest=sendGetRequest;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeListener=exports.on=exports.disable=exports.enable=exports.unregister=exports.register=exports.getPackages=void 0;const events_1=require("events"),ipc=require("@base/electron-base-ipc"),packageManager=require("@editor/package"),eventEmitter=new events_1.EventEmitter;function getPackages(e){const r=ipc.sendSync("editor3d-lib-package:call","getPackages",e);return JSON.parse(r)}function register(e){return new Promise((r,t)=>{ipc.send("editor3d-lib-package:call","register",e).callback((e,n)=>{if(e)return t(e);r(n)})})}function unregister(e){return new Promise((r,t)=>{ipc.send("editor3d-lib-package:call","unregister",e).callback((e,n)=>{if(e)return t(e);r(n)})})}function enable(e){return new Promise((r,t)=>{ipc.send("editor3d-lib-package:call","enable",e).callback((e,n)=>{if(e)return t(e);r(n)})})}function disable(e,r){return new Promise((t,n)=>{ipc.send("editor3d-lib-package:call","disable",e,r).callback((e,r)=>{if(e)return n(e);t(r)})})}function on(e,r){return eventEmitter.on(e,r)}function removeListener(e,r){return eventEmitter.removeListener(e,r)}exports.getPackages=getPackages,exports.register=register,exports.unregister=unregister,exports.enable=enable,exports.disable=disable,exports.on=on,exports.removeListener=removeListener,ipc.on("editor3d-lib-package:emit",(e,r,...t)=>{eventEmitter.emit(r,...t)}),packageManager.on("register",e=>{eventEmitter.emit("register",e)}),packageManager.on("unregister",e=>{eventEmitter.emit("unregister",e)}),packageManager.on("enable",e=>{eventEmitter.emit("enable",e)}),packageManager.on("disable",e=>{eventEmitter.emit("disable",e)});
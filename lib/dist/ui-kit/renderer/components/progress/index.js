"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Progress=void 0;const fs=require("fs"),path=require("path"),base_1=require("../base"),STYLE=`<style>${fs.readFileSync(path.join(__dirname,"./progress.css"),"utf8")}</style>`,CUSTOM_STYLE='<style id="custom-style"></style>',HTML=`${fs.readFileSync(path.join(__dirname,"./progress.html"),"utf8")}`,instanceArray=[];let customStyle="";class Progress extends base_1.Base{constructor(){super(),this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this.$label=this.shadowRoot.querySelector(".label"),this.$bar=this.shadowRoot.querySelector(".bar"),this.$message=this.shadowRoot.querySelector(".message"))}static importStyle(e){fs.existsSync(e)&&(customStyle=fs.readFileSync(e,"utf8"),instanceArray.map(e=>{e.shadowRoot.querySelector("#custom-style").innerHTML=customStyle}))}get value(){return Number(this.getAttribute("value"))}set value(e){e||0===e?((e=Number(e))<0&&(e=0),e>100&&(e=100),this.setAttribute("value",String(e))):this.removeAttribute("value")}get message(){return this.getAttribute("message")}set message(e){this.setAttribute("message",e||"")}connectedCallback(){if(super.connectedCallback(),instanceArray.push(this),this.shadowRoot){const e=this.shadowRoot.querySelector("#custom-style");e&&(e.innerHTML=customStyle)}}disconnectedCallback(){super.disconnectedCallback();const e=instanceArray.indexOf(this);instanceArray.splice(e,1)}static get observedAttributes(){return["value","message","path"]}attributeChangedCallback(e,t,s){switch(super.attributeChangedCallback(e,t,s),e){case"value":if(s=parseFloat(s),isNaN(s)&&(s=0),s<0&&(s=0),s>100&&(s=100),this.$bar.style.width=s+"%",!this.message)return;this.$label.innerHTML=s+"%";break;case"message":this.$message.innerHTML=s,this.$message.tooltip=s,this.$label.innerHTML=""}}}exports.Progress=Progress;
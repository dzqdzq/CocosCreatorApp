"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Checkbox=void 0;const fs=require("fs"),path=require("path"),base_1=require("../base"),STYLE=`<style>${fs.readFileSync(path.join(__dirname,"./checkbox.css"),"utf8")}</style>`,CUSTOM_STYLE='<style id="custom-style"></style>',HTML=`${fs.readFileSync(path.join(__dirname,"./checkbox.html"),"utf8")}`,instanceArray=[];let customStyle="";class Checkbox extends base_1.Base{static importStyle(e){fs.existsSync(e)&&(customStyle=fs.readFileSync(e,"utf8"),instanceArray.map(e=>{e.shadowRoot.querySelector("#custom-style").innerHTML=customStyle}))}static get observedAttributes(){return["disabled","readonly","invalid","path","value","checked"]}attributeChangedCallback(e,t,s){switch(super.attributeChangedCallback(e,t,s),e){case"disabled":case"readonly":case"invalid":break;case"value":s&&"false"!==s?this.setAttribute("checked",s):this.removeAttribute("checked")}}get value(){return this.checked}set value(e){this.checked=e}get checked(){return null!==this.getAttribute("checked")}set checked(e){e?this.setAttribute("checked",""):this.removeAttribute("checked")}constructor(){super(),this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this.addEventListener("click",this._onClick),this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp))}connectedCallback(){if(super.connectedCallback(),instanceArray.push(this),!this.shadowRoot)return;const e=this.shadowRoot.querySelector("#custom-style");e&&(e.innerHTML=customStyle)}disconnectedCallback(){super.disconnectedCallback();const e=instanceArray.indexOf(this);instanceArray.splice(e,1)}_onClick(){this.disabled||this.readonly||(this.invalid&&(this.invalid=!1),this.value=!this.value,this.dispatch("change"),this.dispatch("confirm"))}_onKeyDown(){this.disabled||this.readonly||this.setAttribute("pressed","")}_onKeyUp(e){if(!this.disabled&&!this.readonly)switch(this.removeAttribute("pressed"),e.keyCode){case 32:case 13:this.checked=!this.checked,this.dispatch("change"),this.dispatch("confirm")}}}exports.Checkbox=Checkbox;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Icon=void 0;const fs_extra_1=require("fs-extra"),path_1=require("path"),base_1=require("../base"),CUSTOM_STYLE='<style id="custom-style"></style>',STYLE=`<style>${fs_extra_1.readFileSync(path_1.join(__dirname,"./icon.css"),"utf8")}</style>`,HTML=`${fs_extra_1.readFileSync(path_1.join(__dirname,"./icon.html"),"utf8")}`,$style=document.createElement("style");$style.innerHTML=`\n@font-face {\n    font-family: "editor-icon";\n    src: url('${path_1.join(__dirname,"iconfont.woff").replace(/\\/g,"/")}') format('woff');\n}\n`,document.head.appendChild($style);const iconGroups=fs_extra_1.readJSONSync(path_1.join(__dirname,"./icon-map.json"));let allIconsMap={};if(iconGroups)for(const t in iconGroups)Object.assign(allIconsMap,iconGroups[t]);const instanceArray=[];class Icon extends base_1.Base{constructor(){super(),this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this.$span=this.shadowRoot.querySelector("span"))}static importStyle(t){if(!fs_extra_1.existsSync(t))return!1;const e=fs_extra_1.readFileSync(t,"utf8");instanceArray.map(t=>{t.shadowRoot.querySelector("#custom-style").innerHTML=e})}static get Map(){return iconGroups}connectedCallback(){super.connectedCallback(),this.color=this.getAttribute("color")}disconnectedCallback(){super.disconnectedCallback()}get value(){return this.getAttribute("value")||""}set value(t){t+="",this.setAttribute("value",t)}get color(){return this.getAttribute("color")}set color(t){t?this.setAttribute("color",t):this.removeAttribute("color")}static get observedAttributes(){return["value","color"]}attributeChangedCallback(t,e,s){switch(t){case"value":const e=this.getAttribute("default")||"",o=allIconsMap[s]?allIconsMap[s]:allIconsMap[e];this.$span.className=`icon-${o}`;break;case"color":"normal"===s?(this.$span.setAttribute("normal",!0),this.$span.removeAttribute("color")):(this.$span.setAttribute("color",!!s),this.$span.removeAttribute("normal"))}}}exports.Icon=Icon;
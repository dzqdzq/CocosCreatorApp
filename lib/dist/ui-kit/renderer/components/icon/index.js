"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Icon=void 0;const fs=require("fs"),path=require("path"),base_1=require("../base"),CUSTOM_STYLE='<style id="custom-style"></style>',STYLE=`<style>${fs.readFileSync(path.join(__dirname,"./icon.css"),"utf8")}</style>`,HTML=`${fs.readFileSync(path.join(__dirname,"./icon.html"),"utf8")}`,$style=document.createElement("style");$style.innerHTML=`\n@font-face {\n    font-family: "editor-icon";\n    src: url('${path.join(__dirname,"iconfont.woff").replace(/\\/g,"/")}') format('woff');\n}\n`;let _iconList=[];const iconfontString=fs.readFileSync(path.join(__dirname,"./icon-font.css"),"utf-8"),arr=iconfontString.match(/.icon-([^:]*):[.]*/g);Array.isArray(arr)&&(_iconList=arr.map(t=>{const e=t.match(/.icon-([^:]*):[.]*/);return e&&e[1]}).sort((t,e)=>t.localeCompare(e))),document.head.appendChild($style);const instanceArray=[];class Icon extends base_1.Base{constructor(){super(),this._iconName="",this.shadowRoot&&(this.shadowRoot.innerHTML=`${STYLE}${CUSTOM_STYLE}${HTML}`,this._iconName="default",this.$span=this.shadowRoot.querySelector("span"))}static importStyle(t){if(!fs.existsSync(t))return!1;const e=fs.readFileSync(t,"utf8");instanceArray.map(t=>{t.shadowRoot.querySelector("#custom-style").innerHTML=e})}static get iconList(){return _iconList}connectedCallback(){super.connectedCallback(),this.color=this.getAttribute("color")}disconnectedCallback(){super.disconnectedCallback()}get value(){return this.getAttribute("value")||""}set value(t){t+="",this.setAttribute("value",t)}get color(){return this.getAttribute("color")}set color(t){t?this.setAttribute("color",t):this.removeAttribute("color")}static get observedAttributes(){return["value","color"]}attributeChangedCallback(t,e,s){switch(t){case"value":s.startsWith("asset-")?this.$span.className=s:this.$span.className=`icon-${s}`;break;case"color":"normal"===s?(this.$span.setAttribute("normal",!0),this.$span.removeAttribute("color")):(this.$span.setAttribute("color",!!s),this.$span.removeAttribute("normal"))}}}exports.Icon=Icon;
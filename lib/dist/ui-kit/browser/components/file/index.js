"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.File=exports.defaultProtocol=void 0;const electron_1=require("electron"),fileUrl_1=require("./fileUrl"),ipc=require("@base/electron-base-ipc");ipc.on("editor-lib-ui-kit:select-file",(e,l)=>{l=l||{};const r=electron_1.BrowserWindow.fromWebContents(e.sender),t={defaultPath:l.defaultPath||"",properties:["openFile"],buttonLabel:l.buttonLabel||""};"directory"===l.type?t.properties=["openDirectory"]:"app"===l.type&&(t.filters=[{name:"Application",extensions:["win32"===process.platform?"exe":"app"]}]),l.multi&&t.properties.push("multiSelections"),l.extensions&&(t.filters=[{name:l.extensions,extensions:l.extensions.split(",").filter(Boolean)}]),electron_1.dialog.showOpenDialog(r,t).then(r=>{if(!r.filePaths)return e.reply(null,void 0);l.multi?e.reply(null,r.filePaths):e.reply(null,r.filePaths[0])})}),exports.defaultProtocol={label:"file://",path:"",protocol:"file",description:"",invalidInfo:""};class File{static registerProtocol(e,l){if("file"!==e)return l.label=e+"://",fileUrl_1.fileUrlManager.register(e,l);Object.assign(exports.defaultProtocol,l)}static unregisterProtocol(e){return fileUrl_1.fileUrlManager.unregister(e)}static resolveToRaw(e){return fileUrl_1.fileUrlManager.resolveToRaw(e)}static resolveToUrl(e,l){return fileUrl_1.fileUrlManager.resolveToUrl(e,l)}static getAllProtocolInfos(){return[exports.defaultProtocol,...fileUrl_1.fileUrlManager.getAllFileProtocol()]}}exports.File=File;
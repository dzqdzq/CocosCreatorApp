"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ps=require("path"),fse=require("fs-extra"),path_1=require("../../utils/source/path"),ipc=require("@base/electron-base-ipc"),setting=require("@editor/setting"),EventEmitter=require("events").EventEmitter;class ProjectManager extends EventEmitter{constructor(){if(super(),this._path=null,this._type=null,!setting.PATH.PROJECT)return;const e=ps.join(setting.PATH.PROJECT,"package.json");if(!fse.existsSync(e))return;const t=fse.readJSONSync(e);-1!==["2d","3d"].indexOf(t.type)&&(this._path=path_1.normalize(setting.PATH.PROJECT),this._type=t.type,this._uuid=t.uuid)}get path(){return this._path}get uuid(){return this._uuid}get tmpDir(){if(!this._path)return null;const e=ps.join(this._path,"temp");return fse.ensureDirSync(e),e}get type(){return this._type}create(e,t){ipc.send("editor3d-lib-project:call","create",e,t,name)}open(e){ipc.send("editor3d-lib-project:call","open",e)}add(e){ipc.send("editor3d-lib-project:call","add",e)}}module.exports=new ProjectManager,ipc.on("editor3d-lib-project:update",e=>{module.exports.emit("update")});
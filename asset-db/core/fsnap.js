"use strict";const e=require("fast-glob"),t=require("fs"),s=(require("path"),require("path-plus")),r={onlyFiles:!1,absolute:!0};let l={};const c="win32"===process.platform;l.create=function(s,l={}){s=function(e){return c?Array.isArray(e)?e.map(e=>e.replace(/\\/g,"/")):e.replace(/\\/g,"/"):e}(s);let n=e.sync(s,r),o=new Map;for(let e=0;e<n.length;e++){let s,r=n[e];c&&(r=r.replace(/\//g,"\\"));try{s=t.statSync(r)}catch(e){return}o.set(r,s)}return o},l.diff=function(e,t){let s={deletes:[],creates:[],changes:[]},r=e.entries();for(const[e,l]of r){const r=t.get(e);void 0===r?s.deletes.push(e):l.isDirectory()!==r.isDirectory()?(s.deletes.push(e),s.creates.push(e)):l.isFile()&&l.mtime.getTime()!==r.mtime.getTime()&&s.changes.push(e)}r=t.entries();for(const[t,l]of r){void 0===e.get(t)&&s.creates.push(t)}return s},l.simplify=function(e){e.deletes.sort((e,t)=>e.localeCompare(t));for(let t=0;t<e.deletes.length-1;++t){let r=e.deletes[t];for(let l=t+1;l<e.deletes.length;++l){let t=e.deletes[l];s.contains(r,t)&&(e.deletes.splice(l,1),--l)}}e.changes.sort((e,t)=>e.localeCompare(t));for(let t=0;t<e.changes.length-1;++t){let r=e.changes[t];for(let l=t+1;l<e.changes.length;++l){let t=e.changes[l];s.contains(r,t)&&(e.changes.splice(l,1),--l)}}e.creates.sort((e,t)=>e.localeCompare(t));for(let t=0;t<e.creates.length-1;++t){let r=e.creates[t];for(let l=t+1;l<e.creates.length;++l){let t=e.creates[l];s.contains(r,t)&&(e.creates.splice(l,1),--l)}}return e},module.exports=l;